ARM GAS  1.s 			page 1


   1              		@@单片机stm32f030f4p6
   2              		@@ 驻波表
   3              		@作者：yjmwxwx
   4              		@时间：2020-01-01
   5              		@编译器：ARM-NONE-EABI
   6              		 .thumb
   7              		         .syntax unified
   8              		.section .data
   9              		.align 4
  10              	shumaguanmabiao:
  11 0000 FC000000 		.int 0xfc,0x60,0xda,0xf2,0x66,0xb6,0xbe,0xe0,0xfe,0xf6
  11      60000000 
  11      DA000000 
  11      F2000000 
  11      66000000 
  12              	shumaguanshuaxinbiao:
  13 0028 00FE0000 		.int 0xfe00,0xfd00,0xfb00,0xf700,0xef00,0xdf00,0xbf00,0x7f00,0
  13      00FD0000 
  13      00FB0000 
  13      00F70000 
  13      00EF0000 
  14              	xuanzhuanyinzi:
  15 004c 00800000 		.int 0x8000,0x0000,0x5ED7,0xFFFFAA0B,0x0C8B,0xFFFF809E,0xFFFFB3C1,0xFFFF9931,0xFFFF8276,0xFFFFE708
  15      00000000 
  15      D75E0000 
  15      0BAAFFFF 
  15      8B0C0000 
  16              	yjmwxwx:
  17              		.equ STACKINIT,        	        0x20001000
  18              		.equ shumaguanma,		0x20000000
  19              		.equ fuhao,			0x20000010
  20              		.equ dmawan,			0x200000f4
  21              		.equ jishu2,			0x200000f8
  22              		.equ jishu,			0x200000fc
  23              		.equ shibu,			0x20000120
  24              		.equ xubu,			0x20000128
  25              		.equ shibuhuanchong,		0x20000140
  26              		.equ lvboqizhizhen,		0x20000a00
  27              		.equ lvboqihuanchong,		0x20000a04
  28              		.equ dianyabiaozhizhen,		0x200001f8
  29              		.equ dianyabiaoman,		0x200001fc
  30              		.equ dianyabiao,		0x20000200
  31              		.section .text
  32              	vectors:
  33 0000 00100020 		.word STACKINIT
  34 0004 B1000000 		.word _start + 1
  35 0008 31050000 		.word _nmi_handler + 1
  36 000c 33050000 		.word _hard_fault  + 1
  37 0010 00000000 		.word 0
  38 0014 00000000 		.word 0
  39 0018 00000000 		.word 0
  40 001c 00000000 		.word 0
  41 0020 00000000 		.word 0
  42 0024 00000000 		.word 0
  43 0028 00000000 		.word 0
  44 002c 35050000 		.word _svc_handler +1
  45 0030 00000000 		.word 0
ARM GAS  1.s 			page 2


  46 0034 00000000 		.word 0
  47 0038 37050000 		.word _pendsv_handler +1
  48 003c 4B050000 		.word _systickzhongduan +1               @ 15
  49 0040 39050000 		.word aaa +1           @ _wwdg +1          	@ 0
  50 0044 39050000 		.word aaa +1           @_pvd +1            	@ 1
  51 0048 39050000 		.word aaa +1           @_rtc +1            	@ 2
  52 004c 39050000 		.word aaa +1           @_flash +1          	@ 3
  53 0050 39050000 		.word aaa +1	       @ _rcc + 1          	@ 4
  54 0054 39050000 		.word aaa +1           @_exti0_1  +1      	@ 5
  55 0058 39050000 		.word aaa +1           @ _exti2_3 +1      	@ 6
  56 005c 39050000 		.word aaa +1           @_exti4_15 +1     	@ 7
  57 0060 39050000 		.word aaa +1                         		@ 8
  58 0064 5D050000 		.word __dma_wan  +1  		      		@ 9
  59 0068 39050000 		.word aaa +1	       @_dma1_2_3 +1        	@ 10
  60 006c 39050000 		.word aaa +1	       @ _dma1_4_5 +1	        @ 11
  61 0070 39050000 		.word aaa +1	       @_adc1 +1          	@ 12
  62 0074 39050000 		.word aaa +1           @_tim1_brk_up +1  	@ 13
  63 0078 39050000 		.word aaa +1           @ _tim1_cc +1            @ 14
  64 007c 39050000 		.word aaa +1           @_tim2 +1      	        @ 15
  65 0080 3B050000 		.word _tim3 +1                             	@ 16
  66 0084 39050000 		.word aaa +1                                    @ 17
  67 0088 39050000 		.word aaa +1		                	@ 18
  68 008c 39050000 		.word aaa +1	       @_tim14 +1   	        @ 19
  69 0090 39050000 		.word aaa +1                         		@ 20
  70 0094 39050000 		.word aaa +1           @_tim16 +1      		@ 21
  71 0098 39050000 		.word aaa +1           @_tim17 +1      		@ 22
  72 009c 39050000 		.word aaa +1           @_i2c   +1     		@ 23
  73 00a0 39050000 		.word aaa +1                         		@ 24
  74 00a4 39050000 		.word aaa +1           @_spi   +1    		@ 25
  75 00a8 39050000 		.word aaa +1                         		@ 26
  76 00ac 39050000 		.word aaa +1           @_usart1 +1     		@ 27
  77              		.align 2
  78              	
  79              	_start:
  80              	shizhong:
  81 00b0 744A     	        ldr r2, = 0x40022000   @FLASH访问控制
  82 00b2 3221     	        movs r1, # 0x32
  83 00b4 1160     	        str r1, [r2]           @FLASH缓冲 缓冲开启
  84 00b6 7448     	        ldr r0, = 0x40021000 @ rcc
  85 00b8 7449     		ldr r1, = 0x10001
  86 00ba 0160     	        str r1, [r0]
  87              	denghse:
  88 00bc 0168     	        ldr r1, [r0]
  89 00be 8903     	        lsls r1, r1, # 14
  90 00c0 FCD5     	        bpl denghse
  91              	dengpllguan:
  92 00c2 0168     	        ldr r1, [r0]
  93 00c4 8901     		lsls r1, r1, # 6
  94 00c6 FCD4     		bmi dengpllguan
  95 00c8 7149     		ldr r1, = 0x150002
  96 00ca 0046     		mov r0, r0
  97 00cc 4160     		str r1, [r0, # 0x04]
  98 00ce 0046     		mov r0, r0
  99 00d0 7049     		ldr r1, = 0x1010000
 100 00d2 0046     		mov r0, r0
 101 00d4 0160     		str r1, [r0]
 102              	
ARM GAS  1.s 			page 3


 103              	dengpll:
 104 00d6 0168     	        ldr r1, [r0]
 105 00d8 8901     		lsls r1, # 6
 106 00da FCD5     		bpl dengpll
 107              	
 108 00dc 6E49     		ldr r1, = 100
 109 00de 0163     		str r1, [r0, # 0x30]
 110              	
 111              	neicunqingling:
 112 00e0 6E48     		ldr r0, = 0x20000000
 113 00e2 0021     		movs r1, # 0
 114 00e4 6E4B     		ldr r3, = 0x1000
 115              	neicunqinglingxunhuan:
 116 00e6 043B     		subs r3, # 4
 117 00e8 C150     		str r1, [r0, r3]
 118 00ea FCD1     		bne neicunqinglingxunhuan
 119              		
 120              	_waisheshizhong:			 @ 外设时钟
 121              		@+0x14=RCC_AHBENR
 122              		@ 0=DMA @ 2=SRAM @ 4=FLITF@ 6=CRC @ 17=PA @ 18=PB @ 19=PC @ 20=PD @ 22=PF
 123 00ec 6648     		ldr r0, = 0x40021000
 124 00ee 6D49     		ldr r1, = 0x60001
 125 00f0 4161     		str r1, [r0, # 0x14]
 126              	
 127              		@+0x18外设时钟使能寄存器 (RCC_APB2ENR)
 128              		@0=SYSCFG @5=USART6EN @9=ADC @11=TIM1 @12=SPI1 @14=USART1 @16=TIM15 @17=TIM16 @18=TIM17 @22=DBGMCU
 129 00f2 6D49     		ldr r1, = 0xa00
 130 00f4 8161     		str r1, [r0, # 0x18]
 131              		@+0X1C=RCC_APB1ENR
 132              		@ 1=TIM3 @ 4=TIM6 @ 5=TIM7 @ 8=TIM14 @ 11=WWDG @ 14=SPI @ 17=USRT2 @ 18=USART3 @ 20=USART5 @ 21=I2
 133              		@ 22=I2C2 @ 23=USB @ 28=PWR
 134 00f6 6D4A     		ldr r2, = 0x102
 135 00f8 C261     		str r2, [r0, # 0x1c]
 136              	
 137              	_waishezhongduan:				@外设中断
 138              		@0xE000E100    0-31  写1开，写0没效
 139              		@0XE000E180    0-31 写1关，写0没效
 140              		@0XE000E200    0-31 挂起，写0没效
 141              		@0XE000E280    0-31 清除， 写0没效
 142              	
 143 00fa 6D48     		ldr r0, =  0xe000e100
 144 00fc 6D49     		ldr r1, = 0x200 @0x10200  @ 0x10000
 145 00fe 0160     		str r1, [r0]
 146              	
 147              	
 148              	_adcchushihua:
 149 0100 6D48     	        ldr r0, = 0x40012400  @ adc基地址
 150 0102 6E49     	        ldr r1, = 0x80000000
 151 0104 8160     	        str r1, [r0, # 0x08]  @ ADC 控制寄存器 (ADC_CR)  @adc校准
 152              	_dengadcjiaozhun:
 153 0106 8168     	        ldr r1, [r0, # 0x08]
 154 0108 0900     	        movs r1, r1
 155 010a FCD4     	        bmi _dengadcjiaozhun   @ 等ADC校准
 156              	_kaiadc:
 157 010c 8168     	        ldr r1, [r0, # 0x08]
 158 010e 0122     	        movs r2, # 0x01
 159 0110 1143     	        orrs r1, r1, r2
ARM GAS  1.s 			page 4


 160 0112 8160     	        str r1, [r0, # 0x08]
 161              	_dengdaiadcwending:
 162              	       @ ldr r1, [r0]
 163              	       @ lsls r1, r1, # 31
 164              	        @ bpl _dengdaiadcwending @ 等ADC稳定
 165              	_tongdaoxuanze:
 166 0114 6949     	        ldr r1, = 0x80000000
 167 0116 0161     	        str r1, [r0, # 0x10]
 168 0118 6949     	        ldr r1, = 0x63
 169 011a 8162     	        str r1, [r0, # 0x28]    @ 通道选择寄存器 (ADC_CHSELR)
 170 011c 6949     	        ldr r1, = 0x8c3 @0x2003 @0x8c3
 171 011e C160     	        str r1, [r0, # 0x0c]    @ 配置寄存器 1 (ADC_CFGR1)
 172 0120 0021     	        movs r1, # 0
 173 0122 4161     		str r1, [r0, # 0x14]    @ ADC 采样时间寄存器 (ADC_SMPR)
 174 0124 8168     	        ldr r1, [r0, # 0x08]
 175 0126 684A     	        ldr r2, = 0x04         @ 开始转换
 176 0128 1143     		orrs r1, r1, r2
 177 012a 8160     	        str r1, [r0, # 0x08]    @ 控制寄存器 (ADC_CR)
 178              	
 179              	dmachushihua:
 180              	        @+0=LSR,+4=IFCR,
 181              	        @+8=CCR1,+c=CNDTR1,+10=CPAR1+14=CMAR1,
 182              	        @+1c=CCR2,+20=CNDTR2,+24=CPAR2,+28=CMAR2
 183              	        @+30=CCR3,+34=CNDTR3,+38=CPAR2,+3c=CMAR3
 184              	        @+44=CCR4,+48=CNDTR4,+4c=CPAR4,+50=CMAR4
 185              	        @+58=CCR5,+5c=CNDTR5,+60=CPAR5,+64=CMAR5
 186              	        @+6C=CCR6,+70=CNDTR6,+74=CPAR6,+78=CMAR6
 187              	        @+80=CCR7,+84=CNDTR7,+88=CPAR7,+8c=CMAR7
 188              	
 189              		@ adc dma
 190 012c 6748     		ldr r0, = 0x40020000
 191 012e 6849     		ldr r1, = 0x40012440
 192 0130 0161     		str r1, [r0, # 0x10]
 193 0132 6849     		ldr r1, = dianyabiao
 194 0134 4161     		str r1, [r0, # 0x14]
 195 0136 6849     		ldr r1, = 912
 196 0138 C160     		str r1, [r0, # 0x0c]
 197 013a 6849     		ldr r1, = 0x583 @  0x583 	@ 5a1
 198 013c 8160     		str r1, [r0, # 0x08]
 199              	
 200              	
 201              	tim1chushiha:				
 202 013e 684D     		ldr r5, = 0x40012c00 @ tim1_cr1
 203 0140 6849     		ldr r1, = 0
 204 0142 A962     		str r1, [r5, # 0x28] @ psc
 205 0144 6849     		ldr r1, = 1
 206 0146 E962     		str r1, [r5, # 0x2c] @ ARR
 207 0148 6849     		ldr r1, = 0x38
 208 014a E961     		str r1, [r5, # 0x1c] @ ccmr2  CC3
 209 014c 6849     		ldr r1, = 0x100    @  CC3
 210 014e 2962     		str r1, [r5, # 0x20] @ ccer
 211 0150 6849     		ldr r1, = 0x8000
 212 0152 6964     		str r1, [r5, # 0x44] @ BDTR
 213 0154 6449     		ldr r1, = 1
 214 0156 E963     		str r1, [r5, # 0x3c]
 215 0158 E124     		movs r4, # 0xe1
 216              	tim3chushihua:				
ARM GAS  1.s 			page 5


 217 015a 6748     		ldr r0, = 0x40000400 @ tim3_cr1
 218 015c 6149     		ldr r1, = 0
 219 015e 8162     		str r1, [r0, # 0x28] @ psc
 220 0160 6649     		ldr r1, = 2799
 221 0162 C162     		str r1, [r0, # 0x2c] @ ARR
 222 0164 6649     		ldr r1, =  0x3800 @ 0x3800
 223 0166 C161     		str r1, [r0, # 0x1c] @ ccmr2
 224 0168 4D49     		ldr r1, =  0x1000
 225 016a 0162     		str r1, [r0, # 0x20] @ ccer
 226 016c 6349     		ldr r1, = 2799
 227 016e 0164     		str r1, [r0, # 0x40] @ ccr4
 228 0170 7021     		movs r1, # 0x70
 229 0172 4160     		str r1, [r0, # 0x04]
 230              		@movs r1, # 0x01
 231              		@str r1, [r0, # 0x0c]
 232 0174 E121     		movs r1, # 0xe1
 233 0176 0160     		str r1, [r0]
 234 0178 2C60     		str r4, [r5]
 235              	@_systick:				@ systick定时器初始化
 236              	@
 237              	@	ldr r0, = 0xe000e010
 238              	@	ldr r1, = 4800000
 239              	@	str r1, [r0, # 4]
 240              	@	str r1, [r0, # 8]
 241              	@	movs r1, # 0x07
 242              	@	str r1, [r0]
 243              	io_she_zhi:
 244              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 245              		@a(0x48000000)b(0x48000400)c(0x48000800)d(0x48000c00)f(0x48001400)
 246              		@ 输入（00），通用输出（01），复用功能（10），模拟（11）
 247              		@偏移0x4 = 端口输出类型 @ （0 推挽），（ 1 开漏）
 248              		@偏移0x8 = 输出速度  00低速， 01中速， 11高速
 249              		@偏移0xC = 上拉下拉 (00无上下拉，  01 上拉， 10下拉)
 250              		@偏移0x10 = 输入数据寄存器
 251              		@偏移0x14 = 输出数据寄存器
 252              		@偏移0x18 = 端口开  0-15置位
 253              		@偏移0x28 = 端口关
 254              		@0X20 = 复用低
 255              		@GPIO口0（0-3位）每个IO口占用4位
 256              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 257              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 258              		@0x24 = 复用高
 259              		@GPIO口8 （0-3位）每个IO口占用4位
 260              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 261              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 262              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 263              	
 264 017a 6248     		ldr r0, = 0x48000000
 265 017c 6249     		ldr r1, = 0x28203d5f
 266 017e 0160     		str r1, [r0]
 267 0180 4C49     		ldr r1, = 0x200
 268 0182 4162     		str r1, [r0, # 0x24]
 269              		
 270              	ting:
 271 0184 6148     		ldr r0, = jishu
 272 0186 6249     		ldr r1, = 0x800
 273 0188 0268     		ldr r2, [r0]
ARM GAS  1.s 			page 6


 274 018a 0132     		adds r2, r2, # 1
 275 018c 0260     		str r2, [r0]
 276 018e 8A42     		cmp r2, r1
 277 0190 03D1     		bne __xianshi
 278 0192 0022     		movs r2, # 0
 279 0194 0260     		str r2, [r0]
 280 0196 00F016F8 		bl __kai_dma
 281              	__xianshi:
 282 019a 5E48     		ldr r0, = shibu
 283 019c 8088     		ldrh r0, [r0, # 0x04]
 284 019e 0000     		movs r0, r0
 285 01a0 05D5     		bpl __shu_ma_guan_xian_shi
 286 01a2 C043     		mvns r0, r0
 287 01a4 0130     		adds r0, r0, # 1
 288 01a6 5C4A     		ldr r2, = fuhao
 289 01a8 0023     		movs r3, # 0
 290 01aa 1360     		str r3, [r2]
 291 01ac 02E0     		b __led_xian_shi
 292              	__shu_ma_guan_xian_shi:
 293 01ae 5A4B     		ldr r3, = fuhao
 294 01b0 0222     		movs r2, # 0x02
 295 01b2 1A60     		str r2, [r3]
 296              	__led_xian_shi:	
 297 01b4 0421     		movs r1, # 4
 298 01b6 394A     	        ldr r2, = shumaguanma
 299 01b8 FF23     		movs r3, # 0xff		@小数点位置
 300 01ba 00F0C9F8 	        bl _zhuanshumaguanma
 301 01be 0520     		movs r0, # 5
 302 01c0 00F0DDF8 	        bl _xieshumaguan
 303 01c4 DEE7     		b ting
 304              	__kai_dma:
 305 01c6 07B5     		push {r0-r2,lr}
 306 01c8 3B4A     		ldr r2, = 0x40012400
 307 01ca 1121     		movs r1, # 0x11
 308 01cc 9160     		str r1, [r2, # 0x08]
 309              	__deng_adc_wan:
 310 01ce 9168     		ldr r1, [r2, # 0x08]
 311 01d0 0129     		cmp r1, # 1
 312 01d2 FCD1     		bne __deng_adc_wan
 313 01d4 3D48     		ldr r0, = 0x40020000
 314 01d6 0021     		movs r1, # 0
 315 01d8 8160     		str r1, [r0, # 0x08]
 316 01da 3F49     		ldr r1, = 912
 317 01dc C160     		str r1, [r0, # 0x0c]
 318 01de 3F49     		ldr r1, = 0x583
 319 01e0 8160     		str r1, [r0, # 0x08]
 320 01e2 0521     		movs r1, # 0x05
 321 01e4 9160     		str r1, [r2, # 0x08]
 322 01e6 07BD     		pop {r0-r2,pc}
 323              		
 324              	
 325              	__dft:
 326 01e8 FFB5     		push {r0-r7,lr}
 327 01ea 4046     		mov r0, r8
 328 01ec 4946     		mov r1, r9
 329 01ee 5246     		mov r2, r10
 330 01f0 5B46     		mov r3, r11
ARM GAS  1.s 			page 7


 331 01f2 6446     		mov r4, r12
 332 01f4 1FB4     		push {r0-r4}
 333 01f6 4948     		ldr r0, = dianyabiaozhizhen
 334 01f8 4949     		ldr r1, = xuanzhuanyinzi
 335 01fa 0068     		ldr r0, [r0]
 336 01fc 0122     		movs r2, # 1
 337 01fe 9202     		lsls r2, r2, # 10
 338 0200 9046     		mov r8, r2
 339 0202 0023     		movs r3, # 0
 340 0204 9B46     		mov r11, r3
 341 0206 9C46     		mov r12, r3
 342              	__dft_xun_huan:
 343 0208 C458     		ldr r4, [r0, r3]
 344 020a CA58     		ldr r2, [r1, r3]	@r
 345 020c 04B4     		push {r2}
 346 020e 0433     		adds r3, r3, # 4
 347 0210 C558     		ldr r5, [r0, r3]
 348 0212 C258     		ldr r2, [r0, r3]
 349 0214 0433     		adds r3, r3, # 4
 350 0216 2646     		mov r6, r4
 351 0218 2F46     		mov r7, r5
 352 021a 2404     		lsls r4, r4, # 16
 353 021c 240C     		lsrs r4, r4, # 16
 354 021e 360C     		lsrs r6, r6, # 16
 355 0220 2D04     		lsls r5, r5, # 16
 356 0222 2D0C     		lsrs r5, r5, # 16
 357 0224 3F0C     		lsrs r7, r7, # 16
 358 0226 A41B     		subs r4, r4, r6
 359 0228 ED1B     		subs r5, r5, r7
 360 022a 2646     		mov r6, r4
 361 022c 2F46     		mov r7, r5
 362 022e 5443     		muls r4, r4, r2		@i
 363 0230 5543     		muls r5, r5, r2		@i
 364 0232 E413     		asrs r4, r4, # 15
 365 0234 ED13     		asrs r5, r5, # 15
 366 0236 4A46     		mov r2, r9
 367 0238 1219     		adds r2, r2, r4
 368 023a 9146     		mov r9, r2
 369 023c 5246     		mov r2, r10
 370 023e 5219     		adds r2, r2, r5
 371 0240 9246     		mov r10, r2
 372 0242 04BC     		pop {r2}
 373 0244 5643     		muls r6, r6, r2		@i
 374 0246 5743     		muls r7, r7, r2		@i
 375 0248 5A46     		mov r2, r11		@r
 376 024a 9219     		adds r2, r2, r6
 377 024c 9346     		mov r11, r2
 378 024e 6246     		mov r2, r12
 379 0250 D219     		adds r2, r2, r7
 380 0252 9446     		mov r12, r2
 381 0254 4345     		cmp r3, r8
 382 0256 D7D1     		bne __dft_xun_huan
 383 0258 2E48     		ldr r0, = shibu
 384 025a 3249     		ldr r1, = xubu
 385 025c 4A46     		mov r2, r9
 386 025e 5346     		mov r3, r10
 387 0260 5C46     		mov r4, r11
ARM GAS  1.s 			page 8


 388 0262 6546     		mov r5, r12
 389 0264 1212     		asrs r2, r2, # 8
 390 0266 1B12     		asrs r3, r3, # 8
 391 0268 2412     		asrs r4, r4, # 8
 392 026a 2D12     		asrs r5, r5, # 8
 393 026c 0260     		str r2, [r0]
 394 026e 4360     		str r3, [r0, # 0x04]
 395 0270 0C60     		str r4, [r1]
 396 0272 4D60     		str r5, [r1, # 0x04]
 397 0274 1FBC     		pop {r0-r4}
 398 0276 8046     		mov r8, r0
 399 0278 8946     		mov r9, r1
 400 027a 9246     		mov r10, r2
 401 027c 9B46     		mov r11, r3
 402 027e A446     		mov r12, r4
 403 0280 FFBD     		pop {r0-r7,pc}
 404 0282 00000020 		.ltorg
 404      02400010 
 404      02400100 
 404      01000200 
 404      15000000 
 405              		
 406              		
 407              		
 408              		
 409              	_lvboqi:
 410              				@滤波器
 411              				@R0=地址，R1=长度,r2=表指针地址,r3=ADC数值
 412              				@出R0=结果
 413 0328 FEB5     		push {r1-r7,lr}	
 414 032a 1568     		ldr r5, [r2]		@读出表指针
 415 032c 8E00     		lsls r6, r1, # 2	
 416 032e 4351     		str r3, [r0, r5]	@数值写到滤波器缓冲区
 417 0330 0435     		adds r5, r5, # 4
 418 0332 B542     		cmp r5, r6
 419 0334 00D1     		bne _lvboqimeidaohuanchongquding
 420 0336 0025     		movs r5, # 0
 421              	_lvboqimeidaohuanchongquding:
 422 0338 1560     		str r5, [r2]
 423 033a 0027     		movs r7, # 0
 424              	_lvboqixunhuan:
 425 033c B542     		cmp r5, r6
 426 033e 00D1     		bne _lvbozonghe
 427 0340 0025     		movs r5, # 0
 428              	_lvbozonghe:
 429 0342 4459     		ldr r4, [r0, r5]
 430 0344 0435     		adds r5, r5, # 4
 431 0346 3F19     		adds r7, r7, r4
 432 0348 0139     		subs r1, r1, # 1
 433 034a F7D1     		bne _lvboqixunhuan
 434 034c 7811     		asrs r0, r7, # 5	@修改
 435 034e FEBD     		pop {r1-r7,pc}
 436              	
 437              	_zhuanshumaguanma:@ 16进制转数码管码
 438              		@ R0要转的数据， R1长度，R2结果表首地址
 439              		@ r3 小数点位置
 440 0350 F0B5     		push {r4-r7,lr}
ARM GAS  1.s 			page 9


 441 0352 6E4F     		ldr r7, = shumaguanmabiao
 442 0354 0546     		mov r5, r0
 443 0356 0E46     		mov r6, r1
 444 0358 0A21     		movs r1, # 10
 445 035a 9846     		mov r8, r3
 446              	_xunhuanqiuma:
 447 035c 00F044F8 		bl _chufa
 448 0360 0446     		mov r4, r0
 449 0362 4C43     		muls r4, r1
 450 0364 2B1B     		subs r3, r5, r4
 451 0366 9B00     		lsls r3, # 2
 452 0368 FC58     		ldr r4, [r7, r3]
 453 036a 4645     		cmp r6, r8
 454 036c 00D0     		beq __tian_jia_xiao_shu_dian
 455 036e 00E0     		b __bao_cun_shu_ma_guan_ma
 456              	__tian_jia_xiao_shu_dian:
 457 0370 0134     		adds r4, r4, # 1
 458              	__bao_cun_shu_ma_guan_ma:	
 459 0372 1460     		str r4, [r2]
 460 0374 0546     		mov r5, r0
 461 0376 0432     		adds r2, r2, # 4
 462 0378 013E     		subs r6, # 1
 463 037a EFD1     		bne _xunhuanqiuma
 464 037c F0BD     		pop {r4-r7,pc}
 465              	_xieshumaguan: @ r0=位数 @数码管码
 466 037e FEB5     		push {r1-r7,lr}
 467 0380 8000     		lsls r0, r0, # 2
 468 0382 0027     		movs r7, # 0
 469 0384 0646     		mov r6, r0
 470 0386 624D     		ldr r5, = shumaguanma
 471 0388 624A     		ldr r2, = shumaguanshuaxinbiao
 472              	_shumaguanshuaxin:
 473 038a EB59     		ldr r3, [r5, r7]
 474 038c D459     		ldr r4, [r2, r7]
 475 038e 1C43     		orrs r4, r4, r3
 476 0390 2046     		mov r0, r4
 477 0392 00F004F8 		bl _xie595
 478 0396 0437     		adds  r7, r7, # 4
 479 0398 B742     		cmp r7, r6
 480 039a F6D9     		bls _shumaguanshuaxin
 481 039c FEBD     		pop {r1-r7,pc}
 482              		
 483              	_xie595: @ R0=要写的数据
 484 039e FEB5     		push {r1-r7,lr}
 485 03a0 0546     		mov r5, r0
 486 03a2 0820     		movs r0, # 0x08      @pa6
 487 03a4 1027     		movs r7, # 0x10      @pa7
 488 03a6 0426     		movs r6, # 0x04      @pa5 
 489 03a8 1023     		movs r3, # 16   @16位
 490 03aa 5B4A     		ldr r2, = 0x48000000 @ gpioa
 491 03ac 0121     		movs r1, # 0x01
 492              	_xunhuan595:
 493 03ae 9761     		str r7, [r2, # 0x18]
 494 03b0 00F014F8 		bl _yanshi
 495 03b4 0D42     		tst r5, r1
 496 03b6 01D1     		bne _xie595_0
 497 03b8 9062     		str r0, [r2, # 0x28]
ARM GAS  1.s 			page 10


 498 03ba 00E0     		b _suocun595
 499              	_xie595_0:
 500 03bc 9061     		str r0, [r2, # 0x18]
 501              	_suocun595:
 502 03be 00F00DF8 		bl _yanshi
 503 03c2 6D08     		lsrs r5, # 1
 504 03c4 9762     		str r7, [r2, # 0x28]
 505 03c6 00F009F8 		bl _yanshi
 506 03ca 013B     		subs r3, r3, # 1
 507 03cc EFD1     		bne _xunhuan595
 508 03ce 9661     		str r6, [r2, # 0x18]
 509 03d0 00F004F8 		bl _yanshi
 510 03d4 9662     		str r6, [r2, # 0x28]
 511 03d6 00F001F8 		bl _yanshi
 512 03da FEBD     		pop {r1-r7,pc}
 513              	
 514              	
 515              	_yanshi:
 516 03dc 80B4     		push {r7}
 517 03de 4F4F     		ldr r7, = 30
 518              	_yanshi11:
 519 03e0 013F     		subs r7, # 1
 520 03e2 FDD1     		bne _yanshi11
 521 03e4 80BC     		pop {r7}
 522 03e6 7047     		bx lr
 523              	
 524              	_chufa:				@软件除法
 525              		@ r0 除以 r1 等于 商(r0)余数R1
 526 03e8 1EB5     		push {r1-r4,lr}
 527 03ea 0028     		cmp r0, # 0
 528 03ec 0ED0     		beq _chufafanhui
 529 03ee 0029     		cmp r1, # 0
 530 03f0 0CD0     		beq _chufafanhui
 531 03f2 0246     		mov r2, r0
 532 03f4 0123     		movs r3, # 1
 533 03f6 DB07     		lsls r3, r3, # 31
 534 03f8 0020     		movs r0, # 0
 535 03fa 0446     		mov r4, r0
 536              	_chufaxunhuan:
 537 03fc 5200     		lsls r2, r2, # 1
 538 03fe 6441     		adcs r4, r4, r4
 539 0400 8C42     		cmp r4, r1
 540 0402 01D3     		bcc _chufaweishubudao0
 541 0404 C018     		adds r0, r0, r3
 542 0406 641A     		subs r4, r4, r1
 543              	_chufaweishubudao0:
 544 0408 5B08     		lsrs r3, r3, # 1
 545 040a F7D1     		bne _chufaxunhuan
 546              	_chufafanhui:
 547 040c 1EBD     		pop {r1-r4,pc}
 548              	__chu_fa:	@带符号
 549 040e FEB5     		push {r1-r7,lr}
 550 0410 0028     	        cmp r0, # 0
 551 0412 1DD0     	        beq _chufafanhui1
 552 0414 0029     	        cmp r1, # 0
 553 0416 1BD0     	        beq _chufafanhui1
 554 0418 0025     		movs r5, # 0
ARM GAS  1.s 			page 11


 555 041a 0000     		movs r0, r0
 556 041c 02D5     		bpl __pan_duan_bei_chu_shu
 557 041e 0135     		adds r5, r5, # 1
 558 0420 C043     		mvns r0, r0
 559 0422 0130     		adds r0, r0, # 1
 560              	__pan_duan_bei_chu_shu:
 561 0424 0900     		movs r1, r1
 562 0426 02D5     		bpl __ji_suan_chu_fa11
 563 0428 0135     		adds r5, r5, # 1
 564 042a C943     		mvns r1, r1
 565 042c 0131     		adds r1, r1, # 1
 566              	__ji_suan_chu_fa11:	
 567 042e 0246     	        mov r2, r0
 568 0430 0123     	        movs r3, # 1
 569 0432 DB07     	        lsls r3, r3, # 31
 570 0434 0020     	        movs r0, # 0
 571 0436 0446     	        mov r4, r0
 572              	_chufaxunhuan1:
 573 0438 5200     	        lsls r2, r2, # 1
 574 043a 6441     	        adcs r4, r4, r4
 575 043c 8C42     	        cmp r4, r1
 576 043e 01D3     		bcc _chufaweishubudao00
 577 0440 C018     		adds r0, r0, r3
 578 0442 641A     		subs r4, r4, r1
 579              	_chufaweishubudao00:
 580 0444 5B08     		lsrs r3, r3, # 1
 581 0446 F7D1     		bne _chufaxunhuan1
 582 0448 012D     		cmp r5, # 1
 583 044a 01D1     		bne _chufafanhui1
 584 044c C043     		mvns r0, r0
 585 044e 0130     		adds r0, r0, # 1
 586              	_chufafanhui1:
 587 0450 FEBD     		pop {r1-r7,pc}
 588              	__he_cheng_dian_ya_biao:
 589 0452 3FB5     		push {r0-r5,lr}
 590 0454 3248     	        ldr r0, = dianyabiao
 591 0456 0838     		subs r0, r0, # 0x08
 592              	__zhao_shang_sheng:
 593 0458 0830     		adds r0, r0, # 0x08
 594 045a 8288     		ldrh r2, [r0, # 0x04]
 595 045c 002A     		cmp r2, # 0
 596 045e FBD1     		bne __zhao_shang_sheng
 597 0460 8389     		ldrh r3, [r0, # 0x0c]
 598 0462 D21A     		subs r2, r2, r3
 599 0464 F8D5     		bpl __zhao_shang_sheng
 600 0466 2F49     		ldr r1, = dianyabiaozhizhen
 601 0468 0860     		str r0, [r1]
 602 046a 2F49     	        ldr r1, = 256
 603 046c 8900     	        lsls r1, r1, # 2
 604 046e 0022     	        movs r2, # 0
 605              	__fu_zhi_xun_huan:
 606 0470 8358     	        ldr r3, [r0, r2]
 607 0472 1C46     	        mov r4, r3
 608 0474 1B04     	        lsls r3, r3, # 16
 609 0476 1B0C     	        lsrs r3, r3, # 16
 610 0478 240C     	        lsrs r4, r4, # 16
 611 047a 1B1B     		subs r3, r3, r4
ARM GAS  1.s 			page 12


 612 047c 06D5     	        bpl __bao_cun
 613 047e DB43     	        mvns r3, r3
 614 0480 0133     	        adds r3, r3, # 1
 615 0482 00F024F8 	        bl __zhuan_bcd
 616 0486 294C     	        ldr r4, = 0x80000000
 617 0488 2343     	        orrs r3, r3, r4
 618 048a 01E0     	        b __fu_shu_bao_cun
 619              	__bao_cun:
 620 048c 00F01FF8 		bl __zhuan_bcd
 621              	__fu_shu_bao_cun:
 622 0490 8350     	        str r3, [r0, r2]
 623 0492 0432     		adds r2, r2, # 4
 624 0494 8A42     		cmp r2, r1
 625 0496 EBD1     	        bne __fu_zhi_xun_huan
 626 0498 3FBD     		pop {r0-r5,pc}
 627              	__jian_bo:
 628 049a 3FB5     	       push {r0-r5,lr}
 629 049c 2048     	        ldr r0, = dianyabiao
 630 049e 0838     	        subs r0, r0, # 0x08
 631              	__zhao_shang_sheng1:
 632 04a0 0830     	        adds r0, r0, # 0x08
 633 04a2 8288     		ldrh r2, [r0, # 0x04]
 634 04a4 002A     		cmp r2, # 0
 635 04a6 FBD1     	        bne __zhao_shang_sheng1
 636 04a8 8389     		ldrh r3, [r0, # 0x0c]
 637 04aa D21A     	        subs r2, r2, r3
 638 04ac F8D5     	        bpl __zhao_shang_sheng1
 639 04ae 1D49     	        ldr r1, = dianyabiaozhizhen
 640 04b0 0860     	        str r0, [r1]
 641 04b2 1D49     	        ldr r1, = 256
 642 04b4 8900     	        lsls r1, r1, # 2
 643 04b6 0022     	        movs r2, # 0
 644              	__fu_zhi_xun_huan1:
 645 04b8 8358     	        ldr r3, [r0, r2]
 646 04ba 1C46     	        mov r4, r3
 647 04bc 1B04     	        lsls r3, r3, # 16
 648 04be 1B0C     	        lsrs r3, r3, # 16
 649 04c0 240C     	        lsrs r4, r4, # 16
 650 04c2 1B1B     	        subs r3, r3, r4
 651 04c4 8350     	        str r3, [r0, r2]
 652 04c6 0432     		adds r2, r2, # 4
 653 04c8 8A42     		cmp r2, r1
 654 04ca F5D1     	        bne __fu_zhi_xun_huan1
 655 04cc 3FBD     		pop {r0-r5,pc}
 656              	
 657              	__zhuan_bcd:
 658 04ce F7B5     		push {r0-r2,r4-r7,lr}
 659 04d0 0A21     		movs r1, # 10
 660 04d2 1846     		mov r0, r3
 661 04d4 1D46     		mov r5, r3
 662 04d6 0826     		movs r6, # 8
 663              	__bcd_xun_huan:
 664 04d8 FFF786FF 		bl _chufa
 665 04dc 0446     		mov r4, r0
 666 04de 4C43     		muls r4, r4, r1
 667 04e0 2D1B     		subs r5, r5, r4
 668 04e2 20B4     		push {r5}
ARM GAS  1.s 			page 13


 669 04e4 0546     		mov r5, r0
 670 04e6 013E     		subs r6, r6, # 1
 671 04e8 F6D1     		bne __bcd_xun_huan
 672 04ea FFBC     		pop {r0-r7}
 673 04ec 3601     		lsls r6, r6, # 4
 674 04ee 2D02     		lsls r5, r5, # 8
 675 04f0 2403     		lsls r4, r4, # 12
 676 04f2 1B04     		lsls r3, r3, # 16
 677 04f4 1205     		lsls r2, r2, # 20
 678 04f6 0906     		lsls r1, r1, # 24
 679 04f8 0007     		lsls r0, r0, # 28
 680 04fa 0343     		orrs r3, r3, r0
 681 04fc 0B43     		orrs r3, r3, r1
 682 04fe 1343     		orrs r3, r3, r2
 683 0500 2343     		orrs r3, r3, r4
 684 0502 2B43     		orrs r3, r3, r5
 685 0504 3343     		orrs r3, r3, r6
 686 0506 3B43     		orrs r3, r3, r7
 687 0508 F7BD     		pop {r0-r2,r4-r7,pc}
 688 050a 00000000 		.ltorg
 688      00000000 
 688      00202800 
 688      00000000 
 688      00481E00 
 689              	_nmi_handler:
 690 0530 7047     		bx lr
 691              	_hard_fault:
 692 0532 7047     		bx lr
 693              	_svc_handler:
 694 0534 7047     		bx lr
 695              	_pendsv_handler:
 696 0536 7047     		bx lr
 697              	aaa:
 698 0538 7047     		bx lr
 699              	_tim3:
 700 053a 0E48     		ldr r0, = jishu2
 701 053c 0168     		ldr r1, [r0]
 702 053e 0131     		adds r1, r1, #1
 703 0540 0160     		str r1, [r0]
 704              	_tim3fanhui:
 705 0542 0D48     		ldr r0, = 0x40000400
 706 0544 0021     		movs r1, # 0
 707 0546 0161     		str r1, [r0, # 0x10]
 708 0548 7047     		bx lr
 709              	_systickzhongduan:
 710 054a 0C48     		ldr r0, = 0x40020000
 711 054c 0C49     	        ldr r1, =  86
 712 054e C160     	        str r1, [r0, # 0x0c]
 713 0550 0C49     	        ldr r1, = 0xa83 @ 0xaa3 @ 5a1
 714 0552 8160     	        str r1, [r0, # 0x08]
 715              	
 716              		
 717 0554 0C48     		ldr r0, = 0xe0000d04
 718 0556 0D49     		ldr r1, = 0x02000000
 719 0558 0160     		str r1, [r0]                 @ 清除SYSTICK中断
 720 055a 7047     		bx lr
 721              	__dma_wan:
ARM GAS  1.s 			page 14


 722 055c 00B5     		push {lr}
 723 055e FFF79CFF 		bl __jian_bo
 724 0562 FFF741FE 		bl __dft
 725 0566 0548     		ldr r0, = 0x40020000
 726 0568 0222     	        movs r2, # 2
 727 056a 4260     		str r2, [r0, # 0x04]
 728 056c 0848     		ldr r0, = dianyabiaoman
 729 056e 0121     		movs r1, # 1
 730 0570 0160     		str r1, [r0]
 731              	__dma_fan_hui:
 732 0572 00BDF800 		pop {pc}
 732      00200004 
 732      00400000 
 732      02405600 
 732      0000830A 
ARM GAS  1.s 			page 15


DEFINED SYMBOLS
                 1.s:9      .data:0000000000000000 $d
                 1.s:10     .data:0000000000000000 shumaguanmabiao
                 1.s:12     .data:0000000000000028 shumaguanshuaxinbiao
                 1.s:14     .data:000000000000004c xuanzhuanyinzi
                 1.s:16     .data:000000000000044c yjmwxwx
                 1.s:17     *ABS*:0000000020001000 STACKINIT
                 1.s:18     *ABS*:0000000020000000 shumaguanma
                 1.s:19     *ABS*:0000000020000010 fuhao
                 1.s:20     *ABS*:00000000200000f4 dmawan
                 1.s:21     *ABS*:00000000200000f8 jishu2
                 1.s:22     *ABS*:00000000200000fc jishu
                 1.s:23     *ABS*:0000000020000120 shibu
                 1.s:24     *ABS*:0000000020000128 xubu
                 1.s:25     *ABS*:0000000020000140 shibuhuanchong
                 1.s:26     *ABS*:0000000020000a00 lvboqizhizhen
                 1.s:27     *ABS*:0000000020000a04 lvboqihuanchong
                 1.s:28     *ABS*:00000000200001f8 dianyabiaozhizhen
                 1.s:29     *ABS*:00000000200001fc dianyabiaoman
                 1.s:30     *ABS*:0000000020000200 dianyabiao
                 1.s:32     .text:0000000000000000 vectors
                 1.s:79     .text:00000000000000b0 _start
                 1.s:689    .text:0000000000000530 _nmi_handler
                 1.s:691    .text:0000000000000532 _hard_fault
                 1.s:693    .text:0000000000000534 _svc_handler
                 1.s:695    .text:0000000000000536 _pendsv_handler
                 1.s:709    .text:000000000000054a _systickzhongduan
                 1.s:697    .text:0000000000000538 aaa
                 1.s:721    .text:000000000000055c __dma_wan
                 1.s:699    .text:000000000000053a _tim3
                            .text:0000000000000000 $d
                 1.s:77     .text:00000000000000b0 $t
                 1.s:80     .text:00000000000000b0 shizhong
                 1.s:87     .text:00000000000000bc denghse
                 1.s:91     .text:00000000000000c2 dengpllguan
                 1.s:103    .text:00000000000000d6 dengpll
                 1.s:111    .text:00000000000000e0 neicunqingling
                 1.s:115    .text:00000000000000e6 neicunqinglingxunhuan
                 1.s:120    .text:00000000000000ec _waisheshizhong
                 1.s:137    .text:00000000000000fa _waishezhongduan
                 1.s:148    .text:0000000000000100 _adcchushihua
                 1.s:152    .text:0000000000000106 _dengadcjiaozhun
                 1.s:156    .text:000000000000010c _kaiadc
                 1.s:161    .text:0000000000000114 _dengdaiadcwending
                 1.s:165    .text:0000000000000114 _tongdaoxuanze
                 1.s:179    .text:000000000000012c dmachushihua
                 1.s:201    .text:000000000000013e tim1chushiha
                 1.s:216    .text:000000000000015a tim3chushihua
                 1.s:243    .text:000000000000017a io_she_zhi
                 1.s:270    .text:0000000000000184 ting
                 1.s:281    .text:000000000000019a __xianshi
                 1.s:304    .text:00000000000001c6 __kai_dma
                 1.s:292    .text:00000000000001ae __shu_ma_guan_xian_shi
                 1.s:296    .text:00000000000001b4 __led_xian_shi
                 1.s:437    .text:0000000000000350 _zhuanshumaguanma
                 1.s:465    .text:000000000000037e _xieshumaguan
                 1.s:309    .text:00000000000001ce __deng_adc_wan
ARM GAS  1.s 			page 16


                 1.s:325    .text:00000000000001e8 __dft
                 1.s:342    .text:0000000000000208 __dft_xun_huan
                 1.s:404    .text:0000000000000282 $d
                 1.s:404    .text:0000000000000284 $d
                 1.s:409    .text:0000000000000328 _lvboqi
                 1.s:413    .text:0000000000000328 $t
                 1.s:421    .text:0000000000000338 _lvboqimeidaohuanchongquding
                 1.s:424    .text:000000000000033c _lvboqixunhuan
                 1.s:428    .text:0000000000000342 _lvbozonghe
                 1.s:446    .text:000000000000035c _xunhuanqiuma
                 1.s:524    .text:00000000000003e8 _chufa
                 1.s:456    .text:0000000000000370 __tian_jia_xiao_shu_dian
                 1.s:458    .text:0000000000000372 __bao_cun_shu_ma_guan_ma
                 1.s:472    .text:000000000000038a _shumaguanshuaxin
                 1.s:483    .text:000000000000039e _xie595
                 1.s:492    .text:00000000000003ae _xunhuan595
                 1.s:515    .text:00000000000003dc _yanshi
                 1.s:499    .text:00000000000003bc _xie595_0
                 1.s:501    .text:00000000000003be _suocun595
                 1.s:518    .text:00000000000003e0 _yanshi11
                 1.s:546    .text:000000000000040c _chufafanhui
                 1.s:536    .text:00000000000003fc _chufaxunhuan
                 1.s:543    .text:0000000000000408 _chufaweishubudao0
                 1.s:548    .text:000000000000040e __chu_fa
                 1.s:586    .text:0000000000000450 _chufafanhui1
                 1.s:560    .text:0000000000000424 __pan_duan_bei_chu_shu
                 1.s:566    .text:000000000000042e __ji_suan_chu_fa11
                 1.s:572    .text:0000000000000438 _chufaxunhuan1
                 1.s:579    .text:0000000000000444 _chufaweishubudao00
                 1.s:588    .text:0000000000000452 __he_cheng_dian_ya_biao
                 1.s:592    .text:0000000000000458 __zhao_shang_sheng
                 1.s:605    .text:0000000000000470 __fu_zhi_xun_huan
                 1.s:619    .text:000000000000048c __bao_cun
                 1.s:657    .text:00000000000004ce __zhuan_bcd
                 1.s:621    .text:0000000000000490 __fu_shu_bao_cun
                 1.s:627    .text:000000000000049a __jian_bo
                 1.s:631    .text:00000000000004a0 __zhao_shang_sheng1
                 1.s:644    .text:00000000000004b8 __fu_zhi_xun_huan1
                 1.s:663    .text:00000000000004d8 __bcd_xun_huan
                 1.s:688    .text:000000000000050a $d
                 1.s:688    .text:000000000000050c $d
                 1.s:690    .text:0000000000000530 $t
                 1.s:704    .text:0000000000000542 _tim3fanhui
                 1.s:731    .text:0000000000000572 __dma_fan_hui
                 1.s:732    .text:0000000000000574 $d

NO UNDEFINED SYMBOLS
