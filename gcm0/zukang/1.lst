ARM GAS  1.s 			page 1


   1              		@@单片机stm32f030f4p6
   2              		@@ 阻抗
   3              		@作者：yjmwxwx
   4              		@时间：2020-01-01
   5              		@编译器：ARM-NONE-EABI
   6              		 .thumb
   7              		         .syntax unified
   8              		.section .data
   9              		.align 4
  10              	shumaguanmabiao:
  11 0000 FC000000 		.int 0xfc,0x60,0xda,0xf2,0x66,0xb6,0xbe,0xe0,0xfe,0xf6
  11      60000000 
  11      DA000000 
  11      F2000000 
  11      66000000 
  12              	shumaguanshuaxinbiao:
  13 0028 00FE0000 		.int 0xfe00,0xfd00,0xfb00,0xf700,0xef00,0xdf00,0xbf00,0x7f00,0
  13      00FD0000 
  13      00FB0000 
  13      00F70000 
  13      00EF0000 
  14              	xuanzhuanyinzi:
  15 004c 00800000 		.int 0x8000,0x0000,0x5ED7,0xFFFFAA0B,0x0C8B,0xFFFF809E,0xFFFFB3C1,0xFFFF9931,0xFFFF8276,0xFFFFE708
  15      00000000 
  15      D75E0000 
  15      0BAAFFFF 
  15      8B0C0000 
  16              	yjmwxwx:
  17              		.equ STACKINIT,        	        0x20001000
  18              		.equ shumaguanma,		0x20000000
  19              		.equ fuhao,			0x20000010
  20              		.equ dmawan,			0x200000f4
  21              		.equ jishu2,			0x200000f8
  22              		.equ jishu,			0x200000fc
  23              		.equ fan_she_shi_bu,		0x20000120
  24              		.equ ru_she_shi_bu,		0x20000124
  25              		.equ fan_she_xu_bu,		0x20000128
  26              		.equ ru_she_xu_bu,		0x2000012c
  27              		.equ p_shibu,			0x20000130
  28              		.equ p_xubu,			0x20000134
  29              		.equ swrshibu,			0x20000138
  30              		.equ swrxubu,			0x2000013c
  31              		.equ dianzu,			0x20000140
  32              		.equ diankang,			0x20000144
  33              		.equ zukangqiehuan,		0x20000148
  34              		.equ lvboqizhizhen,		0x20000a00
  35              		.equ lvboqihuanchong,		0x20000a04
  36              		.equ lvboqizhizhen1,		0x20000a30
  37              		.equ lvboqihuanchong1,		0x20000a34
  38              		.equ tou_fan_qie_huan,		0x200001f4
  39              		.equ dianyabiaozhizhen,		0x200001f8
  40              		.equ dianyabiaoman,		0x200001fc
  41              		.equ dianyabiao,		0x20000200
  42              		.section .text
  43              	vectors:
  44 0000 00100020 		.word STACKINIT
  45 0004 B1000000 		.word _start + 1
ARM GAS  1.s 			page 2


  46 0008 E9060000 		.word _nmi_handler + 1
  47 000c EB060000 		.word _hard_fault  + 1
  48 0010 00000000 		.word 0
  49 0014 00000000 		.word 0
  50 0018 00000000 		.word 0
  51 001c 00000000 		.word 0
  52 0020 00000000 		.word 0
  53 0024 00000000 		.word 0
  54 0028 00000000 		.word 0
  55 002c ED060000 		.word _svc_handler +1
  56 0030 00000000 		.word 0
  57 0034 00000000 		.word 0
  58 0038 EF060000 		.word _pendsv_handler +1
  59 003c 03070000 		.word _systickzhongduan +1               @ 15
  60 0040 F1060000 		.word aaa +1           @ _wwdg +1          	@ 0
  61 0044 F1060000 		.word aaa +1           @_pvd +1            	@ 1
  62 0048 F1060000 		.word aaa +1           @_rtc +1            	@ 2
  63 004c F1060000 		.word aaa +1           @_flash +1          	@ 3
  64 0050 F1060000 		.word aaa +1	       @ _rcc + 1          	@ 4
  65 0054 F1060000 		.word aaa +1           @_exti0_1  +1      	@ 5
  66 0058 F1060000 		.word aaa +1           @ _exti2_3 +1      	@ 6
  67 005c F1060000 		.word aaa +1           @_exti4_15 +1     	@ 7
  68 0060 F1060000 		.word aaa +1                         		@ 8
  69 0064 15070000 		.word __dma_wan  +1  		      		@ 9
  70 0068 F1060000 		.word aaa +1	       @_dma1_2_3 +1        	@ 10
  71 006c F1060000 		.word aaa +1	       @ _dma1_4_5 +1	        @ 11
  72 0070 F1060000 		.word aaa +1	       @_adc1 +1          	@ 12
  73 0074 F1060000 		.word aaa +1           @_tim1_brk_up +1  	@ 13
  74 0078 F1060000 		.word aaa +1           @ _tim1_cc +1            @ 14
  75 007c F1060000 		.word aaa +1           @_tim2 +1      	        @ 15
  76 0080 F3060000 		.word _tim3 +1                             	@ 16
  77 0084 F1060000 		.word aaa +1                                    @ 17
  78 0088 F1060000 		.word aaa +1		                	@ 18
  79 008c F1060000 		.word aaa +1	       @_tim14 +1   	        @ 19
  80 0090 F1060000 		.word aaa +1                         		@ 20
  81 0094 F1060000 		.word aaa +1           @_tim16 +1      		@ 21
  82 0098 F1060000 		.word aaa +1           @_tim17 +1      		@ 22
  83 009c F1060000 		.word aaa +1           @_i2c   +1     		@ 23
  84 00a0 F1060000 		.word aaa +1                         		@ 24
  85 00a4 F1060000 		.word aaa +1           @_spi   +1    		@ 25
  86 00a8 F1060000 		.word aaa +1                         		@ 26
  87 00ac F1060000 		.word aaa +1           @_usart1 +1     		@ 27
  88              		.align 2
  89              	
  90              	_start:
  91              	shizhong:
  92 00b0 934A     	        ldr r2, = 0x40022000   @FLASH访问控制
  93 00b2 3221     	        movs r1, # 0x32
  94 00b4 1160     	        str r1, [r2]           @FLASH缓冲 缓冲开启
  95 00b6 9348     	        ldr r0, = 0x40021000 @ rcc
  96 00b8 9349     		ldr r1, = 0x10001
  97 00ba 0160     	        str r1, [r0]
  98              	denghse:
  99 00bc 0168     	        ldr r1, [r0]
 100 00be 8903     	        lsls r1, r1, # 14
 101 00c0 FCD5     	        bpl denghse
 102              	dengpllguan:
ARM GAS  1.s 			page 3


 103 00c2 0168     	        ldr r1, [r0]
 104 00c4 8901     		lsls r1, r1, # 6
 105 00c6 FCD4     		bmi dengpllguan
 106 00c8 9049     		ldr r1, = 0x150002
 107 00ca 0046     		mov r0, r0
 108 00cc 4160     		str r1, [r0, # 0x04]
 109 00ce 0046     		mov r0, r0
 110 00d0 8F49     		ldr r1, = 0x1010000
 111 00d2 0046     		mov r0, r0
 112 00d4 0160     		str r1, [r0]
 113              	
 114              	dengpll:
 115 00d6 0168     	        ldr r1, [r0]
 116 00d8 8901     		lsls r1, # 6
 117 00da FCD5     		bpl dengpll
 118              	
 119 00dc 8D49     		ldr r1, = 100
 120 00de 0163     		str r1, [r0, # 0x30]
 121              	
 122              	neicunqingling:
 123 00e0 8D48     		ldr r0, = 0x20000000
 124 00e2 0021     		movs r1, # 0
 125 00e4 8D4B     		ldr r3, = 0x1000
 126              	neicunqinglingxunhuan:
 127 00e6 043B     		subs r3, # 4
 128 00e8 C150     		str r1, [r0, r3]
 129 00ea FCD1     		bne neicunqinglingxunhuan
 130              		
 131              	_waisheshizhong:			 @ 外设时钟
 132              		@+0x14=RCC_AHBENR
 133              		@ 0=DMA @ 2=SRAM @ 4=FLITF@ 6=CRC @ 17=PA @ 18=PB @ 19=PC @ 20=PD @ 22=PF
 134 00ec 8548     		ldr r0, = 0x40021000
 135 00ee 8C49     		ldr r1, = 0x60001
 136 00f0 4161     		str r1, [r0, # 0x14]
 137              	
 138              		@+0x18外设时钟使能寄存器 (RCC_APB2ENR)
 139              		@0=SYSCFG @5=USART6EN @9=ADC @11=TIM1 @12=SPI1 @14=USART1 @16=TIM15 @17=TIM16 @18=TIM17 @22=DBGMCU
 140 00f2 8C49     		ldr r1, = 0xa00
 141 00f4 8161     		str r1, [r0, # 0x18]
 142              		@+0X1C=RCC_APB1ENR
 143              		@ 1=TIM3 @ 4=TIM6 @ 5=TIM7 @ 8=TIM14 @ 11=WWDG @ 14=SPI @ 17=USRT2 @ 18=USART3 @ 20=USART5 @ 21=I2
 144              		@ 22=I2C2 @ 23=USB @ 28=PWR
 145 00f6 8C4A     		ldr r2, = 0x902
 146 00f8 C261     		str r2, [r0, # 0x1c]
 147              	
 148              	_waishezhongduan:				@外设中断
 149              		@0xE000E100    0-31  写1开，写0没效
 150              		@0XE000E180    0-31 写1关，写0没效
 151              		@0XE000E200    0-31 挂起，写0没效
 152              		@0XE000E280    0-31 清除， 写0没效
 153              	
 154 00fa 8C48     		ldr r0, =  0xe000e100
 155 00fc 8C49     		ldr r1, = 0x200 @0x10200  @ 0x10000
 156 00fe 0160     		str r1, [r0]
 157              	
 158              	_kanmengou:
 159 0100 8C48     		ldr r0, = 0x40003000
ARM GAS  1.s 			page 4


 160 0102 8D49     		ldr r1, = 0x5555
 161 0104 0160     		str r1, [r0]
 162 0106 0721     		movs r1, # 7
 163 0108 4160     		str r1, [r0, # 4]
 164 010a 8C49     		ldr r1, = 0xfff
 165 010c 8160     		str r1, [r0, # 8]
 166 010e 8C49     		ldr r1, = 0xaaaa
 167 0110 0160     		str r1, [r0]
 168 0112 8C49     		ldr r1, = 0xcccc
 169 0114 0160     		str r1, [r0]
 170              		
 171              	_adcchushihua:
 172 0116 8C48     	        ldr r0, = 0x40012400  @ adc基地址
 173 0118 8C49     	        ldr r1, = 0x80000000
 174 011a 8160     	        str r1, [r0, # 0x08]  @ ADC 控制寄存器 (ADC_CR)  @adc校准
 175              	_dengadcjiaozhun:
 176 011c 8168     	        ldr r1, [r0, # 0x08]
 177 011e 0900     	        movs r1, r1
 178 0120 FCD4     	        bmi _dengadcjiaozhun   @ 等ADC校准
 179              	_kaiadc:
 180 0122 8168     	        ldr r1, [r0, # 0x08]
 181 0124 0122     	        movs r2, # 0x01
 182 0126 1143     	        orrs r1, r1, r2
 183 0128 8160     	        str r1, [r0, # 0x08]
 184 012a 8949     		ldr r1, = 0xfffff
 185              	_deng_adc_wen_ding:
 186 012c 0168     	        ldr r1, [r0]
 187 012e C907     	        lsls r1, r1, # 31
 188 0130 FCD5     	        bpl _deng_adc_wen_ding @ 等ADC稳定
 189              	_tongdaoxuanze:
 190 0132 8649     	        ldr r1, = 0x80000000
 191 0134 0161     	        str r1, [r0, # 0x10]
 192 0136 8749     	        ldr r1, = 0x63
 193 0138 8162     	        str r1, [r0, # 0x28]    @ 通道选择寄存器 (ADC_CHSELR)
 194 013a 8749     	        ldr r1, = 0x8c3 @0x2003 @0x8c3
 195 013c C160     	        str r1, [r0, # 0x0c]    @ 配置寄存器 1 (ADC_CFGR1)
 196 013e 0021     	        movs r1, # 0
 197 0140 4161     		str r1, [r0, # 0x14]    @ ADC 采样时间寄存器 (ADC_SMPR)
 198 0142 8168     	        ldr r1, [r0, # 0x08]
 199 0144 854A     	        ldr r2, = 0x04         @ 开始转换
 200 0146 1143     		orrs r1, r1, r2
 201 0148 8160     	        str r1, [r0, # 0x08]    @ 控制寄存器 (ADC_CR)
 202              	
 203              	dmachushihua:
 204              	        @+0=LSR,+4=IFCR,
 205              	        @+8=CCR1,+c=CNDTR1,+10=CPAR1+14=CMAR1,
 206              	        @+1c=CCR2,+20=CNDTR2,+24=CPAR2,+28=CMAR2
 207              	        @+30=CCR3,+34=CNDTR3,+38=CPAR2,+3c=CMAR3
 208              	        @+44=CCR4,+48=CNDTR4,+4c=CPAR4,+50=CMAR4
 209              	        @+58=CCR5,+5c=CNDTR5,+60=CPAR5,+64=CMAR5
 210              	        @+6C=CCR6,+70=CNDTR6,+74=CPAR6,+78=CMAR6
 211              	        @+80=CCR7,+84=CNDTR7,+88=CPAR7,+8c=CMAR7
 212              	
 213              		@ adc dma
 214 014a 8548     		ldr r0, = 0x40020000
 215 014c 8549     		ldr r1, = 0x40012440
 216 014e 0161     		str r1, [r0, # 0x10]
ARM GAS  1.s 			page 5


 217 0150 8549     		ldr r1, = dianyabiao
 218 0152 4161     		str r1, [r0, # 0x14]
 219 0154 8549     		ldr r1, = 912
 220 0156 C160     		str r1, [r0, # 0x0c]
 221 0158 8549     		ldr r1, = 0x583 @  0x583 	@ 5a1
 222 015a 8160     		str r1, [r0, # 0x08]
 223              	
 224              	
 225              	tim1chushiha:				
 226 015c 854D     		ldr r5, = 0x40012c00 @ tim1_cr1
 227 015e 8649     		ldr r1, = 0
 228 0160 A962     		str r1, [r5, # 0x28] @ psc
 229 0162 8649     		ldr r1, = 1
 230 0164 E962     		str r1, [r5, # 0x2c] @ ARR
 231 0166 8649     		ldr r1, = 0x38
 232 0168 E961     		str r1, [r5, # 0x1c] @ ccmr2  CC3
 233 016a 8649     		ldr r1, = 0x100    @  CC3
 234 016c 2962     		str r1, [r5, # 0x20] @ ccer
 235 016e 8649     		ldr r1, = 0x8000
 236 0170 6964     		str r1, [r5, # 0x44] @ BDTR
 237 0172 8249     		ldr r1, = 1
 238 0174 E963     		str r1, [r5, # 0x3c]
 239 0176 E124     		movs r4, # 0xe1
 240              	tim3chushihua:				
 241 0178 8448     		ldr r0, = 0x40000400 @ tim3_cr1
 242 017a 7F49     		ldr r1, = 0
 243 017c 8162     		str r1, [r0, # 0x28] @ psc
 244 017e 8449     		ldr r1, = 2799
 245 0180 C162     		str r1, [r0, # 0x2c] @ ARR
 246 0182 8449     		ldr r1, =  0x3800 @ 0x3800
 247 0184 C161     		str r1, [r0, # 0x1c] @ ccmr2
 248 0186 6549     		ldr r1, =  0x1000
 249 0188 0162     		str r1, [r0, # 0x20] @ ccer
 250 018a 8149     		ldr r1, = 2799
 251 018c 0164     		str r1, [r0, # 0x40] @ ccr4
 252 018e 7021     		movs r1, # 0x70
 253 0190 4160     		str r1, [r0, # 0x04]
 254              		@movs r1, # 0x01
 255              		@str r1, [r0, # 0x0c]
 256 0192 E121     		movs r1, # 0xe1
 257 0194 0160     		str r1, [r0]
 258 0196 2C60     		str r4, [r5]
 259              	
 260              	@_systick:				@ systick定时器初始化
 261              	@
 262              	@	ldr r0, = 0xe000e010
 263              	@	ldr r1, = 4800000
 264              	@	str r1, [r0, # 4]
 265              	@	str r1, [r0, # 8]
 266              	@	movs r1, # 0x07
 267              	@	str r1, [r0]
 268              	io_she_zhi:
 269              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 270              		@a(0x48000000)b(0x48000400)c(0x48000800)d(0x48000c00)f(0x48001400)
 271              		@ 输入（00），通用输出（01），复用功能（10），模拟（11）
 272              		@偏移0x4 = 端口输出类型 @ （0 推挽），（ 1 开漏）
 273              		@偏移0x8 = 输出速度  00低速， 01中速， 11高速
ARM GAS  1.s 			page 6


 274              		@偏移0xC = 上拉下拉 (00无上下拉，  01 上拉， 10下拉)
 275              		@偏移0x10 = 输入数据寄存器
 276              		@偏移0x14 = 输出数据寄存器
 277              		@偏移0x18 = 端口开  0-15置位
 278              		@偏移0x28 = 端口关
 279              		@0X20 = 复用低
 280              		@GPIO口0（0-3位）每个IO口占用4位
 281              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 282              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 283              		@0x24 = 复用高
 284              		@GPIO口8 （0-3位）每个IO口占用4位
 285              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 286              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 287              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 288              	
 289 0198 7F48     		ldr r0, = 0x48000000
 290 019a 8049     		ldr r1, = 0x28203d5f
 291 019c 0160     		str r1, [r0]
 292 019e 6449     		ldr r1, = 0x200
 293 01a0 4162     		str r1, [r0, # 0x24]
 294 01a2 7F49     		ldr r1, = 0x44000
 295 01a4 C160     		str r1, [r0, # 0x0c]
 296              	
 297 01a6 7F48     		ldr r0, = tou_fan_qie_huan
 298 01a8 7F49     		ldr r1, = 0x7fff
 299 01aa 0160     		str r1, [r0]
 300              	
 301              		
 302              	ting:
 303              	__wei_gou:
 304 01ac 6148     		ldr r0, = 0x40003000
 305 01ae 6449     	        ldr r1, = 0xaaaa
 306 01b0 0160     	        str r1, [r0]
 307              		
 308 01b2 7E48     		ldr r0, = jishu
 309 01b4 7E49     		ldr r1, = 0x50
 310 01b6 0268     		ldr r2, [r0]
 311 01b8 0132     		adds r2, r2, # 1
 312 01ba 0260     		str r2, [r0]
 313 01bc 8A42     		cmp r2, r1
 314 01be 03D1     		bne __xianshi
 315 01c0 0022     		movs r2, # 0
 316 01c2 0260     		str r2, [r0]
 317 01c4 00F033F8 		bl __kai_dma
 318              	__xianshi:
 319 01c8 00F027F8 		bl __an_jian
 320 01cc 0128     		cmp r0, # 1
 321 01ce 03D1     		bne __pan_duan_an_jian
 322 01d0 7848     		ldr r0, = zukangqiehuan
 323 01d2 0021     		movs r1, # 0
 324 01d4 0160     		str r1, [r0]
 325 01d6 04E0     		b __xian_shi_zu_kang
 326              	__pan_duan_an_jian:
 327 01d8 0228     		cmp r0, # 2
 328 01da 02D1     		bne __xian_shi_zu_kang
 329 01dc 7548     		ldr r0, = zukangqiehuan
 330 01de 0121     		movs r1, # 1
ARM GAS  1.s 			page 7


 331 01e0 0160     		str r1, [r0]
 332              	__xian_shi_zu_kang:
 333 01e2 7448     		ldr r0, = zukangqiehuan
 334 01e4 0068     		ldr r0, [r0]
 335 01e6 0128     		cmp r0, # 1
 336 01e8 01D1     		bne __xian_shi_dian_zu
 337              	__xian_shi_dian_kang:
 338 01ea 7348     		ldr r0, = diankang
 339 01ec 00E0     		b __xian_shi
 340              	__xian_shi_dian_zu:
 341 01ee 7348     		ldr r0, = dianzu
 342              	__xian_shi:
 343 01f0 0068     		ldr r0, [r0]
 344 01f2 0000     		movs r0, r0
 345 01f4 05D5     		bpl __shu_ma_guan_xian_shi
 346 01f6 C043     		mvns r0, r0
 347 01f8 0130     		adds r0, r0, # 1
 348 01fa 714B     		ldr r3, = fuhao
 349 01fc 0222     		movs r2, # 0x02
 350 01fe 1A60     		str r2, [r3]
 351 0200 02E0     		b __led_xian_shi
 352              	__shu_ma_guan_xian_shi:
 353 0202 6F4A     		ldr r2, = fuhao
 354 0204 0023     		movs r3, # 0
 355 0206 1360     		str r3, [r2]
 356              	__led_xian_shi:
 357 0208 0421     		movs r1, # 4
 358 020a 434A     	        ldr r2, = shumaguanma
 359 020c 0323     		movs r3, # 3		@小数点位置
 360 020e 00F075F9 	        bl _zhuanshumaguanma
 361 0212 0520     		movs r0, # 5
 362 0214 00F089F9 	        bl _xieshumaguan
 363 0218 C8E7     		b ting
 364              	__an_jian:
 365 021a 02B5     		push {r1,lr}
 366 021c 6948     		ldr r0, = 0x48000010
 367 021e 0268     		ldr r2, [r0]
 368 0220 1046     		mov r0, r2
 369 0222 1206     		lsls r2, r2, # 24
 370 0224 D20F     		lsrs r2, r2, # 31
 371 0226 8005     		lsls r0, r0, # 22
 372 0228 800F     		lsrs r0, r0, # 30
 373 022a 1043     		orrs r0, r0, r2
 374 022c 02BD     		pop {r1,pc}
 375              	__kai_dma:
 376 022e 07B5     		push {r0-r2,lr}
 377 0230 454A     		ldr r2, = 0x40012400
 378 0232 1121     		movs r1, # 0x11
 379 0234 9160     		str r1, [r2, # 0x08]
 380              	__deng_adc_wan:
 381 0236 9168     		ldr r1, [r2, # 0x08]
 382 0238 0129     		cmp r1, # 1
 383 023a FCD1     		bne __deng_adc_wan
 384 023c 4848     		ldr r0, = 0x40020000
 385 023e 0021     		movs r1, # 0
 386 0240 8160     		str r1, [r0, # 0x08]
 387 0242 4A49     		ldr r1, = 912
ARM GAS  1.s 			page 8


 388 0244 C160     		str r1, [r0, # 0x0c]
 389 0246 4A49     		ldr r1, = 0x583
 390 0248 8160     		str r1, [r0, # 0x08]
 391 024a 0521     		movs r1, # 0x05
 392 024c 9160     		str r1, [r2, # 0x08]
 393 024e 07BD     		pop {r0-r2,pc}
 394              	
 395              	__dft:
 396 0250 FFB5     		push {r0-r7,lr}
 397 0252 4046     		mov r0, r8
 398 0254 4946     		mov r1, r9
 399 0256 5246     		mov r2, r10
 400 0258 5B46     		mov r3, r11
 401 025a 6446     		mov r4, r12
 402 025c 1FB4     		push {r0-r4}
 403 025e 4248     	        ldr r0, = dianyabiao
 404 0260 0838     	        subs r0, r0, # 0x08
 405              	__zhao_shang_sheng2:
 406 0262 0830     	        adds r0, r0, # 0x08
 407 0264 8288     	        ldrh r2, [r0, # 0x04]
 408 0266 002A     	        cmp r2, # 0
 409 0268 FBD1     	        bne __zhao_shang_sheng2
 410 026a 8389     	        ldrh r3, [r0, # 0x0c]
 411 026c D21A     	        subs r2, r2, r3
 412 026e F8D5     		bpl __zhao_shang_sheng2
 413 0270 5549     		ldr r1, = xuanzhuanyinzi
 414 0272 0122     		movs r2, # 1
 415 0274 9202     		lsls r2, r2, # 10
 416 0276 9046     		mov r8, r2
 417 0278 0023     		movs r3, # 0
 418 027a 9B46     		mov r11, r3	
 419 027c 9C46     		mov r12, r3
 420 027e 9A46     		mov r10, r3
 421 0280 9946     		mov r9, r3
 422              	__dft_xun_huan:
 423 0282 C458     		ldr r4, [r0, r3]
 424 0284 CA58     		ldr r2, [r1, r3]	@r
 425 0286 04B4     		push {r2}
 426 0288 0433     		adds r3, r3, # 4
 427 028a C558     		ldr r5, [r0, r3]
 428 028c CA58     		ldr r2, [r1, r3]
 429 028e 0433     		adds r3, r3, # 4
 430 0290 2646     		mov r6, r4
 431 0292 2F46     		mov r7, r5
 432 0294 2404     		lsls r4, r4, # 16
 433 0296 240C     		lsrs r4, r4, # 16
 434 0298 360C     		lsrs r6, r6, # 16
 435 029a 2D04     		lsls r5, r5, # 16
 436 029c 2D0C     		lsrs r5, r5, # 16
 437 029e 3F0C     		lsrs r7, r7, # 16
 438 02a0 A41B     		subs r4, r4, r6
 439 02a2 ED1B     		subs r5, r5, r7
 440 02a4 2646     		mov r6, r4
 441 02a6 2F46     		mov r7, r5
 442 02a8 5443     		muls r4, r4, r2		@i
 443 02aa 5543     		muls r5, r5, r2		@i
 444 02ac E413     		asrs r4, r4, # 15
ARM GAS  1.s 			page 9


 445 02ae ED13     		asrs r5, r5, # 15
 446 02b0 4A46     		mov r2, r9
 447 02b2 1219     		adds r2, r2, r4
 448 02b4 9146     		mov r9, r2
 449 02b6 5246     		mov r2, r10
 450 02b8 5219     		adds r2, r2, r5
 451 02ba 9246     		mov r10, r2
 452 02bc 04BC     		pop {r2}
 453 02be 5643     		muls r6, r6, r2		@r
 454 02c0 5743     		muls r7, r7, r2		@r
 455 02c2 F613     		asrs r6, r6, # 15
 456 02c4 FF13     		asrs r7, r7, # 15
 457 02c6 5A46     		mov r2, r11		@r
 458 02c8 9219     		adds r2, r2, r6
 459 02ca 9346     		mov r11, r2
 460 02cc 6246     		mov r2, r12
 461 02ce D219     		adds r2, r2, r7
 462 02d0 9446     		mov r12, r2
 463 02d2 4345     		cmp r3, r8
 464 02d4 D5D1     		bne __dft_xun_huan
 465 02d6 3D48     		ldr r0, = fan_she_shi_bu
 466 02d8 3D49     		ldr r1, = fan_she_xu_bu
 467 02da 4A46     		mov r2, r9
 468 02dc 5346     		mov r3, r10
 469 02de 5C46     		mov r4, r11
 470 02e0 6546     		mov r5, r12
 471 02e2 9211     		asrs r2, r2, # 6
 472 02e4 9B11     		asrs r3, r3, # 6
 473 02e6 A411     		asrs r4, r4, # 6
 474 02e8 AD11     		asrs r5, r5, # 6
 475 02ea 0260     		str r2, [r0]		@r
 476 02ec 4360     		str r3, [r0, # 0x04]	@r
 477 02ee 0C60     		str r4, [r1]		@i
 478 02f0 4D60     		str r5, [r1, # 0x04]	@i
 479              	__dft_fan_hui:	
 480 02f2 1FBC     		pop {r0-r4}
 481 02f4 8046     		mov r8, r0
 482 02f6 8946     		mov r9, r1
 483 02f8 9246     		mov r10, r2
 484 02fa 9B46     		mov r11, r3
 485 02fc A446     		mov r12, r4
 486 02fe FFBD     		pop {r0-r7,pc}
 487 0300 00200240 		.ltorg
 487      00100240 
 487      01000100 
 487      02001500 
 487      00000101 
 488              	__zu_kang_ji_suan:
 489 03d4 F0B5     		push {r4-r7,lr}
 490              		@入口R0=反射实部 R1=反射虚部,R2=入射实部 R3=入射虚部
 491              		@出口R1=电抗 R2=电阻
 492              	__ji_suan_zu_kang:
 493              		@ Z=50*[(a+bi)/(c+di)]=50*[(ac+bd)/(c*c+d*d)+(bc-ad)/(c*c+d*d)]
 494 03d6 0446     		mov r4, r0
 495 03d8 0D46     		mov r5, r1
 496 03da 1646     		mov r6, r2
 497 03dc 1F46     		mov r7, r3
ARM GAS  1.s 			page 10


 498 03de 5043     		muls r0, r0, r2		@ac
 499 03e0 5943     		muls r1, r1, r3		@bd
 500 03e2 4018     		adds r0, r0, r1		@ac+bd
 501 03e4 5243     		muls r2, r2, r2		@c*c
 502 03e6 5B43     		muls r3, r3, r3		@d*d
 503 03e8 D218     		adds r2, r2, r3		@c*c+d*d
 504 03ea B449     		ldr r1, = 1000
 505 03ec 0023     		movs r3, # 0
 506 03ee 0000     		movs r0, r0
 507 03f0 02D5     		bpl a1
 508 03f2 C043     		mvns r0, r0
 509 03f4 0130     		adds r0, r0, # 1
 510 03f6 0133     		adds r3, r3, # 1
 511              	a1:
 512 03f8 1200     		movs r2, r2
 513 03fa 02D5     		bpl a2
 514 03fc D243     		mvns r2, r2
 515 03fe 0132     		adds r2, r2, # 1
 516 0400 0133     		adds r3, r3, # 1
 517              	a2:
 518 0402 00F044F8 		bl __chengfa
 519 0406 00F01EF8 		bl __chufa64		@(ac+bd)/(c*c+d*d)
 520 040a 012B     		cmp r3, # 1
 521 040c 01D1     		bne a3
 522 040e C943     		mvns r1, r1
 523 0410 0131     		adds r1, r1, # 1
 524              	a3:	
 525 0412 02B4     		push {r1}
 526 0414 7543     		muls r5, r5, r6		@ bc
 527 0416 7C43     		muls r4, r4, r7		@ ad
 528 0418 2D1B     		subs r5, r5, r4		@ bc-ad
 529 041a A849     		ldr r1, = 1000
 530 041c 0023     		movs r3, # 0
 531 041e 2800     		movs r0, r5
 532 0420 02D5     		bpl a4
 533 0422 C043     		mvns r0, r0
 534 0424 0130     		adds r0, r0, # 1
 535 0426 0133     		adds r3, r3, # 1
 536              	a4:
 537 0428 1200     		movs r2, r2
 538 042a 02D5     		bpl a5
 539 042c D243     		mvns r2, r2
 540 042e 0132     		adds r2, r2, # 1
 541 0430 0133     		adds r3, r3, # 1
 542              	a5:
 543 0432 00F02CF8 		bl __chengfa
 544 0436 00F006F8 		bl __chufa64
 545 043a 012B     		cmp r3, # 1
 546 043c 01D1     		bne __a6
 547 043e C943     		mvns r1, r1
 548 0440 0131     		adds r1, r1, # 1	@虚部
 549              	__a6:	
 550 0442 04BC     		pop {r2}		@实
 551 0444 F0BD     		pop {r4-r7,pc}	
 552              		
 553              	__chufa64:
 554              	        @64位除32位
ARM GAS  1.s 			page 11


 555              	        @ （R0=高32位R1=低32位）除（R2)= （R0高32）（R1低32）
 556 0446 F8B5     	        push {r3-r7,lr}
 557 0448 002A     	        cmp r2, # 0
 558 044a 1DD0     	        beq __chu_fa64_fan_hui0
 559 044c 0029     	        cmp r1, # 0
 560 044e 01D1     	        bne __chu_fa64_ji_suan
 561 0450 0028     	        cmp r0, # 0
 562 0452 19D0     	        beq __chu_fa64_fan_hui0
 563              	__chu_fa64_ji_suan:	
 564 0454 0024     	        movs r4, # 0
 565 0456 2746     	        mov r7, r4
 566 0458 2346     	        mov r3, r4
 567 045a 2546     	        mov r5, r4
 568 045c 0126     	        movs r6, # 1
 569 045e F607     	        lsls r6, r6, # 31
 570              	__chu_fa64_xun_huan:
 571 0460 4900     	        lsls r1, r1, # 1
 572 0462 4041     	        adcs r0, r0, r0
 573 0464 6441     	        adcs r4, r4, r4
 574 0466 9442     	        cmp r4, r2
 575 0468 02D3     	        bcc __chu_fa_yi_wei
 576 046a 9B19     	        adds r3, r3, r6
 577 046c 7D41     	        adcs r5, r5, r7
 578 046e A41A     	        subs r4, r4, r2
 579              	__chu_fa_yi_wei:
 580 0470 3600     	        movs r6, r6
 581 0472 04D0     	        beq __di_yi_wei
 582 0474 7608     	        lsrs r6, r6, # 1        @高32位移位
 583 0476 F3D1     	        bne __chu_fa64_xun_huan
 584 0478 0127     	        movs r7, # 1
 585 047a FF07     	        lsls r7, r7, # 31
 586 047c F0E7     	        b __chu_fa64_xun_huan
 587              	__di_yi_wei:            @低32位移位
 588 047e 7F08     		lsrs r7, r7, # 1
 589 0480 EED1     	        bne __chu_fa64_xun_huan
 590 0482 1846     	        mov r0, r3
 591 0484 2946     	        mov r1, r5
 592 0486 F8BD     	        pop {r3-r7,pc}
 593              	__chu_fa64_fan_hui0:
 594 0488 0020     		movs r0, # 0
 595 048a 0021     		movs r1, # 0
 596 048c F8BD     		pop {r3-r7,pc}
 597              	__chengfa:
 598              	        @入R0 乘以 R1
 599              	        @出 R0高32 ， R1低32
 600              		@0xffffffff*0xffffffff
 601              	        @4        F F F E 0 0 0 1
 602              	        @3                F F F E 0 0 0 1
 603              	        @2                F F F E 0 0 0 1
 604              	        @1                        F F F E 0 0 0 1
 605              	        @         F F F F F F F E 0 0 0 0 0 0 0 1
 606 048e FCB5     		push {r2-r7,lr}
 607 0490 0028     	        cmp r0, # 0
 608 0492 1CD0     	        beq __cheng_fa_fan_hui
 609 0494 0029     	        cmp r1, # 0
 610 0496 1AD0     	        beq __cheng_fa_fan_hui
 611              	__ji_suan_cheng_fa:	
ARM GAS  1.s 			page 12


 612 0498 0246     		mov r2, r0
 613 049a 0B46     		mov r3, r1
 614 049c 000C     		lsrs r0, r0, # 16	@高16
 615 049e 1204     		lsls r2, r2, # 16	@ 低16
 616 04a0 120C     		lsrs r2, r2, # 16
 617 04a2 090C     	        lsrs r1, r1, # 16	@高16
 618 04a4 1B04     		lsls r3, r3, # 16	@低16
 619 04a6 1B0C     		lsrs r3, r3, # 16
 620 04a8 1446     		mov r4, r2		
 621 04aa 0546     		mov r5, r0		
 622 04ac 5A43     		muls r2, r2, r3		@1
 623 04ae 5843     		muls r0, r0, r3		@2
 624 04b0 4C43     		muls r4, r4, r1		@3
 625 04b2 4D43     		muls r5, r5, r1		@4
 626 04b4 0646     		mov r6, r0		@2
 627 04b6 2746     		mov r7, r4		@3
 628 04b8 0004     		lsls r0, r0, # 16	@2低
 629 04ba 2404     		lsls r4, r4, # 16	@3低
 630 04bc 360C     		lsrs r6, r6, # 16	@2高
 631 04be 3F0C     		lsrs r7, r7, # 16	@3高
 632 04c0 1218     		adds r2, r2, r0
 633 04c2 6241     		adcs r2, r2, r4
 634 04c4 7541     		adcs r5, r5, r6
 635 04c6 7D41     		adcs r5, r5, r7
 636 04c8 2846     		mov r0, r5
 637 04ca 1146     		mov r1, r2
 638 04cc FCBD     		pop {r2-r7,pc}
 639              	__cheng_fa_fan_hui:
 640 04ce 0020     		movs r0, # 0
 641 04d0 0021     		movs r1, # 0
 642 04d2 FCBD     		pop {r2-r7,pc}
 643              	_lvboqi:
 644              				@滤波器
 645              				@R0=地址，R1=长度,r2=表指针地址,r3=ADC数值
 646              				@出R0=结果
 647 04d4 FEB5     		push {r1-r7,lr}	
 648 04d6 1568     		ldr r5, [r2]		@读出表指针
 649 04d8 8E00     		lsls r6, r1, # 2	
 650 04da 4351     		str r3, [r0, r5]	@数值写到滤波器缓冲区
 651 04dc 0435     		adds r5, r5, # 4
 652 04de B542     		cmp r5, r6
 653 04e0 00D1     		bne _lvboqimeidaohuanchongquding
 654 04e2 0025     		movs r5, # 0
 655              	_lvboqimeidaohuanchongquding:
 656 04e4 1560     		str r5, [r2]
 657 04e6 0027     		movs r7, # 0
 658              	_lvboqixunhuan:
 659 04e8 B542     		cmp r5, r6
 660 04ea 00D1     		bne _lvbozonghe
 661 04ec 0025     		movs r5, # 0
 662              	_lvbozonghe:
 663 04ee 4459     		ldr r4, [r0, r5]
 664 04f0 0435     		adds r5, r5, # 4
 665 04f2 3F19     		adds r7, r7, r4
 666 04f4 0139     		subs r1, r1, # 1
 667 04f6 F7D1     		bne _lvboqixunhuan
 668 04f8 F810     		asrs r0, r7, # 3	@修改
ARM GAS  1.s 			page 13


 669 04fa FEBD     		pop {r1-r7,pc}
 670              	
 671              	_zhuanshumaguanma:@ 16进制转数码管码
 672              		@ R0要转的数据， R1长度，R2结果表首地址
 673              		@ r3 小数点位置
 674 04fc F0B5     		push {r4-r7,lr}
 675 04fe 704F     		ldr r7, = shumaguanmabiao
 676 0500 0546     		mov r5, r0
 677 0502 0E46     		mov r6, r1
 678 0504 0A21     		movs r1, # 10
 679 0506 9846     		mov r8, r3
 680              	_xunhuanqiuma:
 681 0508 00F047F8 		bl _chufa
 682 050c 0446     		mov r4, r0
 683 050e 4C43     		muls r4, r1
 684 0510 2B1B     		subs r3, r5, r4
 685 0512 9B00     		lsls r3, # 2
 686 0514 FC58     		ldr r4, [r7, r3]
 687 0516 4645     		cmp r6, r8
 688 0518 00D0     		beq __tian_jia_xiao_shu_dian
 689 051a 00E0     		b __bao_cun_shu_ma_guan_ma
 690              	__tian_jia_xiao_shu_dian:
 691 051c 0134     		adds r4, r4, # 1
 692              	__bao_cun_shu_ma_guan_ma:	
 693 051e 1460     		str r4, [r2]
 694 0520 0546     		mov r5, r0
 695 0522 0432     		adds r2, r2, # 4
 696 0524 013E     		subs r6, # 1
 697 0526 EFD1     		bne _xunhuanqiuma
 698 0528 F0BD     		pop {r4-r7,pc}
 699              	_xieshumaguan: @ r0=位数 @数码管码
 700 052a FEB5     		push {r1-r7,lr}
 701 052c 8000     		lsls r0, r0, # 2
 702 052e 0027     		movs r7, # 0
 703 0530 0646     		mov r6, r0
 704 0532 6449     		ldr r1, = tou_fan_qie_huan
 705 0534 644D     		ldr r5, = shumaguanma
 706 0536 0968     		ldr r1, [r1]
 707 0538 644A     		ldr r2, = shumaguanshuaxinbiao
 708              	_shumaguanshuaxin:
 709 053a EB59     		ldr r3, [r5, r7]
 710 053c D459     		ldr r4, [r2, r7]
 711 053e 1C43     		orrs r4, r4, r3
 712 0540 0C40     		ands r4, r4, r1
 713 0542 2046     		mov r0, r4
 714 0544 00F004F8 		bl _xie595
 715 0548 0437     		adds  r7, r7, # 4
 716 054a B742     		cmp r7, r6
 717 054c F5D9     		bls _shumaguanshuaxin
 718 054e FEBD     		pop {r1-r7,pc}
 719              		
 720              	_xie595: @ R0=要写的数据
 721 0550 FEB5     		push {r1-r7,lr}
 722 0552 0546     		mov r5, r0
 723 0554 0820     		movs r0, # 0x08      @pa6
 724 0556 1027     		movs r7, # 0x10      @pa7
 725 0558 0426     		movs r6, # 0x04      @pa5 
ARM GAS  1.s 			page 14


 726 055a 1023     		movs r3, # 16   @16位
 727 055c 5C4A     		ldr r2, = 0x48000000 @ gpioa
 728 055e 0121     		movs r1, # 0x01
 729              	_xunhuan595:
 730 0560 9761     		str r7, [r2, # 0x18]
 731 0562 00F014F8 		bl _yanshi
 732 0566 0D42     		tst r5, r1
 733 0568 01D1     		bne _xie595_0
 734 056a 9062     		str r0, [r2, # 0x28]
 735 056c 00E0     		b _suocun595
 736              	_xie595_0:
 737 056e 9061     		str r0, [r2, # 0x18]
 738              	_suocun595:
 739 0570 00F00DF8 		bl _yanshi
 740 0574 6D08     		lsrs r5, # 1
 741 0576 9762     		str r7, [r2, # 0x28]
 742 0578 00F009F8 		bl _yanshi
 743 057c 013B     		subs r3, r3, # 1
 744 057e EFD1     		bne _xunhuan595
 745 0580 9661     		str r6, [r2, # 0x18]
 746 0582 00F004F8 		bl _yanshi
 747 0586 9662     		str r6, [r2, # 0x28]
 748 0588 00F001F8 		bl _yanshi
 749 058c FEBD     		pop {r1-r7,pc}
 750              	
 751              	
 752              	_yanshi:
 753 058e 80B4     		push {r7}
 754 0590 504F     		ldr r7, = 30
 755              	_yanshi11:
 756 0592 013F     		subs r7, # 1
 757 0594 FDD1     		bne _yanshi11
 758 0596 80BC     		pop {r7}
 759 0598 7047     		bx lr
 760              	
 761              	_chufa:				@软件除法
 762              		@ r0 除以 r1 等于 商(r0)余数R1
 763 059a 1EB5     		push {r1-r4,lr}
 764 059c 0028     		cmp r0, # 0
 765 059e 0ED0     		beq _chufafanhui
 766 05a0 0029     		cmp r1, # 0
 767 05a2 0CD0     		beq _chufafanhui
 768 05a4 0246     		mov r2, r0
 769 05a6 0123     		movs r3, # 1
 770 05a8 DB07     		lsls r3, r3, # 31
 771 05aa 0020     		movs r0, # 0
 772 05ac 0446     		mov r4, r0
 773              	_chufaxunhuan:
 774 05ae 5200     		lsls r2, r2, # 1
 775 05b0 6441     		adcs r4, r4, r4
 776 05b2 8C42     		cmp r4, r1
 777 05b4 01D3     		bcc _chufaweishubudao0
 778 05b6 C018     		adds r0, r0, r3
 779 05b8 641A     		subs r4, r4, r1
 780              	_chufaweishubudao0:
 781 05ba 5B08     		lsrs r3, r3, # 1
 782 05bc F7D1     		bne _chufaxunhuan
ARM GAS  1.s 			page 15


 783              	_chufafanhui:
 784 05be 1EBD     		pop {r1-r4,pc}
 785              	__chu_fa:	@带符号
 786 05c0 FEB5     		push {r1-r7,lr}
 787 05c2 0028     	        cmp r0, # 0
 788 05c4 1DD0     	        beq _chufafanhui1
 789 05c6 0029     	        cmp r1, # 0
 790 05c8 1BD0     	        beq _chufafanhui1
 791 05ca 0025     		movs r5, # 0
 792 05cc 0000     		movs r0, r0
 793 05ce 02D5     		bpl __pan_duan_bei_chu_shu
 794 05d0 0135     		adds r5, r5, # 1
 795 05d2 C043     		mvns r0, r0
 796 05d4 0130     		adds r0, r0, # 1
 797              	__pan_duan_bei_chu_shu:
 798 05d6 0900     		movs r1, r1
 799 05d8 02D5     		bpl __ji_suan_chu_fa11
 800 05da 0135     		adds r5, r5, # 1
 801 05dc C943     		mvns r1, r1
 802 05de 0131     		adds r1, r1, # 1
 803              	__ji_suan_chu_fa11:	
 804 05e0 0246     	        mov r2, r0
 805 05e2 0123     	        movs r3, # 1
 806 05e4 DB07     	        lsls r3, r3, # 31
 807 05e6 0020     	        movs r0, # 0
 808 05e8 0446     	        mov r4, r0
 809              	_chufaxunhuan1:
 810 05ea 5200     	        lsls r2, r2, # 1
 811 05ec 6441     	        adcs r4, r4, r4
 812 05ee 8C42     	        cmp r4, r1
 813 05f0 01D3     		bcc _chufaweishubudao00
 814 05f2 C018     		adds r0, r0, r3
 815 05f4 641A     		subs r4, r4, r1
 816              	_chufaweishubudao00:
 817 05f6 5B08     		lsrs r3, r3, # 1
 818 05f8 F7D1     		bne _chufaxunhuan1
 819 05fa 012D     		cmp r5, # 1
 820 05fc 01D1     		bne _chufafanhui1
 821 05fe C043     		mvns r0, r0
 822 0600 0130     		adds r0, r0, # 1
 823              	_chufafanhui1:
 824 0602 FEBD     		pop {r1-r7,pc}
 825              	__he_cheng_dian_ya_biao:
 826 0604 3FB5     		push {r0-r5,lr}
 827 0606 3448     	        ldr r0, = dianyabiao
 828 0608 0838     		subs r0, r0, # 0x08
 829              	__zhao_shang_sheng:
 830 060a 0830     		adds r0, r0, # 0x08
 831 060c 8288     		ldrh r2, [r0, # 0x04]
 832 060e 002A     		cmp r2, # 0
 833 0610 FBD1     		bne __zhao_shang_sheng
 834 0612 8389     		ldrh r3, [r0, # 0x0c]
 835 0614 D21A     		subs r2, r2, r3
 836 0616 F8D5     		bpl __zhao_shang_sheng
 837 0618 3049     		ldr r1, = dianyabiaozhizhen
 838 061a 0860     		str r0, [r1]
 839 061c 3049     	        ldr r1, = 256
ARM GAS  1.s 			page 16


 840 061e 8900     	        lsls r1, r1, # 2
 841 0620 0022     	        movs r2, # 0
 842              	__fu_zhi_xun_huan:
 843 0622 8358     	        ldr r3, [r0, r2]
 844 0624 1C46     	        mov r4, r3
 845 0626 1B04     	        lsls r3, r3, # 16
 846 0628 1B0C     	        lsrs r3, r3, # 16
 847 062a 240C     	        lsrs r4, r4, # 16
 848 062c 1B1B     		subs r3, r3, r4
 849 062e 06D5     	        bpl __bao_cun
 850 0630 DB43     	        mvns r3, r3
 851 0632 0133     	        adds r3, r3, # 1
 852 0634 00F024F8 	        bl __zhuan_bcd
 853 0638 2A4C     	        ldr r4, = 0x80000000
 854 063a 2343     	        orrs r3, r3, r4
 855 063c 01E0     	        b __fu_shu_bao_cun
 856              	__bao_cun:
 857 063e 00F01FF8 		bl __zhuan_bcd
 858              	__fu_shu_bao_cun:
 859 0642 8350     	        str r3, [r0, r2]
 860 0644 0432     		adds r2, r2, # 4
 861 0646 8A42     		cmp r2, r1
 862 0648 EBD1     	        bne __fu_zhi_xun_huan
 863 064a 3FBD     		pop {r0-r5,pc}
 864              	__jian_bo:
 865 064c 3FB5     	       push {r0-r5,lr}
 866 064e 2248     	        ldr r0, = dianyabiao
 867 0650 0838     	        subs r0, r0, # 0x08
 868              	__zhao_shang_sheng1:
 869 0652 0830     	        adds r0, r0, # 0x08
 870 0654 8288     		ldrh r2, [r0, # 0x04]
 871 0656 002A     		cmp r2, # 0
 872 0658 FBD1     	        bne __zhao_shang_sheng1
 873 065a 8389     		ldrh r3, [r0, # 0x0c]
 874 065c D21A     	        subs r2, r2, r3
 875 065e F8D5     	        bpl __zhao_shang_sheng1
 876 0660 1E49     	        ldr r1, = dianyabiaozhizhen
 877 0662 0860     	        str r0, [r1]
 878 0664 1E49     	        ldr r1, = 256
 879 0666 8900     	        lsls r1, r1, # 2
 880 0668 0022     	        movs r2, # 0
 881              	__fu_zhi_xun_huan1:
 882 066a 8358     	        ldr r3, [r0, r2]
 883 066c 1C46     	        mov r4, r3
 884 066e 1B04     	        lsls r3, r3, # 16
 885 0670 1B0C     	        lsrs r3, r3, # 16
 886 0672 240C     	        lsrs r4, r4, # 16
 887 0674 1B1B     	        subs r3, r3, r4
 888 0676 8350     	        str r3, [r0, r2]
 889 0678 0432     		adds r2, r2, # 4
 890 067a 8A42     		cmp r2, r1
 891 067c F5D1     	        bne __fu_zhi_xun_huan1
 892 067e 3FBD     		pop {r0-r5,pc}
 893              	
 894              	__zhuan_bcd:
 895 0680 F7B5     		push {r0-r2,r4-r7,lr}
 896 0682 0A21     		movs r1, # 10
ARM GAS  1.s 			page 17


 897 0684 1846     		mov r0, r3
 898 0686 1D46     		mov r5, r3
 899 0688 0826     		movs r6, # 8
 900              	__bcd_xun_huan:
 901 068a FFF786FF 		bl _chufa
 902 068e 0446     		mov r4, r0
 903 0690 4C43     		muls r4, r4, r1
 904 0692 2D1B     		subs r5, r5, r4
 905 0694 20B4     		push {r5}
 906 0696 0546     		mov r5, r0
 907 0698 013E     		subs r6, r6, # 1
 908 069a F6D1     		bne __bcd_xun_huan
 909 069c FFBC     		pop {r0-r7}
 910 069e 3601     		lsls r6, r6, # 4
 911 06a0 2D02     		lsls r5, r5, # 8
 912 06a2 2403     		lsls r4, r4, # 12
 913 06a4 1B04     		lsls r3, r3, # 16
 914 06a6 1205     		lsls r2, r2, # 20
 915 06a8 0906     		lsls r1, r1, # 24
 916 06aa 0007     		lsls r0, r0, # 28
 917 06ac 0343     		orrs r3, r3, r0
 918 06ae 0B43     		orrs r3, r3, r1
 919 06b0 1343     		orrs r3, r3, r2
 920 06b2 2343     		orrs r3, r3, r4
 921 06b4 2B43     		orrs r3, r3, r5
 922 06b6 3343     		orrs r3, r3, r6
 923 06b8 3B43     		orrs r3, r3, r7
 924 06ba F7BD     		pop {r0-r2,r4-r7,pc}
 925 06bc E8030000 		.ltorg
 925      00000000 
 925      F4010020 
 925      00000020 
 925      28000000 
 926              	_nmi_handler:
 927 06e8 7047     		bx lr
 928              	_hard_fault:
 929 06ea 7047     		bx lr
 930              	_svc_handler:
 931 06ec 7047     		bx lr
 932              	_pendsv_handler:
 933 06ee 7047     		bx lr
 934              	aaa:
 935 06f0 7047     		bx lr
 936              	_tim3:
 937 06f2 2548     		ldr r0, = jishu2
 938 06f4 0168     		ldr r1, [r0]
 939 06f6 0131     		adds r1, r1, #1
 940 06f8 0160     		str r1, [r0]
 941              	_tim3fanhui:
 942 06fa 2448     		ldr r0, = 0x40000400
 943 06fc 0021     		movs r1, # 0
 944 06fe 0161     		str r1, [r0, # 0x10]
 945 0700 7047     		bx lr
 946              	_systickzhongduan:
 947 0702 2348     		ldr r0, = 0x40020000
 948 0704 2349     	        ldr r1, =  86
 949 0706 C160     	        str r1, [r0, # 0x0c]
ARM GAS  1.s 			page 18


 950 0708 2349     	        ldr r1, = 0xa83 @ 0xaa3 @ 5a1
 951 070a 8160     	        str r1, [r0, # 0x08]
 952              	
 953              		
 954 070c 2348     		ldr r0, = 0xe0000d04
 955 070e 2449     		ldr r1, = 0x02000000
 956 0710 0160     		str r1, [r0]                 @ 清除SYSTICK中断
 957 0712 7047     		bx lr
 958              	__dma_wan:
 959 0714 FFB5     		push {r0-r7,lr}
 960 0716 FFF79BFD 		bl __dft
 961 071a 2248     		ldr r0, = fan_she_shi_bu
 962 071c 2249     		ldr r1, = fan_she_xu_bu
 963 071e 234A     		ldr r2, = ru_she_shi_bu
 964 0720 234B     		ldr r3, = ru_she_xu_bu
 965 0722 0068     		ldr r0, [r0]
 966 0724 0968     		ldr r1, [r1]
 967 0726 1268     		ldr r2, [r2]
 968 0728 1B68     		ldr r3, [r3]
 969 072a FFF753FE 		bl __zu_kang_ji_suan
 970 072e 2148     		ldr r0, = p_shibu
 971 0730 214B     		ldr r3, = p_xubu
 972 0732 0260     		str r2, [r0]
 973 0734 1960     		str r1, [r3]
 974              		
 975 0736 1400     		movs r4, r2
 976 0738 0D00     		movs r5, r1
 977 073a 2048     		ldr r0, = 1000
 978 073c 0021     		movs r1, # 0
 979 073e 0246     		mov r2, r0
 980 0740 0023     		movs r3, # 0
 981              	
 982 0742 0019     		adds r0, r0, r4
 983 0744 4919     		adds r1, r1, r5
 984 0746 121B     		subs r2, r2, r4
 985 0748 5B1B     		subs r3, r3, r5
 986 074a FFF743FE 		bl __zu_kang_ji_suan
 987 074e 1C4B     		ldr r3, = 0x4000
 988 0750 5943     		muls r1, r1, r3
 989 0752 5343     		muls r3, r3, r2
 990 0754 C913     		asrs r1, r1, # 15
 991 0756 DB13     		asrs r3, r3, # 15
 992 0758 0D46     		mov r5, r1
 993 075a 1A48     		ldr r0, = lvboqihuanchong
 994 075c 1A49     		ldr r1, = 8
 995 075e 1B4A     		ldr r2, = lvboqizhizhen
 996 0760 FFF7B8FE 		bl _lvboqi
 997 0764 1A4A     		ldr r2, = dianzu
 998 0766 1060     		str r0, [r2]
 999 0768 2B46     		mov r3, r5
 1000 076a 1A48     	        ldr r0, = lvboqihuanchong1
 1001 076c 1649     	        ldr r1, = 8
 1002 076e 1A4A     	        ldr r2, = lvboqizhizhen1
 1003 0770 FFF7B0FE 	        bl _lvboqi
 1004 0774 194A     	        ldr r2, = diankang
 1005 0776 1060     	        str r0, [r2]
 1006              	
ARM GAS  1.s 			page 19


 1007 0778 0548     		ldr r0, = 0x40020000
 1008 077a 0222     	        movs r2, # 2
 1009 077c 4260     		str r2, [r0, # 0x04]
 1010 077e 1848     		ldr r0, = dianyabiaoman
 1011 0780 0121     		movs r1, # 1
 1012 0782 0160     		str r1, [r0]
 1013              	__dma_fan_hui:
 1014 0784 FFBD0000 		pop {r0-r7,pc}
 1014      F8000020 
 1014      00040040 
 1014      00000240 
 1014      56000000 
ARM GAS  1.s 			page 20


DEFINED SYMBOLS
                 1.s:9      .data:0000000000000000 $d
                 1.s:10     .data:0000000000000000 shumaguanmabiao
                 1.s:12     .data:0000000000000028 shumaguanshuaxinbiao
                 1.s:14     .data:000000000000004c xuanzhuanyinzi
                 1.s:16     .data:000000000000044c yjmwxwx
                 1.s:17     *ABS*:0000000020001000 STACKINIT
                 1.s:18     *ABS*:0000000020000000 shumaguanma
                 1.s:19     *ABS*:0000000020000010 fuhao
                 1.s:20     *ABS*:00000000200000f4 dmawan
                 1.s:21     *ABS*:00000000200000f8 jishu2
                 1.s:22     *ABS*:00000000200000fc jishu
                 1.s:23     *ABS*:0000000020000120 fan_she_shi_bu
                 1.s:24     *ABS*:0000000020000124 ru_she_shi_bu
                 1.s:25     *ABS*:0000000020000128 fan_she_xu_bu
                 1.s:26     *ABS*:000000002000012c ru_she_xu_bu
                 1.s:27     *ABS*:0000000020000130 p_shibu
                 1.s:28     *ABS*:0000000020000134 p_xubu
                 1.s:29     *ABS*:0000000020000138 swrshibu
                 1.s:30     *ABS*:000000002000013c swrxubu
                 1.s:31     *ABS*:0000000020000140 dianzu
                 1.s:32     *ABS*:0000000020000144 diankang
                 1.s:33     *ABS*:0000000020000148 zukangqiehuan
                 1.s:34     *ABS*:0000000020000a00 lvboqizhizhen
                 1.s:35     *ABS*:0000000020000a04 lvboqihuanchong
                 1.s:36     *ABS*:0000000020000a30 lvboqizhizhen1
                 1.s:37     *ABS*:0000000020000a34 lvboqihuanchong1
                 1.s:38     *ABS*:00000000200001f4 tou_fan_qie_huan
                 1.s:39     *ABS*:00000000200001f8 dianyabiaozhizhen
                 1.s:40     *ABS*:00000000200001fc dianyabiaoman
                 1.s:41     *ABS*:0000000020000200 dianyabiao
                 1.s:43     .text:0000000000000000 vectors
                 1.s:90     .text:00000000000000b0 _start
                 1.s:926    .text:00000000000006e8 _nmi_handler
                 1.s:928    .text:00000000000006ea _hard_fault
                 1.s:930    .text:00000000000006ec _svc_handler
                 1.s:932    .text:00000000000006ee _pendsv_handler
                 1.s:946    .text:0000000000000702 _systickzhongduan
                 1.s:934    .text:00000000000006f0 aaa
                 1.s:958    .text:0000000000000714 __dma_wan
                 1.s:936    .text:00000000000006f2 _tim3
                            .text:0000000000000000 $d
                 1.s:88     .text:00000000000000b0 $t
                 1.s:91     .text:00000000000000b0 shizhong
                 1.s:98     .text:00000000000000bc denghse
                 1.s:102    .text:00000000000000c2 dengpllguan
                 1.s:114    .text:00000000000000d6 dengpll
                 1.s:122    .text:00000000000000e0 neicunqingling
                 1.s:126    .text:00000000000000e6 neicunqinglingxunhuan
                 1.s:131    .text:00000000000000ec _waisheshizhong
                 1.s:148    .text:00000000000000fa _waishezhongduan
                 1.s:158    .text:0000000000000100 _kanmengou
                 1.s:171    .text:0000000000000116 _adcchushihua
                 1.s:175    .text:000000000000011c _dengadcjiaozhun
                 1.s:179    .text:0000000000000122 _kaiadc
                 1.s:185    .text:000000000000012c _deng_adc_wen_ding
                 1.s:189    .text:0000000000000132 _tongdaoxuanze
ARM GAS  1.s 			page 21


                 1.s:203    .text:000000000000014a dmachushihua
                 1.s:225    .text:000000000000015c tim1chushiha
                 1.s:240    .text:0000000000000178 tim3chushihua
                 1.s:268    .text:0000000000000198 io_she_zhi
                 1.s:302    .text:00000000000001ac ting
                 1.s:303    .text:00000000000001ac __wei_gou
                 1.s:318    .text:00000000000001c8 __xianshi
                 1.s:375    .text:000000000000022e __kai_dma
                 1.s:364    .text:000000000000021a __an_jian
                 1.s:326    .text:00000000000001d8 __pan_duan_an_jian
                 1.s:332    .text:00000000000001e2 __xian_shi_zu_kang
                 1.s:340    .text:00000000000001ee __xian_shi_dian_zu
                 1.s:337    .text:00000000000001ea __xian_shi_dian_kang
                 1.s:342    .text:00000000000001f0 __xian_shi
                 1.s:352    .text:0000000000000202 __shu_ma_guan_xian_shi
                 1.s:356    .text:0000000000000208 __led_xian_shi
                 1.s:671    .text:00000000000004fc _zhuanshumaguanma
                 1.s:699    .text:000000000000052a _xieshumaguan
                 1.s:380    .text:0000000000000236 __deng_adc_wan
                 1.s:395    .text:0000000000000250 __dft
                 1.s:405    .text:0000000000000262 __zhao_shang_sheng2
                 1.s:422    .text:0000000000000282 __dft_xun_huan
                 1.s:479    .text:00000000000002f2 __dft_fan_hui
                 1.s:487    .text:0000000000000300 $d
                 1.s:488    .text:00000000000003d4 __zu_kang_ji_suan
                 1.s:489    .text:00000000000003d4 $t
                 1.s:492    .text:00000000000003d6 __ji_suan_zu_kang
                 1.s:511    .text:00000000000003f8 a1
                 1.s:517    .text:0000000000000402 a2
                 1.s:597    .text:000000000000048e __chengfa
                 1.s:553    .text:0000000000000446 __chufa64
                 1.s:524    .text:0000000000000412 a3
                 1.s:536    .text:0000000000000428 a4
                 1.s:542    .text:0000000000000432 a5
                 1.s:549    .text:0000000000000442 __a6
                 1.s:593    .text:0000000000000488 __chu_fa64_fan_hui0
                 1.s:563    .text:0000000000000454 __chu_fa64_ji_suan
                 1.s:570    .text:0000000000000460 __chu_fa64_xun_huan
                 1.s:579    .text:0000000000000470 __chu_fa_yi_wei
                 1.s:587    .text:000000000000047e __di_yi_wei
                 1.s:639    .text:00000000000004ce __cheng_fa_fan_hui
                 1.s:611    .text:0000000000000498 __ji_suan_cheng_fa
                 1.s:643    .text:00000000000004d4 _lvboqi
                 1.s:655    .text:00000000000004e4 _lvboqimeidaohuanchongquding
                 1.s:658    .text:00000000000004e8 _lvboqixunhuan
                 1.s:662    .text:00000000000004ee _lvbozonghe
                 1.s:680    .text:0000000000000508 _xunhuanqiuma
                 1.s:761    .text:000000000000059a _chufa
                 1.s:690    .text:000000000000051c __tian_jia_xiao_shu_dian
                 1.s:692    .text:000000000000051e __bao_cun_shu_ma_guan_ma
                 1.s:708    .text:000000000000053a _shumaguanshuaxin
                 1.s:720    .text:0000000000000550 _xie595
                 1.s:729    .text:0000000000000560 _xunhuan595
                 1.s:752    .text:000000000000058e _yanshi
                 1.s:736    .text:000000000000056e _xie595_0
                 1.s:738    .text:0000000000000570 _suocun595
                 1.s:755    .text:0000000000000592 _yanshi11
ARM GAS  1.s 			page 22


                 1.s:783    .text:00000000000005be _chufafanhui
                 1.s:773    .text:00000000000005ae _chufaxunhuan
                 1.s:780    .text:00000000000005ba _chufaweishubudao0
                 1.s:785    .text:00000000000005c0 __chu_fa
                 1.s:823    .text:0000000000000602 _chufafanhui1
                 1.s:797    .text:00000000000005d6 __pan_duan_bei_chu_shu
                 1.s:803    .text:00000000000005e0 __ji_suan_chu_fa11
                 1.s:809    .text:00000000000005ea _chufaxunhuan1
                 1.s:816    .text:00000000000005f6 _chufaweishubudao00
                 1.s:825    .text:0000000000000604 __he_cheng_dian_ya_biao
                 1.s:829    .text:000000000000060a __zhao_shang_sheng
                 1.s:842    .text:0000000000000622 __fu_zhi_xun_huan
                 1.s:856    .text:000000000000063e __bao_cun
                 1.s:894    .text:0000000000000680 __zhuan_bcd
                 1.s:858    .text:0000000000000642 __fu_shu_bao_cun
                 1.s:864    .text:000000000000064c __jian_bo
                 1.s:868    .text:0000000000000652 __zhao_shang_sheng1
                 1.s:881    .text:000000000000066a __fu_zhi_xun_huan1
                 1.s:900    .text:000000000000068a __bcd_xun_huan
                 1.s:925    .text:00000000000006bc $d
                 1.s:927    .text:00000000000006e8 $t
                 1.s:941    .text:00000000000006fa _tim3fanhui
                 1.s:1013   .text:0000000000000784 __dma_fan_hui
                 1.s:1014   .text:0000000000000786 $d
                 1.s:1014   .text:0000000000000788 $d

NO UNDEFINED SYMBOLS
