ARM GAS  1.s 			page 1


   1              		@@ 单片机stm32f030f4p6
   2              		@pmsm电机
   3              		@作者：yjmwxwx
   4              		@时间：2021-04-22
   5              		@编译器：ARM-NONE-EABI
   6              		.thumb
   7              		.syntax unified
   8              		.section .data
   9              	yjmwxwx:
  10 0000 796A6D77 		.ascii "yjmwxwx-20210422"
  10      7877782D 
  10      32303231 
  10      30343232 
  11              	kong:
  12 0010 20202020 		.int 0x20202020
  13              	_fu:
  14 0014 2D       		.ascii "-"
  15              	jiaodu1:
  16 0015 F23D0000 		.int 0x3df2
  17              	jiaodufuhao:
  18 0019 DF000000 		.int 0xdf
  19 001d 000000   		.align 4
  20              	zheng_xian_biao:
  21 0020 1C001D00 		.short 28,29,31,33,34,36,38,39,41,42,44,45,46,48,49,50,51,52,52,53,54,54,55,55,55,55,55,55,55,54,5
  21      1F002100 
  21      22002400 
  21      26002700 
  21      29002A00 
  22 00ea 00000000 		.align 4
  22      0000
  23              	cordic_yong_cos_sin:
  24 00f0 00000000 		.int 0x0000,0x4000,0x2D41,0x2D41,0x3B20,0x187D,0x3EC5,0x0C7C,0x3FB1,0x0645,0x3FEC,0x0323,0x3FFB,0x
  24      00400000 
  24      412D0000 
  24      412D0000 
  24      203B0000 
  25              	cordic_yong_atan_biao:
  26 0170 87640000 		.int 0x00006487,0x00003B58,0x00001F5B,0x00000FEA,0x000007FD,0x000003FF,0x000001FF,0x000000FF,0x000
  26      583B0000 
  26      5B1F0000 
  26      EA0F0000 
  26      FD070000 
  27              		.align 4
  28              		.equ STACKINIT,        	        0x20001000
  29              		.equ asciimabiao,		0x20000000
  30              		.equ liangcheng,		0x20000020
  31              		.equ zhengfan_zhuan,		0x200000c8
  32              		.equ jiaodu_cha,		0x200000cc
  33              		.equ shangci_jiaodu,		0x200000d0
  34              		.equ shang_ci_i,		0x200000d4
  35              		.equ jiaodu_b,			0x200000d8
  36              		.equ jiaodu_a,			0x200000dc
  37              		.equ jiaodu,			0x200000e0
  38              		.equ cos,			0x200000e4
  39              		.equ sin,			0x200000e8
  40              		.equ sin_cha,			0x200000ec
  41              		.equ cos_cha,			0x200000f0
ARM GAS  1.s 			page 2


  42              		.equ sin_jiaozheng,		0x200000f4
  43              		.equ cos_jiaozheng,		0x200000f8
  44              		.equ jiaodu_jiaozheng,		0x200000fc
  45              		.equ dianyabiao,		0x20000100
  46              		.equ lvboqizhizhen,		0x20000300
  47              		.equ lvboqihuanchong,		0x20000308
  48              		.equ lvboqizhizhen1,		0x20000510
  49              		.equ lvboqihuanchong1,		0x20000518
  50              		.equ lvboqizhizhen2,		0x20000900
  51              		.equ lvboqihuanchong2,		0x20000908
  52              		.equ lvboqizhizhen3,		0x20000b10
  53              		.equ lvboqihuanchong3,		0x20000b18
  54              		.section .text
  55              	
  56              	vectors:
  57 0000 00100020 		.word STACKINIT
  58 0004 B1000000 		.word _start + 1
  59 0008 D3060000 		.word _nmi_handler + 1
  60 000c D5060000 		.word _hard_fault  + 1
  61 0010 00000000 		.word 0
  62 0014 00000000 		.word 0
  63 0018 00000000 		.word 0
  64 001c 00000000 		.word 0
  65 0020 00000000 		.word 0
  66 0024 00000000 		.word 0
  67 0028 00000000 		.word 0
  68 002c D7060000 		.word _svc_handler +1
  69 0030 00000000 		.word 0
  70 0034 00000000 		.word 0
  71 0038 D9060000 		.word _pendsv_handler +1
  72 003c DB060000 		.word _systickzhongduan +1           @ 15
  73 0040 C7070000 		.word aaa +1     @ _wwdg +1          @ 0
  74 0044 C7070000 		.word aaa +1     @_pvd +1            @ 1
  75 0048 C7070000 		.word aaa +1     @_rtc +1            @ 2
  76 004c C7070000 		.word aaa +1     @_flash +1          @ 3
  77 0050 C7070000 		.word aaa +1	@ _rcc + 1           @ 4
  78 0054 C7070000 		.word aaa +1      @_exti0_1  +1      @ 5
  79 0058 C7070000 		.word aaa +1      @ _exti2_3 +1      @ 6
  80 005c C7070000 		.word aaa +1       @_exti4_15 +1     @ 7
  81 0060 C7070000 		.word aaa +1                         @ 8
  82 0064 C7070000 		.word aaa +1	@__dma_wan  +1	     @ 9
  83 0068 C7070000 		.word aaa +1    @_dma1_2_3 +1        @ 10
  84 006c C7070000 		.word aaa +1       @_dma1_4_5 +1     @ 11
  85 0070 C7070000 		.word aaa +1	 @_adc1 +1           @ 12
  86 0074 C7070000 		.word aaa +1       @_tim1_brk_up +1  @ 13
  87 0078 C7070000 		.word aaa +1        @ _tim1_cc +1    @ 14
  88 007c C7070000 		.word aaa +1         @_tim2 +1       @ 15
  89 0080 C7070000 		.word aaa +1          @_tim3 +1      @ 16
  90 0084 C7070000 		.word aaa +1                         @ 17
  91 0088 C7070000 		.word aaa +1		             @ 18
  92 008c C7070000 		.word aaa +1	@_tim14 +1           @ 19
  93 0090 C7070000 		.word aaa +1                         @ 20
  94 0094 C7070000 		.word aaa +1         @_tim16 +1      @ 21
  95 0098 C7070000 		.word aaa +1         @_tim17 +1      @ 22
  96 009c C7070000 		.word aaa +1          @_i2c   +1     @ 23
  97 00a0 C7070000 		.word aaa +1                         @ 24
  98 00a4 C7070000 		.word aaa +1           @_spi   +1    @ 25
ARM GAS  1.s 			page 3


  99 00a8 C7070000 		.word aaa +1                         @ 26
 100 00ac C7070000 		.word aaa +1         @_usart1 +1     @ 27
 101              		.align 2
 102              	_start:
 103              	shizhong:
 104 00b0 AA4A     		ldr r2, = 0x40022000   @FLASH访问控制
 105 00b2 3221     		movs r1, # 0x32
 106 00b4 1160     		str r1, [r2]           @FLASH缓冲 缓冲开启
 107 00b6 AA48     		ldr r0, = 0x40021000 @ rcc
 108 00b8 AA49     		ldr r1, = 0x10001
 109 00ba 0160     		str r1, [r0]
 110              	denghse:
 111 00bc 0168     		ldr r1, [r0]
 112 00be 8903     		lsls r1, r1, # 14
 113 00c0 FCD5     		bpl denghse
 114              	dengpllguan:
 115 00c2 0168     		ldr r1, [r0]
 116 00c4 8901     		lsls r1, r1, # 6
 117 00c6 FCD4     		bmi dengpllguan
 118 00c8 A749     		ldr r1, = 0x150002	@0x150002
 119 00ca 0046     		mov r0, r0
 120 00cc 4160     		str r1, [r0, # 0x04]
 121 00ce 0046     		mov r0, r0
 122 00d0 A649     		ldr r1, = 0x1010000
 123 00d2 0046     		mov r0, r0
 124 00d4 0160     		str r1, [r0]
 125              	
 126              	dengpll:
 127 00d6 0168     		ldr r1, [r0]
 128 00d8 8901     		lsls r1, # 6
 129 00da FCD5     		bpl dengpll
 130              	
 131              	
 132 00dc A449     		ldr r1, = 100
 133 00de 0163     		str r1, [r0, # 0x30]
 134              	
 135              	_waisheshizhong:	                         @ 外设时钟
 136              		@+0x14=RCC_AHBENR
 137              		@ 0=DMA @ 2=SRAM @ 4=FLITF@ 6=CRC @ 17=PA @ 18=PB @ 19=PC @ 20=PD @ 22=PF
 138 00e0 9F48     		ldr r0, = 0x40021000
 139 00e2 A449     		ldr r1, = 0x60001
 140 00e4 4161     		str r1, [r0, # 0x14]
 141              	
 142              		@+0x18外设时钟使能寄存器 (RCC_APB2ENR)
 143              		@0=SYSCFG @5=USART6EN @9=ADC @11=TIM1 @12=SPI1 @14=USART1 @16=TIM15 @17=TIM16 @18=TIM17 @22=DBGMCU
 144 00e6 A449     		ldr r1, = 0x1a00
 145 00e8 8161     		str r1, [r0, # 0x18]
 146              		@+0X1C=RCC_APB1ENR
 147              		@ 1=TIM3 @ 4=TIM6 @ 5=TIM7 @ 8=TIM14 @ 11=WWDG @ 14=SPI @ 17=USRT2 @ 18=USART3 @ 20=USART5 @ 21=I2
 148              		@ 22=I2C2 @ 23=USB @ 28=PWR
 149 00ea A44A     		ldr r2, = 0x902
 150 00ec C261     		str r2, [r0, # 0x1c]
 151              	
 152              	_neicunqingling:
 153 00ee A448     		ldr r0, = 0x20000000
 154 00f0 0021     		movs r1, # 0
 155 00f2 A44B     		ldr r3, = 0x1000
ARM GAS  1.s 			page 4


 156              	_neicunqinglingxunhuan:
 157 00f4 043B     		subs r3, # 4
 158 00f6 C150     		str r1, [r0, r3]
 159 00f8 FCD1     		bne _neicunqinglingxunhuan
 160              	
 161              	_waishezhongduan:					@外设中断
 162              		@0xE000E100    0-31  写1开，写0没效
 163              		@0XE000E180    0-31 写1关，写0没效
 164              		@0XE000E200    0-31 挂起，写0没效
 165              		@0XE000E280    0-31 清除， 写0没效
 166 00fa A348     		ldr r0, =  0xe000e100
 167 00fc A349     		ldr r1, = 0x200 @0x10200  @ 0x10000
 168 00fe 0160     		str r1, [r0]
 169              		
 170              	@_kanmengou:
 171              	@	ldr r0, = 0x40003000
 172              	@	ldr r1, = 0x5555
 173              	@	str r1, [r0]
 174              	@	movs r1, # 7
 175              	@	str r1, [r0, # 4]
 176              	@	ldr r1, = 0xfff
 177              	@	str r1, [r0, # 8]
 178              	@	ldr r1, = 0xaaaa
 179              	@	str r1, [r0]
 180              	@	ldr r1, = 0xcccc
 181              	@	str r1, [r0]
 182              		
 183              	io_she_zhi:
 184              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 185              		@a(0x48000000)b(0x48000400)c(0x48000800)d(0x48000c00)f(0x48001400)
 186              		@ 输入（00），通用输出（01），复用功能（10），模拟（11）
 187              		@偏移0x4 = 端口输出类型 @ （0 推挽），（ 1 开漏）
 188              		@偏移0x8 = 输出速度  00低速， 01中速， 11高速
 189              		@偏移0xC = 上拉下拉 (00无上下拉，  01 上拉， 10下拉)
 190              		@偏移0x10 = 输入数据寄存器
 191              		@偏移0x14 = 输出数据寄存器
 192              		@偏移0x18 = 端口开  0-15置位
 193              		@偏移0x28 = 端口关
 194              		@0X20 = 复用低
 195              		@GPIO口0（0-3位）每个IO口占用4位
 196              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 197              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 198              		@0x24 = 复用高
 199              		@GPIO口8 （0-3位）每个IO口占用4位
 200              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 201              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 202              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 203              	
 204              	
 205 0100 A348     		ldr r0, = 0x48000000
 206 0102 A449     		ldr r1, = 0x282003D5 
 207 0104 0160     		str r1, [r0]
 208 0106 0721     		movs r1, # 0x07
 209 0108 4160     		str r1, [r0, # 0x04]
 210 010a A049     		ldr r1, = 0x200
 211 010c 4162     		str r1, [r0, # 0x24]
 212              	
ARM GAS  1.s 			page 5


 213              	
 214              		
 215 010e A248     		ldr r0, = 0x48000400
 216 0110 0821     		movs r1, # 0x08 @ pb1
 217 0112 0160     		str r1, [r0]
 218 0114 2021     		movs r1, # 0x20
 219 0116 0162     		str r1, [r0, # 0x20]
 220              			
 221              	
 222              	_adcchushihua:
 223 0118 A048     		ldr r0, = 0x40012400  @ adc基地址
 224 011a A149     		ldr r1, = 0x80000000
 225 011c 8160     		str r1, [r0, # 0x08]  @ ADC 控制寄存器 (ADC_CR)  @adc校准
 226              	_dengadcjiaozhun:
 227 011e 8168     		ldr r1, [r0, # 0x08]
 228 0120 0900     		movs r1, r1
 229 0122 FCD4     		bmi _dengadcjiaozhun   @ 等ADC校准
 230 0124 0121     		movs r1, # 1
 231 0126 0160     		str r1, [r0]
 232              	_kaiadc:
 233 0128 8168     		ldr r1, [r0, # 0x08]
 234 012a 0122     		movs r2, # 0x01
 235 012c 1143     		orrs r1, r1, r2
 236 012e 8160     		str r1, [r0, # 0x08]
 237              	_deng_adc_wen_ding:
 238 0130 0168     		ldr r1, [r0]
 239 0132 C907     		lsls r1, r1, # 31
 240 0134 FCD5     		bpl _deng_adc_wen_ding @ 等ADC稳定
 241              	_tongdaoxuanze:
 242 0136 9B49     		ldr r1, = 0x40000000
 243 0138 0161     		str r1, [r0, # 0x10]
 244 013a 1821     		movs r1, # 0x18
 245 013c 8162     		str r1, [r0, # 0x28]    @ 通道选择寄存器 (ADC_CHSELR)
 246 013e 9A49     		ldr r1, = 0x803
 247 0140 C160     		str r1, [r0, # 0x0c]    @ 配置寄存器 1 (ADC_CFGR1)
 248 0142 0021     		movs r1, # 0
 249 0144 4161     		str r1, [r0, # 0x14]    @ ADC 采样时间寄存器 (ADC_SMPR)
 250 0146 8168     		ldr r1, [r0, # 0x08]
 251 0148 984A     		ldr r2, = 0x04         @ 开始转换
 252 014a 1143     		orrs r1, r1, r2
 253 014c 8160     		str r1, [r0, # 0x08]    @ 控制寄存器 (ADC_CR)
 254              	
 255              		
 256              	_lcdchushihua:
 257 014e 3320     		movs r0, # 0x33
 258 0150 0021     		movs r1, # 0
 259 0152 00F0FAF9 		bl _xielcd
 260 0156 00F0F3F9 		bl _lcdyanshi
 261              	
 262 015a 3220     		movs r0, # 0x32
 263 015c 0021     		movs r1, # 0
 264 015e 00F0F4F9 		bl _xielcd
 265 0162 00F0EDF9 		bl _lcdyanshi
 266 0166 2820     		movs r0, # 0x28
 267 0168 0021     		movs r1, # 0
 268 016a 00F0EEF9 		bl _xielcd
 269 016e 00F0E7F9 		bl _lcdyanshi
ARM GAS  1.s 			page 6


 270 0172 0C20     		movs r0, # 0x0c
 271 0174 0021     		movs r1, # 0
 272 0176 00F0E8F9 		bl _xielcd
 273 017a 00F0E1F9 		bl _lcdyanshi
 274 017e 0120     		movs r0, # 0x01
 275 0180 0021     		movs r1, # 0
 276 0182 00F0E2F9 		bl _xielcd
 277 0186 00F0DBF9 		bl _lcdyanshi
 278              	
 279 018a 8020     		movs r0, # 0x80
 280 018c 8849     		ldr r1, = yjmwxwx
 281 018e 1022     		movs r2, # 16
 282 0190 00F0C8F9 		bl _lcdxianshi
 283 0194 8748     		ldr r0, = 0xffffff
 284              	yjmwxwx_yanshi:
 285 0196 0138     		subs r0, r0, # 1
 286 0198 FDD1     		bne yjmwxwx_yanshi
 287              	
 288 019a 0120     		movs r0, # 0x01
 289 019c 0021     		movs r1, # 0
 290 019e 00F0D4F9 		bl _xielcd
 291 01a2 00F0CDF9 		bl _lcdyanshi
 292              		
 293              	
 294              	dmachushihua:
 295              		@+0=LSR,+4=IFCR,
 296              		@+8=CCR1,+c=CNDTR1,+10=CPAR1+14=CMAR1,
 297              		@+1c=CCR2,+20=CNDTR2,+24=CPAR2,+28=CMAR2
 298              		@+30=CCR3,+34=CNDTR3,+38=CPAR2,+3c=CMAR3
 299              		@+44=CCR4,+48=CNDTR4,+4c=CPAR4,+50=CMAR4
 300              		@+58=CCR5,+5c=CNDTR5,+60=CPAR5,+64=CMAR5
 301              		@+6C=CCR6,+70=CNDTR6,+74=CPAR6,+78=CMAR6
 302              		@+80=CCR7,+84=CNDTR7,+88=CPAR7,+8c=CMAR7
 303              	
 304              		@tim1ch3DMA
 305 01a6 8448     		ldr r0, = 0x40020000
 306 01a8 8449     		ldr r1, = 0x40012c3c @ 外设地址
 307 01aa 0166     		str r1, [r0, # 0x60]
 308 01ac 8449     		ldr r1, = zheng_xian_biao @ 储存器地址
 309 01ae 4166     		str r1, [r0, # 0x64]
 310 01b0 6F49     		ldr r1, = 100             @点数
 311 01b2 C165     		str r1, [r0, # 0x5c]
 312 01b4 8349     		ldr r1, = 0x35b1         @ 储存到外设
 313 01b6 8165     		str r1, [r0, # 0x58]
 314              	
 315              		@ adc dma
 316 01b8 7F48     		ldr r0, = 0x40020000
 317 01ba 8349     		ldr r1, = 0x40012440
 318 01bc 0161     		str r1, [r0, # 0x10]
 319 01be 8349     		ldr r1, = dianyabiao
 320 01c0 4161     		str r1, [r0, # 0x14]
 321 01c2 6B49     		ldr r1, =  100
 322 01c4 C160     		str r1, [r0, # 0x0c]
 323 01c6 8249     		ldr r1, = 0xaa1		@ 5a1
 324 01c8 8160     		str r1, [r0, # 0x08]
 325              	
 326              	_systick:		@ systick定时器初始化
ARM GAS  1.s 			page 7


 327              	
 328 01ca 824F     		ldr r7, = 0xe000e010
 329 01cc 824E     		ldr r6, = 5600
 330 01ce 7E60     		str r6, [r7, # 4]
 331 01d0 BE60     		str r6, [r7, # 8]
 332 01d2 0726     		movs r6, # 0x07
 333              		
 334              	tim1chushiha:
 335 01d4 8148     		ldr r0, = 0x40012c00 @ tim1_cr1
 336 01d6 0021     		movs r1, # 0
 337 01d8 8162     		str r1, [r0, # 0x28] @ psc
 338 01da 8149     		ldr r1, = 56
 339 01dc C162     		str r1, [r0, # 0x2c] @ ARR
 340 01de 2021     		movs r1, # 0x20
 341 01e0 4160     		str r1, [r0, # 0x04] @ TRGO
 342 01e2 3821     		movs r1, # 0x38
 343 01e4 8161     		str r1, [r0, # 0x18] @ ccmr1 cc1
 344 01e6 3821     		movs r1, # 56
 345 01e8 4163     		str r1, [r0, # 0x34]
 346 01ea 7E49     		ldr r1, = 0x68
 347 01ec C161     		str r1, [r0, # 0x1c] @ ccmr2  CC3
 348 01ee 7E49     		ldr r1, = 0x500    @  CC3
 349 01f0 0162     		str r1, [r0, # 0x20] @ ccer
 350 01f2 7E49     		ldr r1, = 0x8000
 351 01f4 4164     		str r1, [r0, # 0x44] @ BDTR
 352 01f6 7E49     		ldr r1, = 0x800 @ CC3 DMA
 353 01f8 C160     		str r1, [r0, # 0x0c] @ DIER
 354 01fa 7E49     		ldr r1, = 0x81
 355 01fc 0160     		str r1, [r0]
 356 01fe 3E60     		str r6, [r7]	@systick 开
 357              	
 358              	ting:
 359              	
 360 0200 7D48     		ldr r0, = jiaodu
 361 0202 0068     		ldr r0, [r0]
 362 0204 00F00CF8 		bl __xian_shi_jiao_du
 363 0208 FAE7     		b ting
 364              	
 365              	
 366              	
 367              	
 368              		
 369 020a 0621     		movs r1, # 6
 370 020c 5C4A     		ldr r2, = asciimabiao
 371 020e FF23     		movs r3, # 0xff
 372 0210 00F0D7F9 		bl _zhuanascii
 373 0214 C920     		movs r0, # 0xc9
 374 0216 5A49     		ldr r1, = asciimabiao
 375 0218 0622     		movs r2, # 6
 376 021a 00F083F9 		bl _lcdxianshi
 377 021e EFE7     		b ting
 378              	
 379              	
 380              	
 381              	
 382              	__xian_shi_jiao_du:
 383              		@入口R0=角度
ARM GAS  1.s 			page 8


 384 0220 1FB5     		push {r0-r4,lr}
 385 0222 0446     		mov r4, r0
 386 0224 8F20     		movs r0, # 0x8f
 387 0226 7549     		ldr r1, = jiaodufuhao
 388 0228 0122     		movs r2, # 1
 389 022a 00F07BF9 		bl _lcdxianshi
 390              	
 391 022e 2400     		movs r4, r4
 392 0230 07D5     		bpl __jiaodu_bu_shi_zheng
 393 0232 8820     		movs r0, # 0x88
 394 0234 7249     		ldr r1, = _fu
 395 0236 0122     		movs r2, # 1
 396 0238 00F074F9 		bl _lcdxianshi
 397 023c E443     		mvns r4, r4
 398 023e 0134     		adds r4, r4, # 1
 399 0240 04E0     		b __xian_shi_jiaodu
 400              	__jiaodu_bu_shi_zheng:
 401 0242 8820     		movs r0, # 0x88
 402 0244 6F49     		ldr r1, = kong
 403 0246 0122     		movs r2, # 1
 404 0248 00F06CF9 		bl _lcdxianshi
 405              	__xian_shi_jiaodu:
 406 024c 2046     		mov r0, r4
 407 024e 0621     		movs r1, # 6
 408 0250 4B4A     		ldr r2, = asciimabiao
 409 0252 0323     		movs r3, # 3
 410 0254 00F0B5F9 		bl _zhuanascii
 411 0258 8920     		movs r0, # 0x89
 412 025a 4949     		ldr r1, = asciimabiao
 413 025c 0622     		movs r2, # 6
 414 025e 00F061F9 		bl _lcdxianshi
 415 0262 1FBD     		pop {r0-r4,pc}
 416              	
 417              	__xiang_wei_xuan_zhuan:
 418 0264 FCB5     		push {r2-r7,lr}
 419              		@R0=R,R1=I
 420 0266 0346     		mov r3, r0
 421 0268 0846     		mov r0, r1
 422 026a 674C     		ldr r4, = cos_jiaozheng         @cos
 423 026c 674D     		ldr r5, = sin_jiaozheng         @sin
 424 026e 2468     		ldr r4, [r4]
 425 0270 2D68     		ldr r5, [r5]
 426 0272 002C     		cmp r4, # 0
 427 0274 04D1     		bne __xuanzhuan_fangxiang_jiance
 428 0276 002D     		cmp r5, # 0
 429 0278 02D1     		bne __xuanzhuan_fangxiang_jiance
 430 027a 0146     		mov r1, r0
 431 027c 1846     		mov r0, r3
 432 027e FCBD     		pop {r2-r7,pc}
 433              	__xuanzhuan_fangxiang_jiance:
 434 0280 2400     		movs r4, r4
 435 0282 03D5     		bpl __xuan_zhuan_xiang_wei
 436 0284 2646     		mov r6, r4
 437 0286 2F46     		mov r7, r5
 438 0288 3C46     		mov r4, r7
 439 028a 3546     		mov r5, r6
 440              	__xuan_zhuan_xiang_wei:
ARM GAS  1.s 			page 9


 441 028c 2646     		mov r6, r4
 442 028e 2F46     		mov r7, r5
 443 0290 5C43     		muls r4, r4, r3         @x*cos
 444 0292 4643     		muls r6, r6, r0         @y*cos
 445 0294 5D43     		muls r5, r5, r3         @x*sin
 446 0296 4743     		muls r7, r7, r0         @y*sin
 447 0298 E413     		asrs r4, r4, # 15
 448 029a ED13     		asrs r5, r5, # 15
 449 029c F613     		asrs r6, r6, # 15
 450 029e FF13     		asrs r7, r7, # 15
 451              	
 452 02a0 E41B     		subs r4, r4, r7         @x
 453 02a2 7619     		adds r6, r6, r5         @y
 454 02a4 3146     		mov r1, r6		@i
 455 02a6 2046     		mov r0, r4		@r
 456 02a8 FCBD     		pop {r2-r7,pc}
 457              	__cordic_cos_sin:
 458              		@入口R0
 459              		@出口R0=COS，R1=SIN
 460              		@ x= 0x4dba
 461              		@ r1=x,r2=y,r0=z,r4=d,r5=k,r6=cordic_mabiao
 462              	
 463 02aa FCB5     		push {r2-r7,lr}
 464 02ac 4246     		mov r2, r8
 465 02ae 4B46     		mov r3, r9
 466 02b0 0CB4     		push {r2-r3}
 467 02b2 0025     		movs r5, # 0
 468 02b4 2A46     		mov r2, r5
 469 02b6 2C46     		mov r4, r5
 470 02b8 5549     		ldr r1, = 0x4dba
 471              	cordicxunhuan:			 @ 循环
 472 02ba C413     		asrs r4, r0, # 15
 473              		@ x
 474 02bc 1746     		mov r7, r2
 475 02be 2A41     		asrs r2, r2, r5
 476 02c0 6240     		eors r2, r2, r4
 477 02c2 121B     		subs r2, r2, r4
 478 02c4 8B1A     		subs r3, r1, r2
 479              		@ y
 480 02c6 0E46     		mov r6, r1
 481 02c8 2941     		asrs r1, r1, r5
 482 02ca 6140     		eors r1, r1, r4
 483 02cc 091B     		subs r1, r1, r4
 484 02ce 7F18     		adds r7, r7, r1
 485              		@ z
 486 02d0 504E     		ldr r6, = cordic_yong_atan_biao
 487 02d2 AA00     		lsls r2, r5, # 2
 488 02d4 B158     		ldr r1, [r6, r2]
 489 02d6 6140     		eors r1, r1, r4
 490 02d8 091B     		subs r1, r1, r4
 491 02da 401A     		subs r0, r0, r1
 492 02dc 1946     		mov r1, r3
 493 02de 3A46     		mov r2, r7
 494 02e0 0135     		adds r5, # 1
 495 02e2 102D     		cmp r5, # 16
 496 02e4 E9D1     		bne cordicxunhuan
 497 02e6 1846     		mov r0, r3
ARM GAS  1.s 			page 10


 498 02e8 3946     		mov r1, r7
 499 02ea 0CBC     		pop {r2-r3}
 500 02ec 9046     		mov r8, r2
 501 02ee 9946     		mov r9, r3
 502 02f0 FCBD     		pop {r2-r7,pc}
 503              	__atan2_ji_suan:
 504              		@入口R0=实部，R1=虚部，结果=R0
 505 02f2 FCB5     		push {r2-r7,lr}
 506 02f4 4246     		mov r2, r8
 507 02f6 04B4     		push {r2}
 508 02f8 474B     		ldr r3, = cordic_yong_cos_sin
 509 02fa 0A22     		movs r2, # 10
 510 02fc 5043     		muls r0, r0, r2
 511 02fe 5143     		muls r1, r1, r2
 512 0300 0022     		movs r2, # 0
 513 0302 9046     		mov r8, r2
 514 0304 454C     		ldr r4, = 9000
 515 0306 E403     		lsls r4, r4, # 15
 516              	__cordic_atan2_xun_huan:
 517              	__du_cos_sin:
 518 0308 1D68     		ldr r5, [r3]	@cos
 519 030a 0433     		adds r3, r3, # 4
 520 030c 2F46     		mov r7, r5
 521 030e 1E68     		ldr r6, [r3]	@sin
 522 0310 0433     		adds r3, r3, # 4
 523 0312 3246     		mov r2, r6
 524 0314 4543     		muls r5, r5, r0         @x*cos
 525 0316 4243     		muls r2, r2, r0         @x*sin
 526 0318 4E43     		muls r6, r6, r1         @y*sin
 527 031a 4F43     		muls r7, r7, r1         @y*cos
 528 031c 0900     		movs r1, r1
 529 031e 05D5     		bpl __ni_shi_zhen_zhuan
 530              	__shun_shi_zhen_zhuan:
 531 0320 AD1B     		subs r5, r5, r6
 532 0322 BF18     		adds r7, r7, r2
 533 0324 4646     		mov r6, r8
 534 0326 3619     		adds r6, r6, r4
 535 0328 B046     		mov r8, r6
 536 032a 04E0     		b __xuan_zhuan_wan
 537              	__ni_shi_zhen_zhuan:
 538 032c AD19     		adds r5, r5, r6
 539 032e BF1A     		subs r7, r7, r2
 540 0330 4646     		mov r6, r8
 541 0332 361B     		subs r6, r6, r4
 542 0334 B046     		mov r8, r6
 543              	__xuan_zhuan_wan:
 544 0336 384E     		ldr r6, = cordic_yong_cos_sin
 545 0338 2022     		movs r2, # 32
 546 033a 9200     		lsls r2, r2, # 2
 547 033c B618     		adds r6, r6, r2
 548 033e AD13     		asrs r5, r5, # 14
 549 0340 BF13     		asrs r7, r7, # 14
 550 0342 2846     		mov r0, r5
 551 0344 3946     		mov r1, r7
 552 0346 6408     		lsrs r4, r4, # 1	@旋转
 553 0348 B342     		cmp r3,	r6
 554 034a DDD1     		bne __cordic_atan2_xun_huan
ARM GAS  1.s 			page 11


 555 034c 4046     		mov r0, r8
 556 034e C043     		mvns r0, r0
 557 0350 0130     		adds r0, r0, # 1
 558 0352 C013     		asrs r0, r0, # 15      @除32768等于角度
 559 0354 04BC     		pop {r2}
 560 0356 9046     		mov r8, r2
 561 0358 FCBD     		pop {r2-r7,pc}
 562 035a 00000020 		.ltorg
 562      02400010 
 562      02400100 
 562      01000200 
 562      15000000 
 563              	
 564              	
 565              	
 566              	__xiangwei_jiaozheng:
 567 0420 3FB5     		push {r0-r5,lr}
 568 0422 2648     		ldr r0, = jiaodu_jiaozheng
 569 0424 2649     		ldr r1, = 9000
 570 0426 0068     		ldr r0, [r0]
 571 0428 264A     		ldr r2, = 51471
 572 042a 0000     		movs r0, r0
 573 042c 03D5     		bpl __jiaozheng_jiaodu_bushi0
 574 042e C043     		mvns r0, r0
 575 0430 0130     		adds r0, r0, # 1
 576 0432 0124     		movs r4, # 1
 577 0434 00E0     		b __ji_suan_jiaozheng_jiaodu
 578              	__jiaozheng_jiaodu_bushi0:
 579 0436 0024     		movs r4, # 0
 580              	__ji_suan_jiaozheng_jiaodu:
 581 0438 234D     		ldr r5, = 10000
 582 043a 6843     		muls r0, r0, r5
 583 043c 00F0DAF8 		bl _chufa
 584 0440 5043     		muls r0, r0, r2
 585 0442 2946     		mov r1, r5
 586 0444 00F0D6F8 		bl _chufa
 587 0448 012C     		cmp r4, # 1
 588 044a 01D1     		bne __suan_cos_sin
 589 044c C043     		mvns r0, r0
 590 044e 0130     		adds r0, r0, # 1
 591              	__suan_cos_sin:
 592 0450 FFF72BFF 		bl __cordic_cos_sin
 593 0454 1D4A     		ldr r2, = cos_jiaozheng
 594 0456 1E4B     		ldr r3, = sin_jiaozheng
 595 0458 1060     		str r0, [r2]
 596 045a 1960     		str r1, [r3]
 597 045c 3FBD     		pop {r0-r5,pc}
 598              	
 599              	
 600              	__chuan_gan_qi_lvbo:
 601              		@50*4偏移=0XC8
 602 045e FCB5     		push {r2-r7,lr}
 603 0460 4446     		mov r4, r8
 604 0462 4D46     		mov r5, r9
 605 0464 30B4     		push {r4-r5}
 606 0466 1B48     		ldr r0, = 0x200001b4 @sin_zheng
 607 0468 1B49     		ldr r1, = 0x2000027c @sin_fu
ARM GAS  1.s 			page 12


 608 046a 1C4A     		ldr r2, = 0x200001b0 @cos_zheng
 609 046c 1C4B     		ldr r3, = 0x20000278 @cos_fu
 610 046e 0468     		ldr r4, [r0]
 611 0470 0D68     		ldr r5, [r1]
 612 0472 1668     		ldr r6, [r2]
 613 0474 1F68     		ldr r7, [r3]
 614 0476 641B     		subs r4, r4, r5
 615 0478 F61B     		subs r6, r6, r7
 616 047a B046     		mov r8, r6
 617 047c A146     		mov r9, r4
 618 047e FFF7CFFF 		bl __xiangwei_jiaozheng
 619 0482 3046     		mov r0, r6
 620 0484 2146     		mov r1, r4
 621 0486 FFF7EDFE 		bl __xiang_wei_xuan_zhuan
 622 048a 0646     		mov r6, r0
 623 048c 0C46     		mov r4, r1
 624 048e 2146     		mov r1, r4
 625 0490 144A     		ldr r2, = lvboqizhizhen
 626 0492 1548     		ldr r0, =lvboqihuanchong
 627 0494 00F032F8 		bl __lv_bo_qi
 628 0498 3146     		mov r1, r6
 629 049a 0446     		mov r4, r0
 630 049c 134A     		ldr r2, = lvboqizhizhen1
 631 049e 1448     		ldr r0, = lvboqihuanchong1
 632 04a0 00F02CF8 		bl __lv_bo_qi
 633 04a4 2146     		mov r1, r4
 634 04a6 134A     		ldr r2, = cos_cha
 635 04a8 134B     		ldr r3, = sin_cha
 636 04aa 4446     		mov r4, r8
 637 04ac 4D46     		mov r5, r9
 638 04ae 1460     		str r4, [r2]
 639 04b0 1D60     		str r5, [r3]
 640 04b2 30BC     		pop {r4-r5}
 641 04b4 A046     		mov r8, r4
 642 04b6 A946     		mov r9, r5
 643 04b8 FCBD     		pop {r2-r7,pc}
 644 04ba 0000FC00 		.ltorg
 644      00202823 
 644      00000FC9 
 644      00001027 
 644      0000F800 
 645              	
 646              	__lv_bo_qi:
 647              		@地址顺序：指针，累加值，缓冲区
 648              		@入口R0=缓冲区，R1=数据, r2,=指针
 649              		@出口R0
 650 04fc 78B5     		push {r3-r6,lr}
 651 04fe 8024     		movs r4, # 128
 652 0500 1568     		ldr r5, [r2]
 653 0502 2B46     		mov r3, r5
 654 0504 AB00     		lsls r3, r5, # 2
 655 0506 C658     		ldr r6, [r0, r3]
 656 0508 C150     		str r1, [r0, r3]
 657 050a 0135     		adds r5, r5, # 1
 658 050c 1560     		str r5, [r2]
 659 050e A542     		cmp r5, r4
 660 0510 01D1     		bne __huanchong_leijia
ARM GAS  1.s 			page 13


 661 0512 0025     		movs r5, # 0
 662 0514 1560     		str r5, [r2]
 663              	__huanchong_leijia:
 664 0516 0438     		subs r0, r0, # 4
 665 0518 0568     		ldr r5, [r0]
 666 051a 4919     		adds r1, r1, r5
 667 051c 891B     		subs r1, r1, r6
 668 051e 0160     		str r1, [r0]
 669 0520 C811     		asrs r0, r1, # 7	@128
 670 0522 78BD     		pop {r3-r6,pc}
 671              		.ltorg
 672              	
 673              	
 674              		
 675              	
 676              	_lcdxianshi:		  		@r0=LCD位置，r1=数据地址，r2=长度
 677 0524 1FB5     		push {r0-r4,lr}
 678 0526 0C46     		mov r4, r1
 679              	
 680 0528 0021     		movs r1, # 0
 681 052a 00F00EF8 		bl _xielcd
 682              	
 683 052e 0121     		movs r1, # 1
 684 0530 0023     		movs r3, # 0
 685              	_lcdxianshixunhuan:
 686 0532 E05C     		ldrb r0, [r4,r3]
 687 0534 00F009F8 		bl _xielcd
 688 0538 0133     		adds r3, r3, # 1
 689 053a 9342     		cmp r3, r2
 690 053c F9D1     		bne _lcdxianshixunhuan
 691 053e 1FBD     		pop {r0-r4,pc}
 692              	
 693              	_lcdyanshi:
 694 0540 20B5     		push {r5,lr}
 695 0542 A14D     		ldr r5, = 0x1000
 696              	_lcdyanshixunhuan:
 697 0544 013D     		subs r5, r5, # 1
 698 0546 FDD1     		bne _lcdyanshixunhuan
 699 0548 20BD     		pop {r5,pc}
 700              	
 701              	_xielcd:				@入R0=8位,r1=0命令,r1=1数据
 702 054a 3FB5     		push {r0-r5,lr}
 703 054c 9F4C     		ldr r4, = liangcheng  @ 量程开关 (第6位和第7位)
 704 054e 0246     		mov r2, r0
 705 0550 2568     		ldr r5, [r4]
 706 0552 1209     		lsrs r2, r2, # 4
 707 0554 9200     		lsls r2, r2, # 2	@ 高四位
 708 0556 0007     		lsls r0, r0, # 28
 709 0558 800E     		lsrs r0, r0, # 26	@ 低四位
 710 055a C907     		lsls r1, r1, # 31
 711 055c 01D5     		bpl __lcd_ming_ling
 712              	__lcd_shu_ju:
 713 055e 0323     		movs r3, # 0x03		@ RS = 1 E = 1
 714 0560 00E0     		b __xie_lcd_shu_ju
 715              	__lcd_ming_ling:
 716 0562 0223     		movs r3, # 0x02		@ RS = 0 E = 1
 717              	__xie_lcd_shu_ju:
ARM GAS  1.s 			page 14


 718 0564 5B19     		adds r3, r3, r5
 719 0566 0146     		mov r1, r0
 720 0568 D218     		adds r2, r2, r3
 721 056a 1000     		movs r0, r2
 722 056c 00F00BF8 		bl __74hc595
 723 0570 0238     		subs r0, r0, # 0x02
 724 0572 00F008F8 		bl __74hc595
 725 0576 0846     		mov r0, r1
 726 0578 C018     		adds r0, r0, r3
 727 057a 00F004F8 		bl __74hc595
 728 057e 0238     		subs r0, r0, # 0x02
 729 0580 00F001F8 		bl __74hc595
 730 0584 3FBD     		pop {r0-r5,pc}
 731              	
 732              	__74hc595:				@ 入R0=8位
 733 0586 FFB5     		push {r0-r7,lr}
 734 0588 914E     		ldr r6, = 0x48000000
 735 058a 0125     		movs r5, # 0x01		@ SRCLK
 736 058c 0222     		movs r2, # 0x02		@ RCLK
 737 058e 0423     		movs r3, # 0x04		@ SER
 738 0590 1824     		movs r4, # 24
 739              	__595_yiweixunhuan:
 740 0592 B262     		str r2, [r6, # 0x28]	@ rclk=0
 741 0594 B562     		str r5, [r6, # 0x28]	@ srclk=0
 742              		@ovs r7, # 0xff
 743 0596 8F4F     		ldr r7, = 0x1ff
 744              	__595_yanshi:
 745 0598 013F     		subs r7, r7, # 1
 746 059a FDD1     		bne __595_yanshi
 747 059c 0146     		mov r1, r0
 748 059e A140     		lsls r1, r1, r4
 749 05a0 01D5     		bpl __ser_0
 750              	__ser_1:
 751 05a2 B361     		str r3, [r6, # 0x18]	@ ser=1
 752 05a4 00E0     		b __595_yiwei
 753              	__ser_0:
 754 05a6 B362     		str r3, [r6, # 0x28]	@ ser=0
 755              	__595_yiwei:
 756 05a8 B561     		str r5, [r6, # 0x18]
 757              		@movs r7, # 0xff
 758 05aa 8A4F     		ldr r7, = 0x1ff
 759              	__595_yanshi1:
 760 05ac 013F     		subs r7, r7, # 1
 761 05ae FDD1     		bne __595_yanshi1
 762 05b0 0134     		adds r4, r4, # 1
 763 05b2 202C     		cmp r4, # 32
 764 05b4 EDD1     		bne __595_yiweixunhuan
 765 05b6 B261     		str r2, [r6, # 0x18]	@ rclk=1
 766              		@movs r7, # 0xff
 767 05b8 864F     		ldr r7, = 0x1ff
 768              	__595_yanshi2:
 769 05ba 013F     		subs r7, r7, # 1
 770 05bc FDD1     		bne __595_yanshi2
 771 05be B262     		str r2, [r6, # 0x28]	@ rclk = 0
 772 05c0 FFBD     		pop {r0-r7,pc}
 773              	
 774              	
ARM GAS  1.s 			page 15


 775              	
 776              	_zhuanascii:						@ 16进制转ASCII
 777              		@ R0要转的数据， R1长度，R2结果表首地址, r3=小数点位置
 778 05c2 FFB5     		push {r0-r7,lr}
 779 05c4 1F46     		mov r7, r3
 780 05c6 0546     		mov r5, r0
 781 05c8 0E46     		mov r6, r1
 782 05ca 0A21     		movs r1, # 10
 783              	_xunhuanqiuma:
 784 05cc 00F012F8 		bl _chufa
 785 05d0 0446     		mov r4, r0
 786 05d2 4C43     		muls r4, r1
 787 05d4 2B1B     		subs r3, r5, r4
 788 05d6 3033     		adds r3, r3, # 0x30
 789 05d8 0546     		mov r5, r0
 790 05da 013E     		subs r6, r6, # 1
 791 05dc 08D0     		beq _qiumafanhui
 792 05de BE42     		cmp r6, r7
 793 05e0 02D1     		bne _meidaoxiaoshudian
 794 05e2 2E24     		movs r4, # 0x2e		@小数点
 795 05e4 9455     		strb r4, [r2,r6]	@插入小数点
 796 05e6 013E     		subs r6, r6, # 1
 797              	_meidaoxiaoshudian:
 798 05e8 9355     		strb r3, [r2,r6]
 799 05ea 3600     		movs r6, r6
 800 05ec EED1     		bne _xunhuanqiuma
 801 05ee FFBD     		pop {r0-r7,pc}
 802              	_qiumafanhui:
 803 05f0 9355     		strb r3, [r2, r6]
 804 05f2 FFBD     		pop {r0-r7,pc}
 805              	
 806              	
 807              	
 808              		
 809              	
 810              	_chufa:				@软件除法
 811              		@ r0 除以 r1 等于 商(r0)
 812 05f4 1EB5     		push {r1-r4,lr}
 813 05f6 0028     		cmp r0, # 0
 814 05f8 0ED0     		beq _chufafanhui
 815 05fa 0029     		cmp r1, # 0
 816 05fc 0CD0     		beq _chufafanhui
 817 05fe 0246     		mov r2, r0
 818 0600 0123     		movs r3, # 1
 819 0602 DB07     		lsls r3, r3, # 31
 820 0604 0020     		movs r0, # 0
 821 0606 0446     		mov r4, r0
 822              	_chufaxunhuan:
 823 0608 5200     		lsls r2, r2, # 1
 824 060a 6441     		adcs r4, r4, r4
 825 060c 8C42     		cmp r4, r1
 826 060e 01D3     		bcc _chufaweishubudao0
 827 0610 C018     		adds r0, r0, r3
 828 0612 641A     		subs r4, r4, r1
 829              	_chufaweishubudao0:
 830 0614 5B08     		lsrs r3, r3, # 1
 831 0616 F7D1     		bne _chufaxunhuan
ARM GAS  1.s 			page 16


 832              	_chufafanhui:
 833 0618 1EBD     		pop {r1-r4,pc}
 834              	__chufa64:
 835              		@64位除32位
 836              		@ （R0=高32位R1=低32位）除（R2)= （R0高32）（R1低32）
 837 061a F8B5     		push {r3-r7,lr}
 838 061c 002A     		cmp r2, # 0
 839 061e 1DD0     		beq __chu_fa64_fan_hui0
 840 0620 0029     		cmp r1, # 0
 841 0622 01D1     		bne __chu_fa64_ji_suan
 842 0624 0028     		cmp r0, # 0
 843 0626 19D0     		beq __chu_fa64_fan_hui0
 844              	__chu_fa64_ji_suan:
 845 0628 0024     		movs r4, # 0
 846 062a 2746     		mov r7, r4
 847 062c 2346     		mov r3, r4
 848 062e 2546     		mov r5, r4
 849 0630 0126     		movs r6, # 1
 850 0632 F607     		lsls r6, r6, # 31
 851              	__chu_fa64_xun_huan:
 852 0634 4900     		lsls r1, r1, # 1
 853 0636 4041     		adcs r0, r0, r0
 854 0638 6441     		adcs r4, r4, r4
 855 063a 9442     		cmp r4, r2
 856 063c 02D3     		bcc __chu_fa_yi_wei
 857 063e 9B19     		adds r3, r3, r6
 858 0640 7D41     		adcs r5, r5, r7
 859 0642 A41A     		subs r4, r4, r2
 860              	__chu_fa_yi_wei:
 861 0644 3600     		movs r6, r6
 862 0646 04D0     		beq __di_yi_wei
 863 0648 7608     		lsrs r6, r6, # 1        @高32位移位
 864 064a F3D1     		bne __chu_fa64_xun_huan
 865 064c 0127     		movs r7, # 1
 866 064e FF07     		lsls r7, r7, # 31
 867 0650 F0E7     		b __chu_fa64_xun_huan
 868              	__di_yi_wei:	            @低32位移位
 869 0652 7F08     		lsrs r7, r7, # 1
 870 0654 EED1     		bne __chu_fa64_xun_huan
 871 0656 1846     		mov r0, r3
 872 0658 2946     		mov r1, r5
 873 065a F8BD     		pop {r3-r7,pc}
 874              	__chu_fa64_fan_hui0:
 875 065c 0020     		movs r0, # 0
 876 065e 0021     		movs r1, # 0
 877 0660 F8BD     		pop {r3-r7,pc}
 878              	__chengfa:
 879              		@入R0 乘以 R1
 880              		@出 R0高32 ， R1低32
 881              		@0xffffffff*0xffffffff
 882              		@4        F F F E 0 0 0 1			@4
 883              		@3                F F F E 0 0 0 1		@3
 884              		@2                F F F E 0 0 0 1		@2
 885              		@1                        F F F E 0 0 0 1	@1
 886              		@         F F F F F F F E 0 0 0 0 0 0 0 1
 887 0662 FCB5     		push {r2-r7,lr}
 888 0664 0028     		cmp r0, # 0
ARM GAS  1.s 			page 17


 889 0666 1ED0     		beq __cheng_fa_fan_hui
 890 0668 0029     		cmp r1, # 0
 891 066a 1CD0     		beq __cheng_fa_fan_hui
 892              	__ji_suan_cheng_fa:
 893 066c 0246     		mov r2, r0
 894 066e 0B46     		mov r3, r1
 895 0670 000C     		lsrs r0, r0, # 16	@高16
 896 0672 1204     		lsls r2, r2, # 16	@ 低16
 897 0674 120C     		lsrs r2, r2, # 16
 898 0676 090C     		lsrs r1, r1, # 16	@高16
 899 0678 1B04     		lsls r3, r3, # 16	@低16
 900 067a 1B0C     		lsrs r3, r3, # 16
 901 067c 1446     		mov r4, r2
 902 067e 0546     		mov r5, r0
 903 0680 5A43     		muls r2, r2, r3		@1
 904 0682 5843     		muls r0, r0, r3		@2
 905 0684 4C43     		muls r4, r4, r1		@3
 906 0686 4D43     		muls r5, r5, r1		@4
 907 0688 0646     		mov r6, r0
 908 068a 2746     		mov r7, r4
 909 068c 0004     		lsls r0, r0, # 16	@2低32
 910 068e 2404     		lsls r4, r4, # 16	@3低32
 911 0690 360C     		lsrs r6, r6, # 16	@2高32
 912 0692 3F0C     		lsrs r7, r7, # 16	@3高32
 913 0694 0021     		movs r1, # 0
 914 0696 1218     		adds r2, r2, r0		@低32
 915 0698 4E41     		adcs r6, r6, r1		@高32
 916 069a 1219     		adds r2, r2, r4
 917 069c 7E41     		adcs r6, r6, r7
 918 069e 7619     		adds r6, r6, r5
 919 06a0 3046     		mov r0, r6
 920 06a2 1146     		mov r1, r2
 921 06a4 FCBD     		pop {r2-r7,pc}
 922              	__cheng_fa_fan_hui:
 923 06a6 0020     		movs r0, # 0
 924 06a8 0021     		movs r1, # 0
 925 06aa FCBD     		pop {r2-r7,pc}
 926              	__dai_yu_shu_chufa:	                         @软件除法
 927              		@ r0 除以 r1 等于 商(r0)余R1
 928 06ac 1CB5     		push {r2-r4,lr}
 929 06ae 0028     		cmp r0, # 0
 930 06b0 0ED0     		beq __dai_yu_shu_chufafanhui
 931 06b2 0029     		cmp r1, # 0
 932 06b4 0CD0     		beq __dai_yu_shu_chufafanhui
 933 06b6 0246     		mov r2, r0
 934 06b8 0123     		movs r3, # 1
 935 06ba DB07     		lsls r3, r3, # 31
 936 06bc 0020     		movs r0, # 0
 937 06be 0446     		mov r4, r0
 938              	__dai_yu_shu_chufaxunhuan:
 939 06c0 5200     		lsls r2, r2, # 1
 940 06c2 6441     		adcs r4, r4, r4
 941 06c4 8C42     		cmp r4, r1
 942 06c6 01D3     		bcc __dai_yu_shu_chufaweishubudao0
 943 06c8 C018     		adds r0, r0, r3
 944 06ca 641A     		subs r4, r4, r1
 945              	__dai_yu_shu_chufaweishubudao0:
ARM GAS  1.s 			page 18


 946 06cc 5B08     		lsrs r3, r3, # 1
 947 06ce F7D1     		bne __dai_yu_shu_chufaxunhuan
 948              	__dai_yu_shu_chufafanhui:
 949 06d0 1CBD     		        pop {r2-r4,pc}
 950              	_nmi_handler:
 951 06d2 7047     		bx lr
 952              	_hard_fault:
 953 06d4 7047     		bx lr
 954              	_svc_handler:
 955 06d6 7047     		bx lr
 956              	_pendsv_handler:
 957 06d8 7047     		bx lr
 958              	_systickzhongduan:
 959 06da F0B5     		push {r4-r7,lr}
 960 06dc 4346     		mov r3, r8
 961 06de 4C46     		mov r4, r9
 962 06e0 5546     		mov r5, r10
 963 06e2 5E46     		mov r6, r11
 964 06e4 6746     		mov r7, r12
 965 06e6 F8B4     		push {r3-r7}
 966 06e8 3B48     		ldr r0, = 0xe0000d04
 967 06ea 3C49     		ldr r1, = 0x02000000
 968 06ec 0160     		str r1, [r0]                 @ 清除SYSTICK中断
 969 06ee FFF7B6FE 		bl __chuan_gan_qi_lvbo
 970 06f2 3B4A     		ldr r2, = cos
 971 06f4 3B4B     		ldr r3, = sin
 972 06f6 1060     		str r0, [r2]		@r
 973 06f8 1960     		str r1, [r3]		@i
 974              	
 975 06fa FFF7FAFD 		bl __atan2_ji_suan
 976 06fe 3A4C     		ldr r4, = jiaodu
 977 0700 3A4D     		ldr r5, = jiaodu_a
 978 0702 0200     		movs r2, r0
 979 0704 03D5     		bpl __jiaodu_bushi_fu
 980 0706 3A49     		ldr r1, = 36000
 981 0708 D243     		mvns r2, r2
 982 070a 0132     		adds r2, r2, # 1
 983 070c 8A1A     		subs r2, r1, r2
 984              	__jiaodu_bushi_fu:
 985 070e 2060     		str r0, [r4]
 986 0710 2860     		str r0, [r5]
 987 0712 8046     		mov r8, r0
 988              	
 989 0714 3749     		ldr r1, = 0x4001300c
 990 0716 0A80     		strh r2, [r1]
 991              	
 992 0718 3748     		ldr r0, = cos_cha
 993 071a 3849     		ldr r1, = sin_cha
 994 071c 0068     		ldr r0, [r0]
 995 071e 0968     		ldr r1, [r1]
 996 0720 FFF7E7FD 		bl __atan2_ji_suan
 997 0724 3649     		ldr r1, = jiaodu_b
 998 0726 0860     		str r0, [r1]
 999              	
 1000              	
 1001              	
 1002 0728 0746     		mov r7, r0
ARM GAS  1.s 			page 19


 1003 072a 4046     		mov r0, r8
 1004 072c B846     		mov r8, r7
 1005              	
 1006              	__jiaodu_buchang_jisuan:
 1007              	
 1008 072e 354F     		ldr r7, = 18000
 1009 0730 4546     		mov r5, r8
 1010 0732 0646     		mov r6, r0
 1011 0734 761B     		subs r6, r6, r5
 1012 0736 F643     		mvns r6, r6
 1013 0738 0136     		adds r6, r6, # 1
 1014 073a 334B     		ldr r3, = 0x200000d0
 1015 073c 334C     		ldr r4, = 0x200000d4
 1016 073e 3500     		movs r5, r6
 1017 0740 02D5     		bpl __bao_cun_jiaodu_cha
 1018 0742 ED43     		mvns r5, r5
 1019 0744 0135     		adds r5, r5, # 1
 1020 0746 FFE7     		b __bao_cun_jiaodu_cha
 1021              	__bao_cun_jiaodu_cha:
 1022 0748 BD42     		cmp r5, r7
 1023 074a 11D8     		bhi __systick_fanhui
 1024 074c 1860     		str r0, [r3]
 1025 074e 2560     		str r5, [r4]
 1026 0750 2F4B     		ldr r3, = 0x200000c8
 1027 0752 1E60     		str r6, [r3]
 1028              	__pid:
 1029 0754 3746     		mov r7, r6
 1030 0756 3446     		mov r4, r6
 1031              	__pid_bi_li:
 1032 0758 2E4B     		ldr r3, = 32768         @ KP
 1033 075a 5F43     		muls r7, r7, r3
 1034 075c FF13     		asrs r7, r7, # 15
 1035              	__pid_ji_fen:
 1036 075e 2B4E     		ldr r6, = shang_ci_i
 1037 0760 2D4A     		ldr r2, = 20		@ KI
 1038 0762 3368     		ldr r3, [r6]
 1039 0764 5443     		muls r4, r4, r2
 1040 0766 E413     		asrs r4, r4, # 15
 1041 0768 E418     		adds r4, r4, r3
 1042 076a 3460     		str r4, [r6]
 1043              		@	adds r7, r7, r4
 1044              	__zhengzhuan_buchang:
 1045 076c 2B4D     		ldr r5, = jiaodu_jiaozheng
 1046 076e 2F60     		str r7, [r5]
 1047              	
 1048              	__systick_fanhui:
 1049              	
 1050              	__jiaodu_cha_jisuan:
 1051 0770 254B     		ldr r3, = shangci_jiaodu
 1052 0772 244F     		ldr r7, = 18000
 1053 0774 1C68     		ldr r4, [r3]
 1054 0776 8146     		mov r9, r0
 1055 0778 0646     		mov r6, r0
 1056 077a 361B     		subs r6, r6, r4
 1057 077c 3200     		movs r2, r6
 1058 077e 01D5     		bpl __baocun_jiaodu_cha
 1059 0780 D243     		mvns r2, r2
ARM GAS  1.s 			page 20


 1060 0782 0132     		adds r2, r2, # 1
 1061              	__baocun_jiaodu_cha:
 1062 0784 BA42     		cmp r2, r7
 1063 0786 14D8     		bhi __tick_fanhui
 1064 0788 2548     		ldr r0, = lvboqihuanchong3
 1065 078a 264A     		ldr r2, = lvboqizhizhen3
 1066 078c 3146     		mov r1, r6
 1067 078e FFF7B5FE 		bl __lv_bo_qi
 1068 0792 254B     		ldr r3, = jiaodu_cha
 1069 0794 1860     		str r0, [r3]
 1070 0796 0000     		movs r0, r0
 1071 0798 00D5     		bpl __jiance_zhuangtai
 1072 079a 0124     		movs r4, # 1
 1073              	__jiance_zhuangtai:
 1074 079c 0028     		cmp r0, # 0
 1075 079e 01D1     		bne __zai_zhuan
 1076 07a0 0021     		movs r1, # 0
 1077 07a2 04E0     		b __baocun_zhengfan_zhuan
 1078              	__zai_zhuan:
 1079 07a4 012C     		cmp r4, # 1
 1080 07a6 01D1     		bne __fan_zhuan
 1081 07a8 C321     		movs r1, # 0xc3
 1082 07aa 00E0     		b __baocun_zhengfan_zhuan
 1083              	__fan_zhuan:
 1084 07ac 3C21     		movs r1, # 0x3c
 1085              	__baocun_zhengfan_zhuan:
 1086 07ae 184B     		ldr r3, = zhengfan_zhuan
 1087 07b0 1960     		str r1, [r3]
 1088              	__tick_fanhui:
 1089 07b2 154B     		ldr r3, = shangci_jiaodu
 1090 07b4 4846     		mov r0, r9
 1091 07b6 1860     		str r0, [r3]
 1092              	
 1093 07b8 F8BC     		pop {r3-r7}
 1094 07ba 9846     		mov r8, r3
 1095 07bc A146     		mov r9, r4
 1096 07be AA46     		mov r10, r5
 1097 07c0 B346     		mov r11, r6
 1098 07c2 BC46     		mov r12, r7
 1099 07c4 F0BD     		pop {r4-r7,pc}
 1100              		
 1101              	
 1102              	aaa:
 1103 07c6 7047     		bx lr
 1104 07c8 00100000 		.ltorg
 1104      20000020 
 1104      00000048 
 1104      FF010000 
 1104      040D00E0 
 1105              		.end
ARM GAS  1.s 			page 21


DEFINED SYMBOLS
                 1.s:9      .data:0000000000000000 yjmwxwx
                 1.s:11     .data:0000000000000010 kong
                 1.s:13     .data:0000000000000014 _fu
                 1.s:15     .data:0000000000000015 jiaodu1
                 1.s:17     .data:0000000000000019 jiaodufuhao
                 1.s:19     .data:000000000000001d $d
                 1.s:20     .data:0000000000000020 zheng_xian_biao
                 1.s:23     .data:00000000000000f0 cordic_yong_cos_sin
                 1.s:25     .data:0000000000000170 cordic_yong_atan_biao
                 1.s:28     *ABS*:0000000020001000 STACKINIT
                 1.s:29     *ABS*:0000000020000000 asciimabiao
                 1.s:30     *ABS*:0000000020000020 liangcheng
                 1.s:31     *ABS*:00000000200000c8 zhengfan_zhuan
                 1.s:32     *ABS*:00000000200000cc jiaodu_cha
                 1.s:33     *ABS*:00000000200000d0 shangci_jiaodu
                 1.s:34     *ABS*:00000000200000d4 shang_ci_i
                 1.s:35     *ABS*:00000000200000d8 jiaodu_b
                 1.s:36     *ABS*:00000000200000dc jiaodu_a
                 1.s:37     *ABS*:00000000200000e0 jiaodu
                 1.s:38     *ABS*:00000000200000e4 cos
                 1.s:39     *ABS*:00000000200000e8 sin
                 1.s:40     *ABS*:00000000200000ec sin_cha
                 1.s:41     *ABS*:00000000200000f0 cos_cha
                 1.s:42     *ABS*:00000000200000f4 sin_jiaozheng
                 1.s:43     *ABS*:00000000200000f8 cos_jiaozheng
                 1.s:44     *ABS*:00000000200000fc jiaodu_jiaozheng
                 1.s:45     *ABS*:0000000020000100 dianyabiao
                 1.s:46     *ABS*:0000000020000300 lvboqizhizhen
                 1.s:47     *ABS*:0000000020000308 lvboqihuanchong
                 1.s:48     *ABS*:0000000020000510 lvboqizhizhen1
                 1.s:49     *ABS*:0000000020000518 lvboqihuanchong1
                 1.s:50     *ABS*:0000000020000900 lvboqizhizhen2
                 1.s:51     *ABS*:0000000020000908 lvboqihuanchong2
                 1.s:52     *ABS*:0000000020000b10 lvboqizhizhen3
                 1.s:53     *ABS*:0000000020000b18 lvboqihuanchong3
                 1.s:56     .text:0000000000000000 vectors
                 1.s:102    .text:00000000000000b0 _start
                 1.s:950    .text:00000000000006d2 _nmi_handler
                 1.s:952    .text:00000000000006d4 _hard_fault
                 1.s:954    .text:00000000000006d6 _svc_handler
                 1.s:956    .text:00000000000006d8 _pendsv_handler
                 1.s:958    .text:00000000000006da _systickzhongduan
                 1.s:1102   .text:00000000000007c6 aaa
                            .text:0000000000000000 $d
                 1.s:101    .text:00000000000000b0 $t
                 1.s:103    .text:00000000000000b0 shizhong
                 1.s:110    .text:00000000000000bc denghse
                 1.s:114    .text:00000000000000c2 dengpllguan
                 1.s:126    .text:00000000000000d6 dengpll
                 1.s:135    .text:00000000000000e0 _waisheshizhong
                 1.s:152    .text:00000000000000ee _neicunqingling
                 1.s:156    .text:00000000000000f4 _neicunqinglingxunhuan
                 1.s:161    .text:00000000000000fa _waishezhongduan
                 1.s:183    .text:0000000000000100 io_she_zhi
                 1.s:222    .text:0000000000000118 _adcchushihua
                 1.s:226    .text:000000000000011e _dengadcjiaozhun
ARM GAS  1.s 			page 22


                 1.s:232    .text:0000000000000128 _kaiadc
                 1.s:237    .text:0000000000000130 _deng_adc_wen_ding
                 1.s:241    .text:0000000000000136 _tongdaoxuanze
                 1.s:256    .text:000000000000014e _lcdchushihua
                 1.s:701    .text:000000000000054a _xielcd
                 1.s:693    .text:0000000000000540 _lcdyanshi
                 1.s:676    .text:0000000000000524 _lcdxianshi
                 1.s:284    .text:0000000000000196 yjmwxwx_yanshi
                 1.s:294    .text:00000000000001a6 dmachushihua
                 1.s:326    .text:00000000000001ca _systick
                 1.s:334    .text:00000000000001d4 tim1chushiha
                 1.s:358    .text:0000000000000200 ting
                 1.s:382    .text:0000000000000220 __xian_shi_jiao_du
                 1.s:776    .text:00000000000005c2 _zhuanascii
                 1.s:400    .text:0000000000000242 __jiaodu_bu_shi_zheng
                 1.s:405    .text:000000000000024c __xian_shi_jiaodu
                 1.s:417    .text:0000000000000264 __xiang_wei_xuan_zhuan
                 1.s:433    .text:0000000000000280 __xuanzhuan_fangxiang_jiance
                 1.s:440    .text:000000000000028c __xuan_zhuan_xiang_wei
                 1.s:457    .text:00000000000002aa __cordic_cos_sin
                 1.s:471    .text:00000000000002ba cordicxunhuan
                 1.s:503    .text:00000000000002f2 __atan2_ji_suan
                 1.s:516    .text:0000000000000308 __cordic_atan2_xun_huan
                 1.s:517    .text:0000000000000308 __du_cos_sin
                 1.s:537    .text:000000000000032c __ni_shi_zhen_zhuan
                 1.s:530    .text:0000000000000320 __shun_shi_zhen_zhuan
                 1.s:543    .text:0000000000000336 __xuan_zhuan_wan
                 1.s:562    .text:000000000000035a $d
                 1.s:562    .text:000000000000035c $d
                 1.s:566    .text:0000000000000420 __xiangwei_jiaozheng
                 1.s:567    .text:0000000000000420 $t
                 1.s:578    .text:0000000000000436 __jiaozheng_jiaodu_bushi0
                 1.s:580    .text:0000000000000438 __ji_suan_jiaozheng_jiaodu
                 1.s:810    .text:00000000000005f4 _chufa
                 1.s:591    .text:0000000000000450 __suan_cos_sin
                 1.s:600    .text:000000000000045e __chuan_gan_qi_lvbo
                 1.s:646    .text:00000000000004fc __lv_bo_qi
                 1.s:644    .text:00000000000004ba $d
                 1.s:644    .text:00000000000004bc $d
                 1.s:650    .text:00000000000004fc $t
                 1.s:663    .text:0000000000000516 __huanchong_leijia
                 1.s:685    .text:0000000000000532 _lcdxianshixunhuan
                 1.s:696    .text:0000000000000544 _lcdyanshixunhuan
                 1.s:715    .text:0000000000000562 __lcd_ming_ling
                 1.s:712    .text:000000000000055e __lcd_shu_ju
                 1.s:717    .text:0000000000000564 __xie_lcd_shu_ju
                 1.s:732    .text:0000000000000586 __74hc595
                 1.s:739    .text:0000000000000592 __595_yiweixunhuan
                 1.s:744    .text:0000000000000598 __595_yanshi
                 1.s:753    .text:00000000000005a6 __ser_0
                 1.s:750    .text:00000000000005a2 __ser_1
                 1.s:755    .text:00000000000005a8 __595_yiwei
                 1.s:759    .text:00000000000005ac __595_yanshi1
                 1.s:768    .text:00000000000005ba __595_yanshi2
                 1.s:783    .text:00000000000005cc _xunhuanqiuma
                 1.s:802    .text:00000000000005f0 _qiumafanhui
                 1.s:797    .text:00000000000005e8 _meidaoxiaoshudian
ARM GAS  1.s 			page 23


                 1.s:832    .text:0000000000000618 _chufafanhui
                 1.s:822    .text:0000000000000608 _chufaxunhuan
                 1.s:829    .text:0000000000000614 _chufaweishubudao0
                 1.s:834    .text:000000000000061a __chufa64
                 1.s:874    .text:000000000000065c __chu_fa64_fan_hui0
                 1.s:844    .text:0000000000000628 __chu_fa64_ji_suan
                 1.s:851    .text:0000000000000634 __chu_fa64_xun_huan
                 1.s:860    .text:0000000000000644 __chu_fa_yi_wei
                 1.s:868    .text:0000000000000652 __di_yi_wei
                 1.s:878    .text:0000000000000662 __chengfa
                 1.s:922    .text:00000000000006a6 __cheng_fa_fan_hui
                 1.s:892    .text:000000000000066c __ji_suan_cheng_fa
                 1.s:926    .text:00000000000006ac __dai_yu_shu_chufa
                 1.s:948    .text:00000000000006d0 __dai_yu_shu_chufafanhui
                 1.s:938    .text:00000000000006c0 __dai_yu_shu_chufaxunhuan
                 1.s:945    .text:00000000000006cc __dai_yu_shu_chufaweishubudao0
                 1.s:984    .text:000000000000070e __jiaodu_bushi_fu
                 1.s:1006   .text:000000000000072e __jiaodu_buchang_jisuan
                 1.s:1021   .text:0000000000000748 __bao_cun_jiaodu_cha
                 1.s:1048   .text:0000000000000770 __systick_fanhui
                 1.s:1028   .text:0000000000000754 __pid
                 1.s:1031   .text:0000000000000758 __pid_bi_li
                 1.s:1035   .text:000000000000075e __pid_ji_fen
                 1.s:1044   .text:000000000000076c __zhengzhuan_buchang
                 1.s:1050   .text:0000000000000770 __jiaodu_cha_jisuan
                 1.s:1061   .text:0000000000000784 __baocun_jiaodu_cha
                 1.s:1088   .text:00000000000007b2 __tick_fanhui
                 1.s:1073   .text:000000000000079c __jiance_zhuangtai
                 1.s:1078   .text:00000000000007a4 __zai_zhuan
                 1.s:1085   .text:00000000000007ae __baocun_zhengfan_zhuan
                 1.s:1083   .text:00000000000007ac __fan_zhuan
                 1.s:1104   .text:00000000000007c8 $d

NO UNDEFINED SYMBOLS
