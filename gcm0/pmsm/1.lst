ARM GAS  1.s 			page 1


   1              		@@ 单片机stm32f030f4p6
   2              		@pmsm电机
   3              		@作者：yjmwxwx
   4              		@时间：2021-04-22
   5              		@编译器：ARM-NONE-EABI
   6              		.thumb
   7              		.syntax unified
   8              		.section .data
   9              	yjmwxwx:
  10 0000 796A6D77 		.ascii "yjmwxwx-20210422"
  10      7877782D 
  10      32303231 
  10      30343232 
  11              	kong:
  12 0010 20202020 		.int 0x20202020
  13              	_fu:
  14 0014 2D       		.ascii "-"
  15              	jiaodu1:
  16 0015 F23D0000 		.int 0x3df2
  17              	jiaodufuhao:
  18 0019 DF000000 		.int 0xdf
  19 001d 000000   		.align 4
  20              	zheng_xian_biao:
  21 0020 1C001D00 		.short 28,29,31,33,34,36,38,39,41,42,44,45,46,48,49,50,51,52,52,53,54,54,55,55,55,55,55,55,55,54,5
  21      1F002100 
  21      22002400 
  21      26002700 
  21      29002A00 
  22 00ea 00000000 		.align 4
  22      0000
  23              	cordic_yong_cos_sin:
  24 00f0 00000000 		.int 0x0000,0x4000,0x2D41,0x2D41,0x3B20,0x187D,0x3EC5,0x0C7C,0x3FB1,0x0645,0x3FEC,0x0323,0x3FFB,0x
  24      00400000 
  24      412D0000 
  24      412D0000 
  24      203B0000 
  25              	cordic_yong_atan_biao:
  26 0170 87640000 		.int 0x00006487,0x00003B58,0x00001F5B,0x00000FEA,0x000007FD,0x000003FF,0x000001FF,0x000000FF,0x000
  26      583B0000 
  26      5B1F0000 
  26      EA0F0000 
  26      FD070000 
  27              		.align 4
  28              		.equ STACKINIT,        	        0x20001000
  29              		.equ asciimabiao,		0x20000000
  30              		.equ liangcheng,		0x20000020
  31              		.equ zhengfan_zhuan,		0x200000c8
  32              		.equ jiaodu_cha,		0x200000cc
  33              		.equ shangci_jiaodu,		0x200000d0
  34              		.equ shang_ci_i,		0x200000d4
  35              		.equ jiaodu_b,			0x200000d8
  36              		.equ jiaodu_a,			0x200000dc
  37              		.equ jiaodu,			0x200000e0
  38              		.equ cos,			0x200000e4
  39              		.equ sin,			0x200000e8
  40              		.equ sin_cha,			0x200000ec
  41              		.equ cos_cha,			0x200000f0
ARM GAS  1.s 			page 2


  42              		.equ sin_jiaozheng,		0x200000f4
  43              		.equ cos_jiaozheng,		0x200000f8
  44              		.equ jiaodu_jiaozheng,		0x200000fc
  45              		.equ dianyabiao,		0x20000100
  46              		.equ lvboqizhizhen,		0x20000300
  47              		.equ lvboqihuanchong,		0x20000308
  48              		.equ lvboqizhizhen1,		0x20000510
  49              		.equ lvboqihuanchong1,		0x20000518
  50              		.equ lvboqizhizhen2,		0x20000900
  51              		.equ lvboqihuanchong2,		0x20000908
  52              		.equ lvboqizhizhen3,		0x20000b10
  53              		.equ lvboqihuanchong3,		0x20000b18
  54              		.section .text
  55              	
  56              	vectors:
  57 0000 00100020 		.word STACKINIT
  58 0004 B1000000 		.word _start + 1
  59 0008 0F070000 		.word _nmi_handler + 1
  60 000c 11070000 		.word _hard_fault  + 1
  61 0010 00000000 		.word 0
  62 0014 00000000 		.word 0
  63 0018 00000000 		.word 0
  64 001c 00000000 		.word 0
  65 0020 00000000 		.word 0
  66 0024 00000000 		.word 0
  67 0028 00000000 		.word 0
  68 002c 13070000 		.word _svc_handler +1
  69 0030 00000000 		.word 0
  70 0034 00000000 		.word 0
  71 0038 15070000 		.word _pendsv_handler +1
  72 003c 17070000 		.word _systickzhongduan +1           @ 15
  73 0040 03080000 		.word aaa +1     @ _wwdg +1          @ 0
  74 0044 03080000 		.word aaa +1     @_pvd +1            @ 1
  75 0048 03080000 		.word aaa +1     @_rtc +1            @ 2
  76 004c 03080000 		.word aaa +1     @_flash +1          @ 3
  77 0050 03080000 		.word aaa +1	@ _rcc + 1           @ 4
  78 0054 03080000 		.word aaa +1      @_exti0_1  +1      @ 5
  79 0058 03080000 		.word aaa +1      @ _exti2_3 +1      @ 6
  80 005c 03080000 		.word aaa +1       @_exti4_15 +1     @ 7
  81 0060 03080000 		.word aaa +1                         @ 8
  82 0064 03080000 		.word aaa +1	@__dma_wan  +1	     @ 9
  83 0068 03080000 		.word aaa +1    @_dma1_2_3 +1        @ 10
  84 006c 03080000 		.word aaa +1       @_dma1_4_5 +1     @ 11
  85 0070 03080000 		.word aaa +1	 @_adc1 +1           @ 12
  86 0074 03080000 		.word aaa +1       @_tim1_brk_up +1  @ 13
  87 0078 03080000 		.word aaa +1        @ _tim1_cc +1    @ 14
  88 007c 03080000 		.word aaa +1         @_tim2 +1       @ 15
  89 0080 03080000 		.word aaa +1          @_tim3 +1      @ 16
  90 0084 03080000 		.word aaa +1                         @ 17
  91 0088 03080000 		.word aaa +1		             @ 18
  92 008c 03080000 		.word aaa +1	@_tim14 +1           @ 19
  93 0090 03080000 		.word aaa +1                         @ 20
  94 0094 03080000 		.word aaa +1         @_tim16 +1      @ 21
  95 0098 03080000 		.word aaa +1         @_tim17 +1      @ 22
  96 009c 03080000 		.word aaa +1          @_i2c   +1     @ 23
  97 00a0 03080000 		.word aaa +1                         @ 24
  98 00a4 03080000 		.word aaa +1           @_spi   +1    @ 25
ARM GAS  1.s 			page 3


  99 00a8 03080000 		.word aaa +1                         @ 26
 100 00ac 03080000 		.word aaa +1         @_usart1 +1     @ 27
 101              		.align 2
 102              	_start:
 103              	shizhong:
 104 00b0 B24A     		ldr r2, = 0x40022000   @FLASH访问控制
 105 00b2 3221     		movs r1, # 0x32
 106 00b4 1160     		str r1, [r2]           @FLASH缓冲 缓冲开启
 107 00b6 B248     		ldr r0, = 0x40021000 @ rcc
 108 00b8 B249     		ldr r1, = 0x10001
 109 00ba 0160     		str r1, [r0]
 110              	denghse:
 111 00bc 0168     		ldr r1, [r0]
 112 00be 8903     		lsls r1, r1, # 14
 113 00c0 FCD5     		bpl denghse
 114              	dengpllguan:
 115 00c2 0168     		ldr r1, [r0]
 116 00c4 8901     		lsls r1, r1, # 6
 117 00c6 FCD4     		bmi dengpllguan
 118 00c8 AF49     		ldr r1, = 0x150002	@0x150002
 119 00ca 0046     		mov r0, r0
 120 00cc 4160     		str r1, [r0, # 0x04]
 121 00ce 0046     		mov r0, r0
 122 00d0 AE49     		ldr r1, = 0x1010000
 123 00d2 0046     		mov r0, r0
 124 00d4 0160     		str r1, [r0]
 125              	
 126              	dengpll:
 127 00d6 0168     		ldr r1, [r0]
 128 00d8 8901     		lsls r1, # 6
 129 00da FCD5     		bpl dengpll
 130              	
 131              	
 132 00dc AC49     		ldr r1, = 100
 133 00de 0163     		str r1, [r0, # 0x30]
 134              	
 135              	_waisheshizhong:	                         @ 外设时钟
 136              		@+0x14=RCC_AHBENR
 137              		@ 0=DMA @ 2=SRAM @ 4=FLITF@ 6=CRC @ 17=PA @ 18=PB @ 19=PC @ 20=PD @ 22=PF
 138 00e0 A748     		ldr r0, = 0x40021000
 139 00e2 AC49     		ldr r1, = 0x60001
 140 00e4 4161     		str r1, [r0, # 0x14]
 141              	
 142              		@+0x18外设时钟使能寄存器 (RCC_APB2ENR)
 143              		@0=SYSCFG @5=USART6EN @9=ADC @11=TIM1 @12=SPI1 @14=USART1 @16=TIM15 @17=TIM16 @18=TIM17 @22=DBGMCU
 144 00e6 AC49     		ldr r1, = 0x1a00
 145 00e8 8161     		str r1, [r0, # 0x18]
 146              		@+0X1C=RCC_APB1ENR
 147              		@ 1=TIM3 @ 4=TIM6 @ 5=TIM7 @ 8=TIM14 @ 11=WWDG @ 14=SPI @ 17=USRT2 @ 18=USART3 @ 20=USART5 @ 21=I2
 148              		@ 22=I2C2 @ 23=USB @ 28=PWR
 149 00ea AC4A     		ldr r2, = 0x902
 150 00ec C261     		str r2, [r0, # 0x1c]
 151              	
 152              	_neicunqingling:
 153 00ee AC48     		ldr r0, = 0x20000000
 154 00f0 0021     		movs r1, # 0
 155 00f2 AC4B     		ldr r3, = 0x1000
ARM GAS  1.s 			page 4


 156              	_neicunqinglingxunhuan:
 157 00f4 043B     		subs r3, # 4
 158 00f6 C150     		str r1, [r0, r3]
 159 00f8 FCD1     		bne _neicunqinglingxunhuan
 160              	
 161              	_waishezhongduan:					@外设中断
 162              		@0xE000E100    0-31  写1开，写0没效
 163              		@0XE000E180    0-31 写1关，写0没效
 164              		@0XE000E200    0-31 挂起，写0没效
 165              		@0XE000E280    0-31 清除， 写0没效
 166 00fa AB48     		ldr r0, =  0xe000e100
 167 00fc AB49     		ldr r1, = 0x200 @0x10200  @ 0x10000
 168 00fe 0160     		str r1, [r0]
 169              		
 170              	@_kanmengou:
 171              	@	ldr r0, = 0x40003000
 172              	@	ldr r1, = 0x5555
 173              	@	str r1, [r0]
 174              	@	movs r1, # 7
 175              	@	str r1, [r0, # 4]
 176              	@	ldr r1, = 0xfff
 177              	@	str r1, [r0, # 8]
 178              	@	ldr r1, = 0xaaaa
 179              	@	str r1, [r0]
 180              	@	ldr r1, = 0xcccc
 181              	@	str r1, [r0]
 182              		
 183              	io_she_zhi:
 184              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 185              		@a(0x48000000)b(0x48000400)c(0x48000800)d(0x48000c00)f(0x48001400)
 186              		@ 输入（00），通用输出（01），复用功能（10），模拟（11）
 187              		@偏移0x4 = 端口输出类型 @ （0 推挽），（ 1 开漏）
 188              		@偏移0x8 = 输出速度  00低速， 01中速， 11高速
 189              		@偏移0xC = 上拉下拉 (00无上下拉，  01 上拉， 10下拉)
 190              		@偏移0x10 = 输入数据寄存器
 191              		@偏移0x14 = 输出数据寄存器
 192              		@偏移0x18 = 端口开  0-15置位
 193              		@偏移0x28 = 端口关
 194              		@0X20 = 复用低
 195              		@GPIO口0（0-3位）每个IO口占用4位
 196              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 197              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 198              		@0x24 = 复用高
 199              		@GPIO口8 （0-3位）每个IO口占用4位
 200              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 201              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 202              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 203              	
 204 0100 AB48     		ldr r0, = 0x48000000
 205 0102 AC49     		ldr r1, = 0x2820a3D5 
 206 0104 0160     		str r1, [r0]
 207 0106 0721     		movs r1, # 0x07
 208 0108 4160     		str r1, [r0, # 0x04]
 209 010a AB49     		ldr r1, = 0x11000000
 210 010c 0162     		str r1, [r0, # 0x20]
 211 010e A749     		ldr r1, = 0x200
 212 0110 4162     		str r1, [r0, # 0x24]
ARM GAS  1.s 			page 5


 213              	
 214              	
 215              		
 216 0112 AA48     		ldr r0, = 0x48000400
 217 0114 0821     		movs r1, # 0x08 @ pb1
 218 0116 0160     		str r1, [r0]
 219 0118 2021     		movs r1, # 0x20
 220 011a 0162     		str r1, [r0, # 0x20]
 221              			
 222              	
 223              	_adcchushihua:
 224 011c A848     		ldr r0, = 0x40012400  @ adc基地址
 225 011e A949     		ldr r1, = 0x80000000
 226 0120 8160     		str r1, [r0, # 0x08]  @ ADC 控制寄存器 (ADC_CR)  @adc校准
 227              	_dengadcjiaozhun:
 228 0122 8168     		ldr r1, [r0, # 0x08]
 229 0124 0900     		movs r1, r1
 230 0126 FCD4     		bmi _dengadcjiaozhun   @ 等ADC校准
 231 0128 0121     		movs r1, # 1
 232 012a 0160     		str r1, [r0]
 233              	_kaiadc:
 234 012c 8168     		ldr r1, [r0, # 0x08]
 235 012e 0122     		movs r2, # 0x01
 236 0130 1143     		orrs r1, r1, r2
 237 0132 8160     		str r1, [r0, # 0x08]
 238              	_deng_adc_wen_ding:
 239 0134 0168     		ldr r1, [r0]
 240 0136 C907     		lsls r1, r1, # 31
 241 0138 FCD5     		bpl _deng_adc_wen_ding @ 等ADC稳定
 242              	_tongdaoxuanze:
 243 013a A349     		ldr r1, = 0x40000000
 244 013c 0161     		str r1, [r0, # 0x10]
 245 013e 1821     		movs r1, # 0x18
 246 0140 8162     		str r1, [r0, # 0x28]    @ 通道选择寄存器 (ADC_CHSELR)
 247 0142 A249     		ldr r1, = 0x803
 248 0144 C160     		str r1, [r0, # 0x0c]    @ 配置寄存器 1 (ADC_CFGR1)
 249 0146 0021     		movs r1, # 0
 250 0148 4161     		str r1, [r0, # 0x14]    @ ADC 采样时间寄存器 (ADC_SMPR)
 251 014a 8168     		ldr r1, [r0, # 0x08]
 252 014c A04A     		ldr r2, = 0x04         @ 开始转换
 253 014e 1143     		orrs r1, r1, r2
 254 0150 8160     		str r1, [r0, # 0x08]    @ 控制寄存器 (ADC_CR)
 255              	
 256              		
 257              	_lcdchushihua:
 258 0152 3320     		movs r0, # 0x33
 259 0154 0021     		movs r1, # 0
 260 0156 00F016FA 		bl _xielcd
 261 015a 00F00FFA 		bl _lcdyanshi
 262              	
 263 015e 3220     		movs r0, # 0x32
 264 0160 0021     		movs r1, # 0
 265 0162 00F010FA 		bl _xielcd
 266 0166 00F009FA 		bl _lcdyanshi
 267 016a 2820     		movs r0, # 0x28
 268 016c 0021     		movs r1, # 0
 269 016e 00F00AFA 		bl _xielcd
ARM GAS  1.s 			page 6


 270 0172 00F003FA 		bl _lcdyanshi
 271 0176 0C20     		movs r0, # 0x0c
 272 0178 0021     		movs r1, # 0
 273 017a 00F004FA 		bl _xielcd
 274 017e 00F0FDF9 		bl _lcdyanshi
 275 0182 0120     		movs r0, # 0x01
 276 0184 0021     		movs r1, # 0
 277 0186 00F0FEF9 		bl _xielcd
 278 018a 00F0F7F9 		bl _lcdyanshi
 279              	
 280 018e 8020     		movs r0, # 0x80
 281 0190 9049     		ldr r1, = yjmwxwx
 282 0192 1022     		movs r2, # 16
 283 0194 00F0E4F9 		bl _lcdxianshi
 284 0198 8F48     		ldr r0, = 0xffffff
 285              	yjmwxwx_yanshi:
 286 019a 0138     		subs r0, r0, # 1
 287 019c FDD1     		bne yjmwxwx_yanshi
 288              	
 289 019e 0120     		movs r0, # 0x01
 290 01a0 0021     		movs r1, # 0
 291 01a2 00F0F0F9 		bl _xielcd
 292 01a6 00F0E9F9 		bl _lcdyanshi
 293              		
 294              	
 295              	dmachushihua:
 296              		@+0=LSR,+4=IFCR,
 297              		@+8=CCR1,+c=CNDTR1,+10=CPAR1+14=CMAR1,
 298              		@+1c=CCR2,+20=CNDTR2,+24=CPAR2,+28=CMAR2
 299              		@+30=CCR3,+34=CNDTR3,+38=CPAR2,+3c=CMAR3
 300              		@+44=CCR4,+48=CNDTR4,+4c=CPAR4,+50=CMAR4
 301              		@+58=CCR5,+5c=CNDTR5,+60=CPAR5,+64=CMAR5
 302              		@+6C=CCR6,+70=CNDTR6,+74=CPAR6,+78=CMAR6
 303              		@+80=CCR7,+84=CNDTR7,+88=CPAR7,+8c=CMAR7
 304              	
 305              		@tim1ch3DMA
 306 01aa 8C48     		ldr r0, = 0x40020000
 307 01ac 8C49     		ldr r1, = 0x40012c3c @ 外设地址
 308 01ae 0166     		str r1, [r0, # 0x60]
 309 01b0 8C49     		ldr r1, = zheng_xian_biao @ 储存器地址
 310 01b2 4166     		str r1, [r0, # 0x64]
 311 01b4 7649     		ldr r1, = 100             @点数
 312 01b6 C165     		str r1, [r0, # 0x5c]
 313 01b8 8B49     		ldr r1, = 0x35b1         @ 储存到外设
 314 01ba 8165     		str r1, [r0, # 0x58]
 315              	
 316              		@ adc dma
 317 01bc 8748     		ldr r0, = 0x40020000
 318 01be 8B49     		ldr r1, = 0x40012440
 319 01c0 0161     		str r1, [r0, # 0x10]
 320 01c2 8B49     		ldr r1, = dianyabiao
 321 01c4 4161     		str r1, [r0, # 0x14]
 322 01c6 7249     		ldr r1, =  100
 323 01c8 C160     		str r1, [r0, # 0x0c]
 324 01ca 8A49     		ldr r1, = 0xaa1		@ 5a1
 325 01cc 8160     		str r1, [r0, # 0x08]
 326              	
ARM GAS  1.s 			page 7


 327              	_systick:		@ systick定时器初始化
 328              	
 329 01ce 8A4F     		ldr r7, = 0xe000e010
 330 01d0 8A4E     		ldr r6, = 5600
 331 01d2 7E60     		str r6, [r7, # 4]
 332 01d4 BE60     		str r6, [r7, # 8]
 333 01d6 0726     		movs r6, # 0x07
 334              	
 335              	tim3chushihua:
 336 01d8 8948     		ldr r0, = 0x40000400 @ tim3_cr1
 337 01da 8A49     		ldr r1, = 55999
 338 01dc 8162     		str r1, [r0, # 0x28] @ psc
 339 01de 8A49     		ldr r1, = 1000
 340 01e0 C162     		str r1, [r0, # 0x2c] @ ARR
 341 01e2 8A49     		ldr r1, = 0x7878
 342 01e4 8161     		str r1, [r0, # 0x18]
 343 01e6 8A49     		ldr r1, = 500
 344 01e8 4163     		str r1, [r0, # 0x34]
 345 01ea 8163     		str r1, [r0, # 0x38]
 346 01ec 1121     		movs r1, # 0x11
 347 01ee 0162     		str r1, [r0, # 0x20]
 348 01f0 8849     		ldr r1, = 0x21
 349 01f2 0160     		str r1, [r0]
 350              		
 351              	tim1chushiha:
 352 01f4 8848     		ldr r0, = 0x40012c00 @ tim1_cr1
 353 01f6 0021     		movs r1, # 0
 354 01f8 8162     		str r1, [r0, # 0x28] @ psc
 355 01fa 8849     		ldr r1, = 56
 356 01fc C162     		str r1, [r0, # 0x2c] @ ARR
 357 01fe 2021     		movs r1, # 0x20
 358 0200 4160     		str r1, [r0, # 0x04] @ TRGO
 359 0202 3821     		movs r1, # 0x38
 360 0204 8161     		str r1, [r0, # 0x18] @ ccmr1 cc1
 361 0206 3821     		movs r1, # 56
 362 0208 4163     		str r1, [r0, # 0x34]
 363 020a 8549     		ldr r1, = 0x68
 364 020c C161     		str r1, [r0, # 0x1c] @ ccmr2  CC3
 365 020e 8549     		ldr r1, = 0x500    @  CC3
 366 0210 0162     		str r1, [r0, # 0x20] @ ccer
 367 0212 8549     		ldr r1, = 0x8000
 368 0214 4164     		str r1, [r0, # 0x44] @ BDTR
 369 0216 8549     		ldr r1, = 0x800 @ CC3 DMA
 370 0218 C160     		str r1, [r0, # 0x0c] @ DIER
 371 021a 8549     		ldr r1, = 0x81
 372 021c 0160     		str r1, [r0]
 373 021e 3E60     		str r6, [r7]	@systick 开
 374              	
 375              	ting:
 376              	
 377 0220 8448     		ldr r0, = jiaodu
 378 0222 0068     		ldr r0, [r0]
 379 0224 00F00CF8 		bl __xian_shi_jiao_du
 380 0228 FAE7     		b ting
 381              	
 382              	
 383              	
ARM GAS  1.s 			page 8


 384              	
 385              		
 386 022a 0621     		movs r1, # 6
 387 022c 5C4A     		ldr r2, = asciimabiao
 388 022e FF23     		movs r3, # 0xff
 389 0230 00F0E5F9 		bl _zhuanascii
 390 0234 C920     		movs r0, # 0xc9
 391 0236 5A49     		ldr r1, = asciimabiao
 392 0238 0622     		movs r2, # 6
 393 023a 00F091F9 		bl _lcdxianshi
 394 023e EFE7     		b ting
 395              	
 396              	
 397              	
 398              	
 399              	__xian_shi_jiao_du:
 400              		@入口R0=角度
 401 0240 1FB5     		push {r0-r4,lr}
 402 0242 0446     		mov r4, r0
 403 0244 8F20     		movs r0, # 0x8f
 404 0246 7C49     		ldr r1, = jiaodufuhao
 405 0248 0122     		movs r2, # 1
 406 024a 00F089F9 		bl _lcdxianshi
 407              	
 408 024e 2400     		movs r4, r4
 409 0250 07D5     		bpl __jiaodu_bu_shi_zheng
 410 0252 8820     		movs r0, # 0x88
 411 0254 7949     		ldr r1, = _fu
 412 0256 0122     		movs r2, # 1
 413 0258 00F082F9 		bl _lcdxianshi
 414 025c E443     		mvns r4, r4
 415 025e 0134     		adds r4, r4, # 1
 416 0260 04E0     		b __xian_shi_jiaodu
 417              	__jiaodu_bu_shi_zheng:
 418 0262 8820     		movs r0, # 0x88
 419 0264 7649     		ldr r1, = kong
 420 0266 0122     		movs r2, # 1
 421 0268 00F07AF9 		bl _lcdxianshi
 422              	__xian_shi_jiaodu:
 423 026c 2046     		mov r0, r4
 424 026e 0621     		movs r1, # 6
 425 0270 4B4A     		ldr r2, = asciimabiao
 426 0272 0323     		movs r3, # 3
 427 0274 00F0C3F9 		bl _zhuanascii
 428 0278 8920     		movs r0, # 0x89
 429 027a 4949     		ldr r1, = asciimabiao
 430 027c 0622     		movs r2, # 6
 431 027e 00F06FF9 		bl _lcdxianshi
 432 0282 1FBD     		pop {r0-r4,pc}
 433              	
 434              	__xiang_wei_xuan_zhuan:
 435 0284 FCB5     		push {r2-r7,lr}
 436              		@R0=R,R1=I
 437 0286 0346     		mov r3, r0
 438 0288 0846     		mov r0, r1
 439 028a 6E4C     		ldr r4, = cos_jiaozheng         @cos
 440 028c 6E4D     		ldr r5, = sin_jiaozheng         @sin
ARM GAS  1.s 			page 9


 441 028e 2468     		ldr r4, [r4]
 442 0290 2D68     		ldr r5, [r5]
 443 0292 002C     		cmp r4, # 0
 444 0294 04D1     		bne __xuanzhuan_fangxiang_jiance
 445 0296 002D     		cmp r5, # 0
 446 0298 02D1     		bne __xuanzhuan_fangxiang_jiance
 447 029a 0146     		mov r1, r0
 448 029c 1846     		mov r0, r3
 449 029e FCBD     		pop {r2-r7,pc}
 450              	__xuanzhuan_fangxiang_jiance:
 451 02a0 2400     		movs r4, r4
 452 02a2 03D5     		bpl __xuan_zhuan_xiang_wei
 453 02a4 2646     		mov r6, r4
 454 02a6 2F46     		mov r7, r5
 455 02a8 3C46     		mov r4, r7
 456 02aa 3546     		mov r5, r6
 457              	__xuan_zhuan_xiang_wei:
 458 02ac 2646     		mov r6, r4
 459 02ae 2F46     		mov r7, r5
 460 02b0 5C43     		muls r4, r4, r3         @x*cos
 461 02b2 4643     		muls r6, r6, r0         @y*cos
 462 02b4 5D43     		muls r5, r5, r3         @x*sin
 463 02b6 4743     		muls r7, r7, r0         @y*sin
 464 02b8 E413     		asrs r4, r4, # 15
 465 02ba ED13     		asrs r5, r5, # 15
 466 02bc F613     		asrs r6, r6, # 15
 467 02be FF13     		asrs r7, r7, # 15
 468              	
 469 02c0 E41B     		subs r4, r4, r7         @x
 470 02c2 7619     		adds r6, r6, r5         @y
 471 02c4 3146     		mov r1, r6		@i
 472 02c6 2046     		mov r0, r4		@r
 473 02c8 FCBD     		pop {r2-r7,pc}
 474              	__cordic_cos_sin:
 475              		@入口R0
 476              		@出口R0=COS，R1=SIN
 477              		@ x= 0x4dba
 478              		@ r1=x,r2=y,r0=z,r4=d,r5=k,r6=cordic_mabiao
 479              	
 480 02ca FCB5     		push {r2-r7,lr}
 481 02cc 4246     		mov r2, r8
 482 02ce 4B46     		mov r3, r9
 483 02d0 0CB4     		push {r2-r3}
 484 02d2 0025     		movs r5, # 0
 485 02d4 2A46     		mov r2, r5
 486 02d6 2C46     		mov r4, r5
 487 02d8 5C49     		ldr r1, = 0x4dba
 488              	cordicxunhuan:			 @ 循环
 489 02da C413     		asrs r4, r0, # 15
 490              		@ x
 491 02dc 1746     		mov r7, r2
 492 02de 2A41     		asrs r2, r2, r5
 493 02e0 6240     		eors r2, r2, r4
 494 02e2 121B     		subs r2, r2, r4
 495 02e4 8B1A     		subs r3, r1, r2
 496              		@ y
 497 02e6 0E46     		mov r6, r1
ARM GAS  1.s 			page 10


 498 02e8 2941     		asrs r1, r1, r5
 499 02ea 6140     		eors r1, r1, r4
 500 02ec 091B     		subs r1, r1, r4
 501 02ee 7F18     		adds r7, r7, r1
 502              		@ z
 503 02f0 574E     		ldr r6, = cordic_yong_atan_biao
 504 02f2 AA00     		lsls r2, r5, # 2
 505 02f4 B158     		ldr r1, [r6, r2]
 506 02f6 6140     		eors r1, r1, r4
 507 02f8 091B     		subs r1, r1, r4
 508 02fa 401A     		subs r0, r0, r1
 509 02fc 1946     		mov r1, r3
 510 02fe 3A46     		mov r2, r7
 511 0300 0135     		adds r5, # 1
 512 0302 102D     		cmp r5, # 16
 513 0304 E9D1     		bne cordicxunhuan
 514 0306 1846     		mov r0, r3
 515 0308 3946     		mov r1, r7
 516 030a 0CBC     		pop {r2-r3}
 517 030c 9046     		mov r8, r2
 518 030e 9946     		mov r9, r3
 519 0310 FCBD     		pop {r2-r7,pc}
 520              	__atan2_ji_suan:
 521              		@入口R0=实部，R1=虚部，结果=R0
 522 0312 FCB5     		push {r2-r7,lr}
 523 0314 4246     		mov r2, r8
 524 0316 04B4     		push {r2}
 525 0318 4E4B     		ldr r3, = cordic_yong_cos_sin
 526 031a 0A22     		movs r2, # 10
 527 031c 5043     		muls r0, r0, r2
 528 031e 5143     		muls r1, r1, r2
 529 0320 0022     		movs r2, # 0
 530 0322 9046     		mov r8, r2
 531 0324 4C4C     		ldr r4, = 9000
 532 0326 E403     		lsls r4, r4, # 15
 533              	__cordic_atan2_xun_huan:
 534              	__du_cos_sin:
 535 0328 1D68     		ldr r5, [r3]	@cos
 536 032a 0433     		adds r3, r3, # 4
 537 032c 2F46     		mov r7, r5
 538 032e 1E68     		ldr r6, [r3]	@sin
 539 0330 0433     		adds r3, r3, # 4
 540 0332 3246     		mov r2, r6
 541 0334 4543     		muls r5, r5, r0         @x*cos
 542 0336 4243     		muls r2, r2, r0         @x*sin
 543 0338 4E43     		muls r6, r6, r1         @y*sin
 544 033a 4F43     		muls r7, r7, r1         @y*cos
 545 033c 0900     		movs r1, r1
 546 033e 05D5     		bpl __ni_shi_zhen_zhuan
 547              	__shun_shi_zhen_zhuan:
 548 0340 AD1B     		subs r5, r5, r6
 549 0342 BF18     		adds r7, r7, r2
 550 0344 4646     		mov r6, r8
 551 0346 3619     		adds r6, r6, r4
 552 0348 B046     		mov r8, r6
 553 034a 04E0     		b __xuan_zhuan_wan
 554              	__ni_shi_zhen_zhuan:
ARM GAS  1.s 			page 11


 555 034c AD19     		adds r5, r5, r6
 556 034e BF1A     		subs r7, r7, r2
 557 0350 4646     		mov r6, r8
 558 0352 361B     		subs r6, r6, r4
 559 0354 B046     		mov r8, r6
 560              	__xuan_zhuan_wan:
 561 0356 3F4E     		ldr r6, = cordic_yong_cos_sin
 562 0358 2022     		movs r2, # 32
 563 035a 9200     		lsls r2, r2, # 2
 564 035c B618     		adds r6, r6, r2
 565 035e AD13     		asrs r5, r5, # 14
 566 0360 BF13     		asrs r7, r7, # 14
 567 0362 2846     		mov r0, r5
 568 0364 3946     		mov r1, r7
 569 0366 6408     		lsrs r4, r4, # 1	@旋转
 570 0368 B342     		cmp r3,	r6
 571 036a DDD1     		bne __cordic_atan2_xun_huan
 572 036c 4046     		mov r0, r8
 573 036e C043     		mvns r0, r0
 574 0370 0130     		adds r0, r0, # 1
 575 0372 C013     		asrs r0, r0, # 15      @除32768等于角度
 576 0374 04BC     		pop {r2}
 577 0376 9046     		mov r8, r2
 578 0378 FCBD     		pop {r2-r7,pc}
 579 037a 00000020 		.ltorg
 579      02400010 
 579      02400100 
 579      01000200 
 579      15000000 
 580              	
 581              	
 582              	
 583              	__xiangwei_jiaozheng:
 584 045c 3FB5     		push {r0-r5,lr}
 585 045e 2648     		ldr r0, = jiaodu_jiaozheng
 586 0460 2649     		ldr r1, = 9000
 587 0462 0068     		ldr r0, [r0]
 588 0464 264A     		ldr r2, = 51471
 589 0466 0000     		movs r0, r0
 590 0468 03D5     		bpl __jiaozheng_jiaodu_bushi0
 591 046a C043     		mvns r0, r0
 592 046c 0130     		adds r0, r0, # 1
 593 046e 0124     		movs r4, # 1
 594 0470 00E0     		b __ji_suan_jiaozheng_jiaodu
 595              	__jiaozheng_jiaodu_bushi0:
 596 0472 0024     		movs r4, # 0
 597              	__ji_suan_jiaozheng_jiaodu:
 598 0474 234D     		ldr r5, = 10000
 599 0476 6843     		muls r0, r0, r5
 600 0478 00F0DAF8 		bl _chufa
 601 047c 5043     		muls r0, r0, r2
 602 047e 2946     		mov r1, r5
 603 0480 00F0D6F8 		bl _chufa
 604 0484 012C     		cmp r4, # 1
 605 0486 01D1     		bne __suan_cos_sin
 606 0488 C043     		mvns r0, r0
 607 048a 0130     		adds r0, r0, # 1
ARM GAS  1.s 			page 12


 608              	__suan_cos_sin:
 609 048c FFF71DFF 		bl __cordic_cos_sin
 610 0490 1D4A     		ldr r2, = cos_jiaozheng
 611 0492 1E4B     		ldr r3, = sin_jiaozheng
 612 0494 1060     		str r0, [r2]
 613 0496 1960     		str r1, [r3]
 614 0498 3FBD     		pop {r0-r5,pc}
 615              	
 616              	
 617              	__chuan_gan_qi_lvbo:
 618              		@50*4偏移=0XC8
 619 049a FCB5     		push {r2-r7,lr}
 620 049c 4446     		mov r4, r8
 621 049e 4D46     		mov r5, r9
 622 04a0 30B4     		push {r4-r5}
 623 04a2 1B48     		ldr r0, = 0x200001b4 @sin_zheng
 624 04a4 1B49     		ldr r1, = 0x2000027c @sin_fu
 625 04a6 1C4A     		ldr r2, = 0x200001b0 @cos_zheng
 626 04a8 1C4B     		ldr r3, = 0x20000278 @cos_fu
 627 04aa 0468     		ldr r4, [r0]
 628 04ac 0D68     		ldr r5, [r1]
 629 04ae 1668     		ldr r6, [r2]
 630 04b0 1F68     		ldr r7, [r3]
 631 04b2 641B     		subs r4, r4, r5
 632 04b4 F61B     		subs r6, r6, r7
 633 04b6 B046     		mov r8, r6
 634 04b8 A146     		mov r9, r4
 635 04ba FFF7CFFF 		bl __xiangwei_jiaozheng
 636 04be 3046     		mov r0, r6
 637 04c0 2146     		mov r1, r4
 638 04c2 FFF7DFFE 		bl __xiang_wei_xuan_zhuan
 639 04c6 0646     		mov r6, r0
 640 04c8 0C46     		mov r4, r1
 641 04ca 2146     		mov r1, r4
 642 04cc 144A     		ldr r2, = lvboqizhizhen
 643 04ce 1548     		ldr r0, =lvboqihuanchong
 644 04d0 00F032F8 		bl __lv_bo_qi
 645 04d4 3146     		mov r1, r6
 646 04d6 0446     		mov r4, r0
 647 04d8 134A     		ldr r2, = lvboqizhizhen1
 648 04da 1448     		ldr r0, = lvboqihuanchong1
 649 04dc 00F02CF8 		bl __lv_bo_qi
 650 04e0 2146     		mov r1, r4
 651 04e2 134A     		ldr r2, = cos_cha
 652 04e4 134B     		ldr r3, = sin_cha
 653 04e6 4446     		mov r4, r8
 654 04e8 4D46     		mov r5, r9
 655 04ea 1460     		str r4, [r2]
 656 04ec 1D60     		str r5, [r3]
 657 04ee 30BC     		pop {r4-r5}
 658 04f0 A046     		mov r8, r4
 659 04f2 A946     		mov r9, r5
 660 04f4 FCBD     		pop {r2-r7,pc}
 661 04f6 0000FC00 		.ltorg
 661      00202823 
 661      00000FC9 
 661      00001027 
ARM GAS  1.s 			page 13


 661      0000F800 
 662              	
 663              	__lv_bo_qi:
 664              		@地址顺序：指针，累加值，缓冲区
 665              		@入口R0=缓冲区，R1=数据, r2,=指针
 666              		@出口R0
 667 0538 78B5     		push {r3-r6,lr}
 668 053a 8024     		movs r4, # 128
 669 053c 1568     		ldr r5, [r2]
 670 053e 2B46     		mov r3, r5
 671 0540 AB00     		lsls r3, r5, # 2
 672 0542 C658     		ldr r6, [r0, r3]
 673 0544 C150     		str r1, [r0, r3]
 674 0546 0135     		adds r5, r5, # 1
 675 0548 1560     		str r5, [r2]
 676 054a A542     		cmp r5, r4
 677 054c 01D1     		bne __huanchong_leijia
 678 054e 0025     		movs r5, # 0
 679 0550 1560     		str r5, [r2]
 680              	__huanchong_leijia:
 681 0552 0438     		subs r0, r0, # 4
 682 0554 0568     		ldr r5, [r0]
 683 0556 4919     		adds r1, r1, r5
 684 0558 891B     		subs r1, r1, r6
 685 055a 0160     		str r1, [r0]
 686 055c C811     		asrs r0, r1, # 7	@128
 687 055e 78BD     		pop {r3-r6,pc}
 688              		.ltorg
 689              	
 690              	
 691              		
 692              	
 693              	_lcdxianshi:		  		@r0=LCD位置，r1=数据地址，r2=长度
 694 0560 1FB5     		push {r0-r4,lr}
 695 0562 0C46     		mov r4, r1
 696              	
 697 0564 0021     		movs r1, # 0
 698 0566 00F00EF8 		bl _xielcd
 699              	
 700 056a 0121     		movs r1, # 1
 701 056c 0023     		movs r3, # 0
 702              	_lcdxianshixunhuan:
 703 056e E05C     		ldrb r0, [r4,r3]
 704 0570 00F009F8 		bl _xielcd
 705 0574 0133     		adds r3, r3, # 1
 706 0576 9342     		cmp r3, r2
 707 0578 F9D1     		bne _lcdxianshixunhuan
 708 057a 1FBD     		pop {r0-r4,pc}
 709              	
 710              	_lcdyanshi:
 711 057c 20B5     		push {r5,lr}
 712 057e A14D     		ldr r5, = 0x1000
 713              	_lcdyanshixunhuan:
 714 0580 013D     		subs r5, r5, # 1
 715 0582 FDD1     		bne _lcdyanshixunhuan
 716 0584 20BD     		pop {r5,pc}
 717              	
ARM GAS  1.s 			page 14


 718              	_xielcd:				@入R0=8位,r1=0命令,r1=1数据
 719 0586 3FB5     		push {r0-r5,lr}
 720 0588 9F4C     		ldr r4, = liangcheng  @ 量程开关 (第6位和第7位)
 721 058a 0246     		mov r2, r0
 722 058c 2568     		ldr r5, [r4]
 723 058e 1209     		lsrs r2, r2, # 4
 724 0590 9200     		lsls r2, r2, # 2	@ 高四位
 725 0592 0007     		lsls r0, r0, # 28
 726 0594 800E     		lsrs r0, r0, # 26	@ 低四位
 727 0596 C907     		lsls r1, r1, # 31
 728 0598 01D5     		bpl __lcd_ming_ling
 729              	__lcd_shu_ju:
 730 059a 0323     		movs r3, # 0x03		@ RS = 1 E = 1
 731 059c 00E0     		b __xie_lcd_shu_ju
 732              	__lcd_ming_ling:
 733 059e 0223     		movs r3, # 0x02		@ RS = 0 E = 1
 734              	__xie_lcd_shu_ju:
 735 05a0 5B19     		adds r3, r3, r5
 736 05a2 0146     		mov r1, r0
 737 05a4 D218     		adds r2, r2, r3
 738 05a6 1000     		movs r0, r2
 739 05a8 00F00BF8 		bl __74hc595
 740 05ac 0238     		subs r0, r0, # 0x02
 741 05ae 00F008F8 		bl __74hc595
 742 05b2 0846     		mov r0, r1
 743 05b4 C018     		adds r0, r0, r3
 744 05b6 00F004F8 		bl __74hc595
 745 05ba 0238     		subs r0, r0, # 0x02
 746 05bc 00F001F8 		bl __74hc595
 747 05c0 3FBD     		pop {r0-r5,pc}
 748              	
 749              	__74hc595:				@ 入R0=8位
 750 05c2 FFB5     		push {r0-r7,lr}
 751 05c4 914E     		ldr r6, = 0x48000000
 752 05c6 0125     		movs r5, # 0x01		@ SRCLK
 753 05c8 0222     		movs r2, # 0x02		@ RCLK
 754 05ca 0423     		movs r3, # 0x04		@ SER
 755 05cc 1824     		movs r4, # 24
 756              	__595_yiweixunhuan:
 757 05ce B262     		str r2, [r6, # 0x28]	@ rclk=0
 758 05d0 B562     		str r5, [r6, # 0x28]	@ srclk=0
 759              		@ovs r7, # 0xff
 760 05d2 8F4F     		ldr r7, = 0x1ff
 761              	__595_yanshi:
 762 05d4 013F     		subs r7, r7, # 1
 763 05d6 FDD1     		bne __595_yanshi
 764 05d8 0146     		mov r1, r0
 765 05da A140     		lsls r1, r1, r4
 766 05dc 01D5     		bpl __ser_0
 767              	__ser_1:
 768 05de B361     		str r3, [r6, # 0x18]	@ ser=1
 769 05e0 00E0     		b __595_yiwei
 770              	__ser_0:
 771 05e2 B362     		str r3, [r6, # 0x28]	@ ser=0
 772              	__595_yiwei:
 773 05e4 B561     		str r5, [r6, # 0x18]
 774              		@movs r7, # 0xff
ARM GAS  1.s 			page 15


 775 05e6 8A4F     		ldr r7, = 0x1ff
 776              	__595_yanshi1:
 777 05e8 013F     		subs r7, r7, # 1
 778 05ea FDD1     		bne __595_yanshi1
 779 05ec 0134     		adds r4, r4, # 1
 780 05ee 202C     		cmp r4, # 32
 781 05f0 EDD1     		bne __595_yiweixunhuan
 782 05f2 B261     		str r2, [r6, # 0x18]	@ rclk=1
 783              		@movs r7, # 0xff
 784 05f4 864F     		ldr r7, = 0x1ff
 785              	__595_yanshi2:
 786 05f6 013F     		subs r7, r7, # 1
 787 05f8 FDD1     		bne __595_yanshi2
 788 05fa B262     		str r2, [r6, # 0x28]	@ rclk = 0
 789 05fc FFBD     		pop {r0-r7,pc}
 790              	
 791              	
 792              	
 793              	_zhuanascii:						@ 16进制转ASCII
 794              		@ R0要转的数据， R1长度，R2结果表首地址, r3=小数点位置
 795 05fe FFB5     		push {r0-r7,lr}
 796 0600 1F46     		mov r7, r3
 797 0602 0546     		mov r5, r0
 798 0604 0E46     		mov r6, r1
 799 0606 0A21     		movs r1, # 10
 800              	_xunhuanqiuma:
 801 0608 00F012F8 		bl _chufa
 802 060c 0446     		mov r4, r0
 803 060e 4C43     		muls r4, r1
 804 0610 2B1B     		subs r3, r5, r4
 805 0612 3033     		adds r3, r3, # 0x30
 806 0614 0546     		mov r5, r0
 807 0616 013E     		subs r6, r6, # 1
 808 0618 08D0     		beq _qiumafanhui
 809 061a BE42     		cmp r6, r7
 810 061c 02D1     		bne _meidaoxiaoshudian
 811 061e 2E24     		movs r4, # 0x2e		@小数点
 812 0620 9455     		strb r4, [r2,r6]	@插入小数点
 813 0622 013E     		subs r6, r6, # 1
 814              	_meidaoxiaoshudian:
 815 0624 9355     		strb r3, [r2,r6]
 816 0626 3600     		movs r6, r6
 817 0628 EED1     		bne _xunhuanqiuma
 818 062a FFBD     		pop {r0-r7,pc}
 819              	_qiumafanhui:
 820 062c 9355     		strb r3, [r2, r6]
 821 062e FFBD     		pop {r0-r7,pc}
 822              	
 823              	
 824              	
 825              		
 826              	
 827              	_chufa:				@软件除法
 828              		@ r0 除以 r1 等于 商(r0)
 829 0630 1EB5     		push {r1-r4,lr}
 830 0632 0028     		cmp r0, # 0
 831 0634 0ED0     		beq _chufafanhui
ARM GAS  1.s 			page 16


 832 0636 0029     		cmp r1, # 0
 833 0638 0CD0     		beq _chufafanhui
 834 063a 0246     		mov r2, r0
 835 063c 0123     		movs r3, # 1
 836 063e DB07     		lsls r3, r3, # 31
 837 0640 0020     		movs r0, # 0
 838 0642 0446     		mov r4, r0
 839              	_chufaxunhuan:
 840 0644 5200     		lsls r2, r2, # 1
 841 0646 6441     		adcs r4, r4, r4
 842 0648 8C42     		cmp r4, r1
 843 064a 01D3     		bcc _chufaweishubudao0
 844 064c C018     		adds r0, r0, r3
 845 064e 641A     		subs r4, r4, r1
 846              	_chufaweishubudao0:
 847 0650 5B08     		lsrs r3, r3, # 1
 848 0652 F7D1     		bne _chufaxunhuan
 849              	_chufafanhui:
 850 0654 1EBD     		pop {r1-r4,pc}
 851              	__chufa64:
 852              		@64位除32位
 853              		@ （R0=高32位R1=低32位）除（R2)= （R0高32）（R1低32）
 854 0656 F8B5     		push {r3-r7,lr}
 855 0658 002A     		cmp r2, # 0
 856 065a 1DD0     		beq __chu_fa64_fan_hui0
 857 065c 0029     		cmp r1, # 0
 858 065e 01D1     		bne __chu_fa64_ji_suan
 859 0660 0028     		cmp r0, # 0
 860 0662 19D0     		beq __chu_fa64_fan_hui0
 861              	__chu_fa64_ji_suan:
 862 0664 0024     		movs r4, # 0
 863 0666 2746     		mov r7, r4
 864 0668 2346     		mov r3, r4
 865 066a 2546     		mov r5, r4
 866 066c 0126     		movs r6, # 1
 867 066e F607     		lsls r6, r6, # 31
 868              	__chu_fa64_xun_huan:
 869 0670 4900     		lsls r1, r1, # 1
 870 0672 4041     		adcs r0, r0, r0
 871 0674 6441     		adcs r4, r4, r4
 872 0676 9442     		cmp r4, r2
 873 0678 02D3     		bcc __chu_fa_yi_wei
 874 067a 9B19     		adds r3, r3, r6
 875 067c 7D41     		adcs r5, r5, r7
 876 067e A41A     		subs r4, r4, r2
 877              	__chu_fa_yi_wei:
 878 0680 3600     		movs r6, r6
 879 0682 04D0     		beq __di_yi_wei
 880 0684 7608     		lsrs r6, r6, # 1        @高32位移位
 881 0686 F3D1     		bne __chu_fa64_xun_huan
 882 0688 0127     		movs r7, # 1
 883 068a FF07     		lsls r7, r7, # 31
 884 068c F0E7     		b __chu_fa64_xun_huan
 885              	__di_yi_wei:	            @低32位移位
 886 068e 7F08     		lsrs r7, r7, # 1
 887 0690 EED1     		bne __chu_fa64_xun_huan
 888 0692 1846     		mov r0, r3
ARM GAS  1.s 			page 17


 889 0694 2946     		mov r1, r5
 890 0696 F8BD     		pop {r3-r7,pc}
 891              	__chu_fa64_fan_hui0:
 892 0698 0020     		movs r0, # 0
 893 069a 0021     		movs r1, # 0
 894 069c F8BD     		pop {r3-r7,pc}
 895              	__chengfa:
 896              		@入R0 乘以 R1
 897              		@出 R0高32 ， R1低32
 898              		@0xffffffff*0xffffffff
 899              		@4        F F F E 0 0 0 1			@4
 900              		@3                F F F E 0 0 0 1		@3
 901              		@2                F F F E 0 0 0 1		@2
 902              		@1                        F F F E 0 0 0 1	@1
 903              		@         F F F F F F F E 0 0 0 0 0 0 0 1
 904 069e FCB5     		push {r2-r7,lr}
 905 06a0 0028     		cmp r0, # 0
 906 06a2 1ED0     		beq __cheng_fa_fan_hui
 907 06a4 0029     		cmp r1, # 0
 908 06a6 1CD0     		beq __cheng_fa_fan_hui
 909              	__ji_suan_cheng_fa:
 910 06a8 0246     		mov r2, r0
 911 06aa 0B46     		mov r3, r1
 912 06ac 000C     		lsrs r0, r0, # 16	@高16
 913 06ae 1204     		lsls r2, r2, # 16	@ 低16
 914 06b0 120C     		lsrs r2, r2, # 16
 915 06b2 090C     		lsrs r1, r1, # 16	@高16
 916 06b4 1B04     		lsls r3, r3, # 16	@低16
 917 06b6 1B0C     		lsrs r3, r3, # 16
 918 06b8 1446     		mov r4, r2
 919 06ba 0546     		mov r5, r0
 920 06bc 5A43     		muls r2, r2, r3		@1
 921 06be 5843     		muls r0, r0, r3		@2
 922 06c0 4C43     		muls r4, r4, r1		@3
 923 06c2 4D43     		muls r5, r5, r1		@4
 924 06c4 0646     		mov r6, r0
 925 06c6 2746     		mov r7, r4
 926 06c8 0004     		lsls r0, r0, # 16	@2低32
 927 06ca 2404     		lsls r4, r4, # 16	@3低32
 928 06cc 360C     		lsrs r6, r6, # 16	@2高32
 929 06ce 3F0C     		lsrs r7, r7, # 16	@3高32
 930 06d0 0021     		movs r1, # 0
 931 06d2 1218     		adds r2, r2, r0		@低32
 932 06d4 4E41     		adcs r6, r6, r1		@高32
 933 06d6 1219     		adds r2, r2, r4
 934 06d8 7E41     		adcs r6, r6, r7
 935 06da 7619     		adds r6, r6, r5
 936 06dc 3046     		mov r0, r6
 937 06de 1146     		mov r1, r2
 938 06e0 FCBD     		pop {r2-r7,pc}
 939              	__cheng_fa_fan_hui:
 940 06e2 0020     		movs r0, # 0
 941 06e4 0021     		movs r1, # 0
 942 06e6 FCBD     		pop {r2-r7,pc}
 943              	__dai_yu_shu_chufa:	                         @软件除法
 944              		@ r0 除以 r1 等于 商(r0)余R1
 945 06e8 1CB5     		push {r2-r4,lr}
ARM GAS  1.s 			page 18


 946 06ea 0028     		cmp r0, # 0
 947 06ec 0ED0     		beq __dai_yu_shu_chufafanhui
 948 06ee 0029     		cmp r1, # 0
 949 06f0 0CD0     		beq __dai_yu_shu_chufafanhui
 950 06f2 0246     		mov r2, r0
 951 06f4 0123     		movs r3, # 1
 952 06f6 DB07     		lsls r3, r3, # 31
 953 06f8 0020     		movs r0, # 0
 954 06fa 0446     		mov r4, r0
 955              	__dai_yu_shu_chufaxunhuan:
 956 06fc 5200     		lsls r2, r2, # 1
 957 06fe 6441     		adcs r4, r4, r4
 958 0700 8C42     		cmp r4, r1
 959 0702 01D3     		bcc __dai_yu_shu_chufaweishubudao0
 960 0704 C018     		adds r0, r0, r3
 961 0706 641A     		subs r4, r4, r1
 962              	__dai_yu_shu_chufaweishubudao0:
 963 0708 5B08     		lsrs r3, r3, # 1
 964 070a F7D1     		bne __dai_yu_shu_chufaxunhuan
 965              	__dai_yu_shu_chufafanhui:
 966 070c 1CBD     		        pop {r2-r4,pc}
 967              	_nmi_handler:
 968 070e 7047     		bx lr
 969              	_hard_fault:
 970 0710 7047     		bx lr
 971              	_svc_handler:
 972 0712 7047     		bx lr
 973              	_pendsv_handler:
 974 0714 7047     		bx lr
 975              	_systickzhongduan:
 976 0716 F0B5     		push {r4-r7,lr}
 977 0718 4346     		mov r3, r8
 978 071a 4C46     		mov r4, r9
 979 071c 5546     		mov r5, r10
 980 071e 5E46     		mov r6, r11
 981 0720 6746     		mov r7, r12
 982 0722 F8B4     		push {r3-r7}
 983 0724 3B48     		ldr r0, = 0xe0000d04
 984 0726 3C49     		ldr r1, = 0x02000000
 985 0728 0160     		str r1, [r0]                 @ 清除SYSTICK中断
 986 072a FFF7B6FE 		bl __chuan_gan_qi_lvbo
 987 072e 3B4A     		ldr r2, = cos
 988 0730 3B4B     		ldr r3, = sin
 989 0732 1060     		str r0, [r2]		@r
 990 0734 1960     		str r1, [r3]		@i
 991              	
 992 0736 FFF7ECFD 		bl __atan2_ji_suan
 993 073a 3A4C     		ldr r4, = jiaodu
 994 073c 3A4D     		ldr r5, = jiaodu_a
 995 073e 0200     		movs r2, r0
 996 0740 03D5     		bpl __jiaodu_bushi_fu
 997 0742 3A49     		ldr r1, = 36000
 998 0744 D243     		mvns r2, r2
 999 0746 0132     		adds r2, r2, # 1
 1000 0748 8A1A     		subs r2, r1, r2
 1001              	__jiaodu_bushi_fu:
 1002 074a 2060     		str r0, [r4]
ARM GAS  1.s 			page 19


 1003 074c 2860     		str r0, [r5]
 1004 074e 8046     		mov r8, r0
 1005              	
 1006 0750 3749     		ldr r1, = 0x4001300c
 1007 0752 0A80     		strh r2, [r1]
 1008              	
 1009 0754 3748     		ldr r0, = cos_cha
 1010 0756 3849     		ldr r1, = sin_cha
 1011 0758 0068     		ldr r0, [r0]
 1012 075a 0968     		ldr r1, [r1]
 1013 075c FFF7D9FD 		bl __atan2_ji_suan
 1014 0760 3649     		ldr r1, = jiaodu_b
 1015 0762 0860     		str r0, [r1]
 1016              	
 1017              	
 1018              	
 1019 0764 0746     		mov r7, r0
 1020 0766 4046     		mov r0, r8
 1021 0768 B846     		mov r8, r7
 1022              	
 1023              	__jiaodu_buchang_jisuan:
 1024              	
 1025 076a 354F     		ldr r7, = 18000
 1026 076c 4546     		mov r5, r8
 1027 076e 0646     		mov r6, r0
 1028 0770 761B     		subs r6, r6, r5
 1029 0772 F643     		mvns r6, r6
 1030 0774 0136     		adds r6, r6, # 1
 1031 0776 334B     		ldr r3, = 0x200000d0
 1032 0778 334C     		ldr r4, = 0x200000d4
 1033 077a 3500     		movs r5, r6
 1034 077c 02D5     		bpl __bao_cun_jiaodu_cha
 1035 077e ED43     		mvns r5, r5
 1036 0780 0135     		adds r5, r5, # 1
 1037 0782 FFE7     		b __bao_cun_jiaodu_cha
 1038              	__bao_cun_jiaodu_cha:
 1039 0784 BD42     		cmp r5, r7
 1040 0786 11D8     		bhi __systick_fanhui
 1041 0788 1860     		str r0, [r3]
 1042 078a 2560     		str r5, [r4]
 1043 078c 2F4B     		ldr r3, = 0x200000c8
 1044 078e 1E60     		str r6, [r3]
 1045              	__pid:
 1046 0790 3746     		mov r7, r6
 1047 0792 3446     		mov r4, r6
 1048              	__pid_bi_li:
 1049 0794 2E4B     		ldr r3, = 32768         @ KP
 1050 0796 5F43     		muls r7, r7, r3
 1051 0798 FF13     		asrs r7, r7, # 15
 1052              	__pid_ji_fen:
 1053 079a 2B4E     		ldr r6, = shang_ci_i
 1054 079c 2D4A     		ldr r2, = 20		@ KI
 1055 079e 3368     		ldr r3, [r6]
 1056 07a0 5443     		muls r4, r4, r2
 1057 07a2 E413     		asrs r4, r4, # 15
 1058 07a4 E418     		adds r4, r4, r3
 1059 07a6 3460     		str r4, [r6]
ARM GAS  1.s 			page 20


 1060              		@	adds r7, r7, r4
 1061              	__zhengzhuan_buchang:
 1062 07a8 2B4D     		ldr r5, = jiaodu_jiaozheng
 1063 07aa 2F60     		str r7, [r5]
 1064              	
 1065              	__systick_fanhui:
 1066              	
 1067              	__jiaodu_cha_jisuan:
 1068 07ac 254B     		ldr r3, = shangci_jiaodu
 1069 07ae 244F     		ldr r7, = 18000
 1070 07b0 1C68     		ldr r4, [r3]
 1071 07b2 8146     		mov r9, r0
 1072 07b4 0646     		mov r6, r0
 1073 07b6 361B     		subs r6, r6, r4
 1074 07b8 3200     		movs r2, r6
 1075 07ba 01D5     		bpl __baocun_jiaodu_cha
 1076 07bc D243     		mvns r2, r2
 1077 07be 0132     		adds r2, r2, # 1
 1078              	__baocun_jiaodu_cha:
 1079 07c0 BA42     		cmp r2, r7
 1080 07c2 14D8     		bhi __tick_fanhui
 1081 07c4 2548     		ldr r0, = lvboqihuanchong3
 1082 07c6 264A     		ldr r2, = lvboqizhizhen3
 1083 07c8 3146     		mov r1, r6
 1084 07ca FFF7B5FE 		bl __lv_bo_qi
 1085 07ce 254B     		ldr r3, = jiaodu_cha
 1086 07d0 1860     		str r0, [r3]
 1087 07d2 0000     		movs r0, r0
 1088 07d4 00D5     		bpl __jiance_zhuangtai
 1089 07d6 0124     		movs r4, # 1
 1090              	__jiance_zhuangtai:
 1091 07d8 0028     		cmp r0, # 0
 1092 07da 01D1     		bne __zai_zhuan
 1093 07dc 0021     		movs r1, # 0
 1094 07de 04E0     		b __baocun_zhengfan_zhuan
 1095              	__zai_zhuan:
 1096 07e0 012C     		cmp r4, # 1
 1097 07e2 01D1     		bne __fan_zhuan
 1098 07e4 C321     		movs r1, # 0xc3
 1099 07e6 00E0     		b __baocun_zhengfan_zhuan
 1100              	__fan_zhuan:
 1101 07e8 3C21     		movs r1, # 0x3c
 1102              	__baocun_zhengfan_zhuan:
 1103 07ea 184B     		ldr r3, = zhengfan_zhuan
 1104 07ec 1960     		str r1, [r3]
 1105              	__tick_fanhui:
 1106 07ee 154B     		ldr r3, = shangci_jiaodu
 1107 07f0 4846     		mov r0, r9
 1108 07f2 1860     		str r0, [r3]
 1109              	
 1110 07f4 F8BC     		pop {r3-r7}
 1111 07f6 9846     		mov r8, r3
 1112 07f8 A146     		mov r9, r4
 1113 07fa AA46     		mov r10, r5
 1114 07fc B346     		mov r11, r6
 1115 07fe BC46     		mov r12, r7
 1116 0800 F0BD     		pop {r4-r7,pc}
ARM GAS  1.s 			page 21


 1117              		
 1118              	
 1119              	aaa:
 1120 0802 7047     		bx lr
 1121 0804 00100000 		.ltorg
 1121      20000020 
 1121      00000048 
 1121      FF010000 
 1121      040D00E0 
 1122              		.end
ARM GAS  1.s 			page 22


DEFINED SYMBOLS
                 1.s:9      .data:0000000000000000 yjmwxwx
                 1.s:11     .data:0000000000000010 kong
                 1.s:13     .data:0000000000000014 _fu
                 1.s:15     .data:0000000000000015 jiaodu1
                 1.s:17     .data:0000000000000019 jiaodufuhao
                 1.s:19     .data:000000000000001d $d
                 1.s:20     .data:0000000000000020 zheng_xian_biao
                 1.s:23     .data:00000000000000f0 cordic_yong_cos_sin
                 1.s:25     .data:0000000000000170 cordic_yong_atan_biao
                 1.s:28     *ABS*:0000000020001000 STACKINIT
                 1.s:29     *ABS*:0000000020000000 asciimabiao
                 1.s:30     *ABS*:0000000020000020 liangcheng
                 1.s:31     *ABS*:00000000200000c8 zhengfan_zhuan
                 1.s:32     *ABS*:00000000200000cc jiaodu_cha
                 1.s:33     *ABS*:00000000200000d0 shangci_jiaodu
                 1.s:34     *ABS*:00000000200000d4 shang_ci_i
                 1.s:35     *ABS*:00000000200000d8 jiaodu_b
                 1.s:36     *ABS*:00000000200000dc jiaodu_a
                 1.s:37     *ABS*:00000000200000e0 jiaodu
                 1.s:38     *ABS*:00000000200000e4 cos
                 1.s:39     *ABS*:00000000200000e8 sin
                 1.s:40     *ABS*:00000000200000ec sin_cha
                 1.s:41     *ABS*:00000000200000f0 cos_cha
                 1.s:42     *ABS*:00000000200000f4 sin_jiaozheng
                 1.s:43     *ABS*:00000000200000f8 cos_jiaozheng
                 1.s:44     *ABS*:00000000200000fc jiaodu_jiaozheng
                 1.s:45     *ABS*:0000000020000100 dianyabiao
                 1.s:46     *ABS*:0000000020000300 lvboqizhizhen
                 1.s:47     *ABS*:0000000020000308 lvboqihuanchong
                 1.s:48     *ABS*:0000000020000510 lvboqizhizhen1
                 1.s:49     *ABS*:0000000020000518 lvboqihuanchong1
                 1.s:50     *ABS*:0000000020000900 lvboqizhizhen2
                 1.s:51     *ABS*:0000000020000908 lvboqihuanchong2
                 1.s:52     *ABS*:0000000020000b10 lvboqizhizhen3
                 1.s:53     *ABS*:0000000020000b18 lvboqihuanchong3
                 1.s:56     .text:0000000000000000 vectors
                 1.s:102    .text:00000000000000b0 _start
                 1.s:967    .text:000000000000070e _nmi_handler
                 1.s:969    .text:0000000000000710 _hard_fault
                 1.s:971    .text:0000000000000712 _svc_handler
                 1.s:973    .text:0000000000000714 _pendsv_handler
                 1.s:975    .text:0000000000000716 _systickzhongduan
                 1.s:1119   .text:0000000000000802 aaa
                            .text:0000000000000000 $d
                 1.s:101    .text:00000000000000b0 $t
                 1.s:103    .text:00000000000000b0 shizhong
                 1.s:110    .text:00000000000000bc denghse
                 1.s:114    .text:00000000000000c2 dengpllguan
                 1.s:126    .text:00000000000000d6 dengpll
                 1.s:135    .text:00000000000000e0 _waisheshizhong
                 1.s:152    .text:00000000000000ee _neicunqingling
                 1.s:156    .text:00000000000000f4 _neicunqinglingxunhuan
                 1.s:161    .text:00000000000000fa _waishezhongduan
                 1.s:183    .text:0000000000000100 io_she_zhi
                 1.s:223    .text:000000000000011c _adcchushihua
                 1.s:227    .text:0000000000000122 _dengadcjiaozhun
ARM GAS  1.s 			page 23


                 1.s:233    .text:000000000000012c _kaiadc
                 1.s:238    .text:0000000000000134 _deng_adc_wen_ding
                 1.s:242    .text:000000000000013a _tongdaoxuanze
                 1.s:257    .text:0000000000000152 _lcdchushihua
                 1.s:718    .text:0000000000000586 _xielcd
                 1.s:710    .text:000000000000057c _lcdyanshi
                 1.s:693    .text:0000000000000560 _lcdxianshi
                 1.s:285    .text:000000000000019a yjmwxwx_yanshi
                 1.s:295    .text:00000000000001aa dmachushihua
                 1.s:327    .text:00000000000001ce _systick
                 1.s:335    .text:00000000000001d8 tim3chushihua
                 1.s:351    .text:00000000000001f4 tim1chushiha
                 1.s:375    .text:0000000000000220 ting
                 1.s:399    .text:0000000000000240 __xian_shi_jiao_du
                 1.s:793    .text:00000000000005fe _zhuanascii
                 1.s:417    .text:0000000000000262 __jiaodu_bu_shi_zheng
                 1.s:422    .text:000000000000026c __xian_shi_jiaodu
                 1.s:434    .text:0000000000000284 __xiang_wei_xuan_zhuan
                 1.s:450    .text:00000000000002a0 __xuanzhuan_fangxiang_jiance
                 1.s:457    .text:00000000000002ac __xuan_zhuan_xiang_wei
                 1.s:474    .text:00000000000002ca __cordic_cos_sin
                 1.s:488    .text:00000000000002da cordicxunhuan
                 1.s:520    .text:0000000000000312 __atan2_ji_suan
                 1.s:533    .text:0000000000000328 __cordic_atan2_xun_huan
                 1.s:534    .text:0000000000000328 __du_cos_sin
                 1.s:554    .text:000000000000034c __ni_shi_zhen_zhuan
                 1.s:547    .text:0000000000000340 __shun_shi_zhen_zhuan
                 1.s:560    .text:0000000000000356 __xuan_zhuan_wan
                 1.s:579    .text:000000000000037a $d
                 1.s:579    .text:000000000000037c $d
                 1.s:583    .text:000000000000045c __xiangwei_jiaozheng
                 1.s:584    .text:000000000000045c $t
                 1.s:595    .text:0000000000000472 __jiaozheng_jiaodu_bushi0
                 1.s:597    .text:0000000000000474 __ji_suan_jiaozheng_jiaodu
                 1.s:827    .text:0000000000000630 _chufa
                 1.s:608    .text:000000000000048c __suan_cos_sin
                 1.s:617    .text:000000000000049a __chuan_gan_qi_lvbo
                 1.s:663    .text:0000000000000538 __lv_bo_qi
                 1.s:661    .text:00000000000004f6 $d
                 1.s:661    .text:00000000000004f8 $d
                 1.s:667    .text:0000000000000538 $t
                 1.s:680    .text:0000000000000552 __huanchong_leijia
                 1.s:702    .text:000000000000056e _lcdxianshixunhuan
                 1.s:713    .text:0000000000000580 _lcdyanshixunhuan
                 1.s:732    .text:000000000000059e __lcd_ming_ling
                 1.s:729    .text:000000000000059a __lcd_shu_ju
                 1.s:734    .text:00000000000005a0 __xie_lcd_shu_ju
                 1.s:749    .text:00000000000005c2 __74hc595
                 1.s:756    .text:00000000000005ce __595_yiweixunhuan
                 1.s:761    .text:00000000000005d4 __595_yanshi
                 1.s:770    .text:00000000000005e2 __ser_0
                 1.s:767    .text:00000000000005de __ser_1
                 1.s:772    .text:00000000000005e4 __595_yiwei
                 1.s:776    .text:00000000000005e8 __595_yanshi1
                 1.s:785    .text:00000000000005f6 __595_yanshi2
                 1.s:800    .text:0000000000000608 _xunhuanqiuma
                 1.s:819    .text:000000000000062c _qiumafanhui
ARM GAS  1.s 			page 24


                 1.s:814    .text:0000000000000624 _meidaoxiaoshudian
                 1.s:849    .text:0000000000000654 _chufafanhui
                 1.s:839    .text:0000000000000644 _chufaxunhuan
                 1.s:846    .text:0000000000000650 _chufaweishubudao0
                 1.s:851    .text:0000000000000656 __chufa64
                 1.s:891    .text:0000000000000698 __chu_fa64_fan_hui0
                 1.s:861    .text:0000000000000664 __chu_fa64_ji_suan
                 1.s:868    .text:0000000000000670 __chu_fa64_xun_huan
                 1.s:877    .text:0000000000000680 __chu_fa_yi_wei
                 1.s:885    .text:000000000000068e __di_yi_wei
                 1.s:895    .text:000000000000069e __chengfa
                 1.s:939    .text:00000000000006e2 __cheng_fa_fan_hui
                 1.s:909    .text:00000000000006a8 __ji_suan_cheng_fa
                 1.s:943    .text:00000000000006e8 __dai_yu_shu_chufa
                 1.s:965    .text:000000000000070c __dai_yu_shu_chufafanhui
                 1.s:955    .text:00000000000006fc __dai_yu_shu_chufaxunhuan
                 1.s:962    .text:0000000000000708 __dai_yu_shu_chufaweishubudao0
                 1.s:1001   .text:000000000000074a __jiaodu_bushi_fu
                 1.s:1023   .text:000000000000076a __jiaodu_buchang_jisuan
                 1.s:1038   .text:0000000000000784 __bao_cun_jiaodu_cha
                 1.s:1065   .text:00000000000007ac __systick_fanhui
                 1.s:1045   .text:0000000000000790 __pid
                 1.s:1048   .text:0000000000000794 __pid_bi_li
                 1.s:1052   .text:000000000000079a __pid_ji_fen
                 1.s:1061   .text:00000000000007a8 __zhengzhuan_buchang
                 1.s:1067   .text:00000000000007ac __jiaodu_cha_jisuan
                 1.s:1078   .text:00000000000007c0 __baocun_jiaodu_cha
                 1.s:1105   .text:00000000000007ee __tick_fanhui
                 1.s:1090   .text:00000000000007d8 __jiance_zhuangtai
                 1.s:1095   .text:00000000000007e0 __zai_zhuan
                 1.s:1102   .text:00000000000007ea __baocun_zhengfan_zhuan
                 1.s:1100   .text:00000000000007e8 __fan_zhuan
                 1.s:1121   .text:0000000000000804 $d

NO UNDEFINED SYMBOLS
