ARM GAS  1.s 			page 1


   1              		@@ 单片机stm32f030f4p6
   2              		@pmsm电机
   3              		@作者：yjmwxwx
   4              		@时间：2021-04-22
   5              		@编译器：ARM-NONE-EABI
   6              		.thumb
   7              		.syntax unified
   8              		.section .data
   9              	yjmwxwx:
  10 0000 796A6D77 		.ascii "yjmwxwx-20210422"
  10      7877782D 
  10      32303231 
  10      30343232 
  11              	kong:
  12 0010 20202020 		.int 0x20202020
  13              	_fu:
  14 0014 2D       		.ascii "-"
  15              	jiaodu1:
  16 0015 F23D0000 		.int 0x3df2
  17              	jiaodufuhao:
  18 0019 DF000000 		.int 0xdf
  19              		
  20 001d 000000   		.align 4
  21              	zheng_xian_biao:
  22 0020 1C001D00 		.short 28,29,31,33,34,36,38,39,41,42,44,45,46,48,49,50,51,52,52,53,54,54,55,55,55,55,55,55,55,54,5
  22      1F002100 
  22      22002400 
  22      26002700 
  22      29002A00 
  23 00ea 00000000 		.align 4
  23      0000
  24              	cordic_yong_cos_sin:
  25 00f0 00000000 		.int 0x0000,0x4000,0x2D41,0x2D41,0x3B20,0x187D,0x3EC5,0x0C7C,0x3FB1,0x0645,0x3FEC,0x0323,0x3FFB,0x
  25      00400000 
  25      412D0000 
  25      412D0000 
  25      203B0000 
  26              	cordic_yong_atan_biao:
  27 0170 87640000 		.int 0x00006487,0x00003B58,0x00001F5B,0x00000FEA,0x000007FD,0x000003FF,0x000001FF,0x000000FF,0x000
  27      583B0000 
  27      5B1F0000 
  27      EA0F0000 
  27      FD070000 
  28              		.align 4
  29              		.equ STACKINIT,        	        0x20001000
  30              		.equ asciimabiao,		0x20000000
  31              		.equ liangcheng,		0x20000020
  32              		.equ dianji_huanxiang,		0x200000c4
  33              		.equ zhengfan_zhuan,		0x200000c8
  34              		.equ jiaodu_cha,		0x200000cc
  35              		.equ shangci_jiaodu,		0x200000d0
  36              		.equ shang_ci_i,		0x200000d4
  37              		.equ jiaodu_b,			0x200000d8
  38              		.equ jiaodu_a,			0x200000dc
  39              		.equ jiaodu,			0x200000e0
  40              		.equ cos,			0x200000e4
  41              		.equ sin,			0x200000e8
ARM GAS  1.s 			page 2


  42              		.equ sin_cha,			0x200000ec
  43              		.equ cos_cha,			0x200000f0
  44              		.equ sin_jiaozheng,		0x200000f4
  45              		.equ cos_jiaozheng,		0x200000f8
  46              		.equ jiaodu_jiaozheng,		0x200000fc
  47              		.equ dianyabiao,		0x20000100
  48              		.equ lvboqizhizhen,		0x20000300
  49              		.equ lvboqihuanchong,		0x20000308
  50              		.equ lvboqizhizhen1,		0x20000510
  51              		.equ lvboqihuanchong1,		0x20000518
  52              		.equ lvboqizhizhen2,		0x20000900
  53              		.equ lvboqihuanchong2,		0x20000908
  54              		.equ lvboqizhizhen3,		0x20000b10
  55              		.equ lvboqihuanchong3,		0x20000b18
  56              		.equ tim3_ch1,			0x40000434
  57              		.equ tim3_ch2,			0x40000438
  58              		.equ tim14_ch1,			0x40002034
  59              		.section .text
  60              	
  61              	vectors:
  62 0000 00100020 		.word STACKINIT
  63 0004 B1000000 		.word _start + 1
  64 0008 370A0000 		.word _nmi_handler + 1
  65 000c 390A0000 		.word _hard_fault  + 1
  66 0010 00000000 		.word 0
  67 0014 00000000 		.word 0
  68 0018 00000000 		.word 0
  69 001c 00000000 		.word 0
  70 0020 00000000 		.word 0
  71 0024 00000000 		.word 0
  72 0028 00000000 		.word 0
  73 002c 3B0A0000 		.word _svc_handler +1
  74 0030 00000000 		.word 0
  75 0034 00000000 		.word 0
  76 0038 3D0A0000 		.word _pendsv_handler +1
  77 003c 3F0A0000 		.word _systickzhongduan +1           @ 15
  78 0040 5F0B0000 		.word aaa +1     @ _wwdg +1          @ 0
  79 0044 5F0B0000 		.word aaa +1     @_pvd +1            @ 1
  80 0048 5F0B0000 		.word aaa +1     @_rtc +1            @ 2
  81 004c 5F0B0000 		.word aaa +1     @_flash +1          @ 3
  82 0050 5F0B0000 		.word aaa +1	@ _rcc + 1           @ 4
  83 0054 5F0B0000 		.word aaa +1      @_exti0_1  +1      @ 5
  84 0058 5F0B0000 		.word aaa +1      @ _exti2_3 +1      @ 6
  85 005c 5F0B0000 		.word aaa +1       @_exti4_15 +1     @ 7
  86 0060 5F0B0000 		.word aaa +1                         @ 8
  87 0064 5F0B0000 		.word aaa +1	@__dma_wan  +1	     @ 9
  88 0068 5F0B0000 		.word aaa +1    @_dma1_2_3 +1        @ 10
  89 006c 5F0B0000 		.word aaa +1       @_dma1_4_5 +1     @ 11
  90 0070 5F0B0000 		.word aaa +1	 @_adc1 +1           @ 12
  91 0074 5F0B0000 		.word aaa +1       @_tim1_brk_up +1  @ 13
  92 0078 5F0B0000 		.word aaa +1        @ _tim1_cc +1    @ 14
  93 007c 5F0B0000 		.word aaa +1         @_tim2 +1       @ 15
  94 0080 5F0B0000 		.word aaa +1          @_tim3 +1      @ 16
  95 0084 5F0B0000 		.word aaa +1                         @ 17
  96 0088 5F0B0000 		.word aaa +1		             @ 18
  97 008c 5F0B0000 		.word aaa +1	@_tim14 +1           @ 19
  98 0090 5F0B0000 		.word aaa +1                         @ 20
ARM GAS  1.s 			page 3


  99 0094 5F0B0000 		.word aaa +1         @_tim16 +1      @ 21
 100 0098 5F0B0000 		.word aaa +1         @_tim17 +1      @ 22
 101 009c 5F0B0000 		.word aaa +1          @_i2c   +1     @ 23
 102 00a0 5F0B0000 		.word aaa +1                         @ 24
 103 00a4 5F0B0000 		.word aaa +1           @_spi   +1    @ 25
 104 00a8 5F0B0000 		.word aaa +1                         @ 26
 105 00ac 5F0B0000 		.word aaa +1         @_usart1 +1     @ 27
 106              		.align 2
 107              	_start:
 108              		
 109              	shizhong:
 110 00b0 6C4A     		ldr r2, = 0x40022000   @FLASH访问控制
 111 00b2 3221     		movs r1, # 0x32
 112 00b4 1160     		str r1, [r2]           @FLASH缓冲 缓冲开启
 113 00b6 6C48     		ldr r0, = 0x40021000 @ rcc
 114 00b8 6C49     		ldr r1, = 0x10001
 115 00ba 0160     		str r1, [r0]
 116              	denghse:
 117 00bc 0168     		ldr r1, [r0]
 118 00be 8903     		lsls r1, r1, # 14
 119 00c0 FCD5     		bpl denghse
 120              	dengpllguan:
 121 00c2 0168     		ldr r1, [r0]
 122 00c4 8901     		lsls r1, r1, # 6
 123 00c6 FCD4     		bmi dengpllguan
 124 00c8 6949     		ldr r1, = 0x150002	@0x150002
 125 00ca 0046     		mov r0, r0
 126 00cc 4160     		str r1, [r0, # 0x04]
 127 00ce 0046     		mov r0, r0
 128 00d0 6849     		ldr r1, = 0x1010000
 129 00d2 0046     		mov r0, r0
 130 00d4 0160     		str r1, [r0]
 131              	
 132              	dengpll:
 133 00d6 0168     		ldr r1, [r0]
 134 00d8 8901     		lsls r1, # 6
 135 00da FCD5     		bpl dengpll
 136              	
 137              	
 138 00dc 6649     		ldr r1, = 100
 139 00de 0163     		str r1, [r0, # 0x30]
 140              	
 141              	_waisheshizhong:	                         @ 外设时钟
 142              		@+0x14=RCC_AHBENR
 143              		@ 0=DMA @ 2=SRAM @ 4=FLITF@ 6=CRC @ 17=PA @ 18=PB @ 19=PC @ 20=PD @ 22=PF
 144 00e0 6148     		ldr r0, = 0x40021000
 145 00e2 6649     		ldr r1, = 0x60001
 146 00e4 4161     		str r1, [r0, # 0x14]
 147              	
 148              		@+0x18外设时钟使能寄存器 (RCC_APB2ENR)
 149              		@0=SYSCFG @5=USART6EN @9=ADC @11=TIM1 @12=SPI1 @14=USART1 @16=TIM15 @17=TIM16 @18=TIM17 @22=DBGMCU
 150 00e6 6649     		ldr r1, = 0x1a00
 151 00e8 8161     		str r1, [r0, # 0x18]
 152              		@+0X1C=RCC_APB1ENR
 153              		@ 1=TIM3 @ 4=TIM6 @ 5=TIM7 @ 8=TIM14 @ 11=WWDG @ 14=SPI @ 17=USRT2 @ 18=USART3 @ 20=USART5 @ 21=I2
 154              		@ 22=I2C2 @ 23=USB @ 28=PWR
 155 00ea 664A     		ldr r2, = 0x902
ARM GAS  1.s 			page 4


 156 00ec C261     		str r2, [r0, # 0x1c]
 157              	
 158              	_neicunqingling:
 159 00ee 6648     		ldr r0, = 0x20000000
 160 00f0 0021     		movs r1, # 0
 161 00f2 664B     		ldr r3, = 0x1000
 162              	_neicunqinglingxunhuan:
 163 00f4 043B     		subs r3, # 4
 164 00f6 C150     		str r1, [r0, r3]
 165 00f8 FCD1     		bne _neicunqinglingxunhuan
 166              	
 167              	_waishezhongduan:					@外设中断
 168              		@0xE000E100    0-31  写1开，写0没效
 169              		@0XE000E180    0-31 写1关，写0没效
 170              		@0XE000E200    0-31 挂起，写0没效
 171              		@0XE000E280    0-31 清除， 写0没效
 172 00fa 6548     		ldr r0, =  0xe000e100
 173 00fc 6549     		ldr r1, = 0x200 @0x10200  @ 0x10000
 174 00fe 0160     		str r1, [r0]
 175              		
 176              	@_kanmengou:
 177              	@	ldr r0, = 0x40003000
 178              	@	ldr r1, = 0x5555
 179              	@	str r1, [r0]
 180              	@	movs r1, # 7
 181              	@	str r1, [r0, # 4]
 182              	@	ldr r1, = 0xfff
 183              	@	str r1, [r0, # 8]
 184              	@	ldr r1, = 0xaaaa
 185              	@	str r1, [r0]
 186              	@	ldr r1, = 0xcccc
 187              	@	str r1, [r0]
 188              		
 189              	io_she_zhi:
 190              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 191              		@a(0x48000000)b(0x48000400)c(0x48000800)d(0x48000c00)f(0x48001400)
 192              		@ 输入（00），通用输出（01），复用功能（10），模拟（11）
 193              		@偏移0x4 = 端口输出类型 @ （0 推挽），（ 1 开漏）
 194              		@偏移0x8 = 输出速度  00低速， 01中速， 11高速
 195              		@偏移0xC = 上拉下拉 (00无上下拉，  01 上拉， 10下拉)
 196              		@偏移0x10 = 输入数据寄存器
 197              		@偏移0x14 = 输出数据寄存器
 198              		@偏移0x18 = 端口开  0-15置位
 199              		@偏移0x28 = 端口关
 200              		@0X20 = 复用低
 201              		@GPIO口0（0-3位）每个IO口占用4位
 202              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 203              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 204              		@0x24 = 复用高
 205              		@GPIO口8 （0-3位）每个IO口占用4位
 206              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 207              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 208              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 209              	
 210 0100 6548     		ldr r0, = 0x48000000
 211 0102 6649     		ldr r1, = 0x2820aed5 
 212 0104 0160     		str r1, [r0]
ARM GAS  1.s 			page 5


 213 0106 0721     		movs r1, # 0x07
 214 0108 4160     		str r1, [r0, # 0x04]
 215 010a 6549     		ldr r1, = 0x11040000
 216 010c 0162     		str r1, [r0, # 0x20]
 217 010e 6149     		ldr r1, = 0x200
 218 0110 4162     		str r1, [r0, # 0x24]
 219              	
 220              	
 221              		
 222 0112 6448     		ldr r0, = 0x48000400
 223 0114 0821     		movs r1, # 0x08 @ pb1
 224 0116 0160     		str r1, [r0]
 225 0118 2021     		movs r1, # 0x20
 226 011a 0162     		str r1, [r0, # 0x20]
 227              			
 228              	
 229              	_adcchushihua:
 230 011c 6248     		ldr r0, = 0x40012400  @ adc基地址
 231 011e 6349     		ldr r1, = 0x80000000
 232 0120 8160     		str r1, [r0, # 0x08]  @ ADC 控制寄存器 (ADC_CR)  @adc校准
 233              	_dengadcjiaozhun:
 234 0122 8168     		ldr r1, [r0, # 0x08]
 235 0124 0900     		movs r1, r1
 236 0126 FCD4     		bmi _dengadcjiaozhun   @ 等ADC校准
 237 0128 0121     		movs r1, # 1
 238 012a 0160     		str r1, [r0]
 239              	_kaiadc:
 240 012c 8168     		ldr r1, [r0, # 0x08]
 241 012e 0122     		movs r2, # 0x01
 242 0130 1143     		orrs r1, r1, r2
 243 0132 8160     		str r1, [r0, # 0x08]
 244              	_deng_adc_wen_ding:
 245 0134 0168     		ldr r1, [r0]
 246 0136 C907     		lsls r1, r1, # 31
 247 0138 FCD5     		bpl _deng_adc_wen_ding @ 等ADC稳定
 248              	_tongdaoxuanze:
 249 013a 5D49     		ldr r1, = 0x40000000
 250 013c 0161     		str r1, [r0, # 0x10]
 251 013e 2821     		movs r1, # 0x28
 252 0140 8162     		str r1, [r0, # 0x28]    @ 通道选择寄存器 (ADC_CHSELR)
 253 0142 5C49     		ldr r1, = 0x803
 254 0144 C160     		str r1, [r0, # 0x0c]    @ 配置寄存器 1 (ADC_CFGR1)
 255 0146 0021     		movs r1, # 0
 256 0148 4161     		str r1, [r0, # 0x14]    @ ADC 采样时间寄存器 (ADC_SMPR)
 257 014a 8168     		ldr r1, [r0, # 0x08]
 258 014c 5A4A     		ldr r2, = 0x04         @ 开始转换
 259 014e 1143     		orrs r1, r1, r2
 260 0150 8160     		str r1, [r0, # 0x08]    @ 控制寄存器 (ADC_CR)
 261              	
 262              		
 263              	_lcdchushihua:
 264 0152 3320     		movs r0, # 0x33
 265 0154 0021     		movs r1, # 0
 266 0156 00F0AAFB 		bl _xielcd
 267 015a 00F0A3FB 		bl _lcdyanshi
 268              	
 269 015e 3220     		movs r0, # 0x32
ARM GAS  1.s 			page 6


 270 0160 0021     		movs r1, # 0
 271 0162 00F0A4FB 		bl _xielcd
 272 0166 00F09DFB 		bl _lcdyanshi
 273 016a 2820     		movs r0, # 0x28
 274 016c 0021     		movs r1, # 0
 275 016e 00F09EFB 		bl _xielcd
 276 0172 00F097FB 		bl _lcdyanshi
 277 0176 0C20     		movs r0, # 0x0c
 278 0178 0021     		movs r1, # 0
 279 017a 00F098FB 		bl _xielcd
 280 017e 00F091FB 		bl _lcdyanshi
 281 0182 0120     		movs r0, # 0x01
 282 0184 0021     		movs r1, # 0
 283 0186 00F092FB 		bl _xielcd
 284 018a 00F08BFB 		bl _lcdyanshi
 285              	
 286 018e 8020     		movs r0, # 0x80
 287 0190 4A49     		ldr r1, = yjmwxwx
 288 0192 1022     		movs r2, # 16
 289 0194 00F078FB 		bl _lcdxianshi
 290 0198 4948     		ldr r0, = 0xffffff
 291              	yjmwxwx_yanshi:
 292 019a 0138     		subs r0, r0, # 1
 293 019c FDD1     		bne yjmwxwx_yanshi
 294              	
 295 019e 0120     		movs r0, # 0x01
 296 01a0 0021     		movs r1, # 0
 297 01a2 00F084FB 		bl _xielcd
 298 01a6 00F07DFB 		bl _lcdyanshi
 299              		
 300              	
 301              	dmachushihua:
 302              		@+0=LSR,+4=IFCR,
 303              		@+8=CCR1,+c=CNDTR1,+10=CPAR1+14=CMAR1,
 304              		@+1c=CCR2,+20=CNDTR2,+24=CPAR2,+28=CMAR2
 305              		@+30=CCR3,+34=CNDTR3,+38=CPAR2,+3c=CMAR3
 306              		@+44=CCR4,+48=CNDTR4,+4c=CPAR4,+50=CMAR4
 307              		@+58=CCR5,+5c=CNDTR5,+60=CPAR5,+64=CMAR5
 308              		@+6C=CCR6,+70=CNDTR6,+74=CPAR6,+78=CMAR6
 309              		@+80=CCR7,+84=CNDTR7,+88=CPAR7,+8c=CMAR7
 310              	
 311              		@tim1ch3DMA
 312 01aa 4648     		ldr r0, = 0x40020000
 313 01ac 4649     		ldr r1, = 0x40012c3c @ 外设地址
 314 01ae 0166     		str r1, [r0, # 0x60]
 315 01b0 4649     		ldr r1, = zheng_xian_biao @ 储存器地址
 316 01b2 4166     		str r1, [r0, # 0x64]
 317 01b4 3049     		ldr r1, = 100             @点数
 318 01b6 C165     		str r1, [r0, # 0x5c]
 319 01b8 4549     		ldr r1, = 0x35b1         @ 储存到外设
 320 01ba 8165     		str r1, [r0, # 0x58]
 321              	
 322              		@ adc dma
 323 01bc 4148     		ldr r0, = 0x40020000
 324 01be 4549     		ldr r1, = 0x40012440
 325 01c0 0161     		str r1, [r0, # 0x10]
 326 01c2 4549     		ldr r1, = dianyabiao
ARM GAS  1.s 			page 7


 327 01c4 4161     		str r1, [r0, # 0x14]
 328 01c6 2C49     		ldr r1, =  100
 329 01c8 C160     		str r1, [r0, # 0x0c]
 330 01ca 4449     		ldr r1, = 0xaa1		@ 5a1
 331 01cc 8160     		str r1, [r0, # 0x08]
 332              	
 333              	_systick:		@ systick定时器初始化
 334              	
 335 01ce 444F     		ldr r7, = 0xe000e010
 336 01d0 444E     		ldr r6, = 5600
 337 01d2 7E60     		str r6, [r7, # 4]
 338 01d4 BE60     		str r6, [r7, # 8]
 339 01d6 0726     		movs r6, # 0x07
 340              	
 341              	tim14chushihua:
 342 01d8 434B     		ldr r3, = 0x40002000 @ tim14_cr1
 343 01da 0021     		movs r1, # 0
 344 01dc 9962     		str r1, [r3, # 0x28] @ psc
 345 01de 4349     		ldr r1, = 2799
 346 01e0 D962     		str r1, [r3, # 0x2c] @ ARR
 347 01e2 7821     		movs r1, # 0x78
 348 01e4 9961     		str r1, [r3, # 0x18]
 349 01e6 4249     		ldr r1, = 500
 350 01e8 5963     		str r1, [r3, # 0x34]
 351 01ea 0121     		movs r1, # 0x01
 352 01ec 1962     		str r1, [r3, # 0x20]
 353              		
 354              	tim3chushihua:
 355 01ee 4148     		ldr r0, = 0x40000400 @ tim3_cr1
 356 01f0 0021     		movs r1, # 0
 357 01f2 8162     		str r1, [r0, # 0x28] @ psc
 358 01f4 3D49     		ldr r1, = 2799
 359 01f6 C162     		str r1, [r0, # 0x2c] @ ARR
 360 01f8 3F49     		ldr r1, = 0x7878
 361 01fa 8161     		str r1, [r0, # 0x18]
 362 01fc 3C49     		ldr r1, = 500
 363 01fe 4163     		str r1, [r0, # 0x34]
 364 0200 8163     		str r1, [r0, # 0x38]
 365 0202 1121     		movs r1, # 0x11
 366 0204 0162     		str r1, [r0, # 0x20]
 367 0206 3D49     		ldr r1, = 0x81
 368 0208 1960     		str r1, [r3]
 369 020a 0160     		str r1, [r0]
 370              		
 371              	tim1chushiha:
 372 020c 3C48     		ldr r0, = 0x40012c00 @ tim1_cr1
 373 020e 0021     		movs r1, # 0
 374 0210 8162     		str r1, [r0, # 0x28] @ psc
 375 0212 3C49     		ldr r1, = 56
 376 0214 C162     		str r1, [r0, # 0x2c] @ ARR
 377 0216 2021     		movs r1, # 0x20
 378 0218 4160     		str r1, [r0, # 0x04] @ TRGO
 379 021a 3821     		movs r1, # 0x38
 380 021c 8161     		str r1, [r0, # 0x18] @ ccmr1 cc1
 381 021e 3821     		movs r1, # 56
 382 0220 4163     		str r1, [r0, # 0x34]
 383 0222 3949     		ldr r1, = 0x68
ARM GAS  1.s 			page 8


 384 0224 C161     		str r1, [r0, # 0x1c] @ ccmr2  CC3
 385 0226 3949     		ldr r1, = 0x500    @  CC3
 386 0228 0162     		str r1, [r0, # 0x20] @ ccer
 387 022a 3949     		ldr r1, = 0x8000
 388 022c 4164     		str r1, [r0, # 0x44] @ BDTR
 389 022e 3949     		ldr r1, = 0x800 @ CC3 DMA
 390 0230 C160     		str r1, [r0, # 0x0c] @ DIER
 391 0232 3249     		ldr r1, = 0x81
 392 0234 0160     		str r1, [r0]
 393 0236 3E60     		str r6, [r7]	@systick 开
 394              	
 395              	ting:
 396              	
 397 0238 3748     		ldr r0, = 0x20000028
 398 023a 0068     		ldr r0, [r0]
 399 023c 00F0F0F9 		bl __xian_shi_jiao_du
 400              	
 401              	
 402 0240 3648     		ldr r0, = 0x2000002c
 403 0242 0068     		ldr r0, [r0]
 404 0244 0621     		movs r1, # 6
 405 0246 104A     		ldr r2, = asciimabiao
 406 0248 FF23     		movs r3, # 0xff
 407 024a 00F06CFB 		bl _zhuanascii
 408 024e 8020     		movs r0, # 0x80
 409 0250 0D49     		ldr r1, = asciimabiao
 410 0252 0622     		movs r2, # 6
 411 0254 00F018FB 		bl _lcdxianshi
 412              		
 413 0258 EEE7     		b ting
 414              		
 415 025a 3148     		ldr r0, = 0x20000024
 416 025c 0068     		ldr r0, [r0]
 417 025e 00F061F8 		bl __svpwm
 418 0262 E9E7     		b ting
 419              	
 420              	
 421 0264 00200240 		.ltorg
 421      00100240 
 421      01000100 
 421      02001500 
 421      00000101 
 422              	__svpwm:
 423              		@入口R0=角度R2=实部，R1=虚部
 424 0324 F8B5     		push {r3-r7,lr}
 425 0326 1346     		mov r3, r2	@r
 426 0328 0A46     		mov r2, r1
 427 032a AE49     		ldr r1, = 6000
 428 032c 00F014FB 		bl _chufa
 429 0330 A042     		cmp r0, r4
 430 0332 00D1     		bne __bushi_0_60
 431 0334 0020     		movs r0, # 0
 432              	__bushi_0_60:
 433 0336 AC49     		ldr r1, = 0x2000002c
 434 0338 0860     		str r0, [r1]
 435 033a 8000     		lsls r0, r0, # 2
 436 033c AB49     		ldr r1, = __dianji_xiangwei
ARM GAS  1.s 			page 9


 437 033e 0958     		ldr r1, [r1, r0]
 438 0340 8F46     		mov pc, r1
 439 0342 C046C046 		.align 4
 439      C046C046 
 439      C046C046 
 439      C046
 440              	__dianji_xiangwei:
 441 0350 69030000 		.word __xiangwei_0_60 +1, __xiangwei_60_120 +1, __xiangwei_120_180 +1, __xiangwei_180_240 +1, __xi
 441      AD030000 
 441      0F040000 
 441      71040000 
 441      BD040000 
 442              	__xiangwei_0_60:
 443 0368 A14C     		ldr r4, = 32768
 444              	@	movs r5, # 0
 445 036a A24E     		ldr r6, = 16384
 446 036c A24F     		ldr r7, = 28377
 447 036e 6243     		muls r2, r2, r4
 448 0370 6743     		muls r7, r7, r4
 449 0372 D213     		asrs r2, r2, # 15
 450 0374 FF13     		asrs r7, r7, # 15
 451 0376 9E4D     		ldr r5, = 32768
 452 0378 1046     		mov r0, r2
 453 037a 6843     		muls r0, r0, r5
 454 037c 3946     		mov r1, r7
 455 037e 00F0EBFA 		bl _chufa
 456 0382 3146     		mov r1, r6
 457 0384 0246     		mov r2, r0	@r2=x
 458 0386 4843     		muls r0, r0, r1
 459 0388 6B43     		muls r3, r3, r5
 460 038a 181A     		subs r0, r3, r0
 461 038c 2146     		mov r1, r4
 462 038e 00F0E3FA 		bl _chufa	@r0=y
 463              		
 464 0392 9A4D     		ldr r5, = tim3_ch1
 465 0394 9A4E     		ldr r6, = tim3_ch2
 466 0396 9B4F     		ldr r7, = tim14_ch1
 467 0398 9B4C     		ldr r4, = 1000
 468 039a 6243     		muls r2, r2, r4
 469 039c 6043     		muls r0, r0, r4
 470 039e D213     		asrs r2, r2, # 15	@x
 471 03a0 C013     		asrs r0, r0, # 15	@y
 472 03a2 0024     		movs r4, # 0
 473 03a4 3860     		str r0, [r7]	@3
 474 03a6 3460     		str r4, [r6]	@2
 475 03a8 2A60     		str r2, [r5]	@1
 476 03aa E8E0     		b __svpwm_fanhui
 477              	__xiangwei_60_120:
 478 03ac 9148     		ldr r0, = 16384	@r
 479 03ae 9249     		ldr r1, = 28377	@i
 480 03b0 1C46     		mov r4, r3	@r
 481 03b2 1546     		mov r5, r2	@i
 482 03b4 4443     		muls r4, r4, r0	@x*r	
 483 03b6 4D43     		muls r5, r5, r1	@y*i
 484 03b8 4243     		muls r2, r2, r0	@y*r
 485 03ba 4B43     		muls r3, r3, r1	@x*i
 486 03bc E413     		asrs r4, r4, # 15
ARM GAS  1.s 			page 10


 487 03be ED13     		asrs r5, r5, # 15
 488 03c0 D213     		asrs r2, r2, # 15
 489 03c2 DB13     		asrs r3, r3, # 15
 490 03c4 6419     		adds r4, r4, r5	@x
 491 03c6 D21A     		subs r2, r2, r3	@y
 492              	
 493              	
 494 03c8 2346     		mov r3, r4
 495 03ca 894C     	        ldr r4, = 32768
 496              		@       movs r5, # 0
 497 03cc 894E     		ldr r6, = 16384
 498 03ce 8A4F     		ldr r7, = 28377
 499 03d0 6243     		muls r2, r2, r4
 500 03d2 6743     		muls r7, r7, r4
 501 03d4 D213     		asrs r2, r2, # 15
 502 03d6 FF13     		asrs r7, r7, # 15
 503 03d8 854D     		ldr r5, = 32768
 504 03da 1046     		mov r0, r2
 505 03dc 6843     		muls r0, r0, r5
 506 03de 3946     		mov r1, r7
 507 03e0 00F0BAFA 		bl _chufa
 508 03e4 3146     		mov r1, r6
 509 03e6 0246     		mov r2, r0      @r2=x
 510 03e8 4843     		muls r0, r0, r1
 511 03ea 6B43     		muls r3, r3, r5
 512 03ec 181A     		subs r0, r3, r0
 513 03ee 2146     		mov r1, r4
 514 03f0 00F0B2FA 		bl _chufa       @r0=y
 515              		
 516              	
 517 03f4 814D     		ldr r5, = tim3_ch1
 518 03f6 824E     		ldr r6, = tim3_ch2
 519 03f8 824F     		ldr r7, = tim14_ch1
 520 03fa 834C     		ldr r4, = 1000
 521 03fc 6243     		muls r2, r2, r4
 522 03fe 6043     		muls r0, r0, r4
 523 0400 D213     		asrs r2, r2, # 15       @x
 524 0402 C013     		asrs r0, r0, # 15       @y
 525 0404 0024     		movs r4, # 0
 526 0406 3C60     		str r4, [r7]
 527 0408 3260     		str r2, [r6]
 528 040a 2860     		str r0, [r5]
 529              		
 530              		
 531 040c B7E0     	       	b __svpwm_fanhui
 532              	__xiangwei_120_180:
 533 040e 7F48     	        ldr r0, = -16384 @r
 534 0410 7949     		ldr r1, = 28377 @i
 535 0412 1C46     		mov r4, r3      @r
 536 0414 1546     		mov r5, r2      @i
 537 0416 4443     		muls r4, r4, r0 @x*r
 538 0418 4D43     		muls r5, r5, r1 @y*i
 539 041a 4243     		muls r2, r2, r0 @y*r
 540 041c 4B43     		muls r3, r3, r1 @x*i
 541 041e E413     		asrs r4, r4, # 15
 542 0420 ED13     		asrs r5, r5, # 15
 543 0422 D213     		asrs r2, r2, # 15
ARM GAS  1.s 			page 11


 544 0424 DB13     		asrs r3, r3, # 15
 545 0426 6419     		adds r4, r4, r5 @x
 546 0428 D21A     		subs r2, r2, r3 @y
 547              	
 548 042a 2346     	        mov r3, r4
 549 042c 704C     		ldr r4, = 32768
 550              		@       movs r5, # 0
 551 042e 714E     		ldr r6, = 16384
 552 0430 714F     		ldr r7, = 28377
 553 0432 6243     		muls r2, r2, r4
 554 0434 6743     		muls r7, r7, r4
 555 0436 D213     		asrs r2, r2, # 15
 556 0438 FF13     		asrs r7, r7, # 15
 557 043a 6D4D     		ldr r5, = 32768
 558 043c 1046     		mov r0, r2
 559 043e 6843     		muls r0, r0, r5
 560 0440 3946     		mov r1, r7
 561 0442 00F089FA 		bl _chufa
 562 0446 3146     		mov r1, r6
 563 0448 0246     		mov r2, r0      @r2=x
 564 044a 4843     		muls r0, r0, r1
 565 044c 6B43     		muls r3, r3, r5
 566 044e 181A     		subs r0, r3, r0
 567 0450 2146     		mov r1, r4
 568 0452 00F081FA 		bl _chufa       @r0=y
 569              	
 570              	
 571 0456 694D     		ldr r5, = tim3_ch1
 572 0458 694E     		ldr r6, = tim3_ch2
 573 045a 6A4F     		ldr r7, = tim14_ch1
 574 045c 6A4C     		ldr r4, = 1000
 575 045e 6243     		muls r2, r2, r4
 576 0460 6043     		muls r0, r0, r4
 577 0462 D213     		asrs r2, r2, # 15       @x
 578 0464 C013     		asrs r0, r0, # 15       @y
 579 0466 0024     		movs r4, # 0
 580 0468 3A60     		str r2, [r7]
 581 046a 3060     		str r0, [r6]
 582 046c 2C60     		str r4, [r5]
 583              		
 584 046e 86E0     		b __svpwm_fanhui
 585              	__xiangwei_180_240:
 586 0470 DB43     		mvns r3, r3	@r
 587 0472 D243     		mvns r2, r2	@i
 588 0474 0133     		adds r3, r3, # 1
 589 0476 0132     		adds r2, r2, # 1
 590              	
 591 0478 5D4C     	        ldr r4, = 32768
 592              		@       movs r5, # 0
 593 047a 5E4E     		ldr r6, = 16384
 594 047c 5E4F     		ldr r7, = 28377
 595 047e 6243     		muls r2, r2, r4
 596 0480 6743     		muls r7, r7, r4
 597 0482 D213     		asrs r2, r2, # 15
 598 0484 FF13     		asrs r7, r7, # 15
 599 0486 5A4D     		ldr r5, = 32768
 600 0488 1046     		mov r0, r2
ARM GAS  1.s 			page 12


 601 048a 6843     		muls r0, r0, r5
 602 048c 3946     		mov r1, r7
 603 048e 00F063FA 		bl _chufa
 604 0492 3146     		mov r1, r6
 605 0494 0246     		mov r2, r0      @r2=x
 606 0496 4843     		muls r0, r0, r1
 607 0498 6B43     		muls r3, r3, r5
 608 049a 181A     		subs r0, r3, r0
 609 049c 2146     		mov r1, r4
 610 049e 00F05BFA 		bl _chufa       @r0=y
 611              	
 612 04a2 564D     		ldr r5, = tim3_ch1
 613 04a4 564E     		ldr r6, = tim3_ch2
 614 04a6 574F     		ldr r7, = tim14_ch1
 615 04a8 574C     		ldr r4, = 1000
 616 04aa 6243     		muls r2, r2, r4
 617 04ac 6043     		muls r0, r0, r4
 618 04ae D213     		asrs r2, r2, # 15       @x
 619 04b0 C013     		asrs r0, r0, # 15       @y
 620 04b2 0024     		movs r4, # 0
 621              		
 622 04b4 3860     		str r0, [r7]    @2
 623 04b6 3460     		str r4, [r6]    @3
 624 04b8 2A60     		str r2, [r5]    @1
 625              		
 626              		
 627 04ba 60E0     		b __svpwm_fanhui
 628              	__xiangwei_240_300:
 629 04bc 5348     	        ldr r0, = -16384 @r
 630 04be 4E49     		ldr r1, = 28377 @i
 631 04c0 1C46     		mov r4, r3      @r
 632 04c2 1546     		mov r5, r2      @i
 633 04c4 4443     		muls r4, r4, r0 @x*r
 634 04c6 4D43     		muls r5, r5, r1 @y*i
 635 04c8 4243     		muls r2, r2, r0 @y*r
 636 04ca 4B43     		muls r3, r3, r1 @x*i
 637 04cc E413     		asrs r4, r4, # 15
 638 04ce ED13     		asrs r5, r5, # 15
 639 04d0 D213     		asrs r2, r2, # 15
 640 04d2 DB13     		asrs r3, r3, # 15
 641 04d4 641B     		subs r4, r4, r5 @x	@逆时针
 642 04d6 D218     		adds r2, r2, r3 @y
 643              	
 644 04d8 2346     	        mov r3, r4
 645 04da 454C     		ldr r4, = 32768
 646              		@       movs r5, # 0
 647 04dc 454E     		ldr r6, = 16384
 648 04de 464F     		ldr r7, = 28377
 649 04e0 6243     		muls r2, r2, r4
 650 04e2 6743     		muls r7, r7, r4
 651 04e4 D213     		asrs r2, r2, # 15
 652 04e6 FF13     		asrs r7, r7, # 15
 653 04e8 414D     		ldr r5, = 32768
 654 04ea 1046     		mov r0, r2
 655 04ec 6843     		muls r0, r0, r5
 656 04ee 3946     		mov r1, r7
 657 04f0 00F032FA 		bl _chufa
ARM GAS  1.s 			page 13


 658 04f4 3146     		mov r1, r6
 659 04f6 0246     		mov r2, r0      @r2=x
 660 04f8 4843     		muls r0, r0, r1
 661 04fa 6B43     		muls r3, r3, r5
 662 04fc 181A     		subs r0, r3, r0
 663 04fe 2146     		mov r1, r4
 664 0500 00F02AFA 		bl _chufa       @r0=y
 665              	
 666              	
 667 0504 3D4D     		ldr r5, = tim3_ch1
 668 0506 3E4E     		ldr r6, = tim3_ch2
 669 0508 3E4F     		ldr r7, = tim14_ch1
 670 050a 3F4C     		ldr r4, = 1000
 671 050c 6243     		muls r2, r2, r4
 672 050e 6043     		muls r0, r0, r4
 673 0510 D213     		asrs r2, r2, # 15       @x
 674 0512 C013     		asrs r0, r0, # 15       @y
 675 0514 0024     		movs r4, # 0
 676              	
 677 0516 3C60     		str r4, [r7]
 678 0518 3260     		str r2, [r6]
 679 051a 2860     		str r0, [r5]
 680              		
 681              		
 682              	 @       str r0, [r7]
 683              	@	str r4, [r6]
 684              	@	str r2, [r5]
 685              		
 686 051c 2FE0     		b __svpwm_fanhui
 687              	__xiangwei_300_360:
 688 051e 3548     	        ldr r0, = 16384 @r
 689 0520 3549     		ldr r1, = 28377 @i
 690 0522 1C46     		mov r4, r3      @r
 691 0524 1546     		mov r5, r2      @i
 692 0526 4443     		muls r4, r4, r0 @x*r
 693 0528 4D43     		muls r5, r5, r1 @y*i
 694 052a 4243     		muls r2, r2, r0 @y*r
 695 052c 4B43     		muls r3, r3, r1 @x*i
 696 052e E413     		asrs r4, r4, # 15
 697 0530 ED13     		asrs r5, r5, # 15
 698 0532 D213     		asrs r2, r2, # 15
 699 0534 DB13     		asrs r3, r3, # 15
 700 0536 641B     		subs r4, r4, r5 @x	@逆时针
 701 0538 D218     		adds r2, r2, r3 @y
 702              	
 703 053a 2346     		mov r3, r4
 704 053c 2C4C     		ldr r4, = 32768
 705              		@       movs r5, # 0
 706 053e 2D4E     		ldr r6, = 16384
 707 0540 2D4F     		ldr r7, = 28377
 708 0542 6243     		muls r2, r2, r4
 709 0544 6743     		muls r7, r7, r4
 710 0546 D213     		asrs r2, r2, # 15
 711 0548 FF13     		asrs r7, r7, # 15
 712 054a 294D     		ldr r5, = 32768
 713 054c 1046     		mov r0, r2
 714 054e 6843     		muls r0, r0, r5
ARM GAS  1.s 			page 14


 715 0550 3946     		mov r1, r7
 716 0552 00F001FA 		bl _chufa
 717 0556 3146     		mov r1, r6
 718 0558 0246     		mov r2, r0      @r2=x
 719 055a 4843     		muls r0, r0, r1
 720 055c 6B43     		muls r3, r3, r5
 721 055e 181A     		subs r0, r3, r0
 722 0560 2146     		mov r1, r4
 723 0562 00F0F9F9 		bl _chufa       @r0=y
 724              	
 725              	
 726 0566 254D     		ldr r5, = tim3_ch1
 727 0568 254E     		ldr r6, = tim3_ch2
 728 056a 264F     		ldr r7, = tim14_ch1
 729 056c 264C     		ldr r4, = 1000
 730 056e 6243     		muls r2, r2, r4
 731 0570 6043     		muls r0, r0, r4
 732 0572 D213     		asrs r2, r2, # 15       @x
 733 0574 C013     		asrs r0, r0, # 15       @y
 734 0576 0024     		movs r4, # 0
 735              	
 736 0578 3A60     	        str r2, [r7]
 737 057a 3060     		str r0, [r6]
 738 057c 2C60     		str r4, [r5]
 739              		
 740              	       @ str r4, [r7]
 741              	@	str r2, [r6]
 742              	@	str r0, [r5]
 743              		
 744              	__svpwm_fanhui:	
 745 057e F8BD     		pop {r3-r7,pc}
 746              		
 747              	__jisuan_cos_sin:
 748              		@入口R0=角度 （-18000到+18000）
 749              		@出口R0=COS，R1=SIN
 750 0580 FCB5     		push {r2-r7,lr}
 751 0582 2349     		ldr r1, = 18000
 752 0584 8842     		cmp r0, r1
 753 0586 02D9     		bls __xiaoyu_180
 754 0588 401A     		subs r0, r0, r1
 755 058a 0127     		movs r7, # 1
 756 058c 00E0     		b __js_cos_sin
 757              	__xiaoyu_180:
 758 058e 0027     		movs r7, # 0
 759              	__js_cos_sin:	
 760 0590 2049     		ldr r1, = 9000
 761 0592 214A     		ldr r2, = 51471
 762 0594 0000     		movs r0, r0
 763 0596 03D5     		bpl __jisuan_jiaodu_bushi0
 764 0598 C043     		mvns r0, r0
 765 059a 0130     		adds r0, r0, # 1
 766 059c 0124     		movs r4, # 1
 767 059e 00E0     		b __jiance_chao90
 768              	__jisuan_jiaodu_bushi0:
 769 05a0 0024     		movs r4, # 0
 770              	__jiance_chao90:
 771 05a2 8842     		cmp r0, r1
ARM GAS  1.s 			page 15


 772 05a4 03D9     		bls __xiaoyu_90
 773 05a6 1A4E     		ldr r6, = 18000
 774 05a8 301A     		subs r0, r6, r0
 775 05aa 0126     		movs r6, # 1
 776 05ac 00E0     		b __suan_cossin
 777              	__xiaoyu_90:
 778 05ae 0026     		movs r6, # 0
 779              	__suan_cossin:
 780 05b0 1A4D     		ldr r5, = 10000
 781 05b2 6843     		muls r0, r0, r5
 782 05b4 00F0D0F9 		bl _chufa
 783 05b8 5043     		muls r0, r0, r2
 784 05ba 2946     		mov r1, r5
 785 05bc 00F0CCF9 		bl _chufa
 786 05c0 012C     		cmp r4, # 1
 787 05c2 01D1     		bne __suan_cos_sin1
 788 05c4 C043     		mvns r0, r0
 789 05c6 0130     		adds r0, r0, # 1
 790              	__suan_cos_sin1:
 791 05c8 00F06FF8 		bl __cordic_cos_sin
 792 05cc 012E     		cmp r6, # 1
 793 05ce 01D1     		bne __cos_sin_fanhui
 794 05d0 C043     		mvns r0, r0
 795 05d2 0130     		adds r0, r0, # 1
 796              	__cos_sin_fanhui:
 797 05d4 012F     		cmp r7, # 1
 798 05d6 03D1     		bne __cossin_fh
 799 05d8 C043     		mvns r0, r0
 800 05da C943     		mvns r1, r1
 801 05dc 0130     		adds r0, r0, # 1
 802 05de 0131     		adds r1, r1, # 1
 803              	__cossin_fh:	
 804 05e0 FCBD     		pop {r2-r7,pc}
 805 05e2 00007017 		.ltorg
 805      00002C00 
 805      00205003 
 805      00000080 
 805      00000040 
 806              		
 807              	__xian_shi_jiao_du:
 808              		@入口R0=角度
 809 0620 1FB5     		push {r0-r4,lr}
 810 0622 0446     		mov r4, r0
 811 0624 8F20     		movs r0, # 0x8f
 812 0626 4D49     		ldr r1, = jiaodufuhao
 813 0628 0122     		movs r2, # 1
 814 062a 00F02DF9 		bl _lcdxianshi
 815              	
 816 062e 2400     		movs r4, r4
 817 0630 07D5     		bpl __jiaodu_bu_shi_zheng
 818 0632 8820     		movs r0, # 0x88
 819 0634 4A49     		ldr r1, = _fu
 820 0636 0122     		movs r2, # 1
 821 0638 00F026F9 		bl _lcdxianshi
 822 063c E443     		mvns r4, r4
 823 063e 0134     		adds r4, r4, # 1
 824 0640 04E0     		b __xian_shi_jiaodu
ARM GAS  1.s 			page 16


 825              	__jiaodu_bu_shi_zheng:
 826 0642 8820     		movs r0, # 0x88
 827 0644 4749     		ldr r1, = kong
 828 0646 0122     		movs r2, # 1
 829 0648 00F01EF9 		bl _lcdxianshi
 830              	__xian_shi_jiaodu:
 831 064c 2046     		mov r0, r4
 832 064e 0621     		movs r1, # 6
 833 0650 454A     		ldr r2, = asciimabiao
 834 0652 0323     		movs r3, # 3
 835 0654 00F067F9 		bl _zhuanascii
 836 0658 8920     		movs r0, # 0x89
 837 065a 4349     		ldr r1, = asciimabiao
 838 065c 0622     		movs r2, # 6
 839 065e 00F013F9 		bl _lcdxianshi
 840 0662 1FBD     		pop {r0-r4,pc}
 841              	
 842              	__xiang_wei_xuan_zhuan:
 843 0664 FCB5     		push {r2-r7,lr}
 844              		@R0=R,R1=I
 845 0666 0346     		mov r3, r0
 846 0668 0846     		mov r0, r1
 847 066a 404C     		ldr r4, = cos_jiaozheng         @cos
 848 066c 404D     		ldr r5, = sin_jiaozheng         @sin
 849 066e 2468     		ldr r4, [r4]
 850 0670 2D68     		ldr r5, [r5]
 851 0672 002C     		cmp r4, # 0
 852 0674 04D1     		bne __xuanzhuan_fangxiang_jiance
 853 0676 002D     		cmp r5, # 0
 854 0678 02D1     		bne __xuanzhuan_fangxiang_jiance
 855 067a 0146     		mov r1, r0
 856 067c 1846     		mov r0, r3
 857 067e FCBD     		pop {r2-r7,pc}
 858              	__xuanzhuan_fangxiang_jiance:
 859 0680 2400     		movs r4, r4
 860 0682 03D5     		bpl __xuan_zhuan_xiang_wei
 861 0684 2646     		mov r6, r4
 862 0686 2F46     		mov r7, r5
 863 0688 3C46     		mov r4, r7
 864 068a 3546     		mov r5, r6
 865              	__xuan_zhuan_xiang_wei:
 866 068c 2646     		mov r6, r4
 867 068e 2F46     		mov r7, r5
 868 0690 5C43     		muls r4, r4, r3         @x*cos
 869 0692 4643     		muls r6, r6, r0         @y*cos
 870 0694 5D43     		muls r5, r5, r3         @x*sin
 871 0696 4743     		muls r7, r7, r0         @y*sin
 872 0698 E413     		asrs r4, r4, # 15
 873 069a ED13     		asrs r5, r5, # 15
 874 069c F613     		asrs r6, r6, # 15
 875 069e FF13     		asrs r7, r7, # 15
 876              	
 877 06a0 E41B     		subs r4, r4, r7         @x
 878 06a2 7619     		adds r6, r6, r5         @y
 879 06a4 3146     		mov r1, r6		@i
 880 06a6 2046     		mov r0, r4		@r
 881 06a8 FCBD     		pop {r2-r7,pc}
ARM GAS  1.s 			page 17


 882              	__cordic_cos_sin:
 883              		@入口R0
 884              		@出口R0=COS，R1=SIN
 885              		@ x= 0x4dba
 886              		@ r1=x,r2=y,r0=z,r4=d,r5=k,r6=cordic_mabiao
 887              	
 888 06aa FCB5     		push {r2-r7,lr}
 889 06ac 4246     		mov r2, r8
 890 06ae 4B46     		mov r3, r9
 891 06b0 0CB4     		push {r2-r3}
 892 06b2 0025     		movs r5, # 0
 893 06b4 2A46     		mov r2, r5
 894 06b6 2C46     		mov r4, r5
 895 06b8 2E49     		ldr r1, = 0x4dba
 896              	cordicxunhuan:			 @ 循环
 897 06ba C413     		asrs r4, r0, # 15
 898              		@ x
 899 06bc 1746     		mov r7, r2
 900 06be 2A41     		asrs r2, r2, r5
 901 06c0 6240     		eors r2, r2, r4
 902 06c2 121B     		subs r2, r2, r4
 903 06c4 8B1A     		subs r3, r1, r2
 904              		@ y
 905 06c6 0E46     		mov r6, r1
 906 06c8 2941     		asrs r1, r1, r5
 907 06ca 6140     		eors r1, r1, r4
 908 06cc 091B     		subs r1, r1, r4
 909 06ce 7F18     		adds r7, r7, r1
 910              		@ z
 911 06d0 294E     		ldr r6, = cordic_yong_atan_biao
 912 06d2 AA00     		lsls r2, r5, # 2
 913 06d4 B158     		ldr r1, [r6, r2]
 914 06d6 6140     		eors r1, r1, r4
 915 06d8 091B     		subs r1, r1, r4
 916 06da 401A     		subs r0, r0, r1
 917 06dc 1946     		mov r1, r3
 918 06de 3A46     		mov r2, r7
 919 06e0 0135     		adds r5, # 1
 920 06e2 102D     		cmp r5, # 16
 921 06e4 E9D1     		bne cordicxunhuan
 922 06e6 1846     		mov r0, r3
 923 06e8 3946     		mov r1, r7
 924 06ea 0CBC     		pop {r2-r3}
 925 06ec 9046     		mov r8, r2
 926 06ee 9946     		mov r9, r3
 927 06f0 FCBD     		pop {r2-r7,pc}
 928              	__atan2_ji_suan:
 929              		@入口R0=实部，R1=虚部，结果=R0
 930 06f2 FCB5     		push {r2-r7,lr}
 931 06f4 4246     		mov r2, r8
 932 06f6 04B4     		push {r2}
 933 06f8 204B     		ldr r3, = cordic_yong_cos_sin
 934 06fa 0A22     		movs r2, # 10
 935 06fc 5043     		muls r0, r0, r2
 936 06fe 5143     		muls r1, r1, r2
 937 0700 0022     		movs r2, # 0
 938 0702 9046     		mov r8, r2
ARM GAS  1.s 			page 18


 939 0704 1E4C     		ldr r4, = 9000
 940 0706 E403     		lsls r4, r4, # 15
 941              	__cordic_atan2_xun_huan:
 942              	__du_cos_sin:
 943 0708 1D68     		ldr r5, [r3]	@cos
 944 070a 0433     		adds r3, r3, # 4
 945 070c 2F46     		mov r7, r5
 946 070e 1E68     		ldr r6, [r3]	@sin
 947 0710 0433     		adds r3, r3, # 4
 948 0712 3246     		mov r2, r6
 949 0714 4543     		muls r5, r5, r0         @x*cos
 950 0716 4243     		muls r2, r2, r0         @x*sin
 951 0718 4E43     		muls r6, r6, r1         @y*sin
 952 071a 4F43     		muls r7, r7, r1         @y*cos
 953 071c 0900     		movs r1, r1
 954 071e 05D5     		bpl __ni_shi_zhen_zhuan
 955              	__shun_shi_zhen_zhuan:
 956 0720 AD1B     		subs r5, r5, r6
 957 0722 BF18     		adds r7, r7, r2
 958 0724 4646     		mov r6, r8
 959 0726 3619     		adds r6, r6, r4
 960 0728 B046     		mov r8, r6
 961 072a 04E0     		b __xuan_zhuan_wan
 962              	__ni_shi_zhen_zhuan:
 963 072c AD19     		adds r5, r5, r6
 964 072e BF1A     		subs r7, r7, r2
 965 0730 4646     		mov r6, r8
 966 0732 361B     		subs r6, r6, r4
 967 0734 B046     		mov r8, r6
 968              	__xuan_zhuan_wan:
 969 0736 114E     		ldr r6, = cordic_yong_cos_sin
 970 0738 2022     		movs r2, # 32
 971 073a 9200     		lsls r2, r2, # 2
 972 073c B618     		adds r6, r6, r2
 973 073e AD13     		asrs r5, r5, # 14
 974 0740 BF13     		asrs r7, r7, # 14
 975 0742 2846     		mov r0, r5
 976 0744 3946     		mov r1, r7
 977 0746 6408     		lsrs r4, r4, # 1	@旋转
 978 0748 B342     		cmp r3,	r6
 979 074a DDD1     		bne __cordic_atan2_xun_huan
 980 074c 4046     		mov r0, r8
 981 074e C043     		mvns r0, r0
 982 0750 0130     		adds r0, r0, # 1
 983 0752 C013     		asrs r0, r0, # 15      @除32768等于角度
 984 0754 04BC     		pop {r2}
 985 0756 9046     		mov r8, r2
 986 0758 FCBD     		pop {r2-r7,pc}
 987 075a 00001900 		.ltorg
 987      00001400 
 987      00001000 
 987      00000000 
 987      0020F800 
 988              	
 989              	
 990              	
 991              	__xiangwei_jiaozheng:
ARM GAS  1.s 			page 19


 992 0784 3FB5     		push {r0-r5,lr}
 993 0786 2648     		ldr r0, = jiaodu_jiaozheng
 994 0788 2649     		ldr r1, = 9000
 995 078a 0068     		ldr r0, [r0]
 996 078c 264A     		ldr r2, = 51471
 997 078e 0000     		movs r0, r0
 998 0790 03D5     		bpl __jiaozheng_jiaodu_bushi0
 999 0792 C043     		mvns r0, r0
 1000 0794 0130     		adds r0, r0, # 1
 1001 0796 0124     		movs r4, # 1
 1002 0798 00E0     		b __ji_suan_jiaozheng_jiaodu
 1003              	__jiaozheng_jiaodu_bushi0:
 1004 079a 0024     		movs r4, # 0
 1005              	__ji_suan_jiaozheng_jiaodu:
 1006 079c 234D     		ldr r5, = 10000
 1007 079e 6843     		muls r0, r0, r5
 1008 07a0 00F0DAF8 		bl _chufa
 1009 07a4 5043     		muls r0, r0, r2
 1010 07a6 2946     		mov r1, r5
 1011 07a8 00F0D6F8 		bl _chufa
 1012 07ac 012C     		cmp r4, # 1
 1013 07ae 01D1     		bne __suan_cos_sin
 1014 07b0 C043     		mvns r0, r0
 1015 07b2 0130     		adds r0, r0, # 1
 1016              	__suan_cos_sin:
 1017 07b4 FFF779FF 		bl __cordic_cos_sin
 1018 07b8 1D4A     		ldr r2, = cos_jiaozheng
 1019 07ba 1E4B     		ldr r3, = sin_jiaozheng
 1020 07bc 1060     		str r0, [r2]
 1021 07be 1960     		str r1, [r3]
 1022 07c0 3FBD     		pop {r0-r5,pc}
 1023              	
 1024              	
 1025              	__chuan_gan_qi_lvbo:
 1026              		@50*4偏移=0XC8
 1027 07c2 FCB5     		push {r2-r7,lr}
 1028 07c4 4446     		mov r4, r8
 1029 07c6 4D46     		mov r5, r9
 1030 07c8 30B4     		push {r4-r5}
 1031 07ca 1B48     		ldr r0, = 0x200001b4 @sin_zheng
 1032 07cc 1B49     		ldr r1, = 0x2000027c @sin_fu
 1033 07ce 1C4A     		ldr r2, = 0x200001b0 @cos_zheng
 1034 07d0 1C4B     		ldr r3, = 0x20000278 @cos_fu
 1035 07d2 0468     		ldr r4, [r0]
 1036 07d4 0D68     		ldr r5, [r1]
 1037 07d6 1668     		ldr r6, [r2]
 1038 07d8 1F68     		ldr r7, [r3]
 1039 07da 641B     		subs r4, r4, r5
 1040 07dc F61B     		subs r6, r6, r7
 1041 07de B046     		mov r8, r6
 1042 07e0 A146     		mov r9, r4
 1043 07e2 FFF7CFFF 		bl __xiangwei_jiaozheng
 1044 07e6 3046     		mov r0, r6
 1045 07e8 2146     		mov r1, r4
 1046 07ea FFF73BFF 		bl __xiang_wei_xuan_zhuan
 1047 07ee 0646     		mov r6, r0
 1048 07f0 0C46     		mov r4, r1
ARM GAS  1.s 			page 20


 1049 07f2 2146     		mov r1, r4
 1050 07f4 144A     		ldr r2, = lvboqizhizhen
 1051 07f6 1548     		ldr r0, =lvboqihuanchong
 1052 07f8 00F032F8 		bl __lv_bo_qi
 1053 07fc 3146     		mov r1, r6
 1054 07fe 0446     		mov r4, r0
 1055 0800 134A     		ldr r2, = lvboqizhizhen1
 1056 0802 1448     		ldr r0, = lvboqihuanchong1
 1057 0804 00F02CF8 		bl __lv_bo_qi
 1058 0808 2146     		mov r1, r4
 1059 080a 134A     		ldr r2, = cos_cha
 1060 080c 134B     		ldr r3, = sin_cha
 1061 080e 4446     		mov r4, r8
 1062 0810 4D46     		mov r5, r9
 1063 0812 1460     		str r4, [r2]
 1064 0814 1D60     		str r5, [r3]
 1065 0816 30BC     		pop {r4-r5}
 1066 0818 A046     		mov r8, r4
 1067 081a A946     		mov r9, r5
 1068 081c FCBD     		pop {r2-r7,pc}
 1069 081e 0000FC00 		.ltorg
 1069      00202823 
 1069      00000FC9 
 1069      00001027 
 1069      0000F800 
 1070              	
 1071              	__lv_bo_qi:
 1072              		@地址顺序：指针，累加值，缓冲区
 1073              		@入口R0=缓冲区，R1=数据, r2,=指针
 1074              		@出口R0
 1075 0860 78B5     		push {r3-r6,lr}
 1076 0862 8024     		movs r4, # 128
 1077 0864 1568     		ldr r5, [r2]
 1078 0866 2B46     		mov r3, r5
 1079 0868 AB00     		lsls r3, r5, # 2
 1080 086a C658     		ldr r6, [r0, r3]
 1081 086c C150     		str r1, [r0, r3]
 1082 086e 0135     		adds r5, r5, # 1
 1083 0870 1560     		str r5, [r2]
 1084 0872 A542     		cmp r5, r4
 1085 0874 01D1     		bne __huanchong_leijia
 1086 0876 0025     		movs r5, # 0
 1087 0878 1560     		str r5, [r2]
 1088              	__huanchong_leijia:
 1089 087a 0438     		subs r0, r0, # 4
 1090 087c 0568     		ldr r5, [r0]
 1091 087e 4919     		adds r1, r1, r5
 1092 0880 891B     		subs r1, r1, r6
 1093 0882 0160     		str r1, [r0]
 1094 0884 C811     		asrs r0, r1, # 7	@128
 1095 0886 78BD     		pop {r3-r6,pc}
 1096              		.ltorg
 1097              	
 1098              	
 1099              		
 1100              	
 1101              	_lcdxianshi:		  		@r0=LCD位置，r1=数据地址，r2=长度
ARM GAS  1.s 			page 21


 1102 0888 1FB5     		push {r0-r4,lr}
 1103 088a 0C46     		mov r4, r1
 1104              	
 1105 088c 0021     		movs r1, # 0
 1106 088e 00F00EF8 		bl _xielcd
 1107              	
 1108 0892 0121     		movs r1, # 1
 1109 0894 0023     		movs r3, # 0
 1110              	_lcdxianshixunhuan:
 1111 0896 E05C     		ldrb r0, [r4,r3]
 1112 0898 00F009F8 		bl _xielcd
 1113 089c 0133     		adds r3, r3, # 1
 1114 089e 9342     		cmp r3, r2
 1115 08a0 F9D1     		bne _lcdxianshixunhuan
 1116 08a2 1FBD     		pop {r0-r4,pc}
 1117              	
 1118              	_lcdyanshi:
 1119 08a4 20B5     		push {r5,lr}
 1120 08a6 AE4D     		ldr r5, = 0x1000
 1121              	_lcdyanshixunhuan:
 1122 08a8 013D     		subs r5, r5, # 1
 1123 08aa FDD1     		bne _lcdyanshixunhuan
 1124 08ac 20BD     		pop {r5,pc}
 1125              	
 1126              	_xielcd:				@入R0=8位,r1=0命令,r1=1数据
 1127 08ae 3FB5     		push {r0-r5,lr}
 1128 08b0 AC4C     		ldr r4, = liangcheng  @ 量程开关 (第6位和第7位)
 1129 08b2 0246     		mov r2, r0
 1130 08b4 2568     		ldr r5, [r4]
 1131 08b6 1209     		lsrs r2, r2, # 4
 1132 08b8 9200     		lsls r2, r2, # 2	@ 高四位
 1133 08ba 0007     		lsls r0, r0, # 28
 1134 08bc 800E     		lsrs r0, r0, # 26	@ 低四位
 1135 08be C907     		lsls r1, r1, # 31
 1136 08c0 01D5     		bpl __lcd_ming_ling
 1137              	__lcd_shu_ju:
 1138 08c2 0323     		movs r3, # 0x03		@ RS = 1 E = 1
 1139 08c4 00E0     		b __xie_lcd_shu_ju
 1140              	__lcd_ming_ling:
 1141 08c6 0223     		movs r3, # 0x02		@ RS = 0 E = 1
 1142              	__xie_lcd_shu_ju:
 1143 08c8 5B19     		adds r3, r3, r5
 1144 08ca 0146     		mov r1, r0
 1145 08cc D218     		adds r2, r2, r3
 1146 08ce 1000     		movs r0, r2
 1147 08d0 00F00BF8 		bl __74hc595
 1148 08d4 0238     		subs r0, r0, # 0x02
 1149 08d6 00F008F8 		bl __74hc595
 1150 08da 0846     		mov r0, r1
 1151 08dc C018     		adds r0, r0, r3
 1152 08de 00F004F8 		bl __74hc595
 1153 08e2 0238     		subs r0, r0, # 0x02
 1154 08e4 00F001F8 		bl __74hc595
 1155 08e8 3FBD     		pop {r0-r5,pc}
 1156              	
 1157              	__74hc595:				@ 入R0=8位
 1158 08ea FFB5     		push {r0-r7,lr}
ARM GAS  1.s 			page 22


 1159 08ec 9E4E     		ldr r6, = 0x48000000
 1160 08ee 0125     		movs r5, # 0x01		@ SRCLK
 1161 08f0 0222     		movs r2, # 0x02		@ RCLK
 1162 08f2 0423     		movs r3, # 0x04		@ SER
 1163 08f4 1824     		movs r4, # 24
 1164              	__595_yiweixunhuan:
 1165 08f6 B262     		str r2, [r6, # 0x28]	@ rclk=0
 1166 08f8 B562     		str r5, [r6, # 0x28]	@ srclk=0
 1167              		@ovs r7, # 0xff
 1168 08fa 9C4F     		ldr r7, = 0x1ff
 1169              	__595_yanshi:
 1170 08fc 013F     		subs r7, r7, # 1
 1171 08fe FDD1     		bne __595_yanshi
 1172 0900 0146     		mov r1, r0
 1173 0902 A140     		lsls r1, r1, r4
 1174 0904 01D5     		bpl __ser_0
 1175              	__ser_1:
 1176 0906 B361     		str r3, [r6, # 0x18]	@ ser=1
 1177 0908 00E0     		b __595_yiwei
 1178              	__ser_0:
 1179 090a B362     		str r3, [r6, # 0x28]	@ ser=0
 1180              	__595_yiwei:
 1181 090c B561     		str r5, [r6, # 0x18]
 1182              		@movs r7, # 0xff
 1183 090e 974F     		ldr r7, = 0x1ff
 1184              	__595_yanshi1:
 1185 0910 013F     		subs r7, r7, # 1
 1186 0912 FDD1     		bne __595_yanshi1
 1187 0914 0134     		adds r4, r4, # 1
 1188 0916 202C     		cmp r4, # 32
 1189 0918 EDD1     		bne __595_yiweixunhuan
 1190 091a B261     		str r2, [r6, # 0x18]	@ rclk=1
 1191              		@movs r7, # 0xff
 1192 091c 934F     		ldr r7, = 0x1ff
 1193              	__595_yanshi2:
 1194 091e 013F     		subs r7, r7, # 1
 1195 0920 FDD1     		bne __595_yanshi2
 1196 0922 B262     		str r2, [r6, # 0x28]	@ rclk = 0
 1197 0924 FFBD     		pop {r0-r7,pc}
 1198              	
 1199              	
 1200              	
 1201              	_zhuanascii:						@ 16进制转ASCII
 1202              		@ R0要转的数据， R1长度，R2结果表首地址, r3=小数点位置
 1203 0926 FFB5     		push {r0-r7,lr}
 1204 0928 1F46     		mov r7, r3
 1205 092a 0546     		mov r5, r0
 1206 092c 0E46     		mov r6, r1
 1207 092e 0A21     		movs r1, # 10
 1208              	_xunhuanqiuma:
 1209 0930 00F012F8 		bl _chufa
 1210 0934 0446     		mov r4, r0
 1211 0936 4C43     		muls r4, r1
 1212 0938 2B1B     		subs r3, r5, r4
 1213 093a 3033     		adds r3, r3, # 0x30
 1214 093c 0546     		mov r5, r0
 1215 093e 013E     		subs r6, r6, # 1
ARM GAS  1.s 			page 23


 1216 0940 08D0     		beq _qiumafanhui
 1217 0942 BE42     		cmp r6, r7
 1218 0944 02D1     		bne _meidaoxiaoshudian
 1219 0946 2E24     		movs r4, # 0x2e		@小数点
 1220 0948 9455     		strb r4, [r2,r6]	@插入小数点
 1221 094a 013E     		subs r6, r6, # 1
 1222              	_meidaoxiaoshudian:
 1223 094c 9355     		strb r3, [r2,r6]
 1224 094e 3600     		movs r6, r6
 1225 0950 EED1     		bne _xunhuanqiuma
 1226 0952 FFBD     		pop {r0-r7,pc}
 1227              	_qiumafanhui:
 1228 0954 9355     		strb r3, [r2, r6]
 1229 0956 FFBD     		pop {r0-r7,pc}
 1230              	
 1231              	
 1232              	
 1233              		
 1234              	
 1235              	_chufa:				@软件除法
 1236              		@ r0 除以 r1 等于 商(r0)
 1237 0958 1EB5     		push {r1-r4,lr}
 1238 095a 0028     		cmp r0, # 0
 1239 095c 0ED0     		beq _chufafanhui
 1240 095e 0029     		cmp r1, # 0
 1241 0960 0CD0     		beq _chufafanhui
 1242 0962 0246     		mov r2, r0
 1243 0964 0123     		movs r3, # 1
 1244 0966 DB07     		lsls r3, r3, # 31
 1245 0968 0020     		movs r0, # 0
 1246 096a 0446     		mov r4, r0
 1247              	_chufaxunhuan:
 1248 096c 5200     		lsls r2, r2, # 1
 1249 096e 6441     		adcs r4, r4, r4
 1250 0970 8C42     		cmp r4, r1
 1251 0972 01D3     		bcc _chufaweishubudao0
 1252 0974 C018     		adds r0, r0, r3
 1253 0976 641A     		subs r4, r4, r1
 1254              	_chufaweishubudao0:
 1255 0978 5B08     		lsrs r3, r3, # 1
 1256 097a F7D1     		bne _chufaxunhuan
 1257              	_chufafanhui:
 1258 097c 1EBD     		pop {r1-r4,pc}
 1259              	__chufa64:
 1260              		@64位除32位
 1261              		@ （R0=高32位R1=低32位）除（R2)= （R0高32）（R1低32）
 1262 097e F8B5     		push {r3-r7,lr}
 1263 0980 002A     		cmp r2, # 0
 1264 0982 1DD0     		beq __chu_fa64_fan_hui0
 1265 0984 0029     		cmp r1, # 0
 1266 0986 01D1     		bne __chu_fa64_ji_suan
 1267 0988 0028     		cmp r0, # 0
 1268 098a 19D0     		beq __chu_fa64_fan_hui0
 1269              	__chu_fa64_ji_suan:
 1270 098c 0024     		movs r4, # 0
 1271 098e 2746     		mov r7, r4
 1272 0990 2346     		mov r3, r4
ARM GAS  1.s 			page 24


 1273 0992 2546     		mov r5, r4
 1274 0994 0126     		movs r6, # 1
 1275 0996 F607     		lsls r6, r6, # 31
 1276              	__chu_fa64_xun_huan:
 1277 0998 4900     		lsls r1, r1, # 1
 1278 099a 4041     		adcs r0, r0, r0
 1279 099c 6441     		adcs r4, r4, r4
 1280 099e 9442     		cmp r4, r2
 1281 09a0 02D3     		bcc __chu_fa_yi_wei
 1282 09a2 9B19     		adds r3, r3, r6
 1283 09a4 7D41     		adcs r5, r5, r7
 1284 09a6 A41A     		subs r4, r4, r2
 1285              	__chu_fa_yi_wei:
 1286 09a8 3600     		movs r6, r6
 1287 09aa 04D0     		beq __di_yi_wei
 1288 09ac 7608     		lsrs r6, r6, # 1        @高32位移位
 1289 09ae F3D1     		bne __chu_fa64_xun_huan
 1290 09b0 0127     		movs r7, # 1
 1291 09b2 FF07     		lsls r7, r7, # 31
 1292 09b4 F0E7     		b __chu_fa64_xun_huan
 1293              	__di_yi_wei:	            @低32位移位
 1294 09b6 7F08     		lsrs r7, r7, # 1
 1295 09b8 EED1     		bne __chu_fa64_xun_huan
 1296 09ba 1846     		mov r0, r3
 1297 09bc 2946     		mov r1, r5
 1298 09be F8BD     		pop {r3-r7,pc}
 1299              	__chu_fa64_fan_hui0:
 1300 09c0 0020     		movs r0, # 0
 1301 09c2 0021     		movs r1, # 0
 1302 09c4 F8BD     		pop {r3-r7,pc}
 1303              	__chengfa:
 1304              		@入R0 乘以 R1
 1305              		@出 R0高32 ， R1低32
 1306              		@0xffffffff*0xffffffff
 1307              		@4        F F F E 0 0 0 1			@4
 1308              		@3                F F F E 0 0 0 1		@3
 1309              		@2                F F F E 0 0 0 1		@2
 1310              		@1                        F F F E 0 0 0 1	@1
 1311              		@         F F F F F F F E 0 0 0 0 0 0 0 1
 1312 09c6 FCB5     		push {r2-r7,lr}
 1313 09c8 0028     		cmp r0, # 0
 1314 09ca 1ED0     		beq __cheng_fa_fan_hui
 1315 09cc 0029     		cmp r1, # 0
 1316 09ce 1CD0     		beq __cheng_fa_fan_hui
 1317              	__ji_suan_cheng_fa:
 1318 09d0 0246     		mov r2, r0
 1319 09d2 0B46     		mov r3, r1
 1320 09d4 000C     		lsrs r0, r0, # 16	@高16
 1321 09d6 1204     		lsls r2, r2, # 16	@ 低16
 1322 09d8 120C     		lsrs r2, r2, # 16
 1323 09da 090C     		lsrs r1, r1, # 16	@高16
 1324 09dc 1B04     		lsls r3, r3, # 16	@低16
 1325 09de 1B0C     		lsrs r3, r3, # 16
 1326 09e0 1446     		mov r4, r2
 1327 09e2 0546     		mov r5, r0
 1328 09e4 5A43     		muls r2, r2, r3		@1
 1329 09e6 5843     		muls r0, r0, r3		@2
ARM GAS  1.s 			page 25


 1330 09e8 4C43     		muls r4, r4, r1		@3
 1331 09ea 4D43     		muls r5, r5, r1		@4
 1332 09ec 0646     		mov r6, r0
 1333 09ee 2746     		mov r7, r4
 1334 09f0 0004     		lsls r0, r0, # 16	@2低32
 1335 09f2 2404     		lsls r4, r4, # 16	@3低32
 1336 09f4 360C     		lsrs r6, r6, # 16	@2高32
 1337 09f6 3F0C     		lsrs r7, r7, # 16	@3高32
 1338 09f8 0021     		movs r1, # 0
 1339 09fa 1218     		adds r2, r2, r0		@低32
 1340 09fc 4E41     		adcs r6, r6, r1		@高32
 1341 09fe 1219     		adds r2, r2, r4
 1342 0a00 7E41     		adcs r6, r6, r7
 1343 0a02 7619     		adds r6, r6, r5
 1344 0a04 3046     		mov r0, r6
 1345 0a06 1146     		mov r1, r2
 1346 0a08 FCBD     		pop {r2-r7,pc}
 1347              	__cheng_fa_fan_hui:
 1348 0a0a 0020     		movs r0, # 0
 1349 0a0c 0021     		movs r1, # 0
 1350 0a0e FCBD     		pop {r2-r7,pc}
 1351              	__dai_yu_shu_chufa:	                         @软件除法
 1352              		@ r0 除以 r1 等于 商(r0)余R1
 1353 0a10 1CB5     		push {r2-r4,lr}
 1354 0a12 0028     		cmp r0, # 0
 1355 0a14 0ED0     		beq __dai_yu_shu_chufafanhui
 1356 0a16 0029     		cmp r1, # 0
 1357 0a18 0CD0     		beq __dai_yu_shu_chufafanhui
 1358 0a1a 0246     		mov r2, r0
 1359 0a1c 0123     		movs r3, # 1
 1360 0a1e DB07     		lsls r3, r3, # 31
 1361 0a20 0020     		movs r0, # 0
 1362 0a22 0446     		mov r4, r0
 1363              	__dai_yu_shu_chufaxunhuan:
 1364 0a24 5200     		lsls r2, r2, # 1
 1365 0a26 6441     		adcs r4, r4, r4
 1366 0a28 8C42     		cmp r4, r1
 1367 0a2a 01D3     		bcc __dai_yu_shu_chufaweishubudao0
 1368 0a2c C018     		adds r0, r0, r3
 1369 0a2e 641A     		subs r4, r4, r1
 1370              	__dai_yu_shu_chufaweishubudao0:
 1371 0a30 5B08     		lsrs r3, r3, # 1
 1372 0a32 F7D1     		bne __dai_yu_shu_chufaxunhuan
 1373              	__dai_yu_shu_chufafanhui:
 1374 0a34 1CBD     		        pop {r2-r4,pc}
 1375              	_nmi_handler:
 1376 0a36 7047     		bx lr
 1377              	_hard_fault:
 1378 0a38 7047     		bx lr
 1379              	_svc_handler:
 1380 0a3a 7047     		bx lr
 1381              	_pendsv_handler:
 1382 0a3c 7047     		bx lr
 1383              	_systickzhongduan:
 1384 0a3e F0B5     		push {r4-r7,lr}
 1385 0a40 4346     		mov r3, r8
 1386 0a42 4C46     		mov r4, r9
ARM GAS  1.s 			page 26


 1387 0a44 5546     		mov r5, r10
 1388 0a46 5E46     		mov r6, r11
 1389 0a48 6746     		mov r7, r12
 1390 0a4a F8B4     		push {r3-r7}
 1391 0a4c 4848     		ldr r0, = 0xe0000d04
 1392 0a4e 4949     		ldr r1, = 0x02000000
 1393 0a50 0160     		str r1, [r0]                 @ 清除SYSTICK中断
 1394              	
 1395 0a52 64E0     		b ddz
 1396              		
 1397 0a54 FFF7B5FE 		bl __chuan_gan_qi_lvbo
 1398 0a58 474A     		ldr r2, = cos
 1399 0a5a 484B     		ldr r3, = sin
 1400 0a5c 1060     		str r0, [r2]		@r
 1401 0a5e 1960     		str r1, [r3]		@i
 1402              	
 1403 0a60 FFF747FE 		bl __atan2_ji_suan
 1404 0a64 464C     		ldr r4, = jiaodu
 1405 0a66 474D     		ldr r5, = jiaodu_a
 1406 0a68 0200     		movs r2, r0
 1407 0a6a 03D5     		bpl __jiaodu_bushi_fu
 1408 0a6c 4649     		ldr r1, = 36000
 1409 0a6e D243     		mvns r2, r2
 1410 0a70 0132     		adds r2, r2, # 1
 1411 0a72 8A1A     		subs r2, r1, r2
 1412              	__jiaodu_bushi_fu:
 1413 0a74 2060     		str r0, [r4]
 1414 0a76 2860     		str r0, [r5]
 1415 0a78 8046     		mov r8, r0
 1416              	
 1417 0a7a 4449     		ldr r1, = 0x4001300c
 1418 0a7c 0A80     		strh r2, [r1]
 1419              	
 1420 0a7e 4448     		ldr r0, = cos_cha
 1421 0a80 4449     		ldr r1, = sin_cha
 1422 0a82 0068     		ldr r0, [r0]
 1423 0a84 0968     		ldr r1, [r1]
 1424 0a86 FFF734FE 		bl __atan2_ji_suan
 1425 0a8a 4349     		ldr r1, = jiaodu_b
 1426 0a8c 0860     		str r0, [r1]
 1427              	
 1428              	
 1429              	
 1430 0a8e 0746     		mov r7, r0
 1431 0a90 4046     		mov r0, r8
 1432 0a92 B846     		mov r8, r7
 1433              	
 1434              	__jiaodu_buchang_jisuan:
 1435              	
 1436 0a94 414F     		ldr r7, = 18000
 1437 0a96 4546     		mov r5, r8
 1438 0a98 0646     		mov r6, r0
 1439 0a9a 761B     		subs r6, r6, r5
 1440 0a9c F643     		mvns r6, r6
 1441 0a9e 0136     		adds r6, r6, # 1
 1442 0aa0 3F4B     		ldr r3, = 0x200000d0
 1443 0aa2 404C     		ldr r4, = 0x200000d4
ARM GAS  1.s 			page 27


 1444 0aa4 3500     		movs r5, r6
 1445 0aa6 02D5     		bpl __bao_cun_jiaodu_cha
 1446 0aa8 ED43     		mvns r5, r5
 1447 0aaa 0135     		adds r5, r5, # 1
 1448 0aac FFE7     		b __bao_cun_jiaodu_cha
 1449              	__bao_cun_jiaodu_cha:
 1450 0aae BD42     		cmp r5, r7
 1451 0ab0 11D8     		bhi __systick_fanhui
 1452 0ab2 1860     		str r0, [r3]
 1453 0ab4 2560     		str r5, [r4]
 1454 0ab6 3C4B     		ldr r3, = 0x200000c8
 1455 0ab8 1E60     		str r6, [r3]
 1456              	__pid:
 1457 0aba 3746     		mov r7, r6
 1458 0abc 3446     		mov r4, r6
 1459              	__pid_bi_li:
 1460 0abe 3B4B     		ldr r3, = 32768         @ KP
 1461 0ac0 5F43     		muls r7, r7, r3
 1462 0ac2 FF13     		asrs r7, r7, # 15
 1463              	__pid_ji_fen:
 1464 0ac4 374E     		ldr r6, = shang_ci_i
 1465 0ac6 3A4A     		ldr r2, = 20		@ KI
 1466 0ac8 3368     		ldr r3, [r6]
 1467 0aca 5443     		muls r4, r4, r2
 1468 0acc E413     		asrs r4, r4, # 15
 1469 0ace E418     		adds r4, r4, r3
 1470 0ad0 3460     		str r4, [r6]
 1471              		@	adds r7, r7, r4
 1472              	__zhengzhuan_buchang:
 1473 0ad2 384D     		ldr r5, = jiaodu_jiaozheng
 1474 0ad4 2F60     		str r7, [r5]
 1475              	
 1476              	__systick_fanhui:
 1477              	
 1478              	__jiaodu_cha_jisuan:
 1479 0ad6 324B     		ldr r3, = shangci_jiaodu
 1480 0ad8 304F     		ldr r7, = 18000
 1481 0ada 1C68     		ldr r4, [r3]
 1482 0adc 8146     		mov r9, r0
 1483 0ade 0646     		mov r6, r0
 1484 0ae0 361B     		subs r6, r6, r4
 1485 0ae2 3200     		movs r2, r6
 1486 0ae4 01D5     		bpl __baocun_jiaodu_cha
 1487 0ae6 D243     		mvns r2, r2
 1488 0ae8 0132     		adds r2, r2, # 1
 1489              	__baocun_jiaodu_cha:
 1490 0aea BA42     		cmp r2, r7
 1491 0aec 14D8     		bhi __tick_fanhui
 1492 0aee 3248     		ldr r0, = lvboqihuanchong3
 1493 0af0 324A     		ldr r2, = lvboqizhizhen3
 1494 0af2 3146     		mov r1, r6
 1495 0af4 FFF7B4FE 		bl __lv_bo_qi
 1496 0af8 314B     		ldr r3, = jiaodu_cha
 1497 0afa 1860     		str r0, [r3]
 1498 0afc 0000     		movs r0, r0
 1499 0afe 00D5     		bpl __jiance_zhuangtai
 1500 0b00 0124     		movs r4, # 1
ARM GAS  1.s 			page 28


 1501              	__jiance_zhuangtai:
 1502 0b02 0028     		cmp r0, # 0
 1503 0b04 01D1     		bne __zai_zhuan
 1504 0b06 0021     		movs r1, # 0
 1505 0b08 04E0     		b __baocun_zhengfan_zhuan
 1506              	__zai_zhuan:
 1507 0b0a 012C     		cmp r4, # 1
 1508 0b0c 01D1     		bne __fan_zhuan
 1509 0b0e C321     		movs r1, # 0xc3
 1510 0b10 00E0     		b __baocun_zhengfan_zhuan
 1511              	__fan_zhuan:
 1512 0b12 3C21     		movs r1, # 0x3c
 1513              	__baocun_zhengfan_zhuan:
 1514 0b14 244B     		ldr r3, = zhengfan_zhuan
 1515 0b16 1960     		str r1, [r3]
 1516              	__tick_fanhui:
 1517 0b18 214B     		ldr r3, = shangci_jiaodu
 1518 0b1a 4846     		mov r0, r9
 1519 0b1c 1860     		str r0, [r3]
 1520              	
 1521              	
 1522              	
 1523              	ddz:
 1524 0b1e 294B     		ldr r3, = 10
 1525              	
 1526 0b20 2948     		ldr r0, = 0x20000024
 1527 0b22 0168     		ldr r1, [r0]
 1528 0b24 0131     		adds r1, r1, # 1
 1529 0b26 0160     		str r1, [r0]
 1530 0b28 9942     		cmp r1, r3
 1531 0b2a 11D1     		bne zz
 1532 0b2c 0021     		movs r1, # 0
 1533 0b2e 0160     		str r1, [r0]
 1534 0b30 264D     		ldr r5, = 0x20000028
 1535 0b32 154F     		ldr r7, = 36000
 1536 0b34 2C68     		ldr r4, [r5]
 1537 0b36 2046     		mov r0, r4
 1538 0b38 FFF722FD 		bl __jisuan_cos_sin
 1539 0b3c 0246     		mov r2, r0
 1540 0b3e 2046     		mov r0, r4
 1541 0b40 FFF7F0FB 		bl __svpwm
 1542 0b44 3C34     		adds r4, r4, # 60
 1543 0b46 2C60     		str r4, [r5]
 1544 0b48 BC42     		cmp r4, r7
 1545 0b4a 01D1     		bne zz
 1546 0b4c 0024     		movs r4, # 0
 1547 0b4e 2C60     		str r4, [r5]
 1548              	zz:
 1549              	
 1550 0b50 F8BC     		pop {r3-r7}
 1551 0b52 9846     		mov r8, r3
 1552 0b54 A146     		mov r9, r4
 1553 0b56 AA46     		mov r10, r5
 1554 0b58 B346     		mov r11, r6
 1555 0b5a BC46     		mov r12, r7
 1556 0b5c F0BD     		pop {r4-r7,pc}
 1557              	
ARM GAS  1.s 			page 29


 1558              	
 1559              	aaa:
 1560 0b5e 7047     		bx lr
 1561 0b60 00100000 		.ltorg
 1561      20000020 
 1561      00000048 
 1561      FF010000 
 1561      040D00E0 
 1562              		.end
ARM GAS  1.s 			page 30


DEFINED SYMBOLS
                 1.s:9      .data:0000000000000000 yjmwxwx
                 1.s:11     .data:0000000000000010 kong
                 1.s:13     .data:0000000000000014 _fu
                 1.s:15     .data:0000000000000015 jiaodu1
                 1.s:17     .data:0000000000000019 jiaodufuhao
                 1.s:20     .data:000000000000001d $d
                 1.s:21     .data:0000000000000020 zheng_xian_biao
                 1.s:24     .data:00000000000000f0 cordic_yong_cos_sin
                 1.s:26     .data:0000000000000170 cordic_yong_atan_biao
                 1.s:29     *ABS*:0000000020001000 STACKINIT
                 1.s:30     *ABS*:0000000020000000 asciimabiao
                 1.s:31     *ABS*:0000000020000020 liangcheng
                 1.s:32     *ABS*:00000000200000c4 dianji_huanxiang
                 1.s:33     *ABS*:00000000200000c8 zhengfan_zhuan
                 1.s:34     *ABS*:00000000200000cc jiaodu_cha
                 1.s:35     *ABS*:00000000200000d0 shangci_jiaodu
                 1.s:36     *ABS*:00000000200000d4 shang_ci_i
                 1.s:37     *ABS*:00000000200000d8 jiaodu_b
                 1.s:38     *ABS*:00000000200000dc jiaodu_a
                 1.s:39     *ABS*:00000000200000e0 jiaodu
                 1.s:40     *ABS*:00000000200000e4 cos
                 1.s:41     *ABS*:00000000200000e8 sin
                 1.s:42     *ABS*:00000000200000ec sin_cha
                 1.s:43     *ABS*:00000000200000f0 cos_cha
                 1.s:44     *ABS*:00000000200000f4 sin_jiaozheng
                 1.s:45     *ABS*:00000000200000f8 cos_jiaozheng
                 1.s:46     *ABS*:00000000200000fc jiaodu_jiaozheng
                 1.s:47     *ABS*:0000000020000100 dianyabiao
                 1.s:48     *ABS*:0000000020000300 lvboqizhizhen
                 1.s:49     *ABS*:0000000020000308 lvboqihuanchong
                 1.s:50     *ABS*:0000000020000510 lvboqizhizhen1
                 1.s:51     *ABS*:0000000020000518 lvboqihuanchong1
                 1.s:52     *ABS*:0000000020000900 lvboqizhizhen2
                 1.s:53     *ABS*:0000000020000908 lvboqihuanchong2
                 1.s:54     *ABS*:0000000020000b10 lvboqizhizhen3
                 1.s:55     *ABS*:0000000020000b18 lvboqihuanchong3
                 1.s:56     *ABS*:0000000040000434 tim3_ch1
                 1.s:57     *ABS*:0000000040000438 tim3_ch2
                 1.s:58     *ABS*:0000000040002034 tim14_ch1
                 1.s:61     .text:0000000000000000 vectors
                 1.s:107    .text:00000000000000b0 _start
                 1.s:1375   .text:0000000000000a36 _nmi_handler
                 1.s:1377   .text:0000000000000a38 _hard_fault
                 1.s:1379   .text:0000000000000a3a _svc_handler
                 1.s:1381   .text:0000000000000a3c _pendsv_handler
                 1.s:1383   .text:0000000000000a3e _systickzhongduan
                 1.s:1559   .text:0000000000000b5e aaa
                            .text:0000000000000000 $d
                 1.s:106    .text:00000000000000b0 $t
                 1.s:109    .text:00000000000000b0 shizhong
                 1.s:116    .text:00000000000000bc denghse
                 1.s:120    .text:00000000000000c2 dengpllguan
                 1.s:132    .text:00000000000000d6 dengpll
                 1.s:141    .text:00000000000000e0 _waisheshizhong
                 1.s:158    .text:00000000000000ee _neicunqingling
                 1.s:162    .text:00000000000000f4 _neicunqinglingxunhuan
ARM GAS  1.s 			page 31


                 1.s:167    .text:00000000000000fa _waishezhongduan
                 1.s:189    .text:0000000000000100 io_she_zhi
                 1.s:229    .text:000000000000011c _adcchushihua
                 1.s:233    .text:0000000000000122 _dengadcjiaozhun
                 1.s:239    .text:000000000000012c _kaiadc
                 1.s:244    .text:0000000000000134 _deng_adc_wen_ding
                 1.s:248    .text:000000000000013a _tongdaoxuanze
                 1.s:263    .text:0000000000000152 _lcdchushihua
                 1.s:1126   .text:00000000000008ae _xielcd
                 1.s:1118   .text:00000000000008a4 _lcdyanshi
                 1.s:1101   .text:0000000000000888 _lcdxianshi
                 1.s:291    .text:000000000000019a yjmwxwx_yanshi
                 1.s:301    .text:00000000000001aa dmachushihua
                 1.s:333    .text:00000000000001ce _systick
                 1.s:341    .text:00000000000001d8 tim14chushihua
                 1.s:354    .text:00000000000001ee tim3chushihua
                 1.s:371    .text:000000000000020c tim1chushiha
                 1.s:395    .text:0000000000000238 ting
                 1.s:807    .text:0000000000000620 __xian_shi_jiao_du
                 1.s:1201   .text:0000000000000926 _zhuanascii
                 1.s:422    .text:0000000000000324 __svpwm
                 1.s:421    .text:0000000000000264 $d
                 1.s:424    .text:0000000000000324 $t
                 1.s:1235   .text:0000000000000958 _chufa
                 1.s:432    .text:0000000000000336 __bushi_0_60
                 1.s:440    .text:0000000000000350 __dianji_xiangwei
                 1.s:441    .text:0000000000000350 $d
                 1.s:442    .text:0000000000000368 __xiangwei_0_60
                 1.s:477    .text:00000000000003ac __xiangwei_60_120
                 1.s:532    .text:000000000000040e __xiangwei_120_180
                 1.s:585    .text:0000000000000470 __xiangwei_180_240
                 1.s:628    .text:00000000000004bc __xiangwei_240_300
                 1.s:687    .text:000000000000051e __xiangwei_300_360
                 1.s:443    .text:0000000000000368 $t
                 1.s:744    .text:000000000000057e __svpwm_fanhui
                 1.s:747    .text:0000000000000580 __jisuan_cos_sin
                 1.s:757    .text:000000000000058e __xiaoyu_180
                 1.s:759    .text:0000000000000590 __js_cos_sin
                 1.s:768    .text:00000000000005a0 __jisuan_jiaodu_bushi0
                 1.s:770    .text:00000000000005a2 __jiance_chao90
                 1.s:777    .text:00000000000005ae __xiaoyu_90
                 1.s:779    .text:00000000000005b0 __suan_cossin
                 1.s:790    .text:00000000000005c8 __suan_cos_sin1
                 1.s:882    .text:00000000000006aa __cordic_cos_sin
                 1.s:796    .text:00000000000005d4 __cos_sin_fanhui
                 1.s:803    .text:00000000000005e0 __cossin_fh
                 1.s:805    .text:00000000000005e2 $d
                 1.s:805    .text:00000000000005e4 $d
                 1.s:809    .text:0000000000000620 $t
                 1.s:825    .text:0000000000000642 __jiaodu_bu_shi_zheng
                 1.s:830    .text:000000000000064c __xian_shi_jiaodu
                 1.s:842    .text:0000000000000664 __xiang_wei_xuan_zhuan
                 1.s:858    .text:0000000000000680 __xuanzhuan_fangxiang_jiance
                 1.s:865    .text:000000000000068c __xuan_zhuan_xiang_wei
                 1.s:896    .text:00000000000006ba cordicxunhuan
                 1.s:928    .text:00000000000006f2 __atan2_ji_suan
                 1.s:941    .text:0000000000000708 __cordic_atan2_xun_huan
ARM GAS  1.s 			page 32


                 1.s:942    .text:0000000000000708 __du_cos_sin
                 1.s:962    .text:000000000000072c __ni_shi_zhen_zhuan
                 1.s:955    .text:0000000000000720 __shun_shi_zhen_zhuan
                 1.s:968    .text:0000000000000736 __xuan_zhuan_wan
                 1.s:987    .text:000000000000075a $d
                 1.s:987    .text:000000000000075c $d
                 1.s:991    .text:0000000000000784 __xiangwei_jiaozheng
                 1.s:992    .text:0000000000000784 $t
                 1.s:1003   .text:000000000000079a __jiaozheng_jiaodu_bushi0
                 1.s:1005   .text:000000000000079c __ji_suan_jiaozheng_jiaodu
                 1.s:1016   .text:00000000000007b4 __suan_cos_sin
                 1.s:1025   .text:00000000000007c2 __chuan_gan_qi_lvbo
                 1.s:1071   .text:0000000000000860 __lv_bo_qi
                 1.s:1069   .text:000000000000081e $d
                 1.s:1069   .text:0000000000000820 $d
                 1.s:1075   .text:0000000000000860 $t
                 1.s:1088   .text:000000000000087a __huanchong_leijia
                 1.s:1110   .text:0000000000000896 _lcdxianshixunhuan
                 1.s:1121   .text:00000000000008a8 _lcdyanshixunhuan
                 1.s:1140   .text:00000000000008c6 __lcd_ming_ling
                 1.s:1137   .text:00000000000008c2 __lcd_shu_ju
                 1.s:1142   .text:00000000000008c8 __xie_lcd_shu_ju
                 1.s:1157   .text:00000000000008ea __74hc595
                 1.s:1164   .text:00000000000008f6 __595_yiweixunhuan
                 1.s:1169   .text:00000000000008fc __595_yanshi
                 1.s:1178   .text:000000000000090a __ser_0
                 1.s:1175   .text:0000000000000906 __ser_1
                 1.s:1180   .text:000000000000090c __595_yiwei
                 1.s:1184   .text:0000000000000910 __595_yanshi1
                 1.s:1193   .text:000000000000091e __595_yanshi2
                 1.s:1208   .text:0000000000000930 _xunhuanqiuma
                 1.s:1227   .text:0000000000000954 _qiumafanhui
                 1.s:1222   .text:000000000000094c _meidaoxiaoshudian
                 1.s:1257   .text:000000000000097c _chufafanhui
                 1.s:1247   .text:000000000000096c _chufaxunhuan
                 1.s:1254   .text:0000000000000978 _chufaweishubudao0
                 1.s:1259   .text:000000000000097e __chufa64
                 1.s:1299   .text:00000000000009c0 __chu_fa64_fan_hui0
                 1.s:1269   .text:000000000000098c __chu_fa64_ji_suan
                 1.s:1276   .text:0000000000000998 __chu_fa64_xun_huan
                 1.s:1285   .text:00000000000009a8 __chu_fa_yi_wei
                 1.s:1293   .text:00000000000009b6 __di_yi_wei
                 1.s:1303   .text:00000000000009c6 __chengfa
                 1.s:1347   .text:0000000000000a0a __cheng_fa_fan_hui
                 1.s:1317   .text:00000000000009d0 __ji_suan_cheng_fa
                 1.s:1351   .text:0000000000000a10 __dai_yu_shu_chufa
                 1.s:1373   .text:0000000000000a34 __dai_yu_shu_chufafanhui
                 1.s:1363   .text:0000000000000a24 __dai_yu_shu_chufaxunhuan
                 1.s:1370   .text:0000000000000a30 __dai_yu_shu_chufaweishubudao0
                 1.s:1523   .text:0000000000000b1e ddz
                 1.s:1412   .text:0000000000000a74 __jiaodu_bushi_fu
                 1.s:1434   .text:0000000000000a94 __jiaodu_buchang_jisuan
                 1.s:1449   .text:0000000000000aae __bao_cun_jiaodu_cha
                 1.s:1476   .text:0000000000000ad6 __systick_fanhui
                 1.s:1456   .text:0000000000000aba __pid
                 1.s:1459   .text:0000000000000abe __pid_bi_li
                 1.s:1463   .text:0000000000000ac4 __pid_ji_fen
ARM GAS  1.s 			page 33


                 1.s:1472   .text:0000000000000ad2 __zhengzhuan_buchang
                 1.s:1478   .text:0000000000000ad6 __jiaodu_cha_jisuan
                 1.s:1489   .text:0000000000000aea __baocun_jiaodu_cha
                 1.s:1516   .text:0000000000000b18 __tick_fanhui
                 1.s:1501   .text:0000000000000b02 __jiance_zhuangtai
                 1.s:1506   .text:0000000000000b0a __zai_zhuan
                 1.s:1513   .text:0000000000000b14 __baocun_zhengfan_zhuan
                 1.s:1511   .text:0000000000000b12 __fan_zhuan
                 1.s:1548   .text:0000000000000b50 zz
                 1.s:1561   .text:0000000000000b60 $d

NO UNDEFINED SYMBOLS
