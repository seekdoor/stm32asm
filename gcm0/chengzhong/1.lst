ARM GAS  1.s 			page 1


   1              		@@单片机stm32f030f4p6
   2              		@@ 电阻桥
   3              		@作者：yjmwxwx
   4              		@时间：2019-07-20
   5              		@编译器：arm-none-eabi
   6              		 .thumb                 
   7              	         .syntax unified
   8              		.section .data
   9              	wendubuchangbiao1:
  10 0000 E7090000 		.int  0x9e7,0x9ed,0xa2b,0xa52,0xa56,0xa24,0xa52,0xa6d,0xa80,0xa95,0xa9a,0xa89,0xad6,0xb0d,0xac0,0x
  10      ED090000 
  10      2B0A0000 
  10      520A0000 
  10      560A0000 
  11              		
  12              	shumaguanmabiao:
  13 009c FC000000 		.int 0xfc,0x60,0xda,0xf2,0x66,0xb6,0xbe,0xe0,0xfe,0xf6
  13      60000000 
  13      DA000000 
  13      F2000000 
  13      66000000 
  14              	shumaguanshuaxinbiao:
  15 00c4 00FE0000 		.int 0xfe00,0xfd00,0xfb00,0xf700,0xef00,0xdf00,0xbf00,0x7f00,0
  15      00FD0000 
  15      00FB0000 
  15      00F70000 
  15      00EF0000 
  16              	       	.equ STACKINIT,                 0x20001000
  17              		.equ shumaguanma,		0x20000000
  18              		.equ dianyabiao,		0x20000024
  19              		.equ lvboqizhizhen,		0x2000002c
  20              		.equ lvboqihuanchong,		0x20000030
  21              		.equ lvboqizhizhen1,		0x20000530
  22              		.equ lvboqihuanchong1,		0x20000534
  23              		.equ wendubuchangbiao,		0x20000950
  24              	.section .text
  25              	vectors:
  26 0000 00100020 		.word STACKINIT
  27 0004 B1000000 		.word _start + 1
  28 0008 19030000 		.word _nmi_handler + 1
  29 000c 1B030000 		.word _hard_fault  + 1
  30 0010 00000000 		.word 0
  31 0014 00000000 		.word 0
  32 0018 00000000 		.word 0
  33 001c 00000000 		.word 0
  34 0020 00000000 		.word 0
  35 0024 00000000 		.word 0
  36 0028 00000000 		.word 0
  37 002c 1D030000 		.word _svc_handler +1
  38 0030 00000000 		.word 0
  39 0034 00000000 		.word 0
  40 0038 1F030000 		.word _pendsv_handler +1
  41 003c 21030000 		.word aaa +1	@  _systickzhongduan +1               @ 15
  42 0040 21030000 		.word aaa +1     @ _wwdg +1          @ 0
  43 0044 21030000 		.word aaa +1     @_pvd +1            @ 1
  44 0048 21030000 		.word aaa +1     @_rtc +1            @ 2
  45 004c 21030000 		.word aaa +1     @_flash +1          @ 3
ARM GAS  1.s 			page 2


  46 0050 21030000 		.word aaa +1	@ _rcc + 1          @ 4
  47 0054 21030000 		.word aaa +1      @_exti0_1  +1      @ 5
  48 0058 21030000 		.word aaa +1      @ _exti2_3 +1      @ 6
  49 005c 21030000 		.word aaa +1       @_exti4_15 +1     @ 7
  50 0060 21030000 		.word aaa +1                         @ 8
  51 0064 21030000 		.word aaa +1 	@_dma1_1  +1    @ 9
  52 0068 21030000 		.word aaa +1    @_dma1_2_3 +1        @ 10
  53 006c 21030000 		.word aaa +1       @_dma1_4_5 +1     @ 11
  54 0070 21030000 		.word aaa +1	 @_adc1 +1          @ 12
  55 0074 21030000 		.word aaa +1       @_tim1_brk_up +1  @ 13
  56 0078 21030000 		.word aaa +1        @ _tim1_cc +1    @ 14
  57 007c 21030000 		.word aaa +1         @_tim2 +1       @ 15
  58 0080 21030000 		.word aaa +1          @_tim3 +1      @ 16
  59 0084 21030000 		.word aaa +1                         @ 17
  60 0088 21030000 		.word aaa +1		                @ 18
  61 008c 21030000 		.word aaa +1	@_tim14 +1    @ 19
  62 0090 21030000 		.word aaa +1                         @ 20
  63 0094 21030000 		.word aaa +1         @_tim16 +1      @ 21
  64 0098 21030000 		.word aaa +1         @_tim17 +1      @ 22
  65 009c 21030000 		.word aaa +1          @_i2c   +1     @ 23
  66 00a0 21030000 		.word aaa +1                         @ 24
  67 00a4 21030000 		.word aaa +1           @_spi   +1    @ 25
  68 00a8 21030000 		.word aaa +1                         @ 26
  69 00ac 21030000 		.word aaa +1         @_usart1 +1     @ 27
  70              	_start:
  71              	shizhong:
  72 00b0 9C4A     		ldr r2, = 0x40022000   @FLASH访问控制
  73 00b2 3221     		movs r1, # 0x32
  74 00b4 1160     		str r1, [r2]           @FLASH缓冲 缓冲开启
  75 00b6 9C48     	        ldr r0, = 0x40021000 @ rcc
  76 00b8 9C49     	        ldr r1, = 0x10001
  77 00ba 0160     	        str r1, [r0]
  78              	denghse:
  79 00bc 0168     	        ldr r1, [r0]
  80 00be 8903     	        lsls r1, r1, # 14
  81 00c0 FCD5     	        bpl denghse
  82              	dengpllguan:
  83 00c2 0168     	        ldr r1, [r0]
  84 00c4 8901     	        lsls r1, r1, # 6
  85 00c6 FCD4     	        bmi dengpllguan
  86 00c8 9949     	        ldr r1, = 0x110002
  87 00ca 4160     	        str r1, [r0, # 0x04]
  88 00cc 9949     	        ldr r1, = 0x1010000
  89 00ce 0000     		movs r0, r0
  90 00d0 0160     	        str r1, [r0]
  91              		
  92              	dengpll:
  93 00d2 0168     		ldr r1, [r0]
  94 00d4 8901     		lsls r1, # 6
  95 00d6 FCD5     		bpl dengpll
  96              		@0x34时钟控制寄存器 2 (RCC_CR2)
  97 00d8 0121     		movs r1, # 0x01
  98 00da 4163     		str r1, [r0, # 0x34]  @ HSI开14M时钟
  99              	dengdai14mshizhongwending:
 100 00dc 416B     		ldr r1, [r0, # 0x34]
 101 00de 8907     		lsls r1, r1, # 30     @ 左移30位
 102 00e0 FCD5     		bpl dengdai14mshizhongwending  @ 等待14M时钟稳定
ARM GAS  1.s 			page 3


 103              	
 104              	neicunqingling:
 105 00e2 9548     		ldr r0, = 0x20000000
 106 00e4 0021     		movs r1, # 0
 107 00e6 954B     		ldr r3, = 0x1000
 108              	neicunqinglingxunhuan:
 109 00e8 043B     		subs r3, # 4
 110 00ea C150     		str r1, [r0, r3]
 111 00ec FCD1     		bne neicunqinglingxunhuan
 112              	
 113              	@_systick:				@ systick定时器初始化
 114              	@
 115              	@	ldr r0, = 0xe000e010
 116              	@	ldr r1, = 0xffff
 117              	@	str r1, [r0, # 4]
 118              	@	str r1, [r0, # 8]
 119              	@	movs r1, # 0x07
 120              	@	str r1, [r0]
 121              	_waisheshizhong:		 @ 外设时钟
 122              		@ +0x14=RCC_AHBENR
 123              		@ 0=DMA @ 2=SRAM @ 4=FLITF@ 6=CRC @ 17=PA @ 18=PB @ 19=PC @ 20=PD @ 22=PF
 124 00ee 8E48     		ldr r0, = 0x40021000
 125 00f0 9349     		ldr r1, = 0x460005
 126 00f2 4161     		str r1, [r0, # 0x14]
 127              	
 128              		@ +0x18外设时钟使能寄存器 (RCC_APB2ENR)
 129              		@ 0=SYSCFG @ 5=USART6EN @ 9=ADC @ 11=TIM1 @ 12=SPI1 @ 14=USART1 @ 16=TIM15 @ 17=TIM16 @ 18=TIM17 @
 130 00f4 9349     		ldr r1, = 0xa00
 131 00f6 8161     		str r1, [r0, # 0x18]
 132              		@+0X1C=RCC_APB1ENR
 133              		@ 1=TIM3 @ 4=TIM6 @5=TIM7 @8=TIM14 @11=WWDG @14=SPI @17=USRT2 @18=USART3 @20=USART5 @21=I2C1 @22=I
 134 00f8 0221     		movs r1, # 0x02
 135 00fa C161     		str r1, [r0, # 0x1c]
 136              	io_she_zhi:
 137              	@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 138              		@a(0x48000000)b(0x48000400)c(0x48000800)d(0x48000c00)f(0x48001400)
 139              		@ 输入（00），通用输出（01），复用功能（10），模拟（11）
 140              		@偏移0x4 = 端口输出类型 @ （0 推挽），（ 1 开漏）
 141              		@偏移0x8 = 输出速度  00低速， 01中速， 11高速
 142              		@偏移0xC = 上拉下拉 (00无上下拉，  01 上拉， 10下拉)
 143              		@偏移0x10 = 输入数据寄存器
 144              		@偏移0x14 = 输出数据寄存器
 145              		@偏移0x18 = 端口开  0-15置位 
 146              		@偏移0x28 = 端口关
 147              		@0X20 = 复用低
 148              		@GPIO口0（0-3位）每个IO口占用4位
 149              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 150              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 151              		@0x24 = 复用高
 152              		@GPIO口8 （0-3位）每个IO口占用4位
 153              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 154              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 155              	@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 156              	
 157 00fc 9248     		ldr r0, = 0x48000000
 158 00fe 9349     		ldr r1, = 0x2800540f
 159 0100 0160     		str r1, [r0]
ARM GAS  1.s 			page 4


 160              	
 161 0102 9349     		ldr r1, = 0x200
 162 0104 4162     		str r1, [r0, # 0x24]
 163              	tim3chushihua:				@ 48M
 164 0106 9348     		ldr r0, = 0x40000400 @ tim3_cr1
 165 0108 9349     		ldr r1, =  0
 166 010a 8162     		str r1, [r0, # 0x28] @ psc
 167 010c 9349     		ldr r1, = 6
 168 010e C162     		str r1, [r0, # 0x2c] @ ARR
 169 0110 9349     		ldr r1, =   0x3800
 170 0112 C161     		str r1, [r0, # 0x1c] @ ccmr2
 171 0114 9349     		ldr r1, = 9999
 172 0116 0162     		str r1, [r0, # 0x20] @ ccer
 173 0118 9049     		ldr r1, = 6
 174 011a 0164     		str r1, [r0, # 0x40] @ ccr4
 175 011c 7021     		movs r1, # 0x70
 176 011e 4160     		str r1, [r0, # 0x04]
 177 0120 8121     		movs r1, # 0x81
 178 0122 0160     		str r1, [r0]
 179              	dmachushihua:
 180              		@+0=LSR,+4=IFCR,
 181              		@+8=CCR1,+c=CNDTR1,+10=CPAR1+14=CMAR1,
 182              		@+1c=CCR2,+20=CNDTR2,+24=CPAR2,+28=CMAR2
 183              		@+30=CCR3,+34=CNDTR3,+38=CPAR2,+3c=CMAR3
 184              		@+44=CCR4,+48=CNDTR4,+4c=CPAR4,+50=CMAR4
 185              		@+58=CCR5,+5c=CNDTR5,+60=CPAR5,+64=CMAR5
 186              		@+6C=CCR6,+70=CNDTR6,+74=CPAR6,+78=CMAR6
 187              		@+80=CCR7,+84=CNDTR7,+88=CPAR7,+8c=CMAR7
 188              		@ tim1DMA
 189              		@ adc dma
 190 0124 9048     		ldr r0, = 0x40020000
 191 0126 9149     		ldr r1, = 0x40012440
 192 0128 0161     		str r1, [r0, # 0x10]
 193 012a 9149     		ldr r1, = dianyabiao
 194 012c 4161     		str r1, [r0, # 0x14]
 195 012e 9149     		ldr r1, =  2
 196 0130 C160     		str r1, [r0, # 0x0c]
 197 0132 9149     		ldr r1, = 0xaa1
 198 0134 8160     		str r1, [r0, # 0x08]
 199              	
 200              	_adcchushihua:
 201 0136 9148     		ldr r0, = 0x40012400  @ adc基地址
 202 0138 9149     		ldr r1, = 0x80000000
 203 013a 8160     		str r1, [r0, # 0x08]  @ ADC 控制寄存器 (ADC_CR)  @adc校准
 204              	_dengadcjiaozhun:
 205 013c 8168     		ldr r1, [r0, # 0x08]
 206 013e 0900     		 movs r1, r1
 207 0140 FCD4     		bmi _dengadcjiaozhun   @ 等ADC校准
 208              	_kaiadc:
 209 0142 8168     		ldr r1, [r0, # 0x08]
 210 0144 0122     		movs r2, # 0x01
 211 0146 1143     		orrs r1, r1, r2
 212 0148 8160     		str r1, [r0, # 0x08]
 213              	_dengdaiadcwending:
 214 014a 0168     		ldr r1, [r0]
 215 014c C907     		lsls r1, r1, # 31
 216 014e FCD5     		bpl _dengdaiadcwending @ 等ADC稳定
ARM GAS  1.s 			page 5


 217              	_tongdaoxuanze:
 218 0150 8C49     		ldr r1, = 0x03
 219 0152 8162     		str r1, [r0, # 0x28]    @ 通道选择寄存器 (ADC_CHSELR)
 220 0154 8C49     		ldr r1, = 0xcc3         @ tim3触发ADC
 221              	@	ldr r1, = 0x3001
 222 0156 C160     		str r1, [r0, # 0x0c]    @ 配置寄存器 1 (ADC_CFGR1)
 223 0158 0021     		movs r1, # 0       
 224 015a 4161     		str r1, [r0, # 0x14]    @ ADC 采样时间寄存器 (ADC_SMPR)
 225 015c 8168     		ldr r1, [r0, # 0x08]
 226 015e 8B4A     		ldr r2, = 0x04         @ 开始转换
 227 0160 1143     		orrs r1, r1, r2
 228 0162 8160     		str r1, [r0, # 0x08]    @ 控制寄存器 (ADC_CR)
 229              	
 230              	
 231              		
 232              	_waishezhongduan:		@外设中断
 233              		@0xE000E100    0-31  写1开，写0没效
 234              		@0XE000E180    0-31 写1关，写0没效
 235              		@0XE000E200    0-31 挂起，写0没效
 236              		@0XE000E280    0-31 清除， 写0没效
 237              	
 238 0164 7A4E     		ldr r6, = 512
 239              	denglvboqiman:
 240 0166 8A48     	        ldr r0, = lvboqihuanchong1
 241 0168 7949     	        ldr r1, = 512
 242 016a 814B     	        ldr r3, = dianyabiao
 243 016c 0433     	        adds r3, r3, # 4
 244 016e 894A     	        ldr r2, = lvboqizhizhen1
 245 0170 1B68     	        ldr r3, [r3]
 246 0172 00F0BDF8 	        bl _lvboqi1
 247              		
 248 0176 8848     	        ldr r0, = lvboqihuanchong
 249 0178 7549     	        ldr r1, = 512
 250 017a 7D4B     	        ldr r3, = dianyabiao
 251 017c 874A     	        ldr r2, = lvboqizhizhen
 252 017e 1B68     	        ldr r3, [r3]
 253 0180 00F0A2F8 	        bl _lvboqi
 254 0184 013E     		subs r6, r6, # 1
 255 0186 EED1     		bne denglvboqiman
 256              	
 257              		
 258              	ting:
 259 0188 8148     	        ldr r0, = lvboqihuanchong1
 260 018a 7149     	        ldr r1, = 512
 261 018c 784B     	        ldr r3, = dianyabiao
 262 018e 0433     		adds r3, r3, # 4
 263 0190 804A     	        ldr r2, = lvboqizhizhen1
 264 0192 1B68     	        ldr r3, [r3]
 265 0194 00F0ACF8 	        bl _lvboqi1
 266 0198 0646     		mov r6, r0
 267              	
 268 019a 7F48     		ldr r0, = lvboqihuanchong
 269 019c 6C49     		ldr r1, = 512
 270 019e 744B     		ldr r3, = dianyabiao
 271 01a0 7E4A     		ldr r2, = lvboqizhizhen
 272 01a2 1B68     		ldr r3, [r3]
 273 01a4 00F090F8 		bl _lvboqi
ARM GAS  1.s 			page 6


 274 01a8 7D49     		ldr r1, = 3300
 275 01aa 4843     		muls r0, r0, r1
 276 01ac 000B     		lsrs r0, r0, # 12
 277 01ae 00F008F8 		bl __wendubuchang1
 278 01b2 614A     		ldr r2, = shumaguanma
 279 01b4 0821     		movs r1, # 8
 280 01b6 00F02DF8 		bl _zhuanshumaguanma
 281 01ba 0820     		movs r0, # 8
 282 01bc 00F03CF8 		bl _xieshumaguan
 283 01c0 E2E7     		b ting
 284              		
 285              	__wendubuchang1:
 286 01c2 7EB5     		push {r1-r6,lr}
 287 01c4 7749     		ldr r1, = wendubuchangbiao1
 288 01c6 0022     		movs r2, # 0
 289 01c8 1E23     		movs r3, # 30
 290 01ca 9B00     		lsls r3, r3, # 2
 291 01cc 0924     		movs r4, # 9
 292 01ce A400     		lsls r4, r4, # 2
 293              	__gaowenbuchang:
 294 01d0 8D58     		ldr r5, [r1, r2]
 295 01d2 B542     		cmp r5, r6
 296 01d4 09D2     		bcs __gaowenbuchangfanhui
 297 01d6 0432     		adds r2, r2, # 4
 298 01d8 9A42     		cmp r2, r3
 299 01da FFD1     		bne __diwenbuchang
 300              	__diwenbuchang:
 301 01dc 8D5A     		ldrh r5, [r1, r2]
 302 01de B542     		cmp r5, r6
 303 01e0 06D2     		bcs __diwenbuchangfanhui
 304 01e2 0432     		adds r2, r2, # 4
 305 01e4 9A42     		cmp r2, r3
 306 01e6 F9D1     		bne __diwenbuchang
 307 01e8 7EBD     		pop {r1-r6,pc}
 308              	__gaowenbuchangfanhui:
 309 01ea 9208     		lsrs r2, r2, # 2
 310 01ec 1044     		add r0, r0, r2
 311 01ee 7EBD     		pop {r1-r6,pc}
 312              	__diwenbuchangfanhui:
 313 01f0 9208     		lsrs  r2, r2, # 2
 314 01f2 801A     		subs r0, r0, r2
 315 01f4 7EBD     		pop {r1-r6,pc}
 316              		
 317              		
 318              		
 319              	
 320              	
 321              	
 322              	
 323              		
 324              	__wendubuchang:
 325 01f6 FEB5     		push {r1-r7,lr}
 326 01f8 6B49     		ldr r1, = wendubuchangbiao
 327 01fa 5D4B     		ldr r3, = dianyabiao
 328 01fc 0E68     		ldr r6, [r1]
 329 01fe 8C5B     		ldrh r4, [r1, r6]
 330              	@	ldrh r5, [r3, # 0x04]
ARM GAS  1.s 			page 7


 331 0200 8442     		cmp r4, r0
 332 0202 06D2     		bcs __buchangfanhui
 333 0204 3746     		mov r7, r6
 334 0206 0437     		adds r7, r7, # 4
 335 0208 C853     		strh r0, [r1, r7]
 336 020a 0237     		adds r7, r7, # 2
 337 020c CD53     		strh r5, [r1, r7]
 338 020e 0436     		adds r6, r6, # 4
 339 0210 0E60     		str r6, [r1]
 340              	__buchangfanhui:
 341 0212 FEBD     		pop {r1-r7,pc}
 342              		
 343              		
 344              		
 345              	_zhuanshumaguanma:@ 16进制转数码管码
 346              			@ R0要转的数据， R1长度，R2结果表首地址
 347 0214 FFB5     		push {r0-r7,lr}
 348 0216 654F     		ldr r7, = shumaguanmabiao
 349 0218 0546     		mov r5, r0
 350 021a 0E46     		mov r6, r1
 351 021c 0A21     		movs r1, # 10
 352              	_xunhuanqiuma:
 353 021e 00F040F8 		bl _chufa
 354 0222 0446     		mov r4, r0
 355 0224 4C43     		muls r4, r1
 356 0226 2B1B     		subs r3, r5, r4
 357 0228 9B00     		lsls r3, # 2
 358 022a FC58     		ldr r4, [r7, r3]
 359 022c 1460     		str r4, [r2]
 360 022e 0546     		mov r5, r0
 361 0230 0432     		adds r2, r2, # 4
 362 0232 013E     		subs r6, # 1
 363 0234 F3D1     		bne _xunhuanqiuma
 364 0236 FFBD     		pop {r0-r7,pc}
 365              	_xieshumaguan: @ r0=位数 @数码管码
 366 0238 FFB5     		push {r0-r7,lr}
 367 023a 8000     		lsls r0, r0, # 2
 368 023c 0027     		movs r7, # 0
 369 023e 0646     		mov r6, r0
 370 0240 3D4D     		ldr r5, = shumaguanma
 371 0242 5B4A     		ldr r2, = shumaguanshuaxinbiao
 372              	_shumaguanshuaxin:
 373 0244 EB59     		ldr r3, [r5, r7]
 374 0246 D459     		ldr r4, [r2, r7]
 375 0248 1C43     		orrs r4, r4, r3
 376 024a 2046     		mov r0, r4
 377 024c 00F004F8 		bl _xie595
 378 0250 0437     		adds  r7, r7, # 4
 379 0252 B742     		cmp r7, r6
 380 0254 F6D9     		bls _shumaguanshuaxin
 381 0256 FFBD     		pop {r0-r7,pc}
 382              		
 383              	_xie595: @ R0=要写的数据
 384 0258 FFB5     		push {r0-r7,lr}
 385 025a 0546     		mov r5, r0
 386 025c 4020     		movs r0, # 0x40
 387 025e 8027     		movs r7, # 0x80 
ARM GAS  1.s 			page 8


 388 0260 2026     		movs r6, # 0x20 
 389 0262 1023     		movs r3, # 16   @16位
 390 0264 384A     		ldr r2, = 0x48000000 @ gpioa
 391 0266 0121     		movs r1, # 0x01
 392              	_xunhuan595:
 393 0268 9761     		str r7, [r2, # 0x18]
 394 026a 00F014F8 		bl _yanshi
 395 026e 0D42     		tst r5, r1
 396 0270 01D1     		bne _xie595_0
 397 0272 9062     		str r0, [r2, # 0x28]
 398 0274 00E0     		b _suocun595
 399              	_xie595_0:
 400 0276 9061     		str r0, [r2, # 0x18]
 401              	_suocun595:
 402 0278 00F00DF8 		bl _yanshi
 403 027c 6D08     		lsrs r5, # 1
 404 027e 9762     		str r7, [r2, # 0x28]
 405 0280 00F009F8 		bl _yanshi
 406 0284 013B     		subs r3, r3, # 1
 407 0286 EFD1     		bne _xunhuan595
 408 0288 9661     		str r6, [r2, # 0x18]
 409 028a 00F004F8 		bl _yanshi
 410 028e 9662     		str r6, [r2, # 0x28]
 411 0290 00F001F8 		bl _yanshi
 412 0294 FFBD     		pop {r0-r7,pc}
 413              	
 414              	
 415              	_yanshi:
 416 0296 80B4     		push {r7}
 417 0298 464F     		ldr r7, = 30
 418              	_yanshi11:
 419 029a 013F     		subs r7, # 1
 420 029c FDD1     		bne _yanshi11
 421 029e 80BC     		pop {r7}
 422 02a0 7047     		bx lr
 423              	_chufa:			@软件除法
 424              		@ r0 除以 r1 等于 商(r0)余数R1
 425 02a2 1EB5     		push {r1-r4,lr}
 426 02a4 0028     		cmp r0, # 0
 427 02a6 0ED0     		beq _chufafanhui
 428 02a8 0029     		cmp r1, # 0
 429 02aa 0CD0     		beq _chufafanhui
 430 02ac 0246     		mov r2, r0
 431 02ae 0123     		movs r3, # 1
 432 02b0 DB07     		lsls r3, r3, # 31
 433 02b2 0020     		movs r0, # 0
 434 02b4 0446     		mov r4, r0
 435              	_chufaxunhuan:
 436 02b6 5200     		lsls r2, r2, # 1
 437 02b8 6441     		adcs r4, r4, r4
 438 02ba 8C42     		cmp r4, r1
 439 02bc 01D3     		bcc _chufaweishubudao0
 440 02be C018     		adds r0, r0, r3
 441 02c0 641A     		subs r4, r4, r1
 442              	_chufaweishubudao0:
 443 02c2 5B08     		lsrs r3, r3, # 1
 444 02c4 F7D1     		bne _chufaxunhuan
ARM GAS  1.s 			page 9


 445              	_chufafanhui:
 446 02c6 1EBD     		pop {r1-r4,pc}
 447              	
 448              	
 449              	_lvboqi:
 450              				@滤波器
 451              				@R0=地址，R1=长度,r2=表指针地址,r3=ADC数值
 452              				@出R0=结果
 453 02c8 FEB5     		push {r1-r7,lr}	
 454 02ca 1568     		ldr r5, [r2]		@读出表指针
 455 02cc 4E00     		lsls r6, r1, # 1	
 456 02ce 4353     		strh r3, [r0, r5]	@数值写到滤波器缓冲区
 457 02d0 0235     		adds r5, r5, # 2
 458 02d2 B542     		cmp r5, r6
 459 02d4 00D1     		bne _lvboqimeidaohuanchongquding
 460 02d6 0025     		movs r5, # 0
 461              	_lvboqimeidaohuanchongquding:
 462 02d8 1560     		str r5, [r2]
 463 02da 0027     		movs r7, # 0
 464              	_lvboqixunhuan:
 465 02dc B542     		cmp r5, r6
 466 02de 00D1     		bne _lvbozonghe
 467 02e0 0025     		movs r5, # 0
 468              	_lvbozonghe:
 469 02e2 445B     		ldrh r4, [r0, r5]
 470 02e4 0235     		adds r5, r5, # 2
 471 02e6 3F19     		adds r7, r7, r4
 472 02e8 0139     		subs r1, r1, # 1
 473 02ea F7D1     		bne _lvboqixunhuan
 474 02ec 7812     		asrs r0, r7, # 9	@修改
 475 02ee FEBD     		pop {r1-r7,pc}
 476              	
 477              	_lvboqi1:
 478              	                        @滤波器
 479              	                        @R0=地址，R1=长度,r2=表指针地址,r3=ADC数值
 480              	                        @出R0=结果
 481 02f0 FEB5     		push {r1-r7,lr}
 482 02f2 1568     		ldr r5, [r2]            @读出表指针
 483 02f4 4E00     	        lsls r6, r1, # 1
 484 02f6 4353     	        strh r3, [r0, r5]       @数值写到滤波器缓冲区
 485 02f8 0235     	        adds r5, r5, # 2
 486 02fa B542     	        cmp r5, r6
 487 02fc 00D1     		bne _lvboqimeidaohuanchongquding1
 488 02fe 0025     	        movs r5, # 0
 489              	_lvboqimeidaohuanchongquding1:
 490 0300 1560     		str r5, [r2]
 491 0302 0027     	        movs r7, # 0
 492              	_lvboqixunhuan1:
 493 0304 B542     	        cmp r5, r6
 494 0306 00D1     	        bne _lvbozonghe1
 495 0308 0025     	        movs r5, # 0
 496              	_lvbozonghe1:
 497 030a 445B     		ldrh r4, [r0, r5]
 498 030c 0235     		adds r5, r5, # 2
 499 030e 3F19     	        adds r7, r7, r4
 500 0310 0139     	        subs r1, r1, # 1
 501 0312 F7D1     	        bne _lvboqixunhuan1
ARM GAS  1.s 			page 10


 502 0314 3812     	        asrs r0, r7, # 8       @修改
 503 0316 FEBD     	        pop {r1-r7,pc}
 504              	
 505              	
 506              	
 507              	
 508              	_nmi_handler:
 509 0318 7047     		bx lr
 510              	_hard_fault:
 511 031a 7047     		bx lr
 512              	_svc_handler:
 513 031c 7047     		bx lr
 514              	_pendsv_handler:
 515 031e 7047     		bx lr
 516              	_systickzhongduan:
 517              	aaa:
 518 0320 70470000 		bx lr
 518      00200240 
 518      00100240 
 518      01000100 
 518      02001100 
ARM GAS  1.s 			page 11


DEFINED SYMBOLS
                 1.s:9      .data:0000000000000000 wendubuchangbiao1
                 1.s:12     .data:000000000000009c shumaguanmabiao
                 1.s:14     .data:00000000000000c4 shumaguanshuaxinbiao
                 1.s:16     *ABS*:0000000020001000 STACKINIT
                 1.s:17     *ABS*:0000000020000000 shumaguanma
                 1.s:18     *ABS*:0000000020000024 dianyabiao
                 1.s:19     *ABS*:000000002000002c lvboqizhizhen
                 1.s:20     *ABS*:0000000020000030 lvboqihuanchong
                 1.s:21     *ABS*:0000000020000530 lvboqizhizhen1
                 1.s:22     *ABS*:0000000020000534 lvboqihuanchong1
                 1.s:23     *ABS*:0000000020000950 wendubuchangbiao
                 1.s:25     .text:0000000000000000 vectors
                 1.s:70     .text:00000000000000b0 _start
                 1.s:508    .text:0000000000000318 _nmi_handler
                 1.s:510    .text:000000000000031a _hard_fault
                 1.s:512    .text:000000000000031c _svc_handler
                 1.s:514    .text:000000000000031e _pendsv_handler
                 1.s:517    .text:0000000000000320 aaa
                 1.s:71     .text:00000000000000b0 shizhong
                            .text:0000000000000000 $d
                 1.s:72     .text:00000000000000b0 $t
                 1.s:78     .text:00000000000000bc denghse
                 1.s:82     .text:00000000000000c2 dengpllguan
                 1.s:92     .text:00000000000000d2 dengpll
                 1.s:99     .text:00000000000000dc dengdai14mshizhongwending
                 1.s:104    .text:00000000000000e2 neicunqingling
                 1.s:108    .text:00000000000000e8 neicunqinglingxunhuan
                 1.s:121    .text:00000000000000ee _waisheshizhong
                 1.s:136    .text:00000000000000fc io_she_zhi
                 1.s:163    .text:0000000000000106 tim3chushihua
                 1.s:179    .text:0000000000000124 dmachushihua
                 1.s:200    .text:0000000000000136 _adcchushihua
                 1.s:204    .text:000000000000013c _dengadcjiaozhun
                 1.s:208    .text:0000000000000142 _kaiadc
                 1.s:213    .text:000000000000014a _dengdaiadcwending
                 1.s:217    .text:0000000000000150 _tongdaoxuanze
                 1.s:232    .text:0000000000000164 _waishezhongduan
                 1.s:239    .text:0000000000000166 denglvboqiman
                 1.s:477    .text:00000000000002f0 _lvboqi1
                 1.s:449    .text:00000000000002c8 _lvboqi
                 1.s:258    .text:0000000000000188 ting
                 1.s:285    .text:00000000000001c2 __wendubuchang1
                 1.s:345    .text:0000000000000214 _zhuanshumaguanma
                 1.s:365    .text:0000000000000238 _xieshumaguan
                 1.s:293    .text:00000000000001d0 __gaowenbuchang
                 1.s:308    .text:00000000000001ea __gaowenbuchangfanhui
                 1.s:300    .text:00000000000001dc __diwenbuchang
                 1.s:312    .text:00000000000001f0 __diwenbuchangfanhui
                 1.s:324    .text:00000000000001f6 __wendubuchang
                 1.s:340    .text:0000000000000212 __buchangfanhui
                 1.s:352    .text:000000000000021e _xunhuanqiuma
                 1.s:423    .text:00000000000002a2 _chufa
                 1.s:372    .text:0000000000000244 _shumaguanshuaxin
                 1.s:383    .text:0000000000000258 _xie595
                 1.s:392    .text:0000000000000268 _xunhuan595
                 1.s:415    .text:0000000000000296 _yanshi
ARM GAS  1.s 			page 12


                 1.s:399    .text:0000000000000276 _xie595_0
                 1.s:401    .text:0000000000000278 _suocun595
                 1.s:418    .text:000000000000029a _yanshi11
                 1.s:445    .text:00000000000002c6 _chufafanhui
                 1.s:435    .text:00000000000002b6 _chufaxunhuan
                 1.s:442    .text:00000000000002c2 _chufaweishubudao0
                 1.s:461    .text:00000000000002d8 _lvboqimeidaohuanchongquding
                 1.s:464    .text:00000000000002dc _lvboqixunhuan
                 1.s:468    .text:00000000000002e2 _lvbozonghe
                 1.s:489    .text:0000000000000300 _lvboqimeidaohuanchongquding1
                 1.s:492    .text:0000000000000304 _lvboqixunhuan1
                 1.s:496    .text:000000000000030a _lvbozonghe1
                 1.s:516    .text:0000000000000320 _systickzhongduan
                 1.s:518    .text:0000000000000322 $d
                 1.s:518    .text:0000000000000324 $d

NO UNDEFINED SYMBOLS
