ARM GAS  1.s 			page 1


   1              		@@单片机stm32f030f4p6
   2              		@@ adc fft
   3              		@作者：yjmwxwx
   4              		@时间：2019-06-19
   5              		@编译器：arm-none-eabi
   6              		 .thumb                 
   7              	         .syntax unified
   8              	.section .data
   9              	shumaguanmabiao:
  10 0000 FC000000 		.int 0xfc,0x60,0xda,0xf2,0x66,0xb6,0xbe,0xe0,0xfe,0xf6
  10      60000000 
  10      DA000000 
  10      F2000000 
  10      66000000 
  11              	shumaguanshuaxinbiao:
  12 0028 00FE0000 		.int 0xfe00,0xfd00,0xfb00,0xf700,0xef00,0xdf00,0xbf00,0x7f00,0
  12      00FD0000 
  12      00FB0000 
  12      00F70000 
  12      00EF0000 
  13              	       	.equ STACKINIT,                 0x20001000
  14              	
  15              		.equ shumaguanma,	0x20000804
  16              		.equ xuanzhuanyinzi,	0x20000800
  17              		.equ dianyabiao,	0x20000850
  18              		.equ lvbozhizhen,	0x20000c50
  19              		.equ lvbohuanchong,	0x20000c54
  20              	hudieweifanzhuan:
  21 004c 00000000 		.int 0x0000,0x0200,0x0100,0x0300,0x0080,0x0280,0x0180,0x0380,0x0040,0x0240,0x0140,0x0340,0x00C0,0x
  21      00020000 
  21      00010000 
  21      00030000 
  21      80000000 
  22              	
  23              	fft3xuanzhuanyinzi:
  24 044c 00800000 		.int 0x8000,0x0000,0x5A82,0xFFFFA57E,0x0000,0xFFFF8000,0xFFFFA57E,0xFFFFA57E
  24      00000000 
  24      825A0000 
  24      7EA5FFFF 
  24      00000000 
  25              	fft4xuanzhuanyinzi:
  26 046c 00800000 		.int 0x8000,0x0000,0x7641,0xFFFFCF05,0x5A82,0xFFFFA57E,0x30FB,0xFFFF89BF,0x0000,0xFFFF8000,0xFFFFC
  26      00000000 
  26      41760000 
  26      05CFFFFF 
  26      825A0000 
  27              	fft5xuanzhuanyinzi:
  28 04ac 00800000 		.int 0x8000,0x0000,0x7D8A,0xFFFFE708,0x7641,0xFFFFCF05,0x6A6D,0xFFFFB8E4,0x5A82,0xFFFFA57E,0x471C,
  28      00000000 
  28      8A7D0000 
  28      08E7FFFF 
  28      41760000 
  29              	fft6xuanzhuanyinzi:
  30 052c 00800000 		.int 0x8000,0x0000,0x7F62,0xFFFFF375,0x7D8A,0xFFFFE708,0x7A7D,0xFFFFDAD8,0x7641,0xFFFFCF05,0x70E2,
  30      00000000 
  30      627F0000 
  30      75F3FFFF 
ARM GAS  1.s 			page 2


  30      8A7D0000 
  31              	fft7xuanzhuanyinzi:
  32 062c 00800000 		.int 0x8000,0x0000,0x7FD8,0xFFFFF9B9,0x7F62,0xFFFFF375,0x7E9D,0xFFFFED38,0x7D8A,0xFFFFE708,0x7C29,
  32      00000000 
  32      D87F0000 
  32      B9F9FFFF 
  32      627F0000 
  33              	
  34              	fft8xuanzhuanyinzi:
  35 082c 00800000 		.int 0x8000,0x0000,0x7FF6,0xFFFFFCDC,0x7FD8,0xFFFFF9B9,0x7FA7,0xFFFFF696,0x7F62,0xFFFFF375,0x7F09,
  35      00000000 
  35      F67F0000 
  35      DCFCFFFF 
  35      D87F0000 
  36              		
  37              		
  38              		
  39              		
  40              	.section .text
  41              	vectors:        
  42 0000 00100020 	        .word STACKINIT         
  43 0004 B1000000 	        .word _start + 1        
  44 0008 C5040000 	        .word _nmi_handler + 1  
  45 000c C7040000 	        .word _hard_fault  + 1  
  46 0010 00000000 	        .word 0 
  47 0014 00000000 	        .word 0    
  48 0018 00000000 	        .word 0
  49 001c 00000000 		.word 0
  50 0020 00000000 		.word 0
  51 0024 00000000 		.word 0
  52 0028 00000000 		.word 0
  53 002c C9040000 		.word _svc_handler +1
  54 0030 00000000 		.word 0 
  55 0034 00000000 		.word 0
  56 0038 CB040000 		.word _pendsv_handler +1
  57 003c 00000000 		.word 0 @_systick +1               @ 15   
  58 0040 00000000 		.word 0     @ _wwdg +1          @ 0
  59 0044 00000000 		.word 0     @_pvd +1            @ 1
  60 0048 00000000 		.word 0     @_rtc +1            @ 2
  61 004c 00000000 		.word 0     @_flash +1          @ 3
  62 0050 00000000 		.word 0     @ _rcc + 1          @ 4
  63 0054 00000000 		.word 0      @_exti0_1  +1      @ 5
  64 0058 00000000 		.word 0      @ _exti2_3 +1      @ 6
  65 005c 00000000 		.word 0       @_exti4_15 +1     @ 7
  66 0060 00000000 		.word 0                         @ 8
  67 0064 00000000 		.word 0 	@_dma1_1  +1    @ 9
  68 0068 00000000 		.word 0    @_dma1_2_3 +1        @ 10
  69 006c 00000000 		.word 0       @_dma1_4_5 +1     @ 11
  70 0070 00000000 		.word 0 	@_adc1 +1          @ 12
  71 0074 00000000 		.word 0       @_tim1_brk_up +1  @ 13
  72 0078 00000000 		.word 0        @ _tim1_cc +1    @ 14
  73 007c 00000000 		.word 0         @_tim2 +1       @ 15
  74 0080 00000000 		.word 0          @_tim3 +1      @ 16
  75 0084 00000000 		.word 0                         @ 17
  76 0088 00000000 		.word 0		                @ 18
  77 008c 00000000 		.word 0		@_tim14 +1    @ 19
  78 0090 00000000 		.word 0                         @ 20
ARM GAS  1.s 			page 3


  79 0094 00000000 		.word 0         @_tim16 +1      @ 21
  80 0098 00000000 		.word 0         @_tim17 +1      @ 22
  81 009c 00000000 		.word 0          @_i2c   +1     @ 23
  82 00a0 00000000 		.word 0                         @ 24
  83 00a4 00000000 		.word 0           @_spi   +1    @ 25
  84 00a8 00000000 		.word 0                         @ 26
  85 00ac 00000000 		.word 0         @_usart1 +1     @ 27
  86              	_start:
  87              	shizhong:
  88 00b0 624A     		ldr r2, = 0x40022000   @FLASH访问控制
  89 00b2 3221     		movs r1, # 0x32
  90 00b4 1160     		str r1, [r2]           @FLASH缓冲 缓冲开启
  91 00b6 6248     	        ldr r0, = 0x40021000 @ rcc
  92 00b8 6249     	        ldr r1, = 0x10001
  93 00ba 0160     	        str r1, [r0]
  94              	denghse:
  95 00bc 0168     	        ldr r1, [r0]
  96 00be 8903     	        lsls r1, r1, # 14
  97 00c0 FCD5     	        bpl denghse
  98              	dengpllguan:
  99 00c2 0168     	        ldr r1, [r0]
 100 00c4 8901     	        lsls r1, r1, # 6
 101 00c6 FCD4     	        bmi dengpllguan
 102 00c8 5F49     	        ldr r1, = 0x110002
 103 00ca 4160     	        str r1, [r0, # 0x04]
 104 00cc 5F49     	        ldr r1, = 0x1010000
 105 00ce 0000     		movs r0, r0
 106 00d0 0160     	        str r1, [r0]
 107              		
 108              	dengpll:
 109 00d2 0168     		ldr r1, [r0]
 110 00d4 8901     		lsls r1, # 6
 111 00d6 FCD5     		bpl dengpll
 112              		@0x34时钟控制寄存器 2 (RCC_CR2)
 113 00d8 0121     		movs r1, # 0x01
 114 00da 4163     		str r1, [r0, # 0x34]  @ HSI开14M时钟
 115              	dengdai14mshizhongwending:
 116 00dc 416B     		ldr r1, [r0, # 0x34]
 117 00de 8907     		lsls r1, r1, # 30     @ 左移30位
 118 00e0 FCD5     		bpl dengdai14mshizhongwending  @ 等待14M时钟稳定
 119              	
 120              	neicunqingling:
 121 00e2 5B48     		ldr r0, = 0x20000000
 122 00e4 0021     		movs r1, # 0
 123 00e6 5B4B     		ldr r3, = 0x1000
 124              	neicunqinglingxunhuan:
 125 00e8 043B     		subs r3, # 4
 126 00ea C150     		str r1, [r0, r3]
 127 00ec FCD1     		bne neicunqinglingxunhuan
 128              	
 129              	_waisheshizhong:		 @ 外设时钟
 130              		@+0x14=RCC_AHBENR
 131              		@0=DMA @2=SRAM @4=FLITF@6=CRC @17=PA @18=PB @19=PC @20=PD @22=PF
 132 00ee 5448     		ldr r0, = 0x40021000
 133 00f0 5949     		ldr r1, = 0x460005
 134 00f2 4161     		str r1, [r0, # 0x14]
 135              	
ARM GAS  1.s 			page 4


 136              		@+0x18外设时钟使能寄存器 (RCC_APB2ENR)
 137              		@0=SYSCFG @5=USART6EN @9=ADC @11=TIM1 @12=SPI1 @14=USART1 @16=TIM15 @17=TIM16 @18=TIM17 @22=DBGMCU
 138 00f4 5949     		ldr r1, = 0xa00
 139 00f6 8161     		str r1, [r0, # 0x18]
 140              		@+0X1C=RCC_APB1ENR
 141              		@1=TIM3 @4=TIM6 @5=TIM7 @8=TIM14 @11=WWDG @14=SPI @17=USRT2 @18=USART3 @20=USART5 @21=I2C1 @22=I2C
 142              			
 143              	io_she_zhi:
 144              	@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 145              		@a(0x48000000)b(0x48000400)c(0x48000800)d(0x48000c00)f(0x48001400)
 146              		@ 输入（00），通用输出（01），复用功能（10），模拟（11）
 147              		@偏移0x4 = 端口输出类型 @ （0 推挽），（ 1 开漏）
 148              		@偏移0x8 = 输出速度  00低速， 01中速， 11高速
 149              		@偏移0xC = 上拉下拉 (00无上下拉，  01 上拉， 10下拉)
 150              		@偏移0x10 = 输入数据寄存器
 151              		@偏移0x14 = 输出数据寄存器
 152              		@偏移0x18 = 端口开  0-15置位 
 153              		@偏移0x28 = 端口关
 154              		@0X20 = 复用低
 155              		@GPIO口0（0-3位）每个IO口占用4位
 156              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 157              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 158              		@0x24 = 复用高
 159              		@GPIO口8 （0-3位）每个IO口占用4位
 160              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 161              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 162              	@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 163              	
 164 00f8 5948     		ldr r0, = 0x48000000
 165 00fa 5A49     		ldr r1, = 0x28005403
 166 00fc 0160     		str r1, [r0]
 167              	
 168 00fe 5A49     		ldr r1, = 0x200
 169 0100 4162     		str r1, [r0, # 0x24]
 170              	
 171              	dmachushihua:
 172              		@+0=LSR,+4=IFCR,
 173              		@+8=CCR1,+c=CNDTR1,+10=CPAR1+14=CMAR1,
 174              		@+1c=CCR2,+20=CNDTR2,+24=CPAR2,+28=CMAR2
 175              		@+30=CCR3,+34=CNDTR3,+38=CPAR2,+3c=CMAR3
 176              		@+44=CCR4,+48=CNDTR4,+4c=CPAR4,+50=CMAR4
 177              		@+58=CCR5,+5c=CNDTR5,+60=CPAR5,+64=CMAR5
 178              		@+6C=CCR6,+70=CNDTR6,+74=CPAR6,+78=CMAR6
 179              		@+80=CCR7,+84=CNDTR7,+88=CPAR7,+8c=CMAR7
 180              		@ tim1DMA
 181              		@ adc dma
 182 0102 5A48     		ldr r0, = 0x40020000
 183 0104 5A49     		ldr r1, = 0x40012440
 184 0106 0161     		str r1, [r0, # 0x10]
 185 0108 5A49     		ldr r1, = dianyabiao
 186 010a 4161     		str r1, [r0, # 0x14]
 187 010c 5A49     		ldr r1, =  0xff
 188 010e C160     		str r1, [r0, # 0x0c]
 189 0110 5A49     		ldr r1, = 0xaa1
 190 0112 8160     		str r1, [r0, # 0x08]
 191              		
 192              	
ARM GAS  1.s 			page 5


 193              	
 194              	_adcchushihua:
 195 0114 5A48     		ldr r0, = 0x40012400  @ adc基地址
 196 0116 5B49     		ldr r1, = 0x80000000
 197 0118 8160     		str r1, [r0, # 0x08]  @ ADC 控制寄存器 (ADC_CR)  @adc校准
 198              	_dengadcjiaozhun:
 199 011a 8168     		ldr r1, [r0, # 0x08]
 200 011c 0900     		 movs r1, r1
 201 011e FCD4     		bmi _dengadcjiaozhun   @ 等ADC校准
 202              	_kaiadc:
 203 0120 8168     		ldr r1, [r0, # 0x08]
 204 0122 0122     		movs r2, # 0x01
 205 0124 1143     		orrs r1, r1, r2
 206 0126 8160     		str r1, [r0, # 0x08]
 207              	_dengdaiadcwending:
 208 0128 0168     		ldr r1, [r0]
 209 012a C907     		lsls r1, r1, # 31
 210 012c FCD5     		bpl _dengdaiadcwending @ 等ADC稳定
 211              	_tongdaoxuanze:
 212 012e 5649     		ldr r1, = 0x01
 213 0130 8162     		str r1, [r0, # 0x28]    @ 通道选择寄存器 (ADC_CHSELR)
 214 0132 5649     		ldr r1, = 0x3003        @ 13 连续转换
 215 0134 C160     		str r1, [r0, # 0x0c]    @ 配置寄存器 1 (ADC_CFGR1)
 216 0136 0021     		movs r1, # 0       	 
 217 0138 4161     		str r1, [r0, # 0x14]    @ ADC 采样时间寄存器 (ADC_SMPR)
 218 013a 8168     		ldr r1, [r0, # 0x08]
 219 013c 544A     		ldr r2, = 0x04         @ 开始转换
 220 013e 1143     		orrs r1, r1, r2
 221 0140 8160     		str r1, [r0, # 0x08]    @ 控制寄存器 (ADC_CR)
 222              	
 223              	
 224              		
 225              	_waishezhongduan:		@外设中断
 226              		@0xE000E100    0-31  写1开，写0没效
 227              		@0XE000E180    0-31 写1关，写0没效
 228              		@0XE000E200    0-31 挂起，写0没效
 229              		@0XE000E280    0-31 清除， 写0没效
 230              		
 231              	
 232              	
 233              	ting:
 234 0142 4C48     		ldr r0, = dianyabiao
 235 0144 00F0C6F8 		bl _fftjisuan
 236 0148 5248     		ldr r0, = lvbohuanchong
 237 014a 414B     		ldr r3, = 0x20000000
 238 014c 524A     		ldr r2, = lvbozhizhen
 239 014e 1B68     		ldr r3, [r3]
 240 0150 4021     		movs r1, # 64
 241 0152 00F0ABF8 		bl _lvboqi
 242 0156 514A     		ldr r2, = shumaguanma
 243 0158 0821     		movs r1, # 8
 244 015a 00F015F8 		bl _zhuanshumaguanma
 245 015e 0820     		movs r0, # 8
 246 0160 00F024F8 		bl _xieshumaguan
 247 0164 EDE7     		b ting
 248              		
 249              	
ARM GAS  1.s 			page 6


 250              		
 251              	
 252              	
 253              	_maopaopaixu:
 254 0166 FFB5     		push {r0-r7,lr}
 255              		@ r0= 表地址, r1= 长度
 256 0168 0F46     		mov r7, r1
 257              	_paixu:
 258 016a B900     		lsls r1, r7, # 2
 259              	_paixuxunhuan:	
 260 016c 425A     		ldrh r2, [r0, r1]
 261 016e 0239     		subs r1, r1, # 2
 262 0170 06D4     		bmi _paixu1
 263 0172 445A     		ldrh r4, [r0, r1]
 264 0174 A242     		cmp r2, r4
 265 0176 F9D9     		bls _paixuxunhuan
 266 0178 4252     		strh r2, [r0, r1]
 267 017a 8B1C     		adds r3, r1, # 2
 268 017c C452     		strh r4, [r0, r3]
 269 017e F5E7     		b _paixuxunhuan
 270              	_paixu1:
 271 0180 0230     		adds r0, r0, # 2
 272 0182 013F     		subs r7, r7, # 1
 273 0184 F1D1     		bne _paixu
 274 0186 FFBD     		pop {r0-r7,pc}
 275              	
 276              	_zhuanshumaguanma:@ 16进制转数码管码
 277              			@ R0要转的数据， R1长度，R2结果表首地址
 278 0188 FFB5     		push {r0-r7,lr}
 279 018a 454F     		ldr r7, = shumaguanmabiao
 280 018c 0546     		mov r5, r0
 281 018e 0E46     		mov r6, r1
 282 0190 0A21     		movs r1, # 10
 283              	_xunhuanqiuma:
 284 0192 00F040F8 		bl _chufa
 285 0196 0446     		mov r4, r0
 286 0198 4C43     		muls r4, r1
 287 019a 2B1B     		subs r3, r5, r4
 288 019c 9B00     		lsls r3, # 2
 289 019e FC58     		ldr r4, [r7, r3]
 290 01a0 1460     		str r4, [r2]
 291 01a2 0546     		mov r5, r0
 292 01a4 0432     		adds r2, r2, # 4
 293 01a6 013E     		subs r6, # 1
 294 01a8 F3D1     		bne _xunhuanqiuma
 295 01aa FFBD     		pop {r0-r7,pc}
 296              	_xieshumaguan: @ r0=位数 @数码管码
 297 01ac FFB5     		push {r0-r7,lr}
 298 01ae 8000     		lsls r0, r0, # 2
 299 01b0 0027     		movs r7, # 0
 300 01b2 0646     		mov r6, r0
 301 01b4 394D     		ldr r5, = shumaguanma
 302 01b6 3B4A     		ldr r2, = shumaguanshuaxinbiao
 303              	_shumaguanshuaxin:
 304 01b8 EB59     		ldr r3, [r5, r7]
 305 01ba D459     		ldr r4, [r2, r7]
 306 01bc 1C43     		orrs r4, r4, r3
ARM GAS  1.s 			page 7


 307 01be 2046     		mov r0, r4
 308 01c0 00F004F8 		bl _xie595
 309 01c4 0437     		adds  r7, r7, # 4
 310 01c6 B742     		cmp r7, r6
 311 01c8 F6D9     		bls _shumaguanshuaxin
 312 01ca FFBD     		pop {r0-r7,pc}
 313              		
 314              	_xie595: @ R0=要写的数据
 315 01cc FFB5     		push {r0-r7,lr}
 316 01ce 0546     		mov r5, r0
 317 01d0 4020     		movs r0, # 0x40
 318 01d2 8027     		movs r7, # 0x80 
 319 01d4 2026     		movs r6, # 0x20 
 320 01d6 1023     		movs r3, # 16   @16位
 321 01d8 214A     		ldr r2, = 0x48000000 @ gpioa
 322 01da 0121     		movs r1, # 0x01
 323              	_xunhuan595:
 324 01dc 9761     		str r7, [r2, # 0x18]
 325 01de 00F014F8 		bl _yanshi
 326 01e2 0D42     		tst r5, r1
 327 01e4 01D1     		bne _xie595_0
 328 01e6 9062     		str r0, [r2, # 0x28]
 329 01e8 00E0     		b _suocun595
 330              	_xie595_0:
 331 01ea 9061     		str r0, [r2, # 0x18]
 332              	_suocun595:
 333 01ec 00F00DF8 		bl _yanshi
 334 01f0 6D08     		lsrs r5, # 1
 335 01f2 9762     		str r7, [r2, # 0x28]
 336 01f4 00F009F8 		bl _yanshi
 337 01f8 013B     		subs r3, r3, # 1
 338 01fa EFD1     		bne _xunhuan595
 339 01fc 9661     		str r6, [r2, # 0x18]
 340 01fe 00F004F8 		bl _yanshi
 341 0202 9662     		str r6, [r2, # 0x28]
 342 0204 00F001F8 		bl _yanshi
 343 0208 FFBD     		pop {r0-r7,pc}
 344              	
 345              	
 346              	_yanshi:
 347 020a 80B4     		push {r7}
 348 020c 264F     		ldr r7, = 30
 349              	_yanshi11:
 350 020e 013F     		subs r7, # 1
 351 0210 FDD1     		bne _yanshi11
 352 0212 80BC     		pop {r7}
 353 0214 7047     		bx lr
 354              	_chufa:			@软件除法
 355              		@ r0 除以 r1 等于 商(r0)余数R1
 356 0216 1EB5     		push {r1-r4,lr}
 357 0218 0028     		cmp r0, # 0
 358 021a 0ED0     		beq _chufafanhui
 359 021c 0029     		cmp r1, # 0
 360 021e 0CD0     		beq _chufafanhui
 361 0220 0246     		mov r2, r0
 362 0222 0123     		movs r3, # 1
 363 0224 DB07     		lsls r3, r3, # 31
ARM GAS  1.s 			page 8


 364 0226 0020     		movs r0, # 0
 365 0228 0446     		mov r4, r0
 366              	_chufaxunhuan:
 367 022a 5200     		lsls r2, r2, # 1
 368 022c 6441     		adcs r4, r4, r4
 369 022e 8C42     		cmp r4, r1
 370 0230 01D3     		bcc _chufaweishubudao0
 371 0232 C018     		adds r0, r0, r3
 372 0234 641A     		subs r4, r4, r1
 373              	_chufaweishubudao0:
 374 0236 5B08     		lsrs r3, r3, # 1
 375 0238 F7D1     		bne _chufaxunhuan
 376              	_chufafanhui:
 377 023a 1EBD     		pop {r1-r4,pc}
 378 023c 00200240 		.ltorg
 378      00100240 
 378      01000100 
 378      02001100 
 378      00000101 
 379              	
 380              	_lvboqi:				@滤波器
 381              				@R0=地址，R1=长度,r2=表指针地址,r3=ADC数值
 382              				@出R0=结果
 383 02ac FEB5     		push {r1-r7,lr}	
 384 02ae 1568     		ldr r5, [r2]		@读出表指针
 385 02b0 4E00     		lsls r6, r1, # 1	
 386 02b2 4353     		strh r3, [r0, r5]	@数值写到滤波器缓冲区
 387 02b4 0235     		adds r5, r5, # 2
 388 02b6 B542     		cmp r5, r6
 389 02b8 00D1     		bne _lvboqimeidaohuanchongquding
 390 02ba 0025     		movs r5, # 0
 391              	_lvboqimeidaohuanchongquding:
 392 02bc 1560     		str r5, [r2]
 393 02be 0027     		movs r7, # 0
 394              	_lvboqixunhuan:
 395 02c0 B542     		cmp r5, r6
 396 02c2 00D1     		bne _lvbozonghe
 397 02c4 0025     		movs r5, # 0
 398              	_lvbozonghe:
 399 02c6 445B     		ldrh r4, [r0, r5]
 400 02c8 0235     		adds r5, r5, # 2
 401 02ca 3F19     		adds r7, r7, r4
 402 02cc 0139     		subs r1, r1, # 1
 403 02ce F7D1     		bne _lvboqixunhuan
 404 02d0 B811     		asrs r0, r7, # 6	@修改
 405 02d2 FEBD     		pop {r1-r7,pc}
 406              		
 407              	_fftjisuan:
 408              					@R0=输入地址
 409              					@输出实部=0X20000000-0X20000400
 410              					@输出虚部=0X20000400-0X20000800
 411 02d4 00B5     		push {lr}
 412              	_fft1:
 413 02d6 7149     		ldr r1, = 0x20000000       @输出地址
 414 02d8 8022     		movs r2, # 128             @蝴蝶数量
 415 02da 714B     		ldr r3, = hudieweifanzhuan @蝴蝶位反转表
 416              	_fft1xunhuan:
ARM GAS  1.s 			page 9


 417 02dc 1E68     		ldr r6, [r3]               @取出位反转表里的地一个数据
 418 02de 5F68     		ldr r7, [r3, # 0x04]       @取出第二个
 419 02e0 8659     		ldr r6, [r0, r6]           @给据位反转表找到对应的输入数据  
 420 02e2 C759     		ldr r7, [r0, r7]           @第二个
 421 02e4 F419     		adds r4, r6, r7            @求出蝴蝶上
 422 02e6 F51B     		subs r5, r6, r7            @求出蝴蝶下
 423 02e8 6410     		asrs r4, r4, # 1           @数据缩小一位防后面溢出
 424 02ea 6D10     		asrs r5, r5, # 1           @数据缩小一位
 425 02ec 0C60     		str r4, [r1]
 426 02ee 4D60     		str r5, [r1, # 0x04]       @把反过来的顺序排列
 427 02f0 0831     		adds r1, r1, # 0x08        @输出的地址自增
 428 02f2 0833     		adds r3, r3, # 0x08        @反转表自增
 429 02f4 013A     		subs r2, r2, # 1           @蝴蝶数减1
 430 02f6 F1D1     		bne _fft1xunhuan           @蝴蝶数不到
 431              	
 432              	_fft2:
 433 02f8 6848     		ldr r0, = 0x20000000       @实部输出地址
 434 02fa 0124     		movs r4, # 1               
 435 02fc A402     		lsls r4, r4, # 10          
 436 02fe 2418     		adds r4, r4, r0            @虚部输出地址
 437 0300 A046     		mov r8, r4                 @实部和虚部中间
 438              	_fft2xunhuan:
 439 0302 0468     		ldr r4, [r0]               @取出数据0
 440 0304 8568     		ldr r5, [r0, # 0x08]       @取出数据2
 441 0306 4668     		ldr r6, [r0, # 0x04]       @取出数据1
 442 0308 C768     		ldr r7, [r0, # 0x0c]       @取出数据3
 443 030a 6119     		adds r1, r4, r5            @计算蝴蝶上
 444 030c 621B     		subs r2, r4, r5            @计算蝴蝶下
 445 030e 3346     		mov r3, r6		@0r 蝴蝶上实部
 446 0310 0024     		movs r4, # 0
 447 0312 E41B     		subs r4, r4, r7		@0i 蝴蝶上虚部
 448 0314 3546     		mov r5, r6		@3r 蝴蝶下实部
 449 0316 3E46     		mov r6, r7		@3i 蝴蝶下虚部
 450 0318 0127     		movs r7, # 1
 451 031a BF02     		lsls r7, r7, # 10       @内存实部和虚部中间
 452 031c 3F18     		adds r7, r7, r0         @R7等于虚部首地址  
 453 031e 0160     		str r1, [r0]            @蝴蝶上保存实部
 454 0320 8260     		str r2, [r0, # 0x08]    @蝴蝶下实部
 455 0322 4360     		str r3, [r0, # 0x04]    @第二组蝴蝶上实部
 456 0324 7C60     		str r4, [r7, # 0x04]    @第二组蝴蝶上虚部
 457 0326 C560     		str r5, [r0, # 0x0c]	@第二组蝴蝶下实部
 458 0328 FE60     		str r6, [r7, # 0x0c]    @第二组下虚部
 459 032a 1030     		adds r0, r0, # 0x10     @蝴蝶组自增
 460 032c 4045     		cmp r0, r8     
 461 032e E8D1     		bne _fft2xunhuan        @地址不到循环
 462              	_fft3:
 463 0330 5C4E     		ldr r6, = xuanzhuanyinzi       @旋转因子自增变量
 464 0332 5D4A     		ldr r2, = fft3xuanzhuanyinzi   @旋转因子第三部的表
 465 0334 5948     		ldr r0, = 0x20000000           @实部输出地址
 466 0336 3260     		str r2, [r6]                   @旋转因子表首地址写到变量
 467 0338 0121     		movs r1, # 1
 468 033a 8902     		lsls r1, r1, # 10             
 469 033c 0918     		adds r1, r1, r0                @虚部输出地址
 470 033e 8846     		mov r8, r1		       @R8虚部地址自增变量
 471 0340 8146     		mov r9, r0                     @R9实部地址自增变量
 472 0342 9246     		mov r10, r2		       @旋转因子地址写到R10
 473 0344 1025     		movs r5, # 0x10		       @两组蝴蝶的距离	
ARM GAS  1.s 			page 10


 474 0346 AB46     		mov r11, r5                    @写到R11
 475 0348 0425     		movs r5, # 4                   @旋转因子数量
 476 034a AC46     		mov r12, r5		       @旋转因子数量写到R12
 477 034c 00F067F8 		bl _fftg
 478              	_fft4:
 479 0350 544E     		ldr r6, = xuanzhuanyinzi
 480 0352 564A     		ldr r2, = fft4xuanzhuanyinzi
 481 0354 5148     		ldr r0, = 0x20000000
 482 0356 3260     		str r2, [r6]
 483 0358 0121     		movs r1, # 1
 484 035a 8902     		lsls r1, r1, # 10
 485 035c 0918     		adds r1, r1, r0
 486 035e 8846     		mov r8, r1
 487 0360 8146     		mov r9, r0
 488 0362 9246     		mov r10, r2
 489 0364 2025     		movs r5, # 0x20
 490 0366 AB46     		mov r11, r5
 491 0368 0825     		movs r5, # 8
 492 036a AC46     		mov r12, r5
 493 036c 00F057F8 		bl _fftg
 494              	_fft5:
 495 0370 4C4E     		ldr r6, = xuanzhuanyinzi
 496 0372 4F4A     		ldr r2, = fft5xuanzhuanyinzi
 497 0374 4948     		ldr r0, = 0x20000000
 498 0376 3260     		str r2, [r6]
 499 0378 0121     		movs r1, # 1
 500 037a 8902     		lsls r1, r1, # 10
 501 037c 0918     		adds r1, r1, r0
 502 037e 8846     		mov r8, r1
 503 0380 8146     		mov r9, r0
 504 0382 9246     		mov r10, r2
 505 0384 4025     		movs r5, # 0x40
 506 0386 AB46     		mov r11, r5
 507 0388 1025     		movs r5, # 16
 508 038a AC46     		mov r12, r5
 509 038c 00F047F8 		bl _fftg
 510              	
 511              	_fft6:
 512 0390 444E     		ldr r6, = xuanzhuanyinzi
 513 0392 484A     		ldr r2, = fft6xuanzhuanyinzi
 514 0394 4148     		ldr r0, = 0x20000000
 515 0396 3260     		str r2, [r6]
 516 0398 0121     		movs r1, # 1
 517 039a 8902     		lsls r1, r1, # 10
 518 039c 0918     		adds r1, r1, r0
 519 039e 8846     		mov r8, r1
 520 03a0 8146     		mov r9, r0
 521 03a2 9246     		mov r10, r2
 522 03a4 8025     		movs r5, # 0x80
 523 03a6 AB46     		mov r11, r5
 524 03a8 2025     		movs r5, # 32
 525 03aa AC46     		mov r12, r5
 526 03ac 00F037F8 		bl _fftg
 527              	
 528              	_fft7:
 529 03b0 3C4E     		ldr r6, = xuanzhuanyinzi
 530 03b2 414A     		ldr r2, = fft7xuanzhuanyinzi
ARM GAS  1.s 			page 11


 531 03b4 3948     		ldr r0, = 0x20000000
 532 03b6 3260     		str r2, [r6]
 533 03b8 0121     		movs r1, # 1
 534 03ba 8902     		lsls r1, r1, # 10
 535 03bc 0918     		adds r1, r1, r0
 536 03be 8846     		mov r8, r1
 537 03c0 8146     		mov r9, r0
 538 03c2 9246     		mov r10, r2
 539 03c4 0125     		movs r5, # 1
 540 03c6 2D02     		lsls r5, r5, # 8
 541 03c8 AB46     		mov r11, r5
 542 03ca 4025     		movs r5, # 64
 543 03cc AC46     		mov r12, r5
 544 03ce 00F026F8 		bl _fftg
 545              	
 546              	_fft8:
 547 03d2 344E     		ldr r6, = xuanzhuanyinzi
 548 03d4 394A     		ldr r2, = fft8xuanzhuanyinzi
 549 03d6 3148     		ldr r0, = 0x20000000
 550 03d8 3260     		str r2, [r6]
 551 03da 0121     		movs r1, # 1
 552 03dc 8902     		lsls r1, r1, # 10
 553 03de 0918     		adds r1, r1, r0
 554 03e0 8846     		mov r8, r1
 555 03e2 8146     		mov r9, r0
 556 03e4 9246     		mov r10, r2
 557 03e6 0125     		movs r5, # 1
 558 03e8 6D02     		lsls r5, r5, # 9
 559 03ea AB46     		mov r11, r5
 560 03ec 8025     		movs r5, # 128
 561 03ee AC46     		mov r12, r5
 562 03f0 00F015F8 		bl _fftg
 563              	
 564              	_fftjisuanfuzhi:
 565 03f4 2948     		ldr r0, = 0x20000000
 566 03f6 3249     		ldr r1, = 0x20000400
 567 03f8 8846     		mov r8, r1
 568              	_jisuanfuzhixunhuan:
 569 03fa 0268     		ldr r2, [r0]
 570 03fc 0B68     		ldr r3, [r1]
 571 03fe 1B00     		movs r3, r3
 572 0400 01D5     		bpl _fzbushifushu1
 573 0402 DB43     		mvns r3, r3
 574 0404 0133     		adds r3, r3, # 1
 575              	_fzbushifushu1:
 576 0406 5210     		asrs r2, r2, # 1
 577 0408 01D5     		bpl _fzbushifushu
 578 040a D243     		mvns r2, r2
 579 040c 0132     		adds r2, r2, # 1
 580              	_fzbushifushu:
 581 040e 9B18     		adds r3, r3, r2
 582 0410 5B00     		lsls r3, r3, # 1
 583 0412 0351     		str r3, [r0, r4]
 584 0414 0430     		adds r0, r0, # 4
 585 0416 0431     		adds r1, r1, # 4
 586 0418 4045     		cmp r0, r8
 587 041a EED1     		bne _jisuanfuzhixunhuan
ARM GAS  1.s 			page 12


 588 041c 00BD     		pop {pc}
 589              	_fftg:
 590 041e 00B5     		push {lr}
 591 0420 0024     		movs r4, # 0
 592 0422 A646     		mov lr, r4
 593              	_fftxunhuan:
 594 0424 4846     		mov r0, r9
 595 0426 4146     		mov r1, r8
 596 0428 5246     		mov r2, r10
 597 042a 5B46     		mov r3, r11
 598 042c 0468     		ldr r4, [r0]
 599 042e 0D68     		ldr r5, [r1]
 600 0430 C658     		ldr r6, [r0, r3]
 601 0432 CF58     		ldr r7, [r1, r3]
 602 0434 1368     		ldr r3, [r2]		@sr
 603 0436 5268     		ldr r2, [r2, # 0x04]	@si
 604 0438 30B4     		push {r4,r5}
 605 043a 3446     		mov r4, r6
 606 043c 5C43     		muls r4, r4, r3
 607 043e 3D46     		mov r5, r7
 608 0440 5543     		muls r5, r5, r2
 609 0442 641B     		subs r4, r4, r5		@r
 610 0444 E413     		asrs r4, r4, # 15
 611 0446 3546     		mov r5, r6
 612 0448 5543     		muls r5, r5, r2
 613 044a 5F43     		muls r7, r7, r3
 614 044c 7F19     		adds r7, r7, r5    @i
 615 044e FF13     		asrs r7, r7, # 15
 616 0450 24BC     		pop {r2,r5}
 617 0452 1319     		adds r3, r2, r4    @0r
 618 0454 121B     		subs r2, r2, r4    @1r
 619 0456 EC19     		adds r4, r5, r7
 620 0458 ED1B     		subs r5, r5, r7
 621 045a 5E46     		mov r6, r11
 622 045c 0360     		str r3, [r0]
 623 045e 0C60     		str r4, [r1]
 624 0460 8251     		str r2, [r0, r6]
 625 0462 8D51     		str r5, [r1, r6]
 626 0464 0430     		adds r0, r0, # 0x04
 627 0466 0431     		adds r1, r1, # 0x04
 628 0468 8146     		mov r9, r0
 629 046a 8846     		mov r8, r1
 630 046c 5246     		mov r2, r10
 631 046e 0832     		adds r2, r2, # 0x08
 632 0470 9246     		mov r10, r2
 633 0472 7446     		mov r4, lr		@取出旋转因子自增变量
 634 0474 0134     		adds r4, r4, # 1        @自增
 635 0476 A646     		mov lr, r4              @保存回去
 636 0478 6746     		mov r7, r12             @取出旋转因子总数量
 637 047a BC42     		cmp r4, r7              @到没到数量
 638 047c D2D1     		bne _fftxunhuan         @没到继续循环
 639 047e 0024     		movs  r4, # 0
 640 0480 084E     		ldr r6, = xuanzhuanyinzi
 641 0482 0F4D     		ldr r5, = 0x20000400
 642 0484 3668     		ldr r6, [r6]
 643 0486 B246     		mov r10, r6
 644 0488 A646     		mov lr, r4
ARM GAS  1.s 			page 13


 645 048a 5F46     		mov r7, r11
 646 048c C019     		adds r0, r0, r7
 647 048e C919     		adds r1, r1, r7
 648 0490 8146     		mov r9, r0
 649 0492 8846     		mov r8, r1
 650 0494 A842     		cmp r0, r5
 651 0496 C5D1     		bne _fftxunhuan
 652 0498 00BD     		pop {pc}
 653 049a 00000000 		.ltorg
 653      00204C00 
 653      00000008 
 653      00204C04 
 653      00006C04 
 654              		
 655              	_nmi_handler:
 656 04c4 7047     		bx lr
 657              	_hard_fault:
 658 04c6 7047     		bx lr
 659              	_svc_handler:
 660 04c8 7047     		bx lr
 661              	_pendsv_handler:
 662 04ca 7047     		bx lr
ARM GAS  1.s 			page 14


DEFINED SYMBOLS
                 1.s:9      .data:0000000000000000 shumaguanmabiao
                 1.s:11     .data:0000000000000028 shumaguanshuaxinbiao
                 1.s:13     *ABS*:0000000020001000 STACKINIT
                 1.s:15     *ABS*:0000000020000804 shumaguanma
                 1.s:16     *ABS*:0000000020000800 xuanzhuanyinzi
                 1.s:17     *ABS*:0000000020000850 dianyabiao
                 1.s:18     *ABS*:0000000020000c50 lvbozhizhen
                 1.s:19     *ABS*:0000000020000c54 lvbohuanchong
                 1.s:20     .data:000000000000004c hudieweifanzhuan
                 1.s:23     .data:000000000000044c fft3xuanzhuanyinzi
                 1.s:25     .data:000000000000046c fft4xuanzhuanyinzi
                 1.s:27     .data:00000000000004ac fft5xuanzhuanyinzi
                 1.s:29     .data:000000000000052c fft6xuanzhuanyinzi
                 1.s:31     .data:000000000000062c fft7xuanzhuanyinzi
                 1.s:34     .data:000000000000082c fft8xuanzhuanyinzi
                 1.s:41     .text:0000000000000000 vectors
                 1.s:86     .text:00000000000000b0 _start
                 1.s:655    .text:00000000000004c4 _nmi_handler
                 1.s:657    .text:00000000000004c6 _hard_fault
                 1.s:659    .text:00000000000004c8 _svc_handler
                 1.s:661    .text:00000000000004ca _pendsv_handler
                 1.s:87     .text:00000000000000b0 shizhong
                            .text:0000000000000000 $d
                 1.s:88     .text:00000000000000b0 $t
                 1.s:94     .text:00000000000000bc denghse
                 1.s:98     .text:00000000000000c2 dengpllguan
                 1.s:108    .text:00000000000000d2 dengpll
                 1.s:115    .text:00000000000000dc dengdai14mshizhongwending
                 1.s:120    .text:00000000000000e2 neicunqingling
                 1.s:124    .text:00000000000000e8 neicunqinglingxunhuan
                 1.s:129    .text:00000000000000ee _waisheshizhong
                 1.s:143    .text:00000000000000f8 io_she_zhi
                 1.s:171    .text:0000000000000102 dmachushihua
                 1.s:194    .text:0000000000000114 _adcchushihua
                 1.s:198    .text:000000000000011a _dengadcjiaozhun
                 1.s:202    .text:0000000000000120 _kaiadc
                 1.s:207    .text:0000000000000128 _dengdaiadcwending
                 1.s:211    .text:000000000000012e _tongdaoxuanze
                 1.s:225    .text:0000000000000142 _waishezhongduan
                 1.s:233    .text:0000000000000142 ting
                 1.s:407    .text:00000000000002d4 _fftjisuan
                 1.s:380    .text:00000000000002ac _lvboqi
                 1.s:276    .text:0000000000000188 _zhuanshumaguanma
                 1.s:296    .text:00000000000001ac _xieshumaguan
                 1.s:253    .text:0000000000000166 _maopaopaixu
                 1.s:257    .text:000000000000016a _paixu
                 1.s:259    .text:000000000000016c _paixuxunhuan
                 1.s:270    .text:0000000000000180 _paixu1
                 1.s:283    .text:0000000000000192 _xunhuanqiuma
                 1.s:354    .text:0000000000000216 _chufa
                 1.s:303    .text:00000000000001b8 _shumaguanshuaxin
                 1.s:314    .text:00000000000001cc _xie595
                 1.s:323    .text:00000000000001dc _xunhuan595
                 1.s:346    .text:000000000000020a _yanshi
                 1.s:330    .text:00000000000001ea _xie595_0
                 1.s:332    .text:00000000000001ec _suocun595
ARM GAS  1.s 			page 15


                 1.s:349    .text:000000000000020e _yanshi11
                 1.s:376    .text:000000000000023a _chufafanhui
                 1.s:366    .text:000000000000022a _chufaxunhuan
                 1.s:373    .text:0000000000000236 _chufaweishubudao0
                 1.s:378    .text:000000000000023c $d
                 1.s:383    .text:00000000000002ac $t
                 1.s:391    .text:00000000000002bc _lvboqimeidaohuanchongquding
                 1.s:394    .text:00000000000002c0 _lvboqixunhuan
                 1.s:398    .text:00000000000002c6 _lvbozonghe
                 1.s:412    .text:00000000000002d6 _fft1
                 1.s:416    .text:00000000000002dc _fft1xunhuan
                 1.s:432    .text:00000000000002f8 _fft2
                 1.s:438    .text:0000000000000302 _fft2xunhuan
                 1.s:462    .text:0000000000000330 _fft3
                 1.s:589    .text:000000000000041e _fftg
                 1.s:478    .text:0000000000000350 _fft4
                 1.s:494    .text:0000000000000370 _fft5
                 1.s:511    .text:0000000000000390 _fft6
                 1.s:528    .text:00000000000003b0 _fft7
                 1.s:546    .text:00000000000003d2 _fft8
                 1.s:564    .text:00000000000003f4 _fftjisuanfuzhi
                 1.s:568    .text:00000000000003fa _jisuanfuzhixunhuan
                 1.s:575    .text:0000000000000406 _fzbushifushu1
                 1.s:580    .text:000000000000040e _fzbushifushu
                 1.s:593    .text:0000000000000424 _fftxunhuan
                 1.s:653    .text:000000000000049a $d
                 1.s:653    .text:000000000000049c $d
                 1.s:656    .text:00000000000004c4 $t

NO UNDEFINED SYMBOLS
