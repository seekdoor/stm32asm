ARM GAS  1.s 			page 1


   1              		@@单片机stm32f030f4p6
   2              		@@ adc fft
   3              		@作者：yjmwxwx
   4              		@时间：2019-06-19
   5              		@编译器：arm-none-eabi
   6              		 .thumb                 
   7              	         .syntax unified
   8              	.section .data
   9              	shumaguanmabiao:
  10 0000 FC000000 		.int 0xfc,0x60,0xda,0xf2,0x66,0xb6,0xbe,0xe0,0xfe,0xf6
  10      60000000 
  10      DA000000 
  10      F2000000 
  10      66000000 
  11              	shumaguanshuaxinbiao:
  12 0028 00FE0000 		.int 0xfe00,0xfd00,0xfb00,0xf700,0xef00,0xdf00,0xbf00,0x7f00,0
  12      00FD0000 
  12      00FB0000 
  12      00F70000 
  12      00EF0000 
  13              	       	.equ STACKINIT,                 0x20001000
  14              	
  15              		.equ shumaguanma,	0x20000804
  16              		.equ xuanzhuanyinzi,	0x20000800
  17              		.equ dianyabiao,	0x20000850
  18              		.equ lvbozhizhen,	0x20000c50
  19              		.equ lvbohuanchong,	0x20000c54
  20              	hudieweifanzhuan:
  21 004c 00000000 		.int 0x0000,0x0200,0x0100,0x0300,0x0080,0x0280,0x0180,0x0380,0x0040,0x0240,0x0140,0x0340,0x00C0,0x
  21      00020000 
  21      00010000 
  21      00030000 
  21      80000000 
  22              	
  23              	fft3xuanzhuanyinzi:
  24 044c 00800000 		.int 0x8000,0x0000,0x5A82,0xFFFFA57E,0x0000,0xFFFF8000,0xFFFFA57E,0xFFFFA57E
  24      00000000 
  24      825A0000 
  24      7EA5FFFF 
  24      00000000 
  25              	fft4xuanzhuanyinzi:
  26 046c 00800000 		.int 0x8000,0x0000,0x7641,0xFFFFCF05,0x5A82,0xFFFFA57E,0x30FB,0xFFFF89BF,0x0000,0xFFFF8000,0xFFFFC
  26      00000000 
  26      41760000 
  26      05CFFFFF 
  26      825A0000 
  27              	fft5xuanzhuanyinzi:
  28 04ac 00800000 		.int 0x8000,0x0000,0x7D8A,0xFFFFE708,0x7641,0xFFFFCF05,0x6A6D,0xFFFFB8E4,0x5A82,0xFFFFA57E,0x471C,
  28      00000000 
  28      8A7D0000 
  28      08E7FFFF 
  28      41760000 
  29              	fft6xuanzhuanyinzi:
  30 052c 00800000 		.int 0x8000,0x0000,0x7F62,0xFFFFF375,0x7D8A,0xFFFFE708,0x7A7D,0xFFFFDAD8,0x7641,0xFFFFCF05,0x70E2,
  30      00000000 
  30      627F0000 
  30      75F3FFFF 
ARM GAS  1.s 			page 2


  30      8A7D0000 
  31              	fft7xuanzhuanyinzi:
  32 062c 00800000 		.int 0x8000,0x0000,0x7FD8,0xFFFFF9B9,0x7F62,0xFFFFF375,0x7E9D,0xFFFFED38,0x7D8A,0xFFFFE708,0x7C29,
  32      00000000 
  32      D87F0000 
  32      B9F9FFFF 
  32      627F0000 
  33              	
  34              	fft8xuanzhuanyinzi:
  35 082c 00800000 		.int 0x8000,0x0000,0x7FF6,0xFFFFFCDC,0x7FD8,0xFFFFF9B9,0x7FA7,0xFFFFF696,0x7F62,0xFFFFF375,0x7F09,
  35      00000000 
  35      F67F0000 
  35      DCFCFFFF 
  35      D87F0000 
  36              		
  37              			
  38              		
  39              	.section .text
  40              	vectors:        
  41 0000 00100020 	        .word STACKINIT         
  42 0004 B1000000 	        .word _start + 1        
  43 0008 25050000 	        .word _nmi_handler + 1  
  44 000c 27050000 	        .word _hard_fault  + 1  
  45 0010 00000000 	        .word 0 
  46 0014 00000000 	        .word 0    
  47 0018 00000000 	        .word 0
  48 001c 00000000 		.word 0
  49 0020 00000000 		.word 0
  50 0024 00000000 		.word 0
  51 0028 00000000 		.word 0
  52 002c 29050000 		.word _svc_handler +1
  53 0030 00000000 		.word 0 
  54 0034 00000000 		.word 0
  55 0038 2B050000 		.word _pendsv_handler +1
  56 003c 00000000 		.word 0 @_systick +1               @ 15   
  57 0040 00000000 		.word 0     @ _wwdg +1          @ 0
  58 0044 00000000 		.word 0     @_pvd +1            @ 1
  59 0048 00000000 		.word 0     @_rtc +1            @ 2
  60 004c 00000000 		.word 0     @_flash +1          @ 3
  61 0050 00000000 		.word 0     @ _rcc + 1          @ 4
  62 0054 00000000 		.word 0      @_exti0_1  +1      @ 5
  63 0058 00000000 		.word 0      @ _exti2_3 +1      @ 6
  64 005c 00000000 		.word 0       @_exti4_15 +1     @ 7
  65 0060 00000000 		.word 0                         @ 8
  66 0064 00000000 		.word 0 	@_dma1_1  +1    @ 9
  67 0068 00000000 		.word 0    @_dma1_2_3 +1        @ 10
  68 006c 00000000 		.word 0       @_dma1_4_5 +1     @ 11
  69 0070 00000000 		.word 0 	@_adc1 +1          @ 12
  70 0074 00000000 		.word 0       @_tim1_brk_up +1  @ 13
  71 0078 00000000 		.word 0        @ _tim1_cc +1    @ 14
  72 007c 00000000 		.word 0         @_tim2 +1       @ 15
  73 0080 00000000 		.word 0          @_tim3 +1      @ 16
  74 0084 00000000 		.word 0                         @ 17
  75 0088 00000000 		.word 0		                @ 18
  76 008c 00000000 		.word 0		@_tim14 +1    @ 19
  77 0090 00000000 		.word 0                         @ 20
  78 0094 00000000 		.word 0         @_tim16 +1      @ 21
ARM GAS  1.s 			page 3


  79 0098 00000000 		.word 0         @_tim17 +1      @ 22
  80 009c 00000000 		.word 0          @_i2c   +1     @ 23
  81 00a0 00000000 		.word 0                         @ 24
  82 00a4 00000000 		.word 0           @_spi   +1    @ 25
  83 00a8 00000000 		.word 0                         @ 26
  84 00ac 00000000 		.word 0         @_usart1 +1     @ 27
  85              	_start:
  86              	shizhong:
  87 00b0 7E4A     		ldr r2, = 0x40022000   @FLASH访问控制
  88 00b2 3221     		movs r1, # 0x32
  89 00b4 1160     		str r1, [r2]           @FLASH缓冲 缓冲开启
  90 00b6 7E48     	        ldr r0, = 0x40021000 @ rcc
  91 00b8 7E49     	        ldr r1, = 0x10001
  92 00ba 0160     	        str r1, [r0]
  93              	denghse:
  94 00bc 0168     	        ldr r1, [r0]
  95 00be 8903     	        lsls r1, r1, # 14
  96 00c0 FCD5     	        bpl denghse
  97              	dengpllguan:
  98 00c2 0168     	        ldr r1, [r0]
  99 00c4 8901     	        lsls r1, r1, # 6
 100 00c6 FCD4     	        bmi dengpllguan
 101 00c8 7B49     	        ldr r1, = 0x110002
 102 00ca 4160     	        str r1, [r0, # 0x04]
 103 00cc 7B49     	        ldr r1, = 0x1010000
 104 00ce 0000     		movs r0, r0
 105 00d0 0160     	        str r1, [r0]
 106              		
 107              	dengpll:
 108 00d2 0168     		ldr r1, [r0]
 109 00d4 8901     		lsls r1, # 6
 110 00d6 FCD5     		bpl dengpll
 111              		@0x34时钟控制寄存器 2 (RCC_CR2)
 112 00d8 0121     		movs r1, # 0x01
 113 00da 4163     		str r1, [r0, # 0x34]  @ HSI开14M时钟
 114              	dengdai14mshizhongwending:
 115 00dc 416B     		ldr r1, [r0, # 0x34]
 116 00de 8907     		lsls r1, r1, # 30     @ 左移30位
 117 00e0 FCD5     		bpl dengdai14mshizhongwending  @ 等待14M时钟稳定
 118              	
 119              	neicunqingling:
 120 00e2 7748     		ldr r0, = 0x20000000
 121 00e4 0021     		movs r1, # 0
 122 00e6 774B     		ldr r3, = 0x1000
 123              	neicunqinglingxunhuan:
 124 00e8 043B     		subs r3, # 4
 125 00ea C150     		str r1, [r0, r3]
 126 00ec FCD1     		bne neicunqinglingxunhuan
 127              	
 128              	_waisheshizhong:		 @ 外设时钟
 129              		@+0x14=RCC_AHBENR
 130              		@0=DMA @2=SRAM @4=FLITF@6=CRC @17=PA @18=PB @19=PC @20=PD @22=PF
 131 00ee 7048     		ldr r0, = 0x40021000
 132 00f0 7549     		ldr r1, = 0x460005
 133 00f2 4161     		str r1, [r0, # 0x14]
 134              	
 135              		@+0x18外设时钟使能寄存器 (RCC_APB2ENR)
ARM GAS  1.s 			page 4


 136              		@0=SYSCFG @5=USART6EN @9=ADC @11=TIM1 @12=SPI1 @14=USART1 @16=TIM15 @17=TIM16 @18=TIM17 @22=DBGMCU
 137 00f4 7549     		ldr r1, = 0xa00
 138 00f6 8161     		str r1, [r0, # 0x18]
 139              		@+0X1C=RCC_APB1ENR
 140              		@ 1=TIM3 @ 4=TIM6 @5=TIM7 @8=TIM14 @11=WWDG @14=SPI @17=USRT2 @18=USART3 @20=USART5 @21=I2C1 @22=I
 141 00f8 0221     		movs r1, # 0x02
 142 00fa C161     		str r1, [r0, # 0x1c]
 143              	io_she_zhi:
 144              	@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 145              		@a(0x48000000)b(0x48000400)c(0x48000800)d(0x48000c00)f(0x48001400)
 146              		@ 输入（00），通用输出（01），复用功能（10），模拟（11）
 147              		@偏移0x4 = 端口输出类型 @ （0 推挽），（ 1 开漏）
 148              		@偏移0x8 = 输出速度  00低速， 01中速， 11高速
 149              		@偏移0xC = 上拉下拉 (00无上下拉，  01 上拉， 10下拉)
 150              		@偏移0x10 = 输入数据寄存器
 151              		@偏移0x14 = 输出数据寄存器
 152              		@偏移0x18 = 端口开  0-15置位 
 153              		@偏移0x28 = 端口关
 154              		@0X20 = 复用低
 155              		@GPIO口0（0-3位）每个IO口占用4位
 156              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 157              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 158              		@0x24 = 复用高
 159              		@GPIO口8 （0-3位）每个IO口占用4位
 160              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 161              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 162              	@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 163              	
 164 00fc 7448     		ldr r0, = 0x48000000
 165 00fe 7549     		ldr r1, = 0x28005403
 166 0100 0160     		str r1, [r0]
 167              	
 168 0102 7549     		ldr r1, = 0x200
 169 0104 4162     		str r1, [r0, # 0x24]
 170              	tim3chushihua:				@ 24M
 171 0106 7548     		ldr r0, = 0x40000400 @ tim3_cr1
 172 0108 7549     		ldr r1, =  0
 173 010a 8162     		str r1, [r0, # 0x28] @ psc
 174 010c 7549     		ldr r1, = 952
 175 010e C162     		str r1, [r0, # 0x2c] @ ARR
 176 0110 7549     		ldr r1, =   0x3800
 177 0112 C161     		str r1, [r0, # 0x1c] @ ccmr2
 178 0114 6B49     		ldr r1, =  0x1000
 179 0116 0162     		str r1, [r0, # 0x20] @ ccer
 180 0118 7249     		ldr r1, = 952
 181 011a 0164     		str r1, [r0, # 0x40] @ ccr4
 182 011c 7021     		movs r1, # 0x70
 183 011e 4160     		str r1, [r0, # 0x04]
 184 0120 8121     		movs r1, # 0x81
 185 0122 0160     		str r1, [r0]
 186              	dmachushihua:
 187              		@+0=LSR,+4=IFCR,
 188              		@+8=CCR1,+c=CNDTR1,+10=CPAR1+14=CMAR1,
 189              		@+1c=CCR2,+20=CNDTR2,+24=CPAR2,+28=CMAR2
 190              		@+30=CCR3,+34=CNDTR3,+38=CPAR2,+3c=CMAR3
 191              		@+44=CCR4,+48=CNDTR4,+4c=CPAR4,+50=CMAR4
 192              		@+58=CCR5,+5c=CNDTR5,+60=CPAR5,+64=CMAR5
ARM GAS  1.s 			page 5


 193              		@+6C=CCR6,+70=CNDTR6,+74=CPAR6,+78=CMAR6
 194              		@+80=CCR7,+84=CNDTR7,+88=CPAR7,+8c=CMAR7
 195              		@ tim1DMA
 196              		@ adc dma
 197 0124 7148     		ldr r0, = 0x40020000
 198 0126 7249     		ldr r1, = 0x40012440
 199 0128 0161     		str r1, [r0, # 0x10]
 200 012a 7249     		ldr r1, = dianyabiao
 201 012c 4161     		str r1, [r0, # 0x14]
 202 012e 7249     		ldr r1, =  0xff
 203 0130 C160     		str r1, [r0, # 0x0c]
 204 0132 7249     		ldr r1, = 0xaa1
 205 0134 8160     		str r1, [r0, # 0x08]
 206              		
 207              	
 208              	
 209              	_adcchushihua:
 210 0136 7248     		ldr r0, = 0x40012400  @ adc基地址
 211 0138 7249     		ldr r1, = 0x80000000
 212 013a 8160     		str r1, [r0, # 0x08]  @ ADC 控制寄存器 (ADC_CR)  @adc校准
 213              	_dengadcjiaozhun:
 214 013c 8168     		ldr r1, [r0, # 0x08]
 215 013e 0900     		 movs r1, r1
 216 0140 FCD4     		bmi _dengadcjiaozhun   @ 等ADC校准
 217              	_kaiadc:
 218 0142 8168     		ldr r1, [r0, # 0x08]
 219 0144 0122     		movs r2, # 0x01
 220 0146 1143     		orrs r1, r1, r2
 221 0148 8160     		str r1, [r0, # 0x08]
 222              	_dengdaiadcwending:
 223 014a 0168     		ldr r1, [r0]
 224 014c C907     		lsls r1, r1, # 31
 225 014e FCD5     		bpl _dengdaiadcwending @ 等ADC稳定
 226              	_tongdaoxuanze:
 227 0150 6D49     		ldr r1, = 0x01
 228 0152 8162     		str r1, [r0, # 0x28]    @ 通道选择寄存器 (ADC_CHSELR)
 229 0154 6D49     		ldr r1, = 0xcC3         @ tim3触发ADC
 230 0156 C160     		str r1, [r0, # 0x0c]    @ 配置寄存器 1 (ADC_CFGR1)
 231 0158 0121     		movs r1, # 0x01        
 232 015a 4161     		str r1, [r0, # 0x14]    @ ADC 采样时间寄存器 (ADC_SMPR)
 233 015c 8168     		ldr r1, [r0, # 0x08]
 234 015e 6C4A     		ldr r2, = 0x04         @ 开始转换
 235 0160 1143     		orrs r1, r1, r2
 236 0162 8160     		str r1, [r0, # 0x08]    @ 控制寄存器 (ADC_CR)
 237              	
 238              	
 239              		
 240              	_waishezhongduan:		@外设中断
 241              		@0xE000E100    0-31  写1开，写0没效
 242              		@0XE000E180    0-31 写1关，写0没效
 243              		@0XE000E200    0-31 挂起，写0没效
 244              		@0XE000E280    0-31 清除， 写0没效
 245              	
 246              	
 247              	
 248              		
 249              	ting:
ARM GAS  1.s 			page 6


 250 0164 6348     		ldr r0, = dianyabiao
 251 0166 00F0E5F8 		bl _fftjisuan
 252 016a 5548     		ldr r0, = 0x20000000
 253 016c 0368     		ldr r3, [r0]
 254 016e 6948     		ldr r0, = lvbohuanchong
 255 0170 6949     		ldr r1, = 16
 256 0172 6A4A     		ldr r2, = lvbozhizhen
 257 0174 00F01BF8 		bl _lvboqi
 258 0178 8446     		mov r12, r0
 259 017a 694A     		ldr r2, = shumaguanma
 260 017c 0821     		movs r1, # 8
 261 017e 00F03BF8 		bl _zhuanshumaguanma
 262 0182 0820     		movs r0, # 8
 263 0184 00F04AF8 		bl _xieshumaguan
 264 0188 5B4D     		ldr r5, = 0xff
 265              	yanshi11:
 266 018a 6046     		mov r0, r12
 267 018c 644A     	        ldr r2, = shumaguanma
 268 018e 0821     	        movs r1, # 8
 269 0190 00F032F8 	        bl _zhuanshumaguanma
 270 0194 0820     	        movs r0, # 8
 271 0196 00F041F8 	        bl _xieshumaguan
 272              	
 273 019a 013D     		subs r5, r5, # 1
 274 019c F5D1     		bne yanshi11
 275 019e 01BE     		bkpt # 1
 276              	neicunqingling1:
 277 01a0 4748     	        ldr r0, = 0x20000000
 278 01a2 0021     	        movs r1, # 0
 279 01a4 5F4B     	        ldr r3, = 0x850
 280              	neicunqinglingxunhuan1:
 281 01a6 043B     	        subs r3, # 4
 282 01a8 C150     	        str r1, [r0, r3]
 283 01aa FCD1     	        bne neicunqinglingxunhuan1
 284              	
 285 01ac DAE7     		b ting
 286              		
 287              	
 288              		
 289              	
 290              	_lvboqi:				@滤波器
 291              				@R0=地址，R1=长度,r2=表指针地址,r3=ADC数值
 292              				@出R0=结果
 293 01ae FEB5     		push {r1-r7,lr}	
 294 01b0 1568     		ldr r5, [r2]		@读出表指针
 295 01b2 4E00     		lsls r6, r1, # 1	
 296 01b4 4353     		strh r3, [r0, r5]	@数值写到滤波器缓冲区
 297 01b6 0235     		adds r5, r5, # 2
 298 01b8 B542     		cmp r5, r6
 299 01ba 00D1     		bne _lvboqimeidaohuanchongquding
 300 01bc 0025     		movs r5, # 0
 301              	_lvboqimeidaohuanchongquding:
 302 01be 1560     		str r5, [r2]
 303 01c0 0027     		movs r7, # 0
 304              	_lvboqixunhuan:
 305 01c2 B542     		cmp r5, r6
 306 01c4 00D1     		bne _lvbozonghe
ARM GAS  1.s 			page 7


 307 01c6 0025     		movs r5, # 0
 308              	_lvbozonghe:
 309 01c8 445B     		ldrh r4, [r0, r5]
 310 01ca 0235     		adds r5, r5, # 2
 311 01cc 3F19     		adds r7, r7, r4
 312 01ce 0139     		subs r1, r1, # 1
 313 01d0 F7D1     		bne _lvboqixunhuan
 314 01d2 3811     		asrs r0, r7, # 4	@修改
 315 01d4 FEBD     		pop {r1-r7,pc}
 316              		
 317              	_maopaopaixu:
 318 01d6 FFB5     		push {r0-r7,lr}
 319              		@ r0= 表地址, r1= 长度
 320 01d8 0F46     		mov r7, r1
 321              	_paixu:
 322 01da B900     		lsls r1, r7, # 2
 323              	_paixuxunhuan:	
 324 01dc 425A     		ldrh r2, [r0, r1]
 325 01de 0239     		subs r1, r1, # 2
 326 01e0 06D4     		bmi _paixu1
 327 01e2 445A     		ldrh r4, [r0, r1]
 328 01e4 A242     		cmp r2, r4
 329 01e6 F9D9     		bls _paixuxunhuan
 330 01e8 4252     		strh r2, [r0, r1]
 331 01ea 8B1C     		adds r3, r1, # 2
 332 01ec C452     		strh r4, [r0, r3]
 333 01ee F5E7     		b _paixuxunhuan
 334              	_paixu1:
 335 01f0 0230     		adds r0, r0, # 2
 336 01f2 013F     		subs r7, r7, # 1
 337 01f4 F1D1     		bne _paixu
 338 01f6 FFBD     		pop {r0-r7,pc}
 339              	
 340              	_zhuanshumaguanma:@ 16进制转数码管码
 341              			@ R0要转的数据， R1长度，R2结果表首地址
 342 01f8 FFB5     		push {r0-r7,lr}
 343 01fa 4B4F     		ldr r7, = shumaguanmabiao
 344 01fc 0546     		mov r5, r0
 345 01fe 0E46     		mov r6, r1
 346 0200 0A21     		movs r1, # 10
 347              	_xunhuanqiuma:
 348 0202 00F040F8 		bl _chufa
 349 0206 0446     		mov r4, r0
 350 0208 4C43     		muls r4, r1
 351 020a 2B1B     		subs r3, r5, r4
 352 020c 9B00     		lsls r3, # 2
 353 020e FC58     		ldr r4, [r7, r3]
 354 0210 1460     		str r4, [r2]
 355 0212 0546     		mov r5, r0
 356 0214 0432     		adds r2, r2, # 4
 357 0216 013E     		subs r6, # 1
 358 0218 F3D1     		bne _xunhuanqiuma
 359 021a FFBD     		pop {r0-r7,pc}
 360              	_xieshumaguan: @ r0=位数 @数码管码
 361 021c FFB5     		push {r0-r7,lr}
 362 021e 8000     		lsls r0, r0, # 2
 363 0220 0027     		movs r7, # 0
ARM GAS  1.s 			page 8


 364 0222 0646     		mov r6, r0
 365 0224 3E4D     		ldr r5, = shumaguanma
 366 0226 414A     		ldr r2, = shumaguanshuaxinbiao
 367              	_shumaguanshuaxin:
 368 0228 EB59     		ldr r3, [r5, r7]
 369 022a D459     		ldr r4, [r2, r7]
 370 022c 1C43     		orrs r4, r4, r3
 371 022e 2046     		mov r0, r4
 372 0230 00F004F8 		bl _xie595
 373 0234 0437     		adds  r7, r7, # 4
 374 0236 B742     		cmp r7, r6
 375 0238 F6D9     		bls _shumaguanshuaxin
 376 023a FFBD     		pop {r0-r7,pc}
 377              		
 378              	_xie595: @ R0=要写的数据
 379 023c FFB5     		push {r0-r7,lr}
 380 023e 0546     		mov r5, r0
 381 0240 4020     		movs r0, # 0x40
 382 0242 8027     		movs r7, # 0x80 
 383 0244 2026     		movs r6, # 0x20 
 384 0246 1023     		movs r3, # 16   @16位
 385 0248 214A     		ldr r2, = 0x48000000 @ gpioa
 386 024a 0121     		movs r1, # 0x01
 387              	_xunhuan595:
 388 024c 9761     		str r7, [r2, # 0x18]
 389 024e 00F014F8 		bl _yanshi
 390 0252 0D42     		tst r5, r1
 391 0254 01D1     		bne _xie595_0
 392 0256 9062     		str r0, [r2, # 0x28]
 393 0258 00E0     		b _suocun595
 394              	_xie595_0:
 395 025a 9061     		str r0, [r2, # 0x18]
 396              	_suocun595:
 397 025c 00F00DF8 		bl _yanshi
 398 0260 6D08     		lsrs r5, # 1
 399 0262 9762     		str r7, [r2, # 0x28]
 400 0264 00F009F8 		bl _yanshi
 401 0268 013B     		subs r3, r3, # 1
 402 026a EFD1     		bne _xunhuan595
 403 026c 9661     		str r6, [r2, # 0x18]
 404 026e 00F004F8 		bl _yanshi
 405 0272 9662     		str r6, [r2, # 0x28]
 406 0274 00F001F8 		bl _yanshi
 407 0278 FFBD     		pop {r0-r7,pc}
 408              	
 409              	
 410              	_yanshi:
 411 027a 80B4     		push {r7}
 412 027c 2C4F     		ldr r7, = 30
 413              	_yanshi11:
 414 027e 013F     		subs r7, # 1
 415 0280 FDD1     		bne _yanshi11
 416 0282 80BC     		pop {r7}
 417 0284 7047     		bx lr
 418              	_chufa:			@软件除法
 419              		@ r0 除以 r1 等于 商(r0)余数R1
 420 0286 1EB5     		push {r1-r4,lr}
ARM GAS  1.s 			page 9


 421 0288 0028     		cmp r0, # 0
 422 028a 0ED0     		beq _chufafanhui
 423 028c 0029     		cmp r1, # 0
 424 028e 0CD0     		beq _chufafanhui
 425 0290 0246     		mov r2, r0
 426 0292 0123     		movs r3, # 1
 427 0294 DB07     		lsls r3, r3, # 31
 428 0296 0020     		movs r0, # 0
 429 0298 0446     		mov r4, r0
 430              	_chufaxunhuan:
 431 029a 5200     		lsls r2, r2, # 1
 432 029c 6441     		adcs r4, r4, r4
 433 029e 8C42     		cmp r4, r1
 434 02a0 01D3     		bcc _chufaweishubudao0
 435 02a2 C018     		adds r0, r0, r3
 436 02a4 641A     		subs r4, r4, r1
 437              	_chufaweishubudao0:
 438 02a6 5B08     		lsrs r3, r3, # 1
 439 02a8 F7D1     		bne _chufaxunhuan
 440              	_chufafanhui:
 441 02aa 1EBD     		pop {r1-r4,pc}
 442 02ac 00200240 		.ltorg
 442      00100240 
 442      01000100 
 442      02001100 
 442      00000101 
 443              	
 444              	
 445              	_fftjisuan:
 446              					@R0=输入地址
 447              					@输出实部=0X20000000-0X20000400
 448              					@输出虚部=0X20000400-0X20000800
 449 0334 00B5     		push {lr}
 450              	_fft1:
 451 0336 7149     		ldr r1, = 0x20000000       @输出地址
 452 0338 8022     		movs r2, # 128             @蝴蝶数量
 453 033a 714B     		ldr r3, = hudieweifanzhuan @蝴蝶位反转表
 454              	_fft1xunhuan:
 455 033c 1E68     		ldr r6, [r3]               @取出位反转表里的地一个数据
 456 033e 5F68     		ldr r7, [r3, # 0x04]       @取出第二个
 457 0340 8659     		ldr r6, [r0, r6]           @给据位反转表找到对应的输入数据  
 458 0342 C759     		ldr r7, [r0, r7]           @第二个
 459 0344 F419     		adds r4, r6, r7            @求出蝴蝶上
 460 0346 F51B     		subs r5, r6, r7            @求出蝴蝶下
 461 0348 6410     		asrs r4, r4, # 1           @数据缩小一位防后面溢出
 462 034a 6D10     		asrs r5, r5, # 1           @数据缩小一位
 463 034c 0C60     		str r4, [r1]
 464 034e 4D60     		str r5, [r1, # 0x04]       @把反过来的顺序排列
 465 0350 0831     		adds r1, r1, # 0x08        @输出的地址自增
 466 0352 0833     		adds r3, r3, # 0x08        @反转表自增
 467 0354 013A     		subs r2, r2, # 1           @蝴蝶数减1
 468 0356 F1D1     		bne _fft1xunhuan           @蝴蝶数不到
 469              	
 470              	_fft2:
 471 0358 6848     		ldr r0, = 0x20000000       @实部输出地址
 472 035a 0124     		movs r4, # 1               
 473 035c A402     		lsls r4, r4, # 10          
ARM GAS  1.s 			page 10


 474 035e 2418     		adds r4, r4, r0            @虚部输出地址
 475 0360 A046     		mov r8, r4                 @实部和虚部中间
 476              	_fft2xunhuan:
 477 0362 0468     		ldr r4, [r0]               @取出数据0
 478 0364 8568     		ldr r5, [r0, # 0x08]       @取出数据2
 479 0366 4668     		ldr r6, [r0, # 0x04]       @取出数据1
 480 0368 C768     		ldr r7, [r0, # 0x0c]       @取出数据3
 481 036a 6119     		adds r1, r4, r5            @计算蝴蝶上
 482 036c 621B     		subs r2, r4, r5            @计算蝴蝶下
 483 036e 3346     		mov r3, r6		@0r 蝴蝶上实部
 484 0370 0024     		movs r4, # 0
 485 0372 E41B     		subs r4, r4, r7		@0i 蝴蝶上虚部
 486 0374 3546     		mov r5, r6		@3r 蝴蝶下实部
 487 0376 3E46     		mov r6, r7		@3i 蝴蝶下虚部
 488 0378 0127     		movs r7, # 1
 489 037a BF02     		lsls r7, r7, # 10       @内存实部和虚部中间
 490 037c 3F18     		adds r7, r7, r0         @R7等于虚部首地址  
 491 037e 0160     		str r1, [r0]            @蝴蝶上保存实部
 492 0380 8260     		str r2, [r0, # 0x08]    @蝴蝶下实部
 493 0382 4360     		str r3, [r0, # 0x04]    @第二组蝴蝶上实部
 494 0384 7C60     		str r4, [r7, # 0x04]    @第二组蝴蝶上虚部
 495 0386 C560     		str r5, [r0, # 0x0c]	@第二组蝴蝶下实部
 496 0388 FE60     		str r6, [r7, # 0x0c]    @第二组下虚部
 497 038a 1030     		adds r0, r0, # 0x10     @蝴蝶组自增
 498 038c 4045     		cmp r0, r8     
 499 038e E8D1     		bne _fft2xunhuan        @地址不到循环
 500              	_fft3:
 501 0390 5C4E     		ldr r6, = xuanzhuanyinzi       @旋转因子自增变量
 502 0392 5D4A     		ldr r2, = fft3xuanzhuanyinzi   @旋转因子第三部的表
 503 0394 5948     		ldr r0, = 0x20000000           @实部输出地址
 504 0396 3260     		str r2, [r6]                   @旋转因子表首地址写到变量
 505 0398 0121     		movs r1, # 1
 506 039a 8902     		lsls r1, r1, # 10             
 507 039c 0918     		adds r1, r1, r0                @虚部输出地址
 508 039e 8846     		mov r8, r1		       @R8虚部地址自增变量
 509 03a0 8146     		mov r9, r0                     @R9实部地址自增变量
 510 03a2 9246     		mov r10, r2		       @旋转因子地址写到R10
 511 03a4 1025     		movs r5, # 0x10		       @两组蝴蝶的距离	
 512 03a6 AB46     		mov r11, r5                    @写到R11
 513 03a8 0425     		movs r5, # 4                   @旋转因子数量
 514 03aa AC46     		mov r12, r5		       @旋转因子数量写到R12
 515 03ac 00F067F8 		bl _fftg
 516              	_fft4:
 517 03b0 544E     		ldr r6, = xuanzhuanyinzi
 518 03b2 564A     		ldr r2, = fft4xuanzhuanyinzi
 519 03b4 5148     		ldr r0, = 0x20000000
 520 03b6 3260     		str r2, [r6]
 521 03b8 0121     		movs r1, # 1
 522 03ba 8902     		lsls r1, r1, # 10
 523 03bc 0918     		adds r1, r1, r0
 524 03be 8846     		mov r8, r1
 525 03c0 8146     		mov r9, r0
 526 03c2 9246     		mov r10, r2
 527 03c4 2025     		movs r5, # 0x20
 528 03c6 AB46     		mov r11, r5
 529 03c8 0825     		movs r5, # 8
 530 03ca AC46     		mov r12, r5
ARM GAS  1.s 			page 11


 531 03cc 00F057F8 		bl _fftg
 532              	_fft5:
 533 03d0 4C4E     		ldr r6, = xuanzhuanyinzi
 534 03d2 4F4A     		ldr r2, = fft5xuanzhuanyinzi
 535 03d4 4948     		ldr r0, = 0x20000000
 536 03d6 3260     		str r2, [r6]
 537 03d8 0121     		movs r1, # 1
 538 03da 8902     		lsls r1, r1, # 10
 539 03dc 0918     		adds r1, r1, r0
 540 03de 8846     		mov r8, r1
 541 03e0 8146     		mov r9, r0
 542 03e2 9246     		mov r10, r2
 543 03e4 4025     		movs r5, # 0x40
 544 03e6 AB46     		mov r11, r5
 545 03e8 1025     		movs r5, # 16
 546 03ea AC46     		mov r12, r5
 547 03ec 00F047F8 		bl _fftg
 548              	
 549              	_fft6:
 550 03f0 444E     		ldr r6, = xuanzhuanyinzi
 551 03f2 484A     		ldr r2, = fft6xuanzhuanyinzi
 552 03f4 4148     		ldr r0, = 0x20000000
 553 03f6 3260     		str r2, [r6]
 554 03f8 0121     		movs r1, # 1
 555 03fa 8902     		lsls r1, r1, # 10
 556 03fc 0918     		adds r1, r1, r0
 557 03fe 8846     		mov r8, r1
 558 0400 8146     		mov r9, r0
 559 0402 9246     		mov r10, r2
 560 0404 8025     		movs r5, # 0x80
 561 0406 AB46     		mov r11, r5
 562 0408 2025     		movs r5, # 32
 563 040a AC46     		mov r12, r5
 564 040c 00F037F8 		bl _fftg
 565              	
 566              	_fft7:
 567 0410 3C4E     		ldr r6, = xuanzhuanyinzi
 568 0412 414A     		ldr r2, = fft7xuanzhuanyinzi
 569 0414 3948     		ldr r0, = 0x20000000
 570 0416 3260     		str r2, [r6]
 571 0418 0121     		movs r1, # 1
 572 041a 8902     		lsls r1, r1, # 10
 573 041c 0918     		adds r1, r1, r0
 574 041e 8846     		mov r8, r1
 575 0420 8146     		mov r9, r0
 576 0422 9246     		mov r10, r2
 577 0424 0125     		movs r5, # 1
 578 0426 2D02     		lsls r5, r5, # 8
 579 0428 AB46     		mov r11, r5
 580 042a 4025     		movs r5, # 64
 581 042c AC46     		mov r12, r5
 582 042e 00F026F8 		bl _fftg
 583              	
 584              	_fft8:
 585 0432 344E     		ldr r6, = xuanzhuanyinzi
 586 0434 394A     		ldr r2, = fft8xuanzhuanyinzi
 587 0436 3148     		ldr r0, = 0x20000000
ARM GAS  1.s 			page 12


 588 0438 3260     		str r2, [r6]
 589 043a 0121     		movs r1, # 1
 590 043c 8902     		lsls r1, r1, # 10
 591 043e 0918     		adds r1, r1, r0
 592 0440 8846     		mov r8, r1
 593 0442 8146     		mov r9, r0
 594 0444 9246     		mov r10, r2
 595 0446 0125     		movs r5, # 1
 596 0448 6D02     		lsls r5, r5, # 9
 597 044a AB46     		mov r11, r5
 598 044c 8025     		movs r5, # 128
 599 044e AC46     		mov r12, r5
 600 0450 00F015F8 		bl _fftg
 601              	
 602              	_fftjisuanfuzhi:
 603 0454 2948     		ldr r0, = 0x20000000
 604 0456 3249     		ldr r1, = 0x20000400
 605 0458 8846     		mov r8, r1
 606              	_jisuanfuzhixunhuan:
 607 045a 0268     		ldr r2, [r0]
 608 045c 0B68     		ldr r3, [r1]
 609 045e 1B00     		movs r3, r3
 610 0460 01D5     		bpl _fzbushifushu1
 611 0462 DB43     		mvns r3, r3
 612 0464 0133     		adds r3, r3, # 1
 613              	_fzbushifushu1:
 614 0466 5210     		asrs r2, r2, # 1
 615 0468 01D5     		bpl _fzbushifushu
 616 046a D243     		mvns r2, r2
 617 046c 0132     		adds r2, r2, # 1
 618              	_fzbushifushu:
 619 046e 9B18     		adds r3, r3, r2
 620 0470 5B00     		lsls r3, r3, # 1
 621 0472 0351     		str r3, [r0, r4]
 622 0474 0430     		adds r0, r0, # 4
 623 0476 0431     		adds r1, r1, # 4
 624 0478 4045     		cmp r0, r8
 625 047a EED1     		bne _jisuanfuzhixunhuan
 626 047c 00BD     		pop {pc}
 627              	_fftg:
 628 047e 00B5     		push {lr}
 629 0480 0024     		movs r4, # 0
 630 0482 A646     		mov lr, r4
 631              	_fftxunhuan:
 632 0484 4846     		mov r0, r9
 633 0486 4146     		mov r1, r8
 634 0488 5246     		mov r2, r10
 635 048a 5B46     		mov r3, r11
 636 048c 0468     		ldr r4, [r0]
 637 048e 0D68     		ldr r5, [r1]
 638 0490 C658     		ldr r6, [r0, r3]
 639 0492 CF58     		ldr r7, [r1, r3]
 640 0494 1368     		ldr r3, [r2]		@sr
 641 0496 5268     		ldr r2, [r2, # 0x04]	@si
 642 0498 30B4     		push {r4,r5}
 643 049a 3446     		mov r4, r6
 644 049c 5C43     		muls r4, r4, r3
ARM GAS  1.s 			page 13


 645 049e 3D46     		mov r5, r7
 646 04a0 5543     		muls r5, r5, r2
 647 04a2 641B     		subs r4, r4, r5		@r
 648 04a4 E413     		asrs r4, r4, # 15
 649 04a6 3546     		mov r5, r6
 650 04a8 5543     		muls r5, r5, r2
 651 04aa 5F43     		muls r7, r7, r3
 652 04ac 7F19     		adds r7, r7, r5    @i
 653 04ae FF13     		asrs r7, r7, # 15
 654 04b0 24BC     		pop {r2,r5}
 655 04b2 1319     		adds r3, r2, r4    @0r
 656 04b4 121B     		subs r2, r2, r4    @1r
 657 04b6 EC19     		adds r4, r5, r7
 658 04b8 ED1B     		subs r5, r5, r7
 659 04ba 5E46     		mov r6, r11
 660 04bc 0360     		str r3, [r0]
 661 04be 0C60     		str r4, [r1]
 662 04c0 8251     		str r2, [r0, r6]
 663 04c2 8D51     		str r5, [r1, r6]
 664 04c4 0430     		adds r0, r0, # 0x04
 665 04c6 0431     		adds r1, r1, # 0x04
 666 04c8 8146     		mov r9, r0
 667 04ca 8846     		mov r8, r1
 668 04cc 5246     		mov r2, r10
 669 04ce 0832     		adds r2, r2, # 0x08
 670 04d0 9246     		mov r10, r2
 671 04d2 7446     		mov r4, lr		@取出旋转因子自增变量
 672 04d4 0134     		adds r4, r4, # 1        @自增
 673 04d6 A646     		mov lr, r4              @保存回去
 674 04d8 6746     		mov r7, r12             @取出旋转因子总数量
 675 04da BC42     		cmp r4, r7              @到没到数量
 676 04dc D2D1     		bne _fftxunhuan         @没到继续循环
 677 04de 0024     		movs  r4, # 0
 678 04e0 084E     		ldr r6, = xuanzhuanyinzi
 679 04e2 0F4D     		ldr r5, = 0x20000400
 680 04e4 3668     		ldr r6, [r6]
 681 04e6 B246     		mov r10, r6
 682 04e8 A646     		mov lr, r4
 683 04ea 5F46     		mov r7, r11
 684 04ec C019     		adds r0, r0, r7
 685 04ee C919     		adds r1, r1, r7
 686 04f0 8146     		mov r9, r0
 687 04f2 8846     		mov r8, r1
 688 04f4 A842     		cmp r0, r5
 689 04f6 C5D1     		bne _fftxunhuan
 690 04f8 00BD     		pop {pc}
 691 04fa 00000000 		.ltorg
 691      00204C00 
 691      00000008 
 691      00204C04 
 691      00006C04 
 692              		
 693              	_nmi_handler:
 694 0524 7047     		bx lr
 695              	_hard_fault:
 696 0526 7047     		bx lr
 697              	_svc_handler:
ARM GAS  1.s 			page 14


 698 0528 7047     		bx lr
 699              	_pendsv_handler:
 700 052a 7047     		bx lr
ARM GAS  1.s 			page 15


DEFINED SYMBOLS
                 1.s:9      .data:0000000000000000 shumaguanmabiao
                 1.s:11     .data:0000000000000028 shumaguanshuaxinbiao
                 1.s:13     *ABS*:0000000020001000 STACKINIT
                 1.s:15     *ABS*:0000000020000804 shumaguanma
                 1.s:16     *ABS*:0000000020000800 xuanzhuanyinzi
                 1.s:17     *ABS*:0000000020000850 dianyabiao
                 1.s:18     *ABS*:0000000020000c50 lvbozhizhen
                 1.s:19     *ABS*:0000000020000c54 lvbohuanchong
                 1.s:20     .data:000000000000004c hudieweifanzhuan
                 1.s:23     .data:000000000000044c fft3xuanzhuanyinzi
                 1.s:25     .data:000000000000046c fft4xuanzhuanyinzi
                 1.s:27     .data:00000000000004ac fft5xuanzhuanyinzi
                 1.s:29     .data:000000000000052c fft6xuanzhuanyinzi
                 1.s:31     .data:000000000000062c fft7xuanzhuanyinzi
                 1.s:34     .data:000000000000082c fft8xuanzhuanyinzi
                 1.s:40     .text:0000000000000000 vectors
                 1.s:85     .text:00000000000000b0 _start
                 1.s:693    .text:0000000000000524 _nmi_handler
                 1.s:695    .text:0000000000000526 _hard_fault
                 1.s:697    .text:0000000000000528 _svc_handler
                 1.s:699    .text:000000000000052a _pendsv_handler
                 1.s:86     .text:00000000000000b0 shizhong
                            .text:0000000000000000 $d
                 1.s:87     .text:00000000000000b0 $t
                 1.s:93     .text:00000000000000bc denghse
                 1.s:97     .text:00000000000000c2 dengpllguan
                 1.s:107    .text:00000000000000d2 dengpll
                 1.s:114    .text:00000000000000dc dengdai14mshizhongwending
                 1.s:119    .text:00000000000000e2 neicunqingling
                 1.s:123    .text:00000000000000e8 neicunqinglingxunhuan
                 1.s:128    .text:00000000000000ee _waisheshizhong
                 1.s:143    .text:00000000000000fc io_she_zhi
                 1.s:170    .text:0000000000000106 tim3chushihua
                 1.s:186    .text:0000000000000124 dmachushihua
                 1.s:209    .text:0000000000000136 _adcchushihua
                 1.s:213    .text:000000000000013c _dengadcjiaozhun
                 1.s:217    .text:0000000000000142 _kaiadc
                 1.s:222    .text:000000000000014a _dengdaiadcwending
                 1.s:226    .text:0000000000000150 _tongdaoxuanze
                 1.s:240    .text:0000000000000164 _waishezhongduan
                 1.s:249    .text:0000000000000164 ting
                 1.s:445    .text:0000000000000334 _fftjisuan
                 1.s:290    .text:00000000000001ae _lvboqi
                 1.s:340    .text:00000000000001f8 _zhuanshumaguanma
                 1.s:360    .text:000000000000021c _xieshumaguan
                 1.s:265    .text:000000000000018a yanshi11
                 1.s:276    .text:00000000000001a0 neicunqingling1
                 1.s:280    .text:00000000000001a6 neicunqinglingxunhuan1
                 1.s:301    .text:00000000000001be _lvboqimeidaohuanchongquding
                 1.s:304    .text:00000000000001c2 _lvboqixunhuan
                 1.s:308    .text:00000000000001c8 _lvbozonghe
                 1.s:317    .text:00000000000001d6 _maopaopaixu
                 1.s:321    .text:00000000000001da _paixu
                 1.s:323    .text:00000000000001dc _paixuxunhuan
                 1.s:334    .text:00000000000001f0 _paixu1
                 1.s:347    .text:0000000000000202 _xunhuanqiuma
ARM GAS  1.s 			page 16


                 1.s:418    .text:0000000000000286 _chufa
                 1.s:367    .text:0000000000000228 _shumaguanshuaxin
                 1.s:378    .text:000000000000023c _xie595
                 1.s:387    .text:000000000000024c _xunhuan595
                 1.s:410    .text:000000000000027a _yanshi
                 1.s:394    .text:000000000000025a _xie595_0
                 1.s:396    .text:000000000000025c _suocun595
                 1.s:413    .text:000000000000027e _yanshi11
                 1.s:440    .text:00000000000002aa _chufafanhui
                 1.s:430    .text:000000000000029a _chufaxunhuan
                 1.s:437    .text:00000000000002a6 _chufaweishubudao0
                 1.s:442    .text:00000000000002ac $d
                 1.s:449    .text:0000000000000334 $t
                 1.s:450    .text:0000000000000336 _fft1
                 1.s:454    .text:000000000000033c _fft1xunhuan
                 1.s:470    .text:0000000000000358 _fft2
                 1.s:476    .text:0000000000000362 _fft2xunhuan
                 1.s:500    .text:0000000000000390 _fft3
                 1.s:627    .text:000000000000047e _fftg
                 1.s:516    .text:00000000000003b0 _fft4
                 1.s:532    .text:00000000000003d0 _fft5
                 1.s:549    .text:00000000000003f0 _fft6
                 1.s:566    .text:0000000000000410 _fft7
                 1.s:584    .text:0000000000000432 _fft8
                 1.s:602    .text:0000000000000454 _fftjisuanfuzhi
                 1.s:606    .text:000000000000045a _jisuanfuzhixunhuan
                 1.s:613    .text:0000000000000466 _fzbushifushu1
                 1.s:618    .text:000000000000046e _fzbushifushu
                 1.s:631    .text:0000000000000484 _fftxunhuan
                 1.s:691    .text:00000000000004fa $d
                 1.s:691    .text:00000000000004fc $d
                 1.s:694    .text:0000000000000524 $t

NO UNDEFINED SYMBOLS
