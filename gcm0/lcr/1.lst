ARM GAS  1.s 			page 1


   1              		@@ 单片机stm32f030f4p6
   2              		@@ 阻抗桥
   3              		@作者：yjmwxwx
   4              		@时间：2019-08-12
   5              		@编译器：ARM-NONE-EABI
   6              		 .thumb
   7              		         .syntax unified
   8              	.section .data
   9              	zheng_xian_biao:
  10 0000 18001900 		.short 0x18,0x19,0x1a,0x1c,0x1d,0x1f,0x20,0x22,0x23,0x24,0x25,0x26,0x28,0x29,0x2a,0x2b,0x2b,0x2c,0
  10      1A001C00 
  10      1D001F00 
  10      20002200 
  10      23002400 
  11 00ca 00000000 		.align 4
  11      0000
  12              	xuan_zhuan_yin_zi:
  13 00d0 00800000 		.int 0x8000,0x0000,0x7EFD,0xFFFFEFF6,0x7BFA,0xFFFFE02B,0x7702,0xFFFFD0E2,0x702A,0xFFFFC256,0x678D,
  13      00000000 
  13      FD7E0000 
  13      F6EFFFFF 
  13      FA7B0000 
  14              	lcdshuju:
  15 03f0 796A6D77 		.ascii  "yjmwxwx-20190812"
  15      7877782D 
  15      32303139 
  15      30383132 
  16              	dianhua:	
  17 0400 20202020 		.ascii	"     15552208295"
  17      20313535 
  17      35323230 
  17      38323935 
  18              	qq:
  19 0410 20202051 		.ascii	"   QQ:3341656346"
  19      513A3333 
  19      34313635 
  19      36333436 
  20              	xushu:
  21 0420 69       		.ascii "i"
  22              	fu:
  23 0421 2D       		.ascii "-"
  24              	zheng:
  25 0422 2B       		.ascii "+"
  26              	dianzu:
  27 0423 523D     		.ascii	"R="
  28              	dianrong:
  29 0425 433D     		.ascii	"C="
  30              	pinlv:
  31 0427 31304B48 		.ascii	"10KHZ"
  31      5A
  32              	qianou:
  33 042c 4B       		.ascii	"K"
  34              	ou:
  35 042d F4000000 	        .int    0xf4
  36              	kong:
  37 0431 20202020 		.int 0x20202020
  38              	pifa:
ARM GAS  1.s 			page 2


<<<<<<< HEAD
  39 0435 5046     		.ascii "PF"
  40              	_fu:	
  41 0437 2D       		.ascii "-"
  42              	xiaomai:
  43 0438 7869616F 		.ascii "xiaomai ="
  43      6D616920 
  43      3D
  44              		.equ STACKINIT,        	        0x20001000
  45              		.equ asciimabiao,		0x20000000
  46              		.equ liangcheng,		0x20000030
  47              		.equ jishu,			0x20000034
  48              		.equ jianbo,			0x20000038
  49              		.equ dianyabiao,		0x20000040
  50              		.equ zhengxiangbiao,		0x20000110
  51              		.equ fanxiangbiao,		0x200001e0
  52              		.equ lvboqizhizhen,		0x20000600
  53              		.equ lvboqihuanchong,		0x20000604
  54              		.equ lvboqizhizhen1,		0x20000700
  55              		.equ lvboqihuanchong1,		0x20000704
  56              		.equ lvboqizhizhen2,		0x20000800
  57              		.equ lvboqihuanchong2,		0x20000804
  58              		.equ lvboqizhizhen3,		0x20000900
  59              		.equ lvboqihuanchong3,		0x20000904
  60              		.equ xia_bi_shi_bu,		0x20000a00
  61              		.equ shang_bi_shi_bu,		0x20000a04
  62              		.equ xia_bi_xu_bu,		0x20000a08
  63              		.equ shang_bi_xu_bu,		0x20000a0c
  64              		.equ bu_chang_100r,		0x20000a10
  65              		.equ zidongliangchengyanshi,	0x20000a14
  66              		.equ dianzuzhi,			0x20000a18
  67              		.equ dianrongzhi,		0x20000a1c
  68              		.section .text
  69              	vectors:
  70 0000 00100020 		.word STACKINIT
  71 0004 B1000000 		.word _start + 1
  72 0008 F1080000 		.word _nmi_handler + 1
  73 000c F3080000 		.word _hard_fault  + 1
  74 0010 00000000 		.word 0
  75 0014 00000000 		.word 0
  76 0018 00000000 		.word 0
  77 001c 00000000 		.word 0
  78 0020 00000000 		.word 0
  79 0024 00000000 		.word 0
  80 0028 00000000 		.word 0
  81 002c F5080000 		.word _svc_handler +1
  82 0030 00000000 		.word 0
  83 0034 00000000 		.word 0
  84 0038 F7080000 		.word _pendsv_handler +1
  85 003c F9080000 		.word _systickzhongduan +1               @ 15
  86 0040 07090000 		.word aaa +1     @ _wwdg +1          @ 0
  87 0044 07090000 		.word aaa +1     @_pvd +1            @ 1
  88 0048 07090000 		.word aaa +1     @_rtc +1            @ 2
  89 004c 07090000 		.word aaa +1     @_flash +1          @ 3
  90 0050 07090000 		.word aaa +1	@ _rcc + 1          @ 4
  91 0054 07090000 		.word aaa +1      @_exti0_1  +1      @ 5
  92 0058 07090000 		.word aaa +1      @ _exti2_3 +1      @ 6
  93 005c 07090000 		.word aaa +1       @_exti4_15 +1     @ 7
ARM GAS  1.s 			page 3


  94 0060 07090000 		.word aaa +1                         @ 8
  95 0064 07090000 		.word aaa +1 	@_dma1_1  +1    @ 9
  96 0068 07090000 		.word aaa +1    @_dma1_2_3 +1        @ 10
  97 006c 07090000 		.word aaa +1       @_dma1_4_5 +1     @ 11
  98 0070 07090000 		.word aaa +1	 @_adc1 +1          @ 12
  99 0074 07090000 		.word aaa +1       @_tim1_brk_up +1  @ 13
 100 0078 07090000 		.word aaa +1        @ _tim1_cc +1    @ 14
 101 007c 07090000 		.word aaa +1         @_tim2 +1       @ 15
 102 0080 07090000 		.word aaa +1          @_tim3 +1      @ 16
 103 0084 07090000 		.word aaa +1                         @ 17
 104 0088 07090000 		.word aaa +1		                @ 18
 105 008c 07090000 		.word aaa +1	@_tim14 +1    @ 19
 106 0090 07090000 		.word aaa +1                         @ 20
 107 0094 07090000 		.word aaa +1         @_tim16 +1      @ 21
 108 0098 07090000 		.word aaa +1         @_tim17 +1      @ 22
 109 009c 07090000 		.word aaa +1          @_i2c   +1     @ 23
 110 00a0 07090000 		.word aaa +1                         @ 24
 111 00a4 07090000 		.word aaa +1           @_spi   +1    @ 25
 112 00a8 07090000 		.word aaa +1                         @ 26
 113 00ac 07090000 		.word aaa +1         @_usart1 +1     @ 27
 114              		.align 2
 115              	
 116              	_start:
 117 00b0 9348     		ldr r0, = 0xffff
 118              	yanshi111:
 119 00b2 0138     		subs r0, r0, # 1
 120 00b4 FDD1     		bne yanshi111
 121              		
 122              	shizhong:
 123 00b6 934A     		ldr r2, = 0x40022000   @FLASH访问控制
 124 00b8 3221     		movs r1, # 0x32
 125 00ba 1160     		str r1, [r2]           @FLASH缓冲 缓冲开启
 126 00bc 9248     		ldr r0, = 0x40021000 @ rcc
 127 00be 9349     		ldr r1, = 0x10001
 128 00c0 0160     		str r1, [r0]
 129              	denghse:
 130 00c2 0168     		ldr r1, [r0]
 131 00c4 8903     		lsls r1, r1, # 14
 132 00c6 FCD5     		bpl denghse
 133              	dengpllguan:
 134 00c8 0168     		ldr r1, [r0]
 135 00ca 8901     		lsls r1, r1, # 6
 136 00cc FCD4     		bmi dengpllguan
 137 00ce 9049     	        ldr r1, = 0x110002
 138 00d0 4160     	        str r1, [r0, # 0x04]
 139 00d2 9049     		ldr r1, = 0x1010001
 140 00d4 0160     		str r1, [r0]
 141              	dengpll:
 142 00d6 0168     		ldr r1, [r0]
 143 00d8 8901     		lsls r1, # 6
 144 00da FCD5     		bpl dengpll
 145              		@0x34时钟控制寄存器 2 (RCC_CR2)
 146 00dc 0121     		movs r1, # 0x01
 147 00de 4163     		str r1, [r0, # 0x34]  @ HSI开14M时钟
 148              	dengdai14mshizhongwending:
 149 00e0 416B     		ldr r1, [r0, # 0x34]
 150 00e2 8907     		lsls r1, r1, # 30     @ 左移30位
ARM GAS  1.s 			page 4


 151 00e4 FCD5     		bpl dengdai14mshizhongwending  @ 等待14M时钟稳定
 152              	
 153              	_neicunqingling:
 154 00e6 8C48     		ldr r0, = 0x20000000
 155 00e8 0021     		movs r1, # 0
 156 00ea 8C4B     		ldr r3, = 0x1000
 157              	_neicunqinglingxunhuan:
 158 00ec 043B     		subs r3, # 4
 159 00ee C150     		str r1, [r0, r3]
 160 00f0 FCD1     		bne _neicunqinglingxunhuan
 161              	
 162              	_waisheshizhong:			 @ 外设时钟
 163              		@+0x14=RCC_AHBENR
 164              		@0=DMA @2=SRAM @4=FLITF@6=CRC @17=PA @18=PB @19=PC @20=PD @22=PF
 165 00f2 8548     		ldr r0, = 0x40021000
 166 00f4 8A49     		ldr r1, = 0x460005
 167 00f6 4161     		str r1, [r0, # 0x14]
 168              	
 169              		@+0x18外设时钟使能寄存器 (RCC_APB2ENR)
 170              		@0=SYSCFG @5=USART6EN @9=ADC @11=TIM1 @12=SPI1 @14=USART1 @16=TIM15 @17=TIM16 @18=TIM17 @22=DBGMCU
 171 00f8 8A49     		ldr r1, = 0xa00
 172 00fa 8161     		str r1, [r0, # 0x18]
 173              		@+0X1C=RCC_APB1ENR
 174              		@1=TIM3 @4=TIM6 @5=TIM7 @8=TIM14 @11=WWDG @14=SPI @17=USRT2 @18=USART3 @20=USART5 @21=I2C1
 175              		@22=I2C2 @23=USB @28=PWR
 176              	
 177              	_waishezhongduan:				@外设中断
 178              		@0xE000E100    0-31  写1开，写0没效
 179              		@0XE000E180    0-31 写1关，写0没效
 180              		@0XE000E200    0-31 挂起，写0没效
 181              		@0XE000E280    0-31 清除， 写0没效
 182              	
 183              	@_systick:				@ systick定时器初始化
 184              	
 185              	@	ldr r0, = 0xe000e010
 186              	@	ldr r1, = 0xffffff
 187              	@	str r1, [r0, # 4]
 188              	@	str r1, [r0, # 8]
 189              	@	movs r1, # 0x07
 190              	@	str r1, [r0]
 191              		
 192              	io_she_zhi:
 193              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 194              		@a(0x48000000)b(0x48000400)c(0x48000800)d(0x48000c00)f(0x48001400)
 195              		@ 输入（00），通用输出（01），复用功能（10），模拟（11）
 196              		@偏移0x4 = 端口输出类型 @ （0 推挽），（ 1 开漏）
 197              		@偏移0x8 = 输出速度  00低速， 01中速， 11高速
 198              		@偏移0xC = 上拉下拉 (00无上下拉，  01 上拉， 10下拉)
 199              		@偏移0x10 = 输入数据寄存器
 200              		@偏移0x14 = 输出数据寄存器
 201              		@偏移0x18 = 端口开  0-15置位
 202              		@偏移0x28 = 端口关
 203              		@0X20 = 复用低
 204              		@GPIO口0（0-3位）每个IO口占用4位
 205              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 206              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 207              		@0x24 = 复用高
ARM GAS  1.s 			page 5


 208              		@GPIO口8 （0-3位）每个IO口占用4位
 209              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 210              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 211              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 212              	
 213 00fc 8A48     		ldr r0, = 0x48000000
 214 00fe 8B49     		ldr r1, = 0x2824540f
 215 0100 0160     		str r1, [r0]
 216 0102 8B49     		ldr r1, = 0x200
 217 0104 4162     		str r1, [r0, # 0x24]
 218              	
 219              	
 220              	
 221              	_adcchushihua:
 222 0106 8B48     	        ldr r0, = 0x40012400  @ adc基地址
 223 0108 8B49     	        ldr r1, = 0x80000000
 224 010a 8160     	        str r1, [r0, # 0x08]  @ ADC 控制寄存器 (ADC_CR)  @adc校准
 225              	_dengadcjiaozhun:
 226 010c 8168     	        ldr r1, [r0, # 0x08]
 227 010e 0900     	        movs r1, r1
 228 0110 FCD4     	        bmi _dengadcjiaozhun   @ 等ADC校准
 229              	_kaiadc:
 230 0112 8168     		ldr r1, [r0, # 0x08]
 231 0114 0122     	        movs r2, # 0x01
 232 0116 1143     		orrs r1, r1, r2
 233 0118 8160     	        str r1, [r0, # 0x08]
 234              	_dengdaiadcwending:
 235 011a 0168     		ldr r1, [r0]
 236 011c C907     		lsls r1, r1, # 31
 237 011e FCD5     		bpl _dengdaiadcwending @ 等ADC稳定
 238              	_tongdaoxuanze:
 239 0120 8649     		ldr r1, = 2
 240 0122 8162     	        str r1, [r0, # 0x28]    @ 通道选择寄存器 (ADC_CHSELR)
 241 0124 8649     	        ldr r1, = 0x803
 242 0126 C160     	        str r1, [r0, # 0x0c]    @ 配置寄存器 1 (ADC_CFGR1)
 243 0128 0021     		movs r1, # 0
 244 012a 4161     	        str r1, [r0, # 0x14]    @ ADC 采样时间寄存器 (ADC_SMPR)
 245 012c 8168     		ldr r1, [r0, # 0x08]
 246 012e 854A     	        ldr r2, = 0x04         @ 开始转换
 247 0130 1143     	        orrs r1, r1, r2
 248 0132 8160     		str r1, [r0, # 0x08]    @ 控制寄存器 (ADC_CR)
 249              	
 250              	
 251              		
 252              	dmachushihua:
 253              	        @+0=LSR,+4=IFCR,
 254              	        @+8=CCR1,+c=CNDTR1,+10=CPAR1+14=CMAR1,
 255              	        @+1c=CCR2,+20=CNDTR2,+24=CPAR2,+28=CMAR2
 256              	        @+30=CCR3,+34=CNDTR3,+38=CPAR2,+3c=CMAR3
 257              	        @+44=CCR4,+48=CNDTR4,+4c=CPAR4,+50=CMAR4
 258              	        @+58=CCR5,+5c=CNDTR5,+60=CPAR5,+64=CMAR5
 259              	        @+6C=CCR6,+70=CNDTR6,+74=CPAR6,+78=CMAR6
 260              	        @+80=CCR7,+84=CNDTR7,+88=CPAR7,+8c=CMAR7
 261              	
 262              	        @tim1ch3DMA
 263 0134 8448     	        ldr r0, = 0x40020000
 264 0136 8549     	        ldr r1, = 0x40012c3c @ 外设地址
ARM GAS  1.s 			page 6


 265 0138 0166     	        str r1, [r0, # 0x60]
 266 013a 8549     	        ldr r1, = zheng_xian_biao @ 储存器地址
 267 013c 4166     	        str r1, [r0, # 0x64]
 268 013e 8549     	        ldr r1, = 100             @点数
 269 0140 C165     	        str r1, [r0, # 0x5c]
 270 0142 8549     	        ldr r1, = 0x35b1         @ 储存到外设
 271 0144 8165     	        str r1, [r0, # 0x58]
 272              		@ adc dma
 273 0146 8048     		ldr r0, = 0x40020000
 274 0148 8449     		ldr r1, = 0x40012440
 275 014a 0161     		str r1, [r0, # 0x10]
 276 014c 8449     		ldr r1, = dianyabiao
 277 014e 4161     		str r1, [r0, # 0x14]
 278 0150 8049     		ldr r1, =  100
 279 0152 C160     		str r1, [r0, # 0x0c]
 280 0154 8349     		ldr r1, = 0x5a1		@ 5a1
 281 0156 8160     		str r1, [r0, # 0x08]
 282              	
 283              		
 284              	tim1chushiha:
 285 0158 8348     	        ldr r0, = 0x40012c00 @ tim1_cr1
 286 015a 0021     	        movs r1, # 0
 287 015c 8162     	        str r1, [r0, # 0x28] @ psc
 288 015e 8349     	        ldr r1, = 47
 289 0160 C162     	        str r1, [r0, # 0x2c] @ ARR
 290              		@	movs r1, # 0x40
 291 0162 2021     		movs r1, # 0x20
 292 0164 4160     		str r1, [r0, # 0x04] @ TRGO
 293 0166 3821     		movs r1, # 0x38
 294 0168 8161     		str r1, [r0, # 0x18] @ ccmr1 cc1
 295 016a 2F21     		movs r1, # 47
 296 016c 4163     		str r1, [r0, # 0x34]
 297 016e 8049     	        ldr r1, = 0x68
 298 0170 C161     	        str r1, [r0, # 0x1c] @ ccmr2  CC3
 299 0172 8049     	        ldr r1, = 0x100    @  CC3
 300 0174 0162     	        str r1, [r0, # 0x20] @ ccer
 301 0176 8049     	        ldr r1, = 0x8000
 302 0178 4164     	        str r1, [r0, # 0x44] @ BDTR
 303 017a 8049     	        ldr r1, = 0x800 @ CC3 DMA
 304 017c C160     	        str r1, [r0, # 0x0c] @ DIER
 305 017e 8049     	        ldr r1, = 0x81
 306 0180 0160     	        str r1, [r0]
 307              	
 308              	
 309              	
 310              	_lcdchushihua:
 311 0182 3320     		movs r0, # 0x33
 312 0184 0021     		movs r1, # 0
 313 0186 00F042FB 		bl _xielcd
 314 018a 00F03BFB 		bl _lcdyanshi
 315 018e 3220     		movs r0, # 0x32
 316 0190 0021     		movs r1, # 0
 317 0192 00F03CFB 		bl _xielcd
 318 0196 00F035FB 		bl _lcdyanshi
 319 019a 2820     		movs r0, # 0x28
 320 019c 0021     		movs r1, # 0
 321 019e 00F036FB 		bl _xielcd
ARM GAS  1.s 			page 7


 322 01a2 00F02FFB 		bl _lcdyanshi
 323 01a6 0C20     		movs r0, # 0x0c
 324 01a8 0021     		movs r1, # 0
 325 01aa 00F030FB 		bl _xielcd
 326 01ae 00F029FB 		bl _lcdyanshi
 327 01b2 0120     		movs r0, # 0x01
 328 01b4 0021     		movs r1, # 0
 329 01b6 00F02AFB 		bl _xielcd
 330 01ba 00F023FB 		bl _lcdyanshi
 331              	
 332              	@	movs r0, # 0x80
 333              	@	ldr r1, = lcdshuju
 334              	@	movs r2, # 16
 335              	@	movs r3, # 0xff
 336              	@	bl _lcdxianshi
 337              		
 338 01be 7148     		ldr r0, = liangcheng
 339 01c0 0021     		movs r1, # 0x00
 340 01c2 0160     		str r1, [r0]
 341 01c4 F6E0     		b dd
 342              	
 343              	ting:
 344 01c6 00F020FA 		bl __zi_dong_liang_cheng
 345 01ca 00F08DFA 	        bl _jianbo
 346 01ce 00F0FAF9 		bl __zhen_fu_lv_bo
 347 01d2 00F025F9 		bl __zu_kang_ji_suan
 348 01d6 6C48     		ldr r0, = dianrongzhi
 349 01d8 0821     	        movs r1, # 8
 350 01da 0068     		ldr r0, [r0]
 351 01dc 4E4A     	        ldr r2, = asciimabiao
 352 01de FF23     	        movs r3, # 0xff
 353 01e0 00F051FB 	        bl _zhuanascii
 354 01e4 8520     	        movs r0, # 0x85
 355 01e6 4C49     	        ldr r1, = asciimabiao
 356 01e8 0822     	        movs r2, # 8
 357 01ea 00F0FDFA 	        bl _lcdxianshi
 358 01ee 6548     		ldr r0, = liangcheng
 359 01f0 0168     		ldr r1, [r0]
 360              	__liangcheng100k:
 361 01f2 0029     		cmp r1, # 0x00
 362 01f4 19D1     		bne __liangcheng10k
 363 01f6 6548     	        ldr r0, = dianzuzhi
 364 01f8 6549     	        ldr r1, = 1000
 365 01fa 0068     	        ldr r0, [r0]
 366 01fc 00F05EFB 		bl _chufa
 367 0200 0421     		movs r1, # 4
 368 0202 454A     		ldr r2, = asciimabiao
 369 0204 FF23     		movs r3, # 0xff
 370 0206 00F03EFB 	        bl _zhuanascii
 371 020a C320     		movs r0, # 0xc3
 372 020c 4249     		ldr r1, = asciimabiao
 373 020e 0422     		movs r2, # 4
 374 0210 00F0EAFA 	        bl _lcdxianshi
 375 0214 C720     		movs r0, # 0xc7
 376 0216 5F49     	        ldr r1, = qianou
 377 0218 0222     	        movs r2, # 2
 378 021a 00F0E5FA 	        bl _lcdxianshi
ARM GAS  1.s 			page 8


 379 021e C920     		movs r0, # 0xc9
 380 0220 5D49     	        ldr r1, = kong
 381 0222 0122     	        movs r2, # 1
 382 0224 00F0E0FA 	        bl _lcdxianshi
 383 0228 48E0     		b __xian_shi_qi_ta
 384              	__liangcheng10k:
 385 022a 5648     	        ldr r0, = liangcheng
 386 022c 0168     	        ldr r1, [r0]
 387 022e 4029     		cmp r1, # 0x40
 388 0230 14D1     		bne __liangcheng1k
 389 0232 5648     	        ldr r0, = dianzuzhi
 390 0234 4749     	        ldr r1, = 100
 391 0236 0068     	        ldr r0, [r0]
 392 0238 00F040FB 	        bl _chufa
 393 023c 0521     	        movs r1, # 5
 394 023e 364A     	        ldr r2, = asciimabiao
 395 0240 0323     		movs r3, # 3
 396 0242 00F020FB 	        bl _zhuanascii
 397 0246 C320     	        movs r0, # 0xc3
 398 0248 3349     	        ldr r1, = asciimabiao
 399 024a 0522     	        movs r2, # 5
 400 024c 00F0CCFA 	        bl _lcdxianshi
 401 0250 C820     	        movs r0, # 0xc8
 402 0252 5049     	        ldr r1, = qianou
 403 0254 0222     	        movs r2, # 2
 404 0256 00F0C7FA 	        bl _lcdxianshi
 405 025a 2FE0     		b __xian_shi_qi_ta
 406              	__liangcheng1k:
 407 025c 4948     	        ldr r0, = liangcheng
 408 025e 0168     	        ldr r1, [r0]
 409 0260 8029     	        cmp r1, # 0x80
 410 0262 14D1     	        bne __liangcheng100r
 411 0264 4948     		ldr r0, = dianzuzhi
 412 0266 4D49     	        ldr r1, = 10
 413 0268 0068     	        ldr r0, [r0]
 414 026a 00F027FB 	        bl _chufa
 415 026e 0521     	        movs r1, # 5
 416 0270 294A     	        ldr r2, = asciimabiao
 417 0272 0223     	        movs r3, # 2
 418 0274 00F007FB 	        bl _zhuanascii
 419 0278 C320     	        movs r0, # 0xc3
 420 027a 2749     	        ldr r1, = asciimabiao
 421 027c 0522     	        movs r2, # 5
 422 027e 00F0B3FA 	        bl _lcdxianshi
 423 0282 C820     	        movs r0, # 0xc8
 424 0284 4349     	        ldr r1, = qianou
 425 0286 0222     	        movs r2, # 2
 426 0288 00F0AEFA 	        bl _lcdxianshi
 427 028c 16E0     		b __xian_shi_qi_ta
 428              	__liangcheng100r:
 429 028e 3F48     	        ldr r0, = dianzuzhi
 430 0290 0421     		movs r1, # 4
 431 0292 0068     	        ldr r0, [r0]
 432 0294 204A     	        ldr r2, = asciimabiao
 433 0296 FF23     	        movs r3, # 0xff
 434 0298 00F0F5FA 	        bl _zhuanascii
 435 029c C320     	        movs r0, # 0xc3
ARM GAS  1.s 			page 9


 436 029e 1E49     	        ldr r1, = asciimabiao
 437 02a0 0422     	        movs r2, # 4
 438 02a2 00F0A1FA 	        bl _lcdxianshi
 439 02a6 C720     	        movs r0, # 0xc7
 440 02a8 3D49     	        ldr r1, = ou
 441 02aa 0122     	        movs r2, # 1
 442 02ac 00F09CFA 	        bl _lcdxianshi
 443 02b0 C820     	        movs r0, # 0xc8
 444 02b2 3949     	        ldr r1, = kong
 445 02b4 0222     	        movs r2, # 2
 446 02b6 00F097FA 	        bl _lcdxianshi
 447 02ba FFE7     	        b __xian_shi_qi_ta
 448              	
 449              	__xian_shi_qi_ta:
 450 02bc 3148     		ldr r0, = liangcheng
 451 02be 0068     		ldr r0, [r0]
 452 02c0 8009     		lsrs r0, r0, # 6
 453 02c2 0121     		movs r1, # 1
 454 02c4 144A     	        ldr r2, = asciimabiao
 455 02c6 FF23     	        movs r3, # 0xff
 456 02c8 00F0DDFA 	        bl _zhuanascii
 457 02cc 8020     	        movs r0, # 0x80
 458 02ce 1249     	        ldr r1, = asciimabiao
 459 02d0 0122     	        movs r2, # 1
 460 02d2 00F089FA 	        bl _lcdxianshi
 461              	
 462 02d6 C120     	        movs r0, # 0xc1
 463 02d8 3249     	        ldr r1, = dianzu
 464 02da 0222     	        movs r2, # 2
 465 02dc 00F084FA 	        bl _lcdxianshi
 466 02e0 CB20     	        movs r0, # 0xcb
 467 02e2 3149     	        ldr r1, = pinlv
 468 02e4 0522     	        movs r2, # 5
 469 02e6 00F07FFA 	        bl _lcdxianshi
 470              	__xian_shi_dian_rong:
 471 02ea 8320     		movs r0, # 0x83
 472 02ec 2F49     		ldr r1, = dianrong
 473 02ee 0222     		movs r2, # 2
 474 02f0 00F07AFA 		bl _lcdxianshi
 475 02f4 8E20     	        movs r0, # 0x8e
 476 02f6 2E49     	        ldr r1, = pifa
 477 02f8 0222     	        movs r2, # 2
 478 02fa 00F075FA 		bl _lcdxianshi
 479              	
 480 02fe 62E7     		b ting
 481              	
 482 0300 FFFF0000 		.ltorg
 482      00200240 
 482      00100240 
 482      01000100 
 482      02001100 
 483              	
 484              	dd:
 485 03b4 E748     		ldr r0, = liangcheng
 486 03b6 8021     		movs r1, # 0x80
 487 03b8 0160     		str r1, [r0]
 488 03ba 0068     	        ldr r0, [r0]
ARM GAS  1.s 			page 10


 489 03bc 8009     		lsrs r0, r0, # 6
 490 03be 0121     	        movs r1, # 1
 491 03c0 E54A     	        ldr r2, = asciimabiao
 492 03c2 FF23     	        movs r3, # 0xff
 493 03c4 00F05FFA 	        bl _zhuanascii
 494 03c8 C720     	        movs r0, # 0xc7
 495 03ca E349     	        ldr r1, = asciimabiao
 496 03cc 0122     		movs r2, # 1
 497 03ce 00F00BFA 		bl _lcdxianshi
 498 03d2 00F089F9 	        bl _jianbo
 499 03d6 00F085F8 		bl __xian_shi_shang_xia_bi
 500 03da EBE7     		b dd
 501              	
 502              	__ji_suan_fu_du:    @ 计算幅度
 503              	                @ 入r0= 实部，r1= 虚部
 504              	                @ 出r0 = 幅度
 505              	                @ Mag ~=Alpha * max(|I|, |Q|) + Beta * min(|I|, |Q|)
 506              	                @ Alpha * Max + Beta * Min
 507 03dc 0EB5     	        push {r1-r3,lr}
 508 03de 0000     	        movs r0, r0
 509 03e0 01D5     	        bpl _shibubushifushu
 510 03e2 C043     	        mvns r0, r0                             @ 是负数转成正数
 511 03e4 0130     	        adds r0, r0, # 1
 512              	_shibubushifushu:                               @ 实部不是负数
 513 03e6 0900     	        movs r1, r1
 514 03e8 01D5     	        bpl _xububushifushu
 515 03ea C943     	        mvns r1, r1                             @ 是负数转成正数
 516 03ec 0131     	        adds r1, r1, # 1
 517              	_xububushifushu:                                @ 虚部不是负数
 518 03ee 0028     	        cmp r0, # 0
 519 03f0 01D1     	        bne _panduanxubushibushi0
 520 03f2 0846     	        mov r0, r1
 521 03f4 0EBD     	        pop {r1-r3,pc}
 522              	_panduanxubushibushi0:	
 523 03f6 0029     		cmp r1, # 0
 524 03f8 00D1     		bne _jisuanfudu1
 525 03fa 0EBD     		pop {r1-r3,pc}
 526              	_jisuanfudu1:
 527 03fc D74A     		ldr r2, = 31066		@ Alpha q15 0.948059448969
 528 03fe D84B     		ldr r3, = 12867		@ Beta q15 0.392699081699
 529 0400 8142     		cmp r1, r0
 530 0402 06D8     		bhi _alpha_min_beta_max
 531              	_alpha_max_beta_min:
 532 0404 5043     		muls r0, r0, r2
 533 0406 5943     		muls r1, r1, r3
 534 0408 C013     		asrs r0, r0, # 15
 535 040a C913     		asrs r1, r1, # 15
 536 040c 4018     		adds r0, r0, r1
 537 040e 0121     		movs r1, # 1
 538 0410 0EBD     		pop {r1-r3,pc}
 539              	_alpha_min_beta_max:
 540 0412 5843     		muls r0, r0, r3
 541 0414 5143     		muls r1, r1, r2
 542 0416 C013     		asrs r0, r0, # 15
 543 0418 C913     		asrs r1, r1, # 15
 544 041a 4018     		adds r0, r0, r1
 545 041c 0021     		movs r1, # 0
ARM GAS  1.s 			page 11


 546 041e 0EBD     		pop {r1-r3,pc}
 547              		
 548              	__zu_kang_ji_suan:
 549 0420 FFB5     		push {r0-r7,lr}
 550 0422 D048     		ldr r0, = shang_bi_shi_bu
 551 0424 D049     		ldr r1, = shang_bi_xu_bu
 552 0426 D14A     		ldr r2, = xia_bi_shi_bu
 553 0428 D14B     		ldr r3, = xia_bi_xu_bu
 554 042a CA4C     		ldr r4, = liangcheng
 555 042c 0068     		ldr r0, [r0]
 556 042e 0968     		ldr r1, [r1]
 557 0430 1268     		ldr r2, [r2]
 558 0432 1B68     		ldr r3, [r3]
 559 0434 2568     		ldr r5, [r4]
 560              	__c_liang_cheng_100k:
 561 0436 002D     	        cmp r5, # 0x00
 562 0438 01D1     		bne __c_liang_cheng10k
 563 043a CE4C     	        ldr r4, = 100000
 564 043c 08E0     		b __ji_suan_dian_rong
 565              	__c_liang_cheng10k:
 566 043e 402D     	        cmp r5, # 0x40
 567 0440 01D1     	        bne __c_liang_cheng1k
 568 0442 CD4C     	        ldr r4, = 10000
 569 0444 04E0     	        b __ji_suan_dian_rong
 570              	__c_liang_cheng1k:
 571 0446 802D     	        cmp r5, # 0x80
 572 0448 01D1     		bne __c_liang_cheng100ou
 573 044a CC4C     	        ldr r4, = 1000
 574 044c 00E0     	        b __ji_suan_dian_rong
 575              	__c_liang_cheng100ou:
 576 044e 6424     		movs r4, # 100
 577              	__ji_suan_dian_rong:
 578              	@ Z=R+jx
 579              	@ Z=R*[(a+bi)/(c+di)]=R*[(ac+bd)/(c*c+d*d)+(bc-ad)/(c*c+d*d)]
 580              	@c=1/[(2*pi*f)*xc]
 581 0450 10B4     		push {r4}
 582 0452 0446     		mov r4, r0
 583 0454 0D46     		mov r5, r1
 584 0456 1646     		mov r6, r2
 585 0458 1F46     		mov r7, r3
 586 045a 5043     		muls r0, r0, r2		@ac
 587 045c 5943     		muls r1, r1, r3		@bd
 588 045e 4018     		adds r0, r0, r1		@ac+bd
 589 0460 5243     		muls r2, r2, r2		@c*c
 590 0462 5B43     		muls r3, r3, r3		@d*d
 591 0464 D218     		adds r2, r2, r3		@c*c+d*d
 592 0466 1146     		mov r1, r2
 593 0468 8002     		lsls r0, r0, # 10
 594 046a 00F027FA 		bl _chufa		@(ac+bd)/(c*c+d*d)
 595 046e 01B4     		push {r0}
 596 0470 7543     		muls r5, r5, r6		@ bc
 597 0472 7C43     		muls r4, r4, r7		@ ad
 598 0474 2D1B     		subs r5, r5, r4		@ bc-ad
 599 0476 1146     		mov r1, r2
 600 0478 2846     		mov r0, r5
 601 047a 8002     		lsls r0, r0, # 10
 602 047c 00F01EFA 		bl _chufa
ARM GAS  1.s 			page 12


 603 0480 0146     		mov r1, r0		@ R1=结果虚部
 604 0482 01BC     		pop {r0}		@ R0=结果实部
 605 0484 04BC     		pop {r2}		@ R2=R（量程）
 606 0486 5043     		muls r0, r0, r2		@ 
 607 0488 5143     		muls r1, r1, r2		@
 608 048a 8012     		asrs r0, r0, # 10
 609 048c BC4A     		ldr r2, = dianzuzhi
 610 048e 8912     		asrs r1, r1, # 10
 611 0490 1060     		str r0, [r2]
 612 0492 FFF7A3FF 		bl __ji_suan_fu_du
 613 0496 BB4B     		ldr r3, = 62831		@ 2pi*10khz
 614 0498 0146     		mov r1, r0
 615 049a 5943     		muls r1, r1, r3
 616 049c 0C46     		mov r4, r1
 617 049e BA48     		ldr r0, = 1000000000
 618 04a0 8142     		cmp r1, r0
 619 04a2 0DD8     		bhi __shu_tai_da
 620 04a4 00F00AFA 		bl _chufa
 621 04a8 0346     		mov r3, r0
 622 04aa B44A     		ldr r2, = 1000
 623 04ac 0846     		mov r0, r1
 624 04ae 5043     		muls r0, r0, r2
 625 04b0 5343     		muls r3, r3, r2
 626 04b2 2146     		mov r1, r4
 627 04b4 00F002FA 		bl _chufa
 628 04b8 B44A     		ldr r2, = dianrongzhi
 629 04ba 1B18     		adds r3, r3, r0
 630 04bc 1360     		str r3, [r2]
 631 04be FFBD     		pop {r0-r7,pc}
 632              	__shu_tai_da:
 633 04c0 890A     		lsrs r1, r1, # 10
 634 04c2 00F0FBF9 		bl _chufa
 635 04c6 AD49     		ldr r1, = 1000
 636 04c8 8002     		lsls r0, r0, # 10
 637 04ca 00F0F7F9 		bl _chufa
 638 04ce AF4A     		ldr r2, = dianrongzhi
 639 04d0 1060     		str r0, [r2]
 640 04d2 FFBD     		pop {r0-r7,pc}
 641              	__fu_zhi_nei_cun:
 642              		@ 入口 R0 = 要复制的地址，R1=目标地址，R2=复制的数量
 643 04d4 10B5     		push {r4,lr}
 644 04d6 0024     		movs r4, # 0
 645              	__fu_zhi_xun_huan:	
 646 04d8 035B     		ldrh r3, [r0, r4]
 647 04da 0B53     		strh r3, [r1, r4]
 648 04dc 0234     		adds r4, r4, # 2
 649 04de 013A     		subs r2, r2, # 1
 650 04e0 FAD1     		bne __fu_zhi_xun_huan
 651 04e2 10BD     		pop {r4,pc}
 652              	
 653              		
 654              	__xian_shi_shang_xia_bi:
 655              	@入口 R0= 下臂实部，R1=上臂实部，R2=下臂虚部，R3=上臂虚部
 656 04e4 0FB5     		push {r0-r3,lr}
 657 04e6 8046     		mov r8, r0
 658 04e8 8946     		mov r9, r1
 659 04ea 9246     		mov r10, r2
ARM GAS  1.s 			page 13


 660 04ec 9B46     		mov r11, r3
 661              	@显示上臂实部
 662 04ee 0C00     		movs r4, r1
 663 04f0 07D5     		bpl __shang_bi_shi_bu_zheng
 664 04f2 8020     	        movs r0, # 0x80
 665 04f4 A649     	        ldr r1, = _fu
 666 04f6 0122     	        movs r2, # 1
 667 04f8 00F076F9 	        bl _lcdxianshi
 668 04fc E443     		mvns r4, r4
 669 04fe 0134     		adds r4, r4, # 1
 670 0500 04E0     		b __xian_shi_shang_bi_shi_bu
 671              	__shang_bi_shi_bu_zheng:	
 672 0502 8020     	        movs r0, # 0x80
 673 0504 A349     		ldr r1, = kong
 674 0506 0122     	        movs r2, # 1
 675 0508 00F06EF9 	        bl _lcdxianshi
 676              	__xian_shi_shang_bi_shi_bu:
 677 050c 2046     		mov r0, r4
 678 050e 0521     		movs r1, # 5
 679 0510 914A     		ldr r2, = asciimabiao
 680 0512 FF23     		movs r3, # 0xff
 681 0514 00F0B7F9 		bl _zhuanascii
 682 0518 8120     		movs r0, # 0x81
 683 051a 8F49     		ldr r1, = asciimabiao
 684 051c 0522     		movs r2, # 5
 685 051e 00F063F9 		bl _lcdxianshi
 686              	@显示上臂虚部
 687 0522 5C46     	        mov r4, r11
 688 0524 2400     		movs r4, r4
 689 0526 07D5     	        bpl __shang_bi_xu_bu_zheng
 690 0528 C020     	        movs r0, # 0xc0
 691 052a 9949     	        ldr r1, = _fu
 692 052c 0122     	        movs r2, # 1
 693 052e 00F05BF9 	        bl _lcdxianshi
 694 0532 E443     	        mvns r4, r4
 695 0534 0134     	        adds r4, r4, # 1
 696 0536 04E0     	        b __xian_shi_shang_bi_xu_bu
 697              	__shang_bi_xu_bu_zheng:
 698 0538 C020     	        movs r0, # 0xc0
 699 053a 9649     		ldr r1, = kong
 700 053c 0122     	        movs r2, # 1
 701 053e 00F053F9 	        bl _lcdxianshi
 702              	__xian_shi_shang_bi_xu_bu:
 703 0542 2046     	        mov r0, r4
 704 0544 0521     	        movs r1, # 5
 705 0546 844A     	        ldr r2, = asciimabiao
 706 0548 FF23     	        movs r3, # 0xff
 707 054a 00F09CF9 		bl _zhuanascii
 708 054e C120     		movs r0, # 0xc1
 709 0550 8149     	        ldr r1, = asciimabiao
 710 0552 0522     	        movs r2, # 5
 711 0554 00F048F9 		bl _lcdxianshi
 712              	@显示下臂实部：
 713 0558 4446     	        mov r4, r8
 714 055a 2400     		movs r4, r4
 715 055c 07D5     	        bpl __xia_bi_shi_bu_zheng
 716 055e 8A20     	        movs r0, # 0x8a
ARM GAS  1.s 			page 14


 717 0560 8B49     	        ldr r1, = _fu
 718 0562 0122     	        movs r2, # 1
 719 0564 00F040F9 	        bl _lcdxianshi
 720 0568 E443     	        mvns r4, r4
 721 056a 0134     		adds r4, r4, # 1
 722 056c 04E0     		b __xian_shi_xia_bi_shi_bu
 723              	__xia_bi_shi_bu_zheng:
 724 056e 8A20     	        movs r0, # 0x8a
 725 0570 8849     	        ldr r1, = kong
 726 0572 0122     	        movs r2, # 1
 727 0574 00F038F9 		bl _lcdxianshi
 728              	__xian_shi_xia_bi_shi_bu:
 729 0578 2046     		mov r0, r4
 730 057a 0521     		movs r1, # 5
 731 057c 764A     		ldr r2, = asciimabiao
 732 057e FF23     		movs r3, # 0xff
 733 0580 00F081F9 		bl _zhuanascii
 734 0584 8B20     	        movs r0, # 0x8b
 735 0586 7449     	        ldr r1, = asciimabiao
 736 0588 0522     	        movs r2, # 5
 737 058a 00F02DF9 	        bl _lcdxianshi
 738              	
 739              	@显示下臂虚部
 740 058e 5446     		mov r4, r10
 741 0590 2400     		movs r4, r4
 742 0592 07D5     	        bpl __xia_bi_xu_bu_zheng
 743 0594 CA20     	        movs r0, # 0xca
 744 0596 7E49     	        ldr r1, = _fu
 745 0598 0122     	        movs r2, # 1
 746 059a 00F025F9 	        bl _lcdxianshi
 747 059e E443     	        mvns r4, r4
 748 05a0 0134     	        adds r4, r4, # 1
 749 05a2 04E0     	        b __xian_shi_xia_bi_xu_bu
 750              	__xia_bi_xu_bu_zheng:
 751 05a4 CA20     	        movs r0, # 0xca
 752 05a6 7B49     	        ldr r1, = kong
 753 05a8 0122     	        movs r2, # 1
 754 05aa 00F01DF9 	        bl _lcdxianshi
 755              	__xian_shi_xia_bi_xu_bu:
 756 05ae 2046     	        mov r0, r4
 757 05b0 0521     	        movs r1, # 5
 758 05b2 694A     	        ldr r2, = asciimabiao
 759 05b4 FF23     	        movs r3, # 0xff
 760 05b6 00F066F9 	        bl _zhuanascii
 761 05ba CB20     	        movs r0, # 0xcb
 762 05bc 6649     	        ldr r1, = asciimabiao
 763 05be 0522     	        movs r2, # 5
 764 05c0 00F012F9 	        bl _lcdxianshi
 765 05c4 0FBD     		pop {r0-r3,pc}
 766              	
 767              	
 768              	__zhen_fu_lv_bo:
 769              		@ 入口 R0= 下臂实部，R1=上臂实部，R2=下臂虚部，R3=上臂虚部
 770 05c6 FFB5     		push {r0-r7,lr}
 771 05c8 684F     		ldr r7, = xia_bi_shi_bu
 772 05ca 1546     		mov r5, r2
 773 05cc 1E46     		mov r6, r3
ARM GAS  1.s 			page 15


 774 05ce 0C46     		mov r4, r1
 775 05d0 0346     		mov r3, r0
 776 05d2 7148     		ldr r0, = lvboqihuanchong
 777 05d4 7149     		ldr r1, = 32
 778 05d6 724A     		ldr r2, = lvboqizhizhen
 779 05d8 00F0A8F8 		bl _lvboqi
 780 05dc 3860     		str r0, [r7]			@保存下臂实部
 781 05de 2346     	        mov r3, r4
 782 05e0 7048     	        ldr r0, = lvboqihuanchong1
 783 05e2 6E49     		ldr r1, = 32
 784 05e4 704A     		ldr r2, = lvboqizhizhen1
 785 05e6 00F0A1F8 	        bl _lvboqi
 786 05ea 7860     	        str r0, [r7, # 0x04]		@保存上臂实部
 787 05ec 2B46     		mov r3, r5
 788 05ee 6F48     		ldr r0, = lvboqihuanchong2
 789 05f0 6A49     	        ldr r1, = 32
 790 05f2 6F4A     	        ldr r2, = lvboqizhizhen2
 791 05f4 00F09AF8 		bl _lvboqi
 792 05f8 B860     		str r0, [r7, # 0x08]		@保存下臂虚部
 793              	
 794 05fa 3346     	        mov r3, r6
 795 05fc 6D48     		ldr r0, = lvboqihuanchong3
 796 05fe 6749     		ldr r1, = 32
 797 0600 6D4A     		ldr r2, = lvboqizhizhen3
 798 0602 00F093F8 	        bl _lvboqi
 799 0606 F860     		str r0, [r7, # 0x0c]		@保存上臂虚部
 800 0608 FFBD     		pop {r0-r7,pc}
 801              		
 802              	
 803              	__zi_dong_liang_cheng:
 804              		@ 0xc0=100,0x80=1k
 805              		@0x40=10k,0x00=100k
 806 060a 7FB5     		push {r0-r6,lr}
 807 060c 6B48     		ldr r0, = zidongliangchengyanshi
 808 060e 1E22     		movs r2, # 30
 809 0610 0168     		ldr r1, [r0]
 810 0612 0131     		adds r1, r1, # 1
 811 0614 0160     		str r1, [r0]
 812 0616 9142     		cmp r1, r2
 813 0618 17D3     		bcc __liang_cheng_fan_hui
 814 061a 0021     		movs r1, # 0
 815 061c 0160     		str r1, [r0]
 816 061e 5148     		ldr r0, = shang_bi_shi_bu
 817 0620 524D     		ldr r5, = xia_bi_shi_bu
 818 0622 4C49     		ldr r1, = liangcheng
 819 0624 0A68     		ldr r2, [r1]
 820 0626 664E     		ldr r6, = 2200
 821 0628 664B     		ldr r3, = 20
 822 062a C02A     		cmp r2, # 0xc0
 823 062c 07D0     		beq __xuan_kong
 824              	__pan_duan_liang_cheng:
 825 062e 2C68     		ldr r4, [r5]
 826 0630 B442     		cmp r4, r6
 827 0632 02D2     		bcs __gai_liang_cheng
 828 0634 0468     		ldr r4, [r0]
 829 0636 9C42     		cmp r4,	r3
 830 0638 00D2     		bcs __bao_cun_liang_cheng
ARM GAS  1.s 			page 16


 831              	__gai_liang_cheng:
 832 063a 4032     		adds r2, r2, # 0x40
 833              	__bao_cun_liang_cheng:
 834 063c 0A60     		str r2, [r1]
 835              	__xuan_kong:
 836 063e 4B48     		ldr r0, = xia_bi_shi_bu
 837 0640 0468     		ldr r4, [r0]
 838 0642 142C     		cmp r4, # 20
 839 0644 01D2     		bcs __liang_cheng_fan_hui
 840              	__liang_cheng_chong_zhi:
 841 0646 0022     		movs r2, # 0
 842 0648 0A60     		str r2, [r1]
 843              	__liang_cheng_fan_hui:	
 844 064a 7FBD     		pop {r0-r6,pc}
 845              	__jianbo:
 846              		@入口R0=0（上臂）1（下臂）
 847              		@出口R0=实部 R1=虚部
 848 064c FCB5     		push {r2-r7,lr}
 849 064e 5E4C     		ldr r4, = 0x48000000
 850 0650 5E4D     		ldr r5, = 0x200
 851 0652 5F4E     		ldr r6, = 0x40012428
 852 0654 0028     		cmp r0, # 0
 853 0656 01D1     		bne __xia_bi_kai
 854 0658 A561     		str r5, [r4, # 0x18]	@上臂开
 855 065a 00E0     		b __tong_dao_xuan_ze
 856              	__xia_bi_kai:
 857 065c A562     		str r5, [r4, # 0x28]	@ 下臂开
 858              	__tong_dao_xuan_ze:
 859 065e 0124     		movs r4, # 1
 860 0660 3460     		str r4, [r6]		@ 正相通道开
 861 0662 00F04EF8 		bl _jianboyanshi
 862 0666 5B48     		ldr r0, = dianyabiao
 863 0668 5B49     		ldr r1, = zhengxiangbiao
 864 066a 6422     		movs r2, # 100
 865 066c FFF732FF 		bl __fu_zhi_nei_cun
 866 0670 0224     		movs r4, # 2
 867 0672 3460     		str r4, [r6]		@ 反相通道开
 868 0674 00F045F8 		bl _jianboyanshi
 869 0678 5648     		ldr r0, = dianyabiao
 870 067a 5849     		ldr r1, = fanxiangbiao
 871 067c 6422     		movs r2, # 100
 872 067e FFF729FF 		bl __fu_zhi_nei_cun
 873 0682 5548     		ldr r0, = zhengxiangbiao
 874 0684 5549     		ldr r1, = fanxiangbiao
 875 0686 00F001F8 		bl __DFT_ji_suan
 876 068a FCBD     		pop {r2-r7,pc}
 877              	
 878              	__DFT_ji_suan:
 879              		@入口R0=正相表，R1=反相表
 880              		@出口 R0= 实部，R1=虚部
 881 068c FCB5     		push {r2-r7,lr}
 882 068e 4446     		mov r4, r8
 883 0690 4D46     		mov r5, r9
 884 0692 5646     		mov r6, r10
 885 0694 70B4     		push {r4-r6}
 886 0696 0026     		movs r6, # 0
 887 0698 B046     		mov r8, r6
ARM GAS  1.s 			page 17


 888 069a B146     		mov r9, r6
 889 069c C822     		movs r2, # 200
 890 069e 9246     		mov r10, r2
 891 06a0 3246     		mov r2, r6
 892              	__ji_suan_dft_xun_huan:
 893 06a2 835A     		ldrh r3, [r0, r2]
 894 06a4 8C5A     		ldrh r4, [r1, r2]
 895 06a6 002B     		cmp r3, # 0
 896 06a8 00D0     		beq __qu_fan_r4
 897 06aa 02E0     		b __ji_suan_dft
 898              	__qu_fan_r4:
 899 06ac E443     		mvns r4, r4
 900 06ae 0134     		adds r4, r4, # 1
 901 06b0 2346     		mov r3, r4
 902              	__ji_suan_dft:
 903 06b2 4B4D     		ldr r5, = xuan_zhuan_yin_zi
 904 06b4 AF59     		ldr r7, [r5, r6]
 905 06b6 0436     		adds r6, r6, # 4
 906 06b8 5F43     		muls r7, r7, r3		@ 实部
 907 06ba FF13     		asrs r7, r7, # 15
 908 06bc 4446     		mov r4, r8
 909 06be E419     		adds r4, r4, r7
 910 06c0 A046     		mov r8, r4
 911 06c2 AF59     		ldr r7, [r5, r6]
 912 06c4 0436     		adds r6, r6, # 4
 913 06c6 5F43     		muls r7, r7, r3		@ 虚部
 914 06c8 FF13     		asrs r7, r7, # 15
 915 06ca FF43     		mvns r7, r7
 916 06cc 0137     		adds r7, r7, # 1
 917 06ce 4C46     		mov r4, r9
 918 06d0 E419     		adds r4, r4, r7
 919 06d2 A146     		mov r9, r4
 920 06d4 0232     		adds r2, r2, # 2
 921 06d6 5245     		cmp r2, r10
 922 06d8 E3D1     		bne __ji_suan_dft_xun_huan
 923 06da 4046     		mov r0, r8
 924 06dc 4946     		mov r1, r9
 925 06de 70BC     		pop {r4-r6}
 926 06e0 A046     		mov r8, r4
 927 06e2 A946     		mov r9, r5
 928 06e4 B246     		mov r10, r6
 929 06e6 FCBD     		pop {r2-r7,pc}
 930              	_jianbo:
 931 06e8 30B5     		push {r4-r5,lr}
 932 06ea 0020     		movs r0, # 0
 933 06ec FFF7AEFF 		bl __jianbo
 934 06f0 03B4     		push {r0,r1}
 935 06f2 0120     		movs r0, # 1
 936 06f4 FFF7AAFF 		bl __jianbo
 937 06f8 30BC     		pop {r4,r5}	
 938 06fa 2B00     		movs r3, r5
 939 06fc 0A00     		movs r2, r1
 940 06fe 2100     		movs r1, r4
 941 0700 30BD     		pop {r4-r5,pc}
 942              	_jianboyanshi:
 943 0702 80B5     		push {r7,lr}
 944 0704 374F     		ldr r7, = 0xffff
ARM GAS  1.s 			page 18


 945              	_jianboyanshixunhuan:
 946 0706 013F     		subs r7, r7, # 1
 947 0708 FDD1     		bne _jianboyanshixunhuan
 948 070a 80BD     		pop {r7,pc}
 949              	
 950              	__zhao_zui_da_shu:
 951 070c 1CB5     		push {r2-r4,lr}
 952 070e 3148     		ldr r0, = dianyabiao
 953 0710 6522     		movs r2, # 101
 954 0712 5200     		lsls r2, r2, # 1
 955 0714 0023     		movs r3, # 0
 956              	__zhao:
 957 0716 815A     		ldrh r1, [r0, r2]
 958 0718 9942     		cmp r1, r3
 959 071a 01D3     		bcc __di_zhi_jian
 960 071c 0B46     		mov r3, r1
 961 071e 1446     		mov r4, r2
 962              	__di_zhi_jian:	
 963 0720 023A     		subs r2, r2, # 2
 964 0722 F8D1     		bne __zhao
 965 0724 0146     		mov r1, r0
 966 0726 1846     		mov r0, r3
 967 0728 0919     		adds r1, r1, r4
 968 072a 1CBD     		pop {r2-r4,pc}
 969              		
 970              	_lvboqi:
 971              				@滤波器
 972              				@R0=地址，R1=长度,r2=表指针地址,r3=ADC数值
 973              				@出R0=结果
 974 072c FEB5     		push {r1-r7,lr}	
 975 072e 1568     		ldr r5, [r2]		@读出表指针
 976 0730 4E00     		lsls r6, r1, # 1	
 977 0732 4353     		strh r3, [r0, r5]	@数值写到滤波器缓冲区
 978 0734 0235     		adds r5, r5, # 2
 979 0736 B542     		cmp r5, r6
 980 0738 00D1     		bne _lvboqimeidaohuanchongquding
 981 073a 0025     		movs r5, # 0
 982              	_lvboqimeidaohuanchongquding:
 983 073c 1560     		str r5, [r2]
 984 073e 0027     		movs r7, # 0
 985              	_lvboqixunhuan:
 986 0740 B542     		cmp r5, r6
 987 0742 00D1     		bne _lvbozonghe
 988 0744 0025     		movs r5, # 0
 989              	_lvbozonghe:
 990 0746 445B     		ldrh r4, [r0, r5]
 991 0748 0235     		adds r5, r5, # 2
 992 074a 3F19     		adds r7, r7, r4
 993 074c 0139     		subs r1, r1, # 1
 994 074e F7D1     		bne _lvboqixunhuan
 995 0750 7811     		asrs r0, r7, # 5	@修改
 996 0752 FEBD     		pop {r1-r7,pc}
 997 0754 30000020 		.ltorg
 997      00000020 
 997      5A790000 
 997      43320000 
 997      040A0020 
ARM GAS  1.s 			page 19


 998              	
 999              		
 1000              	_lcdxianshi:	  		@r0=LCD位置，r1=数据地址，r2=长度
 1001 07e8 1FB5     		push {r0-r4,lr}
 1002 07ea 0C46     		mov r4, r1
 1003              	
 1004 07ec 0021     		movs r1, # 0
 1005 07ee 00F00EF8 		bl _xielcd
 1006              	
 1007 07f2 0121     		movs r1, # 1
 1008 07f4 0023     		movs r3, # 0
 1009              	_lcdxianshixunhuan:
 1010 07f6 E05C     		ldrb r0, [r4,r3]
 1011 07f8 00F009F8 		bl _xielcd
 1012 07fc 0133     		adds r3, r3, # 1
 1013 07fe 9342     		cmp r3, r2
 1014 0800 F9D1     		bne _lcdxianshixunhuan
 1015 0802 1FBD     		pop {r0-r4,pc}
 1016              	
 1017              	_lcdyanshi:
 1018 0804 20B5     		push {r5,lr}
 1019 0806 374D     		ldr r5, = 0x2000
 1020              	_lcdyanshixunhuan:
 1021 0808 013D     		subs r5, r5, # 1
 1022 080a FDD1     		bne _lcdyanshixunhuan
 1023 080c 20BD     		pop {r5,pc}
 1024              	
 1025              	_xielcd:			@入R0=8位,r1=0命令,r1=1数据
 1026 080e 3FB5     		push {r0-r5,lr}
 1027 0810 354C     		ldr r4, = liangcheng  @ 量程开关 (第6位和第7位)
 1028 0812 0246     		mov r2, r0
 1029 0814 2568     		ldr r5, [r4]
 1030 0816 1209     		lsrs r2, r2, # 4
 1031 0818 9200     		lsls r2, r2, # 2	@ 高四位
 1032 081a 0007     		lsls r0, r0, # 28
 1033 081c 800E     		lsrs r0, r0, # 26	@ 低四位
 1034 081e C907     		lsls r1, r1, # 31
 1035 0820 01D5     		bpl __lcd_ming_ling
 1036              	__lcd_shu_ju:
 1037 0822 0323     		movs r3, # 0x03		@ RS = 1 E = 1
 1038 0824 00E0     		b __xie_lcd_shu_ju
 1039              	__lcd_ming_ling:
 1040 0826 0223     		movs r3, # 0x02		@ RS = 0 E = 1
 1041              	__xie_lcd_shu_ju:
 1042 0828 5B19     		adds r3, r3, r5
 1043 082a 0146     		mov r1, r0
 1044 082c D218     		adds r2, r2, r3
 1045 082e 1000     		movs r0, r2
 1046 0830 00F00BF8 		bl __74hc595
 1047 0834 0238     		subs r0, r0, # 0x02
 1048 0836 00F008F8 		bl __74hc595
 1049 083a 0846     		mov r0, r1
 1050 083c C018     		adds r0, r0, r3
 1051 083e 00F004F8 		bl __74hc595
 1052 0842 0238     		subs r0, r0, # 0x02
 1053 0844 00F001F8 		bl __74hc595
 1054 0848 3FBD     		pop {r0-r5,pc}
=======
  42              		.equ jishu,			0x20000034
  43              		.equ jianbo,			0x20000038
  44              		.equ dianyabiao,		0x20000040
  45              		.equ dianyabiao1,		0x20000110
  46              		.equ dianyabiao2,		0x200001e0
  47              		.equ lvboqizhizhen,		0x20000600
  48              		.equ lvboqihuanchong,		0x20000604
  49              		.equ lvboqizhizhen1,		0x20000700
  50              		.equ lvboqihuanchong1,		0x20000704
  51              		.equ lvboqizhizhen2,		0x20000800
  52              		.equ lvboqihuanchong2,		0x20000804
  53              		.equ lvboqizhizhen3,		0x20000900
  54              		.equ lvboqihuanchong3,		0x20000904
  55              		.equ xia_bi_shi_bu,		0x20000a00
  56              		.equ shang_bi_shi_bu,		0x20000a04
  57              		.equ xia_bi_xu_bu,		0x20000a08
  58              		.equ shang_bi_xu_bu,		0x20000a0c
  59              		.equ bu_chang_100r,		0x20000a10
  60              		.equ zidongliangchengyanshi,	0x20000a14
  61              		.equ dianzuzhi,			0x20000a18
  62              		.equ dianrongzhi,		0x20000a1c
  63              		.section .text
  64              	vectors:
  65 0000 00100020 		.word STACKINIT
  66 0004 B1000000 		.word _start + 1
  67 0008 21080000 		.word _nmi_handler + 1
  68 000c 23080000 		.word _hard_fault  + 1
  69 0010 00000000 		.word 0
  70 0014 00000000 		.word 0
  71 0018 00000000 		.word 0
  72 001c 00000000 		.word 0
  73 0020 00000000 		.word 0
  74 0024 00000000 		.word 0
  75 0028 00000000 		.word 0
  76 002c 25080000 		.word _svc_handler +1
  77 0030 00000000 		.word 0
  78 0034 00000000 		.word 0
  79 0038 27080000 		.word _pendsv_handler +1
  80 003c 29080000 		.word _systickzhongduan +1               @ 15
  81 0040 37080000 		.word aaa +1     @ _wwdg +1          @ 0
  82 0044 37080000 		.word aaa +1     @_pvd +1            @ 1
  83 0048 37080000 		.word aaa +1     @_rtc +1            @ 2
  84 004c 37080000 		.word aaa +1     @_flash +1          @ 3
  85 0050 37080000 		.word aaa +1	@ _rcc + 1          @ 4
  86 0054 37080000 		.word aaa +1      @_exti0_1  +1      @ 5
  87 0058 37080000 		.word aaa +1      @ _exti2_3 +1      @ 6
  88 005c 37080000 		.word aaa +1       @_exti4_15 +1     @ 7
  89 0060 37080000 		.word aaa +1                         @ 8
  90 0064 37080000 		.word aaa +1 	@_dma1_1  +1    @ 9
  91 0068 37080000 		.word aaa +1    @_dma1_2_3 +1        @ 10
  92 006c 37080000 		.word aaa +1       @_dma1_4_5 +1     @ 11
  93 0070 37080000 		.word aaa +1	 @_adc1 +1          @ 12
  94 0074 37080000 		.word aaa +1       @_tim1_brk_up +1  @ 13
  95 0078 37080000 		.word aaa +1        @ _tim1_cc +1    @ 14
  96 007c 37080000 		.word aaa +1         @_tim2 +1       @ 15
  97 0080 37080000 		.word aaa +1          @_tim3 +1      @ 16
  98 0084 37080000 		.word aaa +1                         @ 17
ARM GAS  1.s 			page 3


  99 0088 37080000 		.word aaa +1		                @ 18
 100 008c 37080000 		.word aaa +1	@_tim14 +1    @ 19
 101 0090 37080000 		.word aaa +1                         @ 20
 102 0094 37080000 		.word aaa +1         @_tim16 +1      @ 21
 103 0098 37080000 		.word aaa +1         @_tim17 +1      @ 22
 104 009c 37080000 		.word aaa +1          @_i2c   +1     @ 23
 105 00a0 37080000 		.word aaa +1                         @ 24
 106 00a4 37080000 		.word aaa +1           @_spi   +1    @ 25
 107 00a8 37080000 		.word aaa +1                         @ 26
 108 00ac 37080000 		.word aaa +1         @_usart1 +1     @ 27
 109              		.align 2
 110              	
 111              	_start:
 112 00b0 9348     		ldr r0, = 0xffff
 113              	yanshi111:
 114 00b2 0138     		subs r0, r0, # 1
 115 00b4 FDD1     		bne yanshi111
 116              		
 117              	shizhong:
 118 00b6 934A     		ldr r2, = 0x40022000   @FLASH访问控制
 119 00b8 3221     		movs r1, # 0x32
 120 00ba 1160     		str r1, [r2]           @FLASH缓冲 缓冲开启
 121 00bc 9248     		ldr r0, = 0x40021000 @ rcc
 122 00be 9349     		ldr r1, = 0x10001
 123 00c0 0160     		str r1, [r0]
 124              	denghse:
 125 00c2 0168     		ldr r1, [r0]
 126 00c4 8903     		lsls r1, r1, # 14
 127 00c6 FCD5     		bpl denghse
 128              	dengpllguan:
 129 00c8 0168     		ldr r1, [r0]
 130 00ca 8901     		lsls r1, r1, # 6
 131 00cc FCD4     		bmi dengpllguan
 132 00ce 9049     	        ldr r1, = 0x110002
 133 00d0 4160     	        str r1, [r0, # 0x04]
 134 00d2 9049     		ldr r1, = 0x1010001
 135 00d4 0160     		str r1, [r0]
 136              	dengpll:
 137 00d6 0168     		ldr r1, [r0]
 138 00d8 8901     		lsls r1, # 6
 139 00da FCD5     		bpl dengpll
 140              		@0x34时钟控制寄存器 2 (RCC_CR2)
 141 00dc 0121     		movs r1, # 0x01
 142 00de 4163     		str r1, [r0, # 0x34]  @ HSI开14M时钟
 143              	dengdai14mshizhongwending:
 144 00e0 416B     		ldr r1, [r0, # 0x34]
 145 00e2 8907     		lsls r1, r1, # 30     @ 左移30位
 146 00e4 FCD5     		bpl dengdai14mshizhongwending  @ 等待14M时钟稳定
 147              	
 148              	_neicunqingling:
 149 00e6 8C48     		ldr r0, = 0x20000000
 150 00e8 0021     		movs r1, # 0
 151 00ea 8C4B     		ldr r3, = 0x1000
 152              	_neicunqinglingxunhuan:
 153 00ec 043B     		subs r3, # 4
 154 00ee C150     		str r1, [r0, r3]
 155 00f0 FCD1     		bne _neicunqinglingxunhuan
ARM GAS  1.s 			page 4


 156              	
 157              	_waisheshizhong:			 @ 外设时钟
 158              		@+0x14=RCC_AHBENR
 159              		@0=DMA @2=SRAM @4=FLITF@6=CRC @17=PA @18=PB @19=PC @20=PD @22=PF
 160 00f2 8548     		ldr r0, = 0x40021000
 161 00f4 8A49     		ldr r1, = 0x460005
 162 00f6 4161     		str r1, [r0, # 0x14]
 163              	
 164              		@+0x18外设时钟使能寄存器 (RCC_APB2ENR)
 165              		@0=SYSCFG @5=USART6EN @9=ADC @11=TIM1 @12=SPI1 @14=USART1 @16=TIM15 @17=TIM16 @18=TIM17 @22=DBGMCU
 166 00f8 8A49     		ldr r1, = 0xa00
 167 00fa 8161     		str r1, [r0, # 0x18]
 168              		@+0X1C=RCC_APB1ENR
 169              		@1=TIM3 @4=TIM6 @5=TIM7 @8=TIM14 @11=WWDG @14=SPI @17=USRT2 @18=USART3 @20=USART5 @21=I2C1
 170              		@22=I2C2 @23=USB @28=PWR
 171              	
 172              	_waishezhongduan:				@外设中断
 173              		@0xE000E100    0-31  写1开，写0没效
 174              		@0XE000E180    0-31 写1关，写0没效
 175              		@0XE000E200    0-31 挂起，写0没效
 176              		@0XE000E280    0-31 清除， 写0没效
 177              	
 178              	@_systick:				@ systick定时器初始化
 179              	
 180              	@	ldr r0, = 0xe000e010
 181              	@	ldr r1, = 0xffffff
 182              	@	str r1, [r0, # 4]
 183              	@	str r1, [r0, # 8]
 184              	@	movs r1, # 0x07
 185              	@	str r1, [r0]
 186              		
 187              	io_she_zhi:
 188              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 189              		@a(0x48000000)b(0x48000400)c(0x48000800)d(0x48000c00)f(0x48001400)
 190              		@ 输入（00），通用输出（01），复用功能（10），模拟（11）
 191              		@偏移0x4 = 端口输出类型 @ （0 推挽），（ 1 开漏）
 192              		@偏移0x8 = 输出速度  00低速， 01中速， 11高速
 193              		@偏移0xC = 上拉下拉 (00无上下拉，  01 上拉， 10下拉)
 194              		@偏移0x10 = 输入数据寄存器
 195              		@偏移0x14 = 输出数据寄存器
 196              		@偏移0x18 = 端口开  0-15置位
 197              		@偏移0x28 = 端口关
 198              		@0X20 = 复用低
 199              		@GPIO口0（0-3位）每个IO口占用4位
 200              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 201              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 202              		@0x24 = 复用高
 203              		@GPIO口8 （0-3位）每个IO口占用4位
 204              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 205              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 206              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 207              	
 208 00fc 8A48     		ldr r0, = 0x48000000
 209 00fe 8B49     		ldr r1, = 0x2824540f
 210 0100 0160     		str r1, [r0]
 211 0102 8B49     		ldr r1, = 0x200
 212 0104 4162     		str r1, [r0, # 0x24]
ARM GAS  1.s 			page 5


 213              	
 214              	
 215              	
 216              	_adcchushihua:
 217 0106 8B48     	        ldr r0, = 0x40012400  @ adc基地址
 218 0108 8B49     	        ldr r1, = 0x80000000
 219 010a 8160     	        str r1, [r0, # 0x08]  @ ADC 控制寄存器 (ADC_CR)  @adc校准
 220              	_dengadcjiaozhun:
 221 010c 8168     	        ldr r1, [r0, # 0x08]
 222 010e 0900     	        movs r1, r1
 223 0110 FCD4     	        bmi _dengadcjiaozhun   @ 等ADC校准
 224              	_kaiadc:
 225 0112 8168     		ldr r1, [r0, # 0x08]
 226 0114 0122     	        movs r2, # 0x01
 227 0116 1143     		orrs r1, r1, r2
 228 0118 8160     	        str r1, [r0, # 0x08]
 229              	_dengdaiadcwending:
 230 011a 0168     		ldr r1, [r0]
 231 011c C907     		lsls r1, r1, # 31
 232 011e FCD5     		bpl _dengdaiadcwending @ 等ADC稳定
 233              	_tongdaoxuanze:
 234 0120 8649     		ldr r1, = 2
 235 0122 8162     	        str r1, [r0, # 0x28]    @ 通道选择寄存器 (ADC_CHSELR)
 236 0124 8649     	        ldr r1, = 0x803
 237 0126 C160     	        str r1, [r0, # 0x0c]    @ 配置寄存器 1 (ADC_CFGR1)
 238 0128 0021     		movs r1, # 0
 239 012a 4161     	        str r1, [r0, # 0x14]    @ ADC 采样时间寄存器 (ADC_SMPR)
 240 012c 8168     		ldr r1, [r0, # 0x08]
 241 012e 854A     	        ldr r2, = 0x04         @ 开始转换
 242 0130 1143     	        orrs r1, r1, r2
 243 0132 8160     		str r1, [r0, # 0x08]    @ 控制寄存器 (ADC_CR)
 244              	
 245              	
 246              		
 247              	dmachushihua:
 248              	        @+0=LSR,+4=IFCR,
 249              	        @+8=CCR1,+c=CNDTR1,+10=CPAR1+14=CMAR1,
 250              	        @+1c=CCR2,+20=CNDTR2,+24=CPAR2,+28=CMAR2
 251              	        @+30=CCR3,+34=CNDTR3,+38=CPAR2,+3c=CMAR3
 252              	        @+44=CCR4,+48=CNDTR4,+4c=CPAR4,+50=CMAR4
 253              	        @+58=CCR5,+5c=CNDTR5,+60=CPAR5,+64=CMAR5
 254              	        @+6C=CCR6,+70=CNDTR6,+74=CPAR6,+78=CMAR6
 255              	        @+80=CCR7,+84=CNDTR7,+88=CPAR7,+8c=CMAR7
 256              	
 257              	        @tim1ch3DMA
 258 0134 8448     	        ldr r0, = 0x40020000
 259 0136 8549     	        ldr r1, = 0x40012c3c @ 外设地址
 260 0138 0166     	        str r1, [r0, # 0x60]
 261 013a 8549     	        ldr r1, = zheng_xian_biao @ 储存器地址
 262 013c 4166     	        str r1, [r0, # 0x64]
 263 013e 8549     	        ldr r1, = 100             @点数
 264 0140 C165     	        str r1, [r0, # 0x5c]
 265 0142 8549     	        ldr r1, = 0x35b1         @ 储存到外设
 266 0144 8165     	        str r1, [r0, # 0x58]
 267              		@ adc dma
 268 0146 8048     		ldr r0, = 0x40020000
 269 0148 8449     		ldr r1, = 0x40012440
ARM GAS  1.s 			page 6


 270 014a 0161     		str r1, [r0, # 0x10]
 271 014c 8449     		ldr r1, = dianyabiao
 272 014e 4161     		str r1, [r0, # 0x14]
 273 0150 8049     		ldr r1, =  100
 274 0152 C160     		str r1, [r0, # 0x0c]
 275 0154 8349     		ldr r1, = 0x5a1		@ 5a1
 276 0156 8160     		str r1, [r0, # 0x08]
 277              	
 278              		
 279              	tim1chushiha:
 280 0158 8348     	        ldr r0, = 0x40012c00 @ tim1_cr1
 281 015a 0021     	        movs r1, # 0
 282 015c 8162     	        str r1, [r0, # 0x28] @ psc
 283 015e 8349     	        ldr r1, = 47
 284 0160 C162     	        str r1, [r0, # 0x2c] @ ARR
 285              		@	movs r1, # 0x40
 286 0162 2021     		movs r1, # 0x20
 287 0164 4160     		str r1, [r0, # 0x04] @ TRGO
 288 0166 3821     		movs r1, # 0x38
 289 0168 8161     		str r1, [r0, # 0x18] @ ccmr1 cc1
 290 016a 2F21     		movs r1, # 47
 291 016c 4163     		str r1, [r0, # 0x34]
 292 016e 8049     	        ldr r1, = 0x68
 293 0170 C161     	        str r1, [r0, # 0x1c] @ ccmr2  CC3
 294 0172 8049     	        ldr r1, = 0x100    @  CC3
 295 0174 0162     	        str r1, [r0, # 0x20] @ ccer
 296 0176 8049     	        ldr r1, = 0x8000
 297 0178 4164     	        str r1, [r0, # 0x44] @ BDTR
 298 017a 8049     	        ldr r1, = 0x800 @ CC3 DMA
 299 017c C160     	        str r1, [r0, # 0x0c] @ DIER
 300 017e 8049     	        ldr r1, = 0x81
 301 0180 0160     	        str r1, [r0]
 302              	
 303              	
 304              	
 305              	_lcdchushihua:
 306 0182 3320     		movs r0, # 0x33
 307 0184 0021     		movs r1, # 0
 308 0186 00F0DAFA 		bl _xielcd
 309 018a 00F0D3FA 		bl _lcdyanshi
 310 018e 3220     		movs r0, # 0x32
 311 0190 0021     		movs r1, # 0
 312 0192 00F0D4FA 		bl _xielcd
 313 0196 00F0CDFA 		bl _lcdyanshi
 314 019a 2820     		movs r0, # 0x28
 315 019c 0021     		movs r1, # 0
 316 019e 00F0CEFA 		bl _xielcd
 317 01a2 00F0C7FA 		bl _lcdyanshi
 318 01a6 0C20     		movs r0, # 0x0c
 319 01a8 0021     		movs r1, # 0
 320 01aa 00F0C8FA 		bl _xielcd
 321 01ae 00F0C1FA 		bl _lcdyanshi
 322 01b2 0120     		movs r0, # 0x01
 323 01b4 0021     		movs r1, # 0
 324 01b6 00F0C2FA 		bl _xielcd
 325 01ba 00F0BBFA 		bl _lcdyanshi
 326              	
ARM GAS  1.s 			page 7


 327              	@	movs r0, # 0x80
 328              	@	ldr r1, = lcdshuju
 329              	@	movs r2, # 16
 330              	@	movs r3, # 0xff
 331              	@	bl _lcdxianshi
 332              		
 333 01be 7148     		ldr r0, = liangcheng
 334 01c0 0021     		movs r1, # 0x00
 335 01c2 0160     		str r1, [r0]
 336              	
 337              	
 338              	ting:
 339 01c4 00F0ECF9 		bl __zi_dong_liang_cheng
 340 01c8 00F00BFA 	        bl _jianbo
 341 01cc 00F0C6F9 		bl __zhen_fu_lv_bo
 342 01d0 00F027F9 		bl __zu_kang_ji_suan
 343 01d4 6C48     		ldr r0, = dianrongzhi
 344 01d6 0821     	        movs r1, # 8
 345 01d8 0068     		ldr r0, [r0]
 346 01da 4F4A     	        ldr r2, = asciimabiao
 347 01dc FF23     	        movs r3, # 0xff
 348 01de 00F0EAFA 	        bl _zhuanascii
 349 01e2 8520     	        movs r0, # 0x85
 350 01e4 4C49     	        ldr r1, = asciimabiao
 351 01e6 0822     	        movs r2, # 8
 352 01e8 00F096FA 	        bl _lcdxianshi
 353 01ec 6548     		ldr r0, = liangcheng
 354 01ee 0168     		ldr r1, [r0]
 355              	__liangcheng100k:
 356 01f0 0029     		cmp r1, # 0x00
 357 01f2 19D1     		bne __liangcheng10k
 358 01f4 6548     	        ldr r0, = dianzuzhi
 359 01f6 6649     	        ldr r1, = 1000
 360 01f8 0068     	        ldr r0, [r0]
 361 01fa 00F0F7FA 		bl _chufa
 362 01fe 0421     		movs r1, # 4
 363 0200 454A     		ldr r2, = asciimabiao
 364 0202 FF23     		movs r3, # 0xff
 365 0204 00F0D7FA 	        bl _zhuanascii
 366 0208 C320     		movs r0, # 0xc3
 367 020a 4349     		ldr r1, = asciimabiao
 368 020c 0422     		movs r2, # 4
 369 020e 00F083FA 	        bl _lcdxianshi
 370 0212 C720     		movs r0, # 0xc7
 371 0214 5F49     	        ldr r1, = qianou
 372 0216 0222     	        movs r2, # 2
 373 0218 00F07EFA 	        bl _lcdxianshi
 374 021c C920     		movs r0, # 0xc9
 375 021e 5E49     	        ldr r1, = kong
 376 0220 0122     	        movs r2, # 1
 377 0222 00F079FA 	        bl _lcdxianshi
 378 0226 48E0     		b __xian_shi_qi_ta
 379              	__liangcheng10k:
 380 0228 5648     	        ldr r0, = liangcheng
 381 022a 0168     	        ldr r1, [r0]
 382 022c 4029     		cmp r1, # 0x40
 383 022e 14D1     		bne __liangcheng1k
ARM GAS  1.s 			page 8


 384 0230 5648     	        ldr r0, = dianzuzhi
 385 0232 4849     	        ldr r1, = 100
 386 0234 0068     	        ldr r0, [r0]
 387 0236 00F0D9FA 	        bl _chufa
 388 023a 0521     	        movs r1, # 5
 389 023c 364A     	        ldr r2, = asciimabiao
 390 023e 0323     		movs r3, # 3
 391 0240 00F0B9FA 	        bl _zhuanascii
 392 0244 C320     	        movs r0, # 0xc3
 393 0246 3449     	        ldr r1, = asciimabiao
 394 0248 0522     	        movs r2, # 5
 395 024a 00F065FA 	        bl _lcdxianshi
 396 024e C820     	        movs r0, # 0xc8
 397 0250 5049     	        ldr r1, = qianou
 398 0252 0222     	        movs r2, # 2
 399 0254 00F060FA 	        bl _lcdxianshi
 400 0258 2FE0     		b __xian_shi_qi_ta
 401              	__liangcheng1k:
 402 025a 4A48     	        ldr r0, = liangcheng
 403 025c 0168     	        ldr r1, [r0]
 404 025e 8029     	        cmp r1, # 0x80
 405 0260 14D1     	        bne __liangcheng100r
 406 0262 4A48     		ldr r0, = dianzuzhi
 407 0264 4D49     	        ldr r1, = 10
 408 0266 0068     	        ldr r0, [r0]
 409 0268 00F0C0FA 	        bl _chufa
 410 026c 0521     	        movs r1, # 5
 411 026e 2A4A     	        ldr r2, = asciimabiao
 412 0270 0223     	        movs r3, # 2
 413 0272 00F0A0FA 	        bl _zhuanascii
 414 0276 C320     	        movs r0, # 0xc3
 415 0278 2749     	        ldr r1, = asciimabiao
 416 027a 0522     	        movs r2, # 5
 417 027c 00F04CFA 	        bl _lcdxianshi
 418 0280 C820     	        movs r0, # 0xc8
 419 0282 4449     	        ldr r1, = qianou
 420 0284 0222     	        movs r2, # 2
 421 0286 00F047FA 	        bl _lcdxianshi
 422 028a 16E0     		b __xian_shi_qi_ta
 423              	__liangcheng100r:
 424 028c 3F48     	        ldr r0, = dianzuzhi
 425 028e 0421     		movs r1, # 4
 426 0290 0068     	        ldr r0, [r0]
 427 0292 214A     	        ldr r2, = asciimabiao
 428 0294 FF23     	        movs r3, # 0xff
 429 0296 00F08EFA 	        bl _zhuanascii
 430 029a C320     	        movs r0, # 0xc3
 431 029c 1E49     	        ldr r1, = asciimabiao
 432 029e 0422     	        movs r2, # 4
 433 02a0 00F03AFA 	        bl _lcdxianshi
 434 02a4 C720     	        movs r0, # 0xc7
 435 02a6 3E49     	        ldr r1, = ou
 436 02a8 0122     	        movs r2, # 1
 437 02aa 00F035FA 	        bl _lcdxianshi
 438 02ae C820     	        movs r0, # 0xc8
 439 02b0 3949     	        ldr r1, = kong
 440 02b2 0222     	        movs r2, # 2
ARM GAS  1.s 			page 9


 441 02b4 00F030FA 	        bl _lcdxianshi
 442 02b8 FFE7     	        b __xian_shi_qi_ta
 443              	
 444              	__xian_shi_qi_ta:
 445 02ba 3248     		ldr r0, = liangcheng
 446 02bc 0068     		ldr r0, [r0]
 447 02be 8009     		lsrs r0, r0, # 6
 448 02c0 0121     		movs r1, # 1
 449 02c2 154A     	        ldr r2, = asciimabiao
 450 02c4 FF23     	        movs r3, # 0xff
 451 02c6 00F076FA 	        bl _zhuanascii
 452 02ca 8020     	        movs r0, # 0x80
 453 02cc 1249     	        ldr r1, = asciimabiao
 454 02ce 0122     	        movs r2, # 1
 455 02d0 00F022FA 	        bl _lcdxianshi
 456              	
 457 02d4 C120     	        movs r0, # 0xc1
 458 02d6 3349     	        ldr r1, = dianzu
 459 02d8 0222     	        movs r2, # 2
 460 02da 00F01DFA 	        bl _lcdxianshi
 461 02de CB20     	        movs r0, # 0xcb
 462 02e0 3149     	        ldr r1, = pinlv
 463 02e2 0522     	        movs r2, # 5
 464 02e4 00F018FA 	        bl _lcdxianshi
 465              	__xian_shi_dian_rong:
 466 02e8 8320     		movs r0, # 0x83
 467 02ea 3049     		ldr r1, = dianrong
 468 02ec 0222     		movs r2, # 2
 469 02ee 00F013FA 		bl _lcdxianshi
 470 02f2 8E20     	        movs r0, # 0x8e
 471 02f4 2E49     	        ldr r1, = pifa
 472 02f6 0222     	        movs r2, # 2
 473 02f8 00F00EFA 		bl _lcdxianshi
 474              	
 475 02fc 62E7     		b ting
 476              	
 477 02fe 0000FFFF 		.ltorg
 477      00000020 
 477      02400010 
 477      02400100 
 477      01000200 
 478              	
 479              	dd:
 480 03b4 00F0F4F8 	   	bl __zi_dong_liang_cheng
 481 03b8 B448     		ldr r0, = liangcheng
 482 03ba 0068     	        ldr r0, [r0]
 483 03bc 0421     	        movs r1, # 4
 484 03be B44A     	        ldr r2, = asciimabiao
 485 03c0 FF23     	        movs r3, # 0xff
 486 03c2 00F0F8F9 	        bl _zhuanascii
 487 03c6 C620     	        movs r0, # 0xc6
 488 03c8 B149     	        ldr r1, = asciimabiao
 489 03ca 0422     		movs r2, # 0x04
 490 03cc 00F0A4F9 		bl _lcdxianshi
 491 03d0 00F007F9 	        bl _jianbo
 492 03d4 00F0C2F8 	        bl __zhen_fu_lv_bo
 493 03d8 00F084F8 	        bl __xian_shi_shang_xia_bi
ARM GAS  1.s 			page 10


 494 03dc EAE7     		b dd
 495              	
 496              	__ji_suan_fu_du:    @ 计算幅度
 497              	                @ 入r0= 实部，r1= 虚部
 498              	                @ 出r0 = 幅度
 499              	                @ Mag ~=Alpha * max(|I|, |Q|) + Beta * min(|I|, |Q|)
 500              	                @ Alpha * Max + Beta * Min
 501 03de 0EB5     	        push {r1-r3,lr}
 502 03e0 0000     	        movs r0, r0
 503 03e2 01D5     	        bpl _shibubushifushu
 504 03e4 C043     	        mvns r0, r0                             @ 是负数转成正数
 505 03e6 0130     	        adds r0, r0, # 1
 506              	_shibubushifushu:                               @ 实部不是负数
 507 03e8 0900     	        movs r1, r1
 508 03ea 01D5     	        bpl _xububushifushu
 509 03ec C943     	        mvns r1, r1                             @ 是负数转成正数
 510 03ee 0131     	        adds r1, r1, # 1
 511              	_xububushifushu:                                @ 虚部不是负数
 512 03f0 0028     	        cmp r0, # 0
 513 03f2 01D1     	        bne _panduanxubushibushi0
 514 03f4 0846     	        mov r0, r1
 515 03f6 0EBD     	        pop {r1-r3,pc}
 516              	_panduanxubushibushi0:	
 517 03f8 0029     		cmp r1, # 0
 518 03fa 00D1     		bne _jisuanfudu1
 519 03fc 0EBD     		pop {r1-r3,pc}
 520              	_jisuanfudu1:
 521 03fe A54A     		ldr r2, = 31066		@ Alpha q15 0.948059448969
 522 0400 A54B     		ldr r3, = 12867		@ Beta q15 0.392699081699
 523 0402 8142     		cmp r1, r0
 524 0404 06D8     		bhi _alpha_min_beta_max
 525              	_alpha_max_beta_min:
 526 0406 5043     		muls r0, r0, r2
 527 0408 5943     		muls r1, r1, r3
 528 040a C013     		asrs r0, r0, # 15
 529 040c C913     		asrs r1, r1, # 15
 530 040e 4018     		adds r0, r0, r1
 531 0410 0121     		movs r1, # 1
 532 0412 0EBD     		pop {r1-r3,pc}
 533              	_alpha_min_beta_max:
 534 0414 5843     		muls r0, r0, r3
 535 0416 5143     		muls r1, r1, r2
 536 0418 C013     		asrs r0, r0, # 15
 537 041a C913     		asrs r1, r1, # 15
 538 041c 4018     		adds r0, r0, r1
 539 041e 0021     		movs r1, # 0
 540 0420 0EBD     		pop {r1-r3,pc}
 541              		
 542              	__zu_kang_ji_suan:
 543 0422 FFB5     		push {r0-r7,lr}
 544 0424 9D48     		ldr r0, = shang_bi_shi_bu
 545 0426 9E49     		ldr r1, = shang_bi_xu_bu
 546 0428 9E4A     		ldr r2, = xia_bi_shi_bu
 547 042a 9F4B     		ldr r3, = xia_bi_xu_bu
 548 042c 974C     		ldr r4, = liangcheng
 549 042e 0068     		ldr r0, [r0]
 550 0430 0968     		ldr r1, [r1]
ARM GAS  1.s 			page 11


 551 0432 1268     		ldr r2, [r2]
 552 0434 1B68     		ldr r3, [r3]
 553 0436 2568     		ldr r5, [r4]
 554              	__c_liang_cheng_100k:
 555 0438 002D     	        cmp r5, # 0x00
 556 043a 01D1     		bne __c_liang_cheng10k
 557 043c 9B4C     	        ldr r4, = 100000
 558 043e 08E0     		b __ji_suan_dian_rong
 559              	__c_liang_cheng10k:
 560 0440 402D     	        cmp r5, # 0x40
 561 0442 01D1     	        bne __c_liang_cheng1k
 562 0444 9A4C     	        ldr r4, = 10000
 563 0446 04E0     	        b __ji_suan_dian_rong
 564              	__c_liang_cheng1k:
 565 0448 802D     	        cmp r5, # 0x80
 566 044a 01D1     		bne __c_liang_cheng100ou
 567 044c 994C     	        ldr r4, = 1000
 568 044e 00E0     	        b __ji_suan_dian_rong
 569              	__c_liang_cheng100ou:
 570 0450 6424     		movs r4, # 100
 571              	__ji_suan_dian_rong:
 572              	@ Z=R+jx
 573              	@ Z=R*[(a+bi)/(c+di)]=R*[(ac+bd)/(c*c+d*d)+(bc-ad)/(c*c+d*d)]
 574              	@c=1/[(2*pi*f)*xc]
 575 0452 10B4     		push {r4}
 576 0454 0446     		mov r4, r0
 577 0456 0D46     		mov r5, r1
 578 0458 1646     		mov r6, r2
 579 045a 1F46     		mov r7, r3
 580 045c 5043     		muls r0, r0, r2		@ac
 581 045e 5943     		muls r1, r1, r3		@bd
 582 0460 4018     		adds r0, r0, r1		@ac+bd
 583 0462 5243     		muls r2, r2, r2		@c*c
 584 0464 5B43     		muls r3, r3, r3		@d*d
 585 0466 D218     		adds r2, r2, r3		@c*c+d*d
 586 0468 1146     		mov r1, r2
 587 046a 8002     		lsls r0, r0, # 10
 588 046c 00F0BEF9 		bl _chufa		@(ac+bd)/(c*c+d*d)
 589 0470 01B4     		push {r0}
 590 0472 7543     		muls r5, r5, r6		@ bc
 591 0474 7C43     		muls r4, r4, r7		@ ad
 592 0476 2D1B     		subs r5, r5, r4		@ bc-ad
 593 0478 1146     		mov r1, r2
 594 047a 2846     		mov r0, r5
 595 047c 8002     		lsls r0, r0, # 10
 596 047e 00F0B5F9 		bl _chufa
 597 0482 0146     		mov r1, r0		@ R1=结果虚部
 598 0484 01BC     		pop {r0}		@ R0=结果实部
 599 0486 04BC     		pop {r2}		@ R2=R（量程）
 600 0488 5043     		muls r0, r0, r2		@ 
 601 048a 5143     		muls r1, r1, r2		@
 602 048c 8012     		asrs r0, r0, # 10
 603 048e 8A4A     		ldr r2, = dianzuzhi
 604 0490 8912     		asrs r1, r1, # 10
 605 0492 1060     		str r0, [r2]
 606 0494 FFF7A3FF 		bl __ji_suan_fu_du
 607 0498 884B     		ldr r3, = 62831		@ 2pi*10khz
ARM GAS  1.s 			page 12


 608 049a 0146     		mov r1, r0
 609 049c 5943     		muls r1, r1, r3
 610 049e 0C46     		mov r4, r1
 611 04a0 8748     		ldr r0, = 1000000000
 612 04a2 8142     		cmp r1, r0
 613 04a4 0DD8     		bhi __shu_tai_da
 614 04a6 00F0A1F9 		bl _chufa
 615 04aa 0346     		mov r3, r0
 616 04ac 814A     		ldr r2, = 1000
 617 04ae 0846     		mov r0, r1
 618 04b0 5043     		muls r0, r0, r2
 619 04b2 5343     		muls r3, r3, r2
 620 04b4 2146     		mov r1, r4
 621 04b6 00F099F9 		bl _chufa
 622 04ba 824A     		ldr r2, = dianrongzhi
 623 04bc 1B18     		adds r3, r3, r0
 624 04be 1360     		str r3, [r2]
 625 04c0 FFBD     		pop {r0-r7,pc}
 626              	__shu_tai_da:
 627 04c2 890A     		lsrs r1, r1, # 10
 628 04c4 00F092F9 		bl _chufa
 629 04c8 7A49     		ldr r1, = 1000
 630 04ca 8002     		lsls r0, r0, # 10
 631 04cc 00F08EF9 		bl _chufa
 632 04d0 7C4A     		ldr r2, = dianrongzhi
 633 04d2 1060     		str r0, [r2]
 634 04d4 FFBD     		pop {r0-r7,pc}
 635              	__fu_zhi_nei_cun:
 636              		@ 入口 R0 = 要复制的地址，R1=目标地址，R2=复制的数量
 637 04d6 00B5     		push {lr}
 638 04d8 5200     		lsls r2, r2, # 1
 639              	__fu_zhi_xun_huan:	
 640 04da 835A     		ldrh r3, [r0, r2]
 641 04dc 8B52     		strh r3, [r1, r2]
 642 04de 023A     		subs r2, r2, # 2
 643 04e0 FBD1     		bne __fu_zhi_xun_huan
 644 04e2 00BD     		pop {pc}
 645              	__xian_shi_shang_xia_bi:
 646 04e4 0FB5     		push {r0-r3,lr}
 647 04e6 C420     	        movs r0, # 0xc4
 648 04e8 7749     	        ldr r1, = xushu
 649 04ea 0122     	        movs r2, # 1
 650 04ec 00F014F9 	        bl _lcdxianshi
 651 04f0 CF20     		movs r0, # 0xcf
 652 04f2 7549     	        ldr r1, = xushu
 653 04f4 0122     		movs r2, # 1
 654 04f6 00F00FF9 		bl _lcdxianshi
 655 04fa 6A48     		ldr r0, = xia_bi_shi_bu
 656 04fc 0421     		movs r1, # 4
 657 04fe 0068     		ldr r0, [r0]
 658 0500 634A     		ldr r2, = asciimabiao
 659 0502 FF23     		movs r3, # 0xff
 660 0504 00F057F9 		bl _zhuanascii
 661 0508 8B20     		movs r0, # 0x8b
 662 050a 6149     		ldr r1, = asciimabiao
 663 050c 0422     		movs r2, # 0x04
 664 050e 00F003F9 		bl _lcdxianshi
ARM GAS  1.s 			page 13


 665 0512 6248     	        ldr r0, = shang_bi_shi_bu
 666 0514 0421     	        movs r1, # 4
 667 0516 0068     	        ldr r0, [r0]
 668 0518 5D4A     	        ldr r2, = asciimabiao
 669 051a FF23     	        movs r3, # 0xff
 670 051c 00F04BF9 	        bl _zhuanascii
 671 0520 8020     	        movs r0, # 0x80
 672 0522 5B49     	        ldr r1, = asciimabiao
 673 0524 0422     	        movs r2, # 0x04
 674 0526 00F0F7F8 	        bl _lcdxianshi
 675 052a 5F48     	        ldr r0, = xia_bi_xu_bu
 676 052c 0421     	        movs r1, # 4
 677 052e 0068     	        ldr r0, [r0]
 678 0530 574A     	        ldr r2, = asciimabiao
 679 0532 FF23     	        movs r3, # 0xff
 680 0534 00F03FF9 	        bl _zhuanascii
 681 0538 CB20     	        movs r0, # 0xcb
 682 053a 5549     	        ldr r1, = asciimabiao
 683 053c 0422     	        movs r2, # 0x04
 684 053e 00F0EBF8 	        bl _lcdxianshi
 685 0542 5748     	        ldr r0, = shang_bi_xu_bu
 686 0544 0421     	        movs r1, # 4
 687 0546 0068     	        ldr r0, [r0]
 688 0548 514A     	        ldr r2, = asciimabiao
 689 054a FF23     	        movs r3, # 0xff
 690 054c 00F033F9 	        bl _zhuanascii
 691 0550 C020     	        movs r0, # 0xc0
 692 0552 4F49     	        ldr r1, = asciimabiao
 693 0554 0422     	        movs r2, # 0x04
 694 0556 00F0DFF8 	        bl _lcdxianshi
 695 055a 0FBD     		pop {r0-r3,pc}
 696              	
 697              	
 698              	__zhen_fu_lv_bo:
 699              		@ 入口 R0= 下臂实部，R1=上臂实部，R2=下臂虚部，R3=上臂虚部
 700 055c FFB5     		push {r0-r7,lr}
 701 055e 514F     		ldr r7, = xia_bi_shi_bu
 702 0560 1546     		mov r5, r2
 703 0562 1E46     		mov r6, r3
 704 0564 0C46     		mov r4, r1
 705 0566 0346     		mov r3, r0
 706 0568 5848     		ldr r0, = lvboqihuanchong
 707 056a 5949     		ldr r1, = 32
 708 056c 594A     		ldr r2, = lvboqizhizhen
 709 056e 00F079F8 		bl _lvboqi
 710 0572 3860     		str r0, [r7]			@保存下臂实部
 711 0574 2346     	        mov r3, r4
 712 0576 5848     	        ldr r0, = lvboqihuanchong1
 713 0578 5549     		ldr r1, = 32
 714 057a 584A     		ldr r2, = lvboqizhizhen1
 715 057c 00F072F8 	        bl _lvboqi
 716 0580 7860     	        str r0, [r7, # 0x04]		@保存上臂实部
 717 0582 2B46     		mov r3, r5
 718 0584 5648     		ldr r0, = lvboqihuanchong2
 719 0586 5249     	        ldr r1, = 32
 720 0588 564A     	        ldr r2, = lvboqizhizhen2
 721 058a 00F06BF8 		bl _lvboqi
ARM GAS  1.s 			page 14


 722 058e B860     		str r0, [r7, # 0x08]		@保存下臂虚部
 723              	
 724 0590 3346     	        mov r3, r6
 725 0592 5548     		ldr r0, = lvboqihuanchong3
 726 0594 4E49     		ldr r1, = 32
 727 0596 554A     		ldr r2, = lvboqizhizhen3
 728 0598 00F064F8 	        bl _lvboqi
 729 059c F860     		str r0, [r7, # 0x0c]		@保存上臂虚部
 730 059e FFBD     		pop {r0-r7,pc}
 731              		
 732              	
 733              	__zi_dong_liang_cheng:
 734              		@ 0xc0=100,0x80=1k
 735              		@0x40=10k,0x00=100k
 736 05a0 7FB5     		push {r0-r6,lr}
 737 05a2 5348     		ldr r0, = zidongliangchengyanshi
 738 05a4 1E22     		movs r2, # 30
 739 05a6 0168     		ldr r1, [r0]
 740 05a8 0131     		adds r1, r1, # 1
 741 05aa 0160     		str r1, [r0]
 742 05ac 9142     		cmp r1, r2
 743 05ae 17D3     		bcc __liang_cheng_fan_hui
 744 05b0 0021     		movs r1, # 0
 745 05b2 0160     		str r1, [r0]
 746 05b4 3948     		ldr r0, = shang_bi_shi_bu
 747 05b6 3B4D     		ldr r5, = xia_bi_shi_bu
 748 05b8 3449     		ldr r1, = liangcheng
 749 05ba 0A68     		ldr r2, [r1]
 750 05bc 4D4E     		ldr r6, = 2200
 751 05be 4E4B     		ldr r3, = 20
 752 05c0 C02A     		cmp r2, # 0xc0
 753 05c2 07D0     		beq __xuan_kong
 754              	__pan_duan_liang_cheng:
 755 05c4 2C68     		ldr r4, [r5]
 756 05c6 B442     		cmp r4, r6
 757 05c8 02D2     		bcs __gai_liang_cheng
 758 05ca 0468     		ldr r4, [r0]
 759 05cc 9C42     		cmp r4,	r3
 760 05ce 00D2     		bcs __bao_cun_liang_cheng
 761              	__gai_liang_cheng:
 762 05d0 4032     		adds r2, r2, # 0x40
 763              	__bao_cun_liang_cheng:
 764 05d2 0A60     		str r2, [r1]
 765              	__xuan_kong:
 766 05d4 3348     		ldr r0, = xia_bi_shi_bu
 767 05d6 0468     		ldr r4, [r0]
 768 05d8 142C     		cmp r4, # 20
 769 05da 01D2     		bcs __liang_cheng_fan_hui
 770              	__liang_cheng_chong_zhi:
 771 05dc 0022     		movs r2, # 0
 772 05de 0A60     		str r2, [r1]
 773              	__liang_cheng_fan_hui:	
 774 05e0 7FBD     		pop {r0-r6,pc}
 775              		
 776              	_jianbo:
 777              		@ 入口 R0=采样表首地址，R1=0度90度相差多少
 778              		@ 出口R0=下臂90度，R1=上臂90度，R2=下臂180度，R3=上臂180度
ARM GAS  1.s 			page 15


 779 05e2 F0B5     		push {r4-r7,lr}
 780 05e4 454F     	        ldr r7, = 0x48000000
 781 05e6 464E     	        ldr r6, = 0x200
 782 05e8 BE62     		str r6, [r7, # 0x28]
 783 05ea 464D     	        ldr r5, = 0x40012428
 784 05ec 0224     	        movs r4, # 2
 785 05ee 2C60     	        str r4, [r5]
 786 05f0 00F023F8 		bl _jianboyanshi
 787 05f4 05BE     		bkpt # 5
 788 05f6 4448     		ldr r0, = dianyabiao
 789 05f8 4449     		ldr r1, = dianyabiao1
 790 05fa 6422     		movs r2, # 100
 791 05fc FFF76BFF 		bl __fu_zhi_nei_cun
 792 0600 01BE     		bkpt # 1
 793 0602 BE61     		str r6, [r7, # 0x18]
 794 0604 00F019F8 		bl _jianboyanshi
 795 0608 3F48     	        ldr r0, = dianyabiao
 796 060a 4149     		ldr r1, = dianyabiao2
 797 060c 6422     		movs r2, # 100
 798 060e FFF762FF 		bl __fu_zhi_nei_cun
 799 0612 02BE     		bkpt # 2
 800 0614 0124     		movs r4, # 1
 801 0616 2C60     		str r4, [r5]
 802 0618 BE62     		str r6, [r7, # 0x28]
 803 061a 00F00EF8 		bl _jianboyanshi
 804 061e 00F011F8 	        bl __zhao_zui_da_shu
 805 0622 8A89     		ldrh r2, [r1, # 0x0c]
 806 0624 03BE     		bkpt # 3
 807 0626 BE61     		str r6, [r7, # 0x18]
 808 0628 00F007F8 		bl _jianboyanshi
 809 062c 00F00AF8 	        bl __zhao_zui_da_shu
 810 0630 8B89     		ldrh r3, [r1, # 0x0c]
 811 0632 04BE     		bkpt # 4
 812 0634 02BC     		pop {r1}
 813 0636 01BC     		pop {r0}
 814 0638 F0BD     		pop {r4-r7,pc}
 815              	_jianboyanshi:
 816 063a 80B5     		push {r7,lr}
 817 063c 354F     		ldr r7, = 0xffff
 818              	_jianboyanshixunhuan:
 819 063e 013F     		subs r7, r7, # 1
 820 0640 FDD1     		bne _jianboyanshixunhuan
 821 0642 80BD     		pop {r7,pc}
 822              	
 823              	__zhao_zui_da_shu:
 824 0644 1CB5     		push {r2-r4,lr}
 825 0646 3048     		ldr r0, = dianyabiao
 826 0648 6522     		movs r2, # 101
 827 064a 5200     		lsls r2, r2, # 1
 828 064c 0023     		movs r3, # 0
 829              	__zhao:
 830 064e 815A     		ldrh r1, [r0, r2]
 831 0650 9942     		cmp r1, r3
 832 0652 01D3     		bcc __di_zhi_jian
 833 0654 0B46     		mov r3, r1
 834 0656 1446     		mov r4, r2
 835              	__di_zhi_jian:	
ARM GAS  1.s 			page 16


 836 0658 023A     		subs r2, r2, # 2
 837 065a F8D1     		bne __zhao
 838 065c 0146     		mov r1, r0
 839 065e 1846     		mov r0, r3
 840 0660 0919     		adds r1, r1, r4
 841 0662 1CBD     		pop {r2-r4,pc}
 842              		
 843              	_lvboqi:
 844              				@滤波器
 845              				@R0=地址，R1=长度,r2=表指针地址,r3=ADC数值
 846              				@出R0=结果
 847 0664 FEB5     		push {r1-r7,lr}	
 848 0666 1568     		ldr r5, [r2]		@读出表指针
 849 0668 4E00     		lsls r6, r1, # 1	
 850 066a 4353     		strh r3, [r0, r5]	@数值写到滤波器缓冲区
 851 066c 0235     		adds r5, r5, # 2
 852 066e B542     		cmp r5, r6
 853 0670 00D1     		bne _lvboqimeidaohuanchongquding
 854 0672 0025     		movs r5, # 0
 855              	_lvboqimeidaohuanchongquding:
 856 0674 1560     		str r5, [r2]
 857 0676 0027     		movs r7, # 0
 858              	_lvboqixunhuan:
 859 0678 B542     		cmp r5, r6
 860 067a 00D1     		bne _lvbozonghe
 861 067c 0025     		movs r5, # 0
 862              	_lvbozonghe:
 863 067e 445B     		ldrh r4, [r0, r5]
 864 0680 0235     		adds r5, r5, # 2
 865 0682 3F19     		adds r7, r7, r4
 866 0684 0139     		subs r1, r1, # 1
 867 0686 F7D1     		bne _lvboqixunhuan
 868 0688 7811     		asrs r0, r7, # 5	@修改
 869 068a FEBD     		pop {r1-r7,pc}
 870 068c 30000020 		.ltorg
 870      00000020 
 870      5A790000 
 870      43320000 
 870      040A0020 
 871              	
 872              		
 873              	_lcdxianshi:	  		@r0=LCD位置，r1=数据地址，r2=长度
 874 0718 1FB5     		push {r0-r4,lr}
 875 071a 0C46     		mov r4, r1
 876              	
 877 071c 0021     		movs r1, # 0
 878 071e 00F00EF8 		bl _xielcd
 879              	
 880 0722 0121     		movs r1, # 1
 881 0724 0023     		movs r3, # 0
 882              	_lcdxianshixunhuan:
 883 0726 E05C     		ldrb r0, [r4,r3]
 884 0728 00F009F8 		bl _xielcd
 885 072c 0133     		adds r3, r3, # 1
 886 072e 9342     		cmp r3, r2
 887 0730 F9D1     		bne _lcdxianshixunhuan
 888 0732 1FBD     		pop {r0-r4,pc}
ARM GAS  1.s 			page 17


 889              	
 890              	_lcdyanshi:
 891 0734 20B5     		push {r5,lr}
 892 0736 374D     		ldr r5, = 0x2000
 893              	_lcdyanshixunhuan:
 894 0738 013D     		subs r5, r5, # 1
 895 073a FDD1     		bne _lcdyanshixunhuan
 896 073c 20BD     		pop {r5,pc}
 897              	
 898              	_xielcd:			@入R0=8位,r1=0命令,r1=1数据
 899 073e 3FB5     		push {r0-r5,lr}
 900 0740 354C     		ldr r4, = liangcheng  @ 量程开关 (第6位和第7位)
 901 0742 0246     		mov r2, r0
 902 0744 2568     		ldr r5, [r4]
 903 0746 1209     		lsrs r2, r2, # 4
 904 0748 9200     		lsls r2, r2, # 2	@ 高四位
 905 074a 0007     		lsls r0, r0, # 28
 906 074c 800E     		lsrs r0, r0, # 26	@ 低四位
 907 074e C907     		lsls r1, r1, # 31
 908 0750 01D5     		bpl __lcd_ming_ling
 909              	__lcd_shu_ju:
 910 0752 0323     		movs r3, # 0x03		@ RS = 1 E = 1
 911 0754 00E0     		b __xie_lcd_shu_ju
 912              	__lcd_ming_ling:
 913 0756 0223     		movs r3, # 0x02		@ RS = 0 E = 1
 914              	__xie_lcd_shu_ju:
 915 0758 5B19     		adds r3, r3, r5
 916 075a 0146     		mov r1, r0
 917 075c D218     		adds r2, r2, r3
 918 075e 1000     		movs r0, r2
 919 0760 00F00BF8 		bl __74hc595
 920 0764 0238     		subs r0, r0, # 0x02
 921 0766 00F008F8 		bl __74hc595
 922 076a 0846     		mov r0, r1
 923 076c C018     		adds r0, r0, r3
 924 076e 00F004F8 		bl __74hc595
 925 0772 0238     		subs r0, r0, # 0x02
 926 0774 00F001F8 		bl __74hc595
 927 0778 3FBD     		pop {r0-r5,pc}
 928              		
 929              	__74hc595:			@ 入R0=8位
 930 077a FFB5     		push {r0-r7,lr}
 931 077c 274E     		ldr r6, = 0x48000000
 932 077e 2025     		movs r5, # 0x20		@ SRCLK
 933 0780 4022     		movs r2, # 0x40		@ RCLK
 934 0782 8023     		movs r3, # 0x80		@ SER
 935 0784 1824     		movs r4, # 24
 936              	__595_yiweixunhuan:
 937 0786 B261     		str r2, [r6, # 0x18]	@ rclk=0
 938 0788 B561     		str r5, [r6, # 0x18]	@ srclk=0
 939 078a FF27     		movs r7, # 0xff
 940              	__595_yanshi:
 941 078c 013F     		subs r7, r7, # 1
 942 078e FDD1     		bne __595_yanshi
 943 0790 0146     		mov r1, r0
 944 0792 A140     		lsls r1, r1, r4
 945 0794 01D5     		bpl __ser_0
ARM GAS  1.s 			page 18


 946              	__ser_1:
 947 0796 B362     		str r3, [r6, # 0x28]	@ ser=1
 948 0798 00E0     		b __595_yiwei
 949              	__ser_0:
 950 079a B361     		str r3, [r6, # 0x18]	@ ser=0
 951              	__595_yiwei:
 952 079c B562     		str r5, [r6, # 0x28]
 953 079e FF27     		movs r7, # 0xff
 954              	__595_yanshi1:
 955 07a0 013F     		subs r7, r7, # 1
 956 07a2 FDD1     		bne __595_yanshi1
 957 07a4 0134     		adds r4, r4, # 1
 958 07a6 202C     		cmp r4, # 32
 959 07a8 EDD1     		bne __595_yiweixunhuan
 960 07aa B262     		str r2, [r6, # 0x28]	@ rclk=1
 961 07ac FF27     		movs r7, # 0xff
 962              	__595_yanshi2:
 963 07ae 013F     		subs r7, r7, # 1
 964 07b0 FDD1     		bne __595_yanshi2
 965 07b2 B261     		str r2, [r6, # 0x18]	@ rclk = 0
 966 07b4 FFBD     		pop {r0-r7,pc}
 967              	
 968              	
 969              	
 970              	_zhuanascii:					@ 16进制转ASCII
 971              			@ R0要转的数据， R1长度，R2结果表首地址, r3=小数点位置
 972 07b6 FFB5     		push {r0-r7,lr}
 973 07b8 1F46     		mov r7, r3
 974 07ba 0546     		mov r5, r0
 975 07bc 0E46     		mov r6, r1
 976 07be 0A21     		movs r1, # 10
 977              	_xunhuanqiuma:
 978 07c0 02B4     		push {r1}
 979 07c2 00F013F8 		bl _chufa
 980 07c6 02BC     		pop {r1}
 981 07c8 0446     		mov r4, r0
 982 07ca 4C43     		muls r4, r1
 983 07cc 2B1B     		subs r3, r5, r4
 984 07ce 3033     		adds r3, r3, # 0x30
 985 07d0 0546     		mov r5, r0
 986 07d2 013E     		subs r6, r6, # 1
 987 07d4 08D0     		beq _qiumafanhui
 988 07d6 BE42     		cmp r6, r7
 989 07d8 02D1     		bne _meidaoxiaoshudian
 990 07da 2E24     		movs r4, # 0x2e		@小数点
 991 07dc 9455     		strb r4, [r2,r6]	@插入小数点
 992 07de 013E     		subs r6, r6, # 1
 993              	_meidaoxiaoshudian:
 994 07e0 9355     		strb r3, [r2,r6]
 995 07e2 3600     		movs r6, r6
 996 07e4 ECD1     		bne _xunhuanqiuma
 997 07e6 FFBD     		pop {r0-r7,pc}
 998              	_qiumafanhui:
 999 07e8 9355     		strb r3, [r2, r6]
 1000 07ea FFBD     		pop {r0-r7,pc}
 1001              	
 1002              	
ARM GAS  1.s 			page 19


 1003              		
 1004              	_chufa:				@软件除法
 1005              		@ r0 除以 r1 等于 商(r0)余数R1
 1006 07ec 1CB5     		push {r2-r4,lr}
 1007 07ee 0028     		cmp r0, # 0
 1008 07f0 0FD0     		beq _chufafanhui
 1009 07f2 0029     		cmp r1, # 0
 1010 07f4 0DD0     		beq _chufafanhui
 1011 07f6 0246     		mov r2, r0
 1012 07f8 0123     		movs r3, # 1
 1013 07fa DB07     		lsls r3, r3, # 31
 1014 07fc 0020     		movs r0, # 0
 1015 07fe 0446     		mov r4, r0
 1016              	_chufaxunhuan:
 1017 0800 5200     		lsls r2, r2, # 1
 1018 0802 6441     		adcs r4, r4, r4
 1019 0804 8C42     		cmp r4, r1
 1020 0806 01D3     		bcc _chufaweishubudao0
 1021 0808 C018     		adds r0, r0, r3
 1022 080a 641A     		subs r4, r4, r1
 1023              	_chufaweishubudao0:
 1024 080c 5B08     		lsrs r3, r3, # 1
 1025 080e F7D1     		bne _chufaxunhuan
 1026 0810 2146     		mov r1, r4
 1027              	_chufafanhui:
 1028 0812 1CBD     		pop {r2-r4,pc}
 1029 0814 00200000 		.ltorg
 1029      30000020 
 1029      00000048 
 1030              	
 1031              	
 1032              	_nmi_handler:
 1033 0820 7047     		bx lr
 1034              	_hard_fault:
 1035 0822 7047     		bx lr
 1036              	_svc_handler:
 1037 0824 7047     		bx lr
 1038              	_pendsv_handler:
 1039 0826 7047     		bx lr
 1040              	_systickzhongduan:
 1041 0828 034A     		ldr r2, = jishu
 1042 082a 0448     		ldr r0, = 0xe0000d04
 1043 082c 1368     		ldr r3, [r2]
 1044 082e 0449     		ldr r1, = 0x02000000
 1045 0830 0133     		adds r3, r3, # 1
 1046 0832 1360     		str r3, [r2]
 1047 0834 0160     		str r1, [r0]                 @ 清除SYSTICK中断
 1048              	aaa:
 1049 0836 70473400 		bx lr
 1049      0020040D 
 1049      00E00000 
 1049      0002
>>>>>>> 1c28160d29ba40963993e58ca692a911fd93de54
ARM GAS  1.s 			page 20


 1055              		
 1056              	__74hc595:			@ 入R0=8位
 1057 084a FFB5     		push {r0-r7,lr}
 1058 084c 274E     		ldr r6, = 0x48000000
 1059 084e 2025     		movs r5, # 0x20		@ SRCLK
 1060 0850 4022     		movs r2, # 0x40		@ RCLK
 1061 0852 8023     		movs r3, # 0x80		@ SER
 1062 0854 1824     		movs r4, # 24
 1063              	__595_yiweixunhuan:
 1064 0856 B261     		str r2, [r6, # 0x18]	@ rclk=0
 1065 0858 B561     		str r5, [r6, # 0x18]	@ srclk=0
 1066 085a FF27     		movs r7, # 0xff
 1067              	__595_yanshi:
 1068 085c 013F     		subs r7, r7, # 1
 1069 085e FDD1     		bne __595_yanshi
 1070 0860 0146     		mov r1, r0
 1071 0862 A140     		lsls r1, r1, r4
 1072 0864 01D5     		bpl __ser_0
 1073              	__ser_1:
 1074 0866 B362     		str r3, [r6, # 0x28]	@ ser=1
 1075 0868 00E0     		b __595_yiwei
 1076              	__ser_0:
 1077 086a B361     		str r3, [r6, # 0x18]	@ ser=0
 1078              	__595_yiwei:
 1079 086c B562     		str r5, [r6, # 0x28]
 1080 086e FF27     		movs r7, # 0xff
 1081              	__595_yanshi1:
 1082 0870 013F     		subs r7, r7, # 1
 1083 0872 FDD1     		bne __595_yanshi1
 1084 0874 0134     		adds r4, r4, # 1
 1085 0876 202C     		cmp r4, # 32
 1086 0878 EDD1     		bne __595_yiweixunhuan
 1087 087a B262     		str r2, [r6, # 0x28]	@ rclk=1
 1088 087c FF27     		movs r7, # 0xff
 1089              	__595_yanshi2:
 1090 087e 013F     		subs r7, r7, # 1
 1091 0880 FDD1     		bne __595_yanshi2
 1092 0882 B261     		str r2, [r6, # 0x18]	@ rclk = 0
 1093 0884 FFBD     		pop {r0-r7,pc}
 1094              	
 1095              	
 1096              	
 1097              	_zhuanascii:					@ 16进制转ASCII
 1098              			@ R0要转的数据， R1长度，R2结果表首地址, r3=小数点位置
 1099 0886 FFB5     		push {r0-r7,lr}
 1100 0888 1F46     		mov r7, r3
 1101 088a 0546     		mov r5, r0
 1102 088c 0E46     		mov r6, r1
 1103 088e 0A21     		movs r1, # 10
 1104              	_xunhuanqiuma:
 1105 0890 02B4     		push {r1}
 1106 0892 00F013F8 		bl _chufa
 1107 0896 02BC     		pop {r1}
 1108 0898 0446     		mov r4, r0
 1109 089a 4C43     		muls r4, r1
 1110 089c 2B1B     		subs r3, r5, r4
 1111 089e 3033     		adds r3, r3, # 0x30
ARM GAS  1.s 			page 21


 1112 08a0 0546     		mov r5, r0
 1113 08a2 013E     		subs r6, r6, # 1
 1114 08a4 08D0     		beq _qiumafanhui
 1115 08a6 BE42     		cmp r6, r7
 1116 08a8 02D1     		bne _meidaoxiaoshudian
 1117 08aa 2E24     		movs r4, # 0x2e		@小数点
 1118 08ac 9455     		strb r4, [r2,r6]	@插入小数点
 1119 08ae 013E     		subs r6, r6, # 1
 1120              	_meidaoxiaoshudian:
 1121 08b0 9355     		strb r3, [r2,r6]
 1122 08b2 3600     		movs r6, r6
 1123 08b4 ECD1     		bne _xunhuanqiuma
 1124 08b6 FFBD     		pop {r0-r7,pc}
 1125              	_qiumafanhui:
 1126 08b8 9355     		strb r3, [r2, r6]
 1127 08ba FFBD     		pop {r0-r7,pc}
 1128              	
 1129              	
 1130              		
 1131              	_chufa:				@软件除法
 1132              		@ r0 除以 r1 等于 商(r0)余数R1
 1133 08bc 1CB5     		push {r2-r4,lr}
 1134 08be 0028     		cmp r0, # 0
 1135 08c0 0FD0     		beq _chufafanhui
 1136 08c2 0029     		cmp r1, # 0
 1137 08c4 0DD0     		beq _chufafanhui
 1138 08c6 0246     		mov r2, r0
 1139 08c8 0123     		movs r3, # 1
 1140 08ca DB07     		lsls r3, r3, # 31
 1141 08cc 0020     		movs r0, # 0
 1142 08ce 0446     		mov r4, r0
 1143              	_chufaxunhuan:
 1144 08d0 5200     		lsls r2, r2, # 1
 1145 08d2 6441     		adcs r4, r4, r4
 1146 08d4 8C42     		cmp r4, r1
 1147 08d6 01D3     		bcc _chufaweishubudao0
 1148 08d8 C018     		adds r0, r0, r3
 1149 08da 641A     		subs r4, r4, r1
 1150              	_chufaweishubudao0:
 1151 08dc 5B08     		lsrs r3, r3, # 1
 1152 08de F7D1     		bne _chufaxunhuan
 1153 08e0 2146     		mov r1, r4
 1154              	_chufafanhui:
 1155 08e2 1CBD     		pop {r2-r4,pc}
 1156 08e4 00200000 		.ltorg
 1156      30000020 
 1156      00000048 
 1157              	
 1158              	
 1159              	_nmi_handler:
 1160 08f0 7047     		bx lr
 1161              	_hard_fault:
 1162 08f2 7047     		bx lr
 1163              	_svc_handler:
 1164 08f4 7047     		bx lr
 1165              	_pendsv_handler:
 1166 08f6 7047     		bx lr
ARM GAS  1.s 			page 22


 1167              	_systickzhongduan:
 1168 08f8 034A     		ldr r2, = jishu
 1169 08fa 0448     		ldr r0, = 0xe0000d04
 1170 08fc 1368     		ldr r3, [r2]
 1171 08fe 0449     		ldr r1, = 0x02000000
 1172 0900 0133     		adds r3, r3, # 1
 1173 0902 1360     		str r3, [r2]
 1174 0904 0160     		str r1, [r0]                 @ 清除SYSTICK中断
 1175              	aaa:
 1176 0906 70473400 		bx lr
 1176      0020040D 
 1176      00E00000 
 1176      0002
ARM GAS  1.s 			page 23


DEFINED SYMBOLS
                 1.s:9      .data:0000000000000000 zheng_xian_biao
<<<<<<< HEAD
                 1.s:11     .data:00000000000000ca $d
                 1.s:12     .data:00000000000000d0 xuan_zhuan_yin_zi
                 1.s:14     .data:00000000000003f0 lcdshuju
                 1.s:16     .data:0000000000000400 dianhua
                 1.s:18     .data:0000000000000410 qq
                 1.s:20     .data:0000000000000420 xushu
                 1.s:22     .data:0000000000000421 fu
                 1.s:24     .data:0000000000000422 zheng
                 1.s:26     .data:0000000000000423 dianzu
                 1.s:28     .data:0000000000000425 dianrong
                 1.s:30     .data:0000000000000427 pinlv
                 1.s:32     .data:000000000000042c qianou
                 1.s:34     .data:000000000000042d ou
                 1.s:36     .data:0000000000000431 kong
                 1.s:38     .data:0000000000000435 pifa
                 1.s:40     .data:0000000000000437 _fu
                 1.s:42     .data:0000000000000438 xiaomai
                 1.s:44     *ABS*:0000000020001000 STACKINIT
                 1.s:45     *ABS*:0000000020000000 asciimabiao
                 1.s:46     *ABS*:0000000020000030 liangcheng
                 1.s:47     *ABS*:0000000020000034 jishu
                 1.s:48     *ABS*:0000000020000038 jianbo
                 1.s:49     *ABS*:0000000020000040 dianyabiao
                 1.s:50     *ABS*:0000000020000110 zhengxiangbiao
                 1.s:51     *ABS*:00000000200001e0 fanxiangbiao
                 1.s:52     *ABS*:0000000020000600 lvboqizhizhen
                 1.s:53     *ABS*:0000000020000604 lvboqihuanchong
                 1.s:54     *ABS*:0000000020000700 lvboqizhizhen1
                 1.s:55     *ABS*:0000000020000704 lvboqihuanchong1
                 1.s:56     *ABS*:0000000020000800 lvboqizhizhen2
                 1.s:57     *ABS*:0000000020000804 lvboqihuanchong2
                 1.s:58     *ABS*:0000000020000900 lvboqizhizhen3
                 1.s:59     *ABS*:0000000020000904 lvboqihuanchong3
                 1.s:60     *ABS*:0000000020000a00 xia_bi_shi_bu
                 1.s:61     *ABS*:0000000020000a04 shang_bi_shi_bu
                 1.s:62     *ABS*:0000000020000a08 xia_bi_xu_bu
                 1.s:63     *ABS*:0000000020000a0c shang_bi_xu_bu
                 1.s:64     *ABS*:0000000020000a10 bu_chang_100r
                 1.s:65     *ABS*:0000000020000a14 zidongliangchengyanshi
                 1.s:66     *ABS*:0000000020000a18 dianzuzhi
                 1.s:67     *ABS*:0000000020000a1c dianrongzhi
                 1.s:69     .text:0000000000000000 vectors
                 1.s:116    .text:00000000000000b0 _start
                 1.s:1159   .text:00000000000008f0 _nmi_handler
                 1.s:1161   .text:00000000000008f2 _hard_fault
                 1.s:1163   .text:00000000000008f4 _svc_handler
                 1.s:1165   .text:00000000000008f6 _pendsv_handler
                 1.s:1167   .text:00000000000008f8 _systickzhongduan
                 1.s:1175   .text:0000000000000906 aaa
                            .text:0000000000000000 $d
                 1.s:114    .text:00000000000000b0 $t
                 1.s:118    .text:00000000000000b2 yanshi111
                 1.s:122    .text:00000000000000b6 shizhong
                 1.s:129    .text:00000000000000c2 denghse
                 1.s:133    .text:00000000000000c8 dengpllguan
ARM GAS  1.s 			page 24


                 1.s:141    .text:00000000000000d6 dengpll
                 1.s:148    .text:00000000000000e0 dengdai14mshizhongwending
                 1.s:153    .text:00000000000000e6 _neicunqingling
                 1.s:157    .text:00000000000000ec _neicunqinglingxunhuan
                 1.s:162    .text:00000000000000f2 _waisheshizhong
                 1.s:177    .text:00000000000000fc _waishezhongduan
                 1.s:192    .text:00000000000000fc io_she_zhi
                 1.s:221    .text:0000000000000106 _adcchushihua
                 1.s:225    .text:000000000000010c _dengadcjiaozhun
                 1.s:229    .text:0000000000000112 _kaiadc
                 1.s:234    .text:000000000000011a _dengdaiadcwending
                 1.s:238    .text:0000000000000120 _tongdaoxuanze
                 1.s:252    .text:0000000000000134 dmachushihua
                 1.s:284    .text:0000000000000158 tim1chushiha
                 1.s:310    .text:0000000000000182 _lcdchushihua
                 1.s:1025   .text:000000000000080e _xielcd
                 1.s:1017   .text:0000000000000804 _lcdyanshi
                 1.s:484    .text:00000000000003b4 dd
                 1.s:343    .text:00000000000001c6 ting
                 1.s:803    .text:000000000000060a __zi_dong_liang_cheng
                 1.s:930    .text:00000000000006e8 _jianbo
                 1.s:768    .text:00000000000005c6 __zhen_fu_lv_bo
                 1.s:548    .text:0000000000000420 __zu_kang_ji_suan
                 1.s:1097   .text:0000000000000886 _zhuanascii
                 1.s:1000   .text:00000000000007e8 _lcdxianshi
                 1.s:360    .text:00000000000001f2 __liangcheng100k
                 1.s:384    .text:000000000000022a __liangcheng10k
                 1.s:1131   .text:00000000000008bc _chufa
                 1.s:449    .text:00000000000002bc __xian_shi_qi_ta
                 1.s:406    .text:000000000000025c __liangcheng1k
                 1.s:428    .text:000000000000028e __liangcheng100r
                 1.s:470    .text:00000000000002ea __xian_shi_dian_rong
                 1.s:482    .text:0000000000000300 $d
                 1.s:485    .text:00000000000003b4 $t
                 1.s:654    .text:00000000000004e4 __xian_shi_shang_xia_bi
                 1.s:502    .text:00000000000003dc __ji_suan_fu_du
                 1.s:512    .text:00000000000003e6 _shibubushifushu
                 1.s:517    .text:00000000000003ee _xububushifushu
                 1.s:522    .text:00000000000003f6 _panduanxubushibushi0
                 1.s:526    .text:00000000000003fc _jisuanfudu1
                 1.s:539    .text:0000000000000412 _alpha_min_beta_max
                 1.s:531    .text:0000000000000404 _alpha_max_beta_min
                 1.s:560    .text:0000000000000436 __c_liang_cheng_100k
                 1.s:565    .text:000000000000043e __c_liang_cheng10k
                 1.s:577    .text:0000000000000450 __ji_suan_dian_rong
                 1.s:570    .text:0000000000000446 __c_liang_cheng1k
                 1.s:575    .text:000000000000044e __c_liang_cheng100ou
                 1.s:632    .text:00000000000004c0 __shu_tai_da
                 1.s:641    .text:00000000000004d4 __fu_zhi_nei_cun
                 1.s:645    .text:00000000000004d8 __fu_zhi_xun_huan
                 1.s:671    .text:0000000000000502 __shang_bi_shi_bu_zheng
                 1.s:676    .text:000000000000050c __xian_shi_shang_bi_shi_bu
                 1.s:697    .text:0000000000000538 __shang_bi_xu_bu_zheng
                 1.s:702    .text:0000000000000542 __xian_shi_shang_bi_xu_bu
                 1.s:723    .text:000000000000056e __xia_bi_shi_bu_zheng
                 1.s:728    .text:0000000000000578 __xian_shi_xia_bi_shi_bu
                 1.s:750    .text:00000000000005a4 __xia_bi_xu_bu_zheng
ARM GAS  1.s 			page 25


                 1.s:755    .text:00000000000005ae __xian_shi_xia_bi_xu_bu
                 1.s:970    .text:000000000000072c _lvboqi
                 1.s:843    .text:000000000000064a __liang_cheng_fan_hui
                 1.s:835    .text:000000000000063e __xuan_kong
                 1.s:824    .text:000000000000062e __pan_duan_liang_cheng
                 1.s:831    .text:000000000000063a __gai_liang_cheng
                 1.s:833    .text:000000000000063c __bao_cun_liang_cheng
                 1.s:840    .text:0000000000000646 __liang_cheng_chong_zhi
                 1.s:845    .text:000000000000064c __jianbo
                 1.s:856    .text:000000000000065c __xia_bi_kai
                 1.s:858    .text:000000000000065e __tong_dao_xuan_ze
                 1.s:942    .text:0000000000000702 _jianboyanshi
                 1.s:878    .text:000000000000068c __DFT_ji_suan
                 1.s:892    .text:00000000000006a2 __ji_suan_dft_xun_huan
                 1.s:898    .text:00000000000006ac __qu_fan_r4
                 1.s:902    .text:00000000000006b2 __ji_suan_dft
                 1.s:945    .text:0000000000000706 _jianboyanshixunhuan
                 1.s:950    .text:000000000000070c __zhao_zui_da_shu
                 1.s:956    .text:0000000000000716 __zhao
                 1.s:962    .text:0000000000000720 __di_zhi_jian
                 1.s:982    .text:000000000000073c _lvboqimeidaohuanchongquding
                 1.s:985    .text:0000000000000740 _lvboqixunhuan
                 1.s:989    .text:0000000000000746 _lvbozonghe
                 1.s:997    .text:0000000000000754 $d
                 1.s:1001   .text:00000000000007e8 $t
                 1.s:1009   .text:00000000000007f6 _lcdxianshixunhuan
                 1.s:1020   .text:0000000000000808 _lcdyanshixunhuan
                 1.s:1039   .text:0000000000000826 __lcd_ming_ling
                 1.s:1036   .text:0000000000000822 __lcd_shu_ju
                 1.s:1041   .text:0000000000000828 __xie_lcd_shu_ju
                 1.s:1056   .text:000000000000084a __74hc595
                 1.s:1063   .text:0000000000000856 __595_yiweixunhuan
                 1.s:1067   .text:000000000000085c __595_yanshi
                 1.s:1076   .text:000000000000086a __ser_0
                 1.s:1073   .text:0000000000000866 __ser_1
                 1.s:1078   .text:000000000000086c __595_yiwei
                 1.s:1081   .text:0000000000000870 __595_yanshi1
                 1.s:1089   .text:000000000000087e __595_yanshi2
                 1.s:1104   .text:0000000000000890 _xunhuanqiuma
                 1.s:1125   .text:00000000000008b8 _qiumafanhui
                 1.s:1120   .text:00000000000008b0 _meidaoxiaoshudian
                 1.s:1154   .text:00000000000008e2 _chufafanhui
                 1.s:1143   .text:00000000000008d0 _chufaxunhuan
                 1.s:1150   .text:00000000000008dc _chufaweishubudao0
                 1.s:1156   .text:00000000000008e4 $d
                 1.s:1160   .text:00000000000008f0 $t
                 1.s:1176   .text:0000000000000908 $d
=======
                 1.s:11     .data:00000000000000ca lcdshuju
                 1.s:13     .data:00000000000000da dianhua
                 1.s:15     .data:00000000000000ea qq
                 1.s:17     .data:00000000000000fa xushu
                 1.s:19     .data:00000000000000fb fu
                 1.s:21     .data:00000000000000fc zheng
                 1.s:23     .data:00000000000000fd dianzu
                 1.s:25     .data:00000000000000ff dianrong
                 1.s:27     .data:0000000000000101 pinlv
                 1.s:29     .data:0000000000000106 qianou
                 1.s:31     .data:0000000000000107 ou
                 1.s:33     .data:000000000000010b kong
                 1.s:35     .data:000000000000010f pifa
                 1.s:37     .data:0000000000000111 xiaomai
                 1.s:39     *ABS*:0000000020001000 STACKINIT
                 1.s:40     *ABS*:0000000020000000 asciimabiao
                 1.s:41     *ABS*:0000000020000030 liangcheng
                 1.s:42     *ABS*:0000000020000034 jishu
                 1.s:43     *ABS*:0000000020000038 jianbo
                 1.s:44     *ABS*:0000000020000040 dianyabiao
                 1.s:45     *ABS*:0000000020000110 dianyabiao1
                 1.s:46     *ABS*:00000000200001e0 dianyabiao2
                 1.s:47     *ABS*:0000000020000600 lvboqizhizhen
                 1.s:48     *ABS*:0000000020000604 lvboqihuanchong
                 1.s:49     *ABS*:0000000020000700 lvboqizhizhen1
                 1.s:50     *ABS*:0000000020000704 lvboqihuanchong1
                 1.s:51     *ABS*:0000000020000800 lvboqizhizhen2
                 1.s:52     *ABS*:0000000020000804 lvboqihuanchong2
                 1.s:53     *ABS*:0000000020000900 lvboqizhizhen3
                 1.s:54     *ABS*:0000000020000904 lvboqihuanchong3
                 1.s:55     *ABS*:0000000020000a00 xia_bi_shi_bu
                 1.s:56     *ABS*:0000000020000a04 shang_bi_shi_bu
                 1.s:57     *ABS*:0000000020000a08 xia_bi_xu_bu
                 1.s:58     *ABS*:0000000020000a0c shang_bi_xu_bu
                 1.s:59     *ABS*:0000000020000a10 bu_chang_100r
                 1.s:60     *ABS*:0000000020000a14 zidongliangchengyanshi
                 1.s:61     *ABS*:0000000020000a18 dianzuzhi
                 1.s:62     *ABS*:0000000020000a1c dianrongzhi
                 1.s:64     .text:0000000000000000 vectors
                 1.s:111    .text:00000000000000b0 _start
                 1.s:1032   .text:0000000000000820 _nmi_handler
                 1.s:1034   .text:0000000000000822 _hard_fault
                 1.s:1036   .text:0000000000000824 _svc_handler
                 1.s:1038   .text:0000000000000826 _pendsv_handler
                 1.s:1040   .text:0000000000000828 _systickzhongduan
                 1.s:1048   .text:0000000000000836 aaa
                            .text:0000000000000000 $d
                 1.s:109    .text:00000000000000b0 $t
                 1.s:113    .text:00000000000000b2 yanshi111
                 1.s:117    .text:00000000000000b6 shizhong
                 1.s:124    .text:00000000000000c2 denghse
                 1.s:128    .text:00000000000000c8 dengpllguan
                 1.s:136    .text:00000000000000d6 dengpll
                 1.s:143    .text:00000000000000e0 dengdai14mshizhongwending
                 1.s:148    .text:00000000000000e6 _neicunqingling
ARM GAS  1.s 			page 21


                 1.s:152    .text:00000000000000ec _neicunqinglingxunhuan
                 1.s:157    .text:00000000000000f2 _waisheshizhong
                 1.s:172    .text:00000000000000fc _waishezhongduan
                 1.s:187    .text:00000000000000fc io_she_zhi
                 1.s:216    .text:0000000000000106 _adcchushihua
                 1.s:220    .text:000000000000010c _dengadcjiaozhun
                 1.s:224    .text:0000000000000112 _kaiadc
                 1.s:229    .text:000000000000011a _dengdaiadcwending
                 1.s:233    .text:0000000000000120 _tongdaoxuanze
                 1.s:247    .text:0000000000000134 dmachushihua
                 1.s:279    .text:0000000000000158 tim1chushiha
                 1.s:305    .text:0000000000000182 _lcdchushihua
                 1.s:898    .text:000000000000073e _xielcd
                 1.s:890    .text:0000000000000734 _lcdyanshi
                 1.s:338    .text:00000000000001c4 ting
                 1.s:733    .text:00000000000005a0 __zi_dong_liang_cheng
                 1.s:776    .text:00000000000005e2 _jianbo
                 1.s:698    .text:000000000000055c __zhen_fu_lv_bo
                 1.s:542    .text:0000000000000422 __zu_kang_ji_suan
                 1.s:970    .text:00000000000007b6 _zhuanascii
                 1.s:873    .text:0000000000000718 _lcdxianshi
                 1.s:355    .text:00000000000001f0 __liangcheng100k
                 1.s:379    .text:0000000000000228 __liangcheng10k
                 1.s:1004   .text:00000000000007ec _chufa
                 1.s:444    .text:00000000000002ba __xian_shi_qi_ta
                 1.s:401    .text:000000000000025a __liangcheng1k
                 1.s:423    .text:000000000000028c __liangcheng100r
                 1.s:465    .text:00000000000002e8 __xian_shi_dian_rong
                 1.s:477    .text:00000000000002fe $d
                 1.s:477    .text:0000000000000300 $d
                 1.s:479    .text:00000000000003b4 dd
                 1.s:480    .text:00000000000003b4 $t
                 1.s:645    .text:00000000000004e4 __xian_shi_shang_xia_bi
                 1.s:496    .text:00000000000003de __ji_suan_fu_du
                 1.s:506    .text:00000000000003e8 _shibubushifushu
                 1.s:511    .text:00000000000003f0 _xububushifushu
                 1.s:516    .text:00000000000003f8 _panduanxubushibushi0
                 1.s:520    .text:00000000000003fe _jisuanfudu1
                 1.s:533    .text:0000000000000414 _alpha_min_beta_max
                 1.s:525    .text:0000000000000406 _alpha_max_beta_min
                 1.s:554    .text:0000000000000438 __c_liang_cheng_100k
                 1.s:559    .text:0000000000000440 __c_liang_cheng10k
                 1.s:571    .text:0000000000000452 __ji_suan_dian_rong
                 1.s:564    .text:0000000000000448 __c_liang_cheng1k
                 1.s:569    .text:0000000000000450 __c_liang_cheng100ou
                 1.s:626    .text:00000000000004c2 __shu_tai_da
                 1.s:635    .text:00000000000004d6 __fu_zhi_nei_cun
                 1.s:639    .text:00000000000004da __fu_zhi_xun_huan
                 1.s:843    .text:0000000000000664 _lvboqi
                 1.s:773    .text:00000000000005e0 __liang_cheng_fan_hui
                 1.s:765    .text:00000000000005d4 __xuan_kong
                 1.s:754    .text:00000000000005c4 __pan_duan_liang_cheng
                 1.s:761    .text:00000000000005d0 __gai_liang_cheng
                 1.s:763    .text:00000000000005d2 __bao_cun_liang_cheng
                 1.s:770    .text:00000000000005dc __liang_cheng_chong_zhi
                 1.s:815    .text:000000000000063a _jianboyanshi
                 1.s:823    .text:0000000000000644 __zhao_zui_da_shu
ARM GAS  1.s 			page 22


                 1.s:818    .text:000000000000063e _jianboyanshixunhuan
                 1.s:829    .text:000000000000064e __zhao
                 1.s:835    .text:0000000000000658 __di_zhi_jian
                 1.s:855    .text:0000000000000674 _lvboqimeidaohuanchongquding
                 1.s:858    .text:0000000000000678 _lvboqixunhuan
                 1.s:862    .text:000000000000067e _lvbozonghe
                 1.s:870    .text:000000000000068c $d
                 1.s:874    .text:0000000000000718 $t
                 1.s:882    .text:0000000000000726 _lcdxianshixunhuan
                 1.s:893    .text:0000000000000738 _lcdyanshixunhuan
                 1.s:912    .text:0000000000000756 __lcd_ming_ling
                 1.s:909    .text:0000000000000752 __lcd_shu_ju
                 1.s:914    .text:0000000000000758 __xie_lcd_shu_ju
                 1.s:929    .text:000000000000077a __74hc595
                 1.s:936    .text:0000000000000786 __595_yiweixunhuan
                 1.s:940    .text:000000000000078c __595_yanshi
                 1.s:949    .text:000000000000079a __ser_0
                 1.s:946    .text:0000000000000796 __ser_1
                 1.s:951    .text:000000000000079c __595_yiwei
                 1.s:954    .text:00000000000007a0 __595_yanshi1
                 1.s:962    .text:00000000000007ae __595_yanshi2
                 1.s:977    .text:00000000000007c0 _xunhuanqiuma
                 1.s:998    .text:00000000000007e8 _qiumafanhui
                 1.s:993    .text:00000000000007e0 _meidaoxiaoshudian
                 1.s:1027   .text:0000000000000812 _chufafanhui
                 1.s:1016   .text:0000000000000800 _chufaxunhuan
                 1.s:1023   .text:000000000000080c _chufaweishubudao0
                 1.s:1029   .text:0000000000000814 $d
                 1.s:1033   .text:0000000000000820 $t
                 1.s:1049   .text:0000000000000838 $d
>>>>>>> 1c28160d29ba40963993e58ca692a911fd93de54

NO UNDEFINED SYMBOLS
