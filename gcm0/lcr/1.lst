ARM GAS  1.s 			page 1


   1              		@@ 单片机stm32f030f4p6
   2              		@@ 阻抗桥
   3              		@作者：yjmwxwx
   4              		@时间：2019-08-12
   5              		@编译器：ARM-NONE-EABI
   6              		 .thumb
   7              		         .syntax unified
   8              	.section .data
   9              	zheng_xian_biao:
  10 0000 17001800 		.short 23,24,26,27,29,30,31,33,34,35,36,38,39,40,41,41,42,43,44,44,45,45,46,46,46,46,46,46,46,45,4
  10      1A001B00 
  10      1D001E00 
  10      1F002100 
  10      22002300 
  11              	lcdshuju:
  12 00cc 796A6D77 		.ascii  "yjmwxwx-20190812"
  12      7877782D 
  12      32303139 
  12      30383132 
  13              	dianhua:	
  14 00dc 20202020 		.ascii	"     15552208295"
  14      20313535 
  14      35323230 
  14      38323935 
  15              	qq:
  16 00ec 20202051 		.ascii	"   QQ:3341656346"
  16      513A3333 
  16      34313635 
  16      36333436 
  17              	xushu:
  18 00fc 69       		.ascii "i"
  19              	fu:
  20 00fd 2D       		.ascii "-"
  21              	zheng:
  22 00fe 2B       		.ascii "+"
  23              	dianzu:
  24 00ff 523D     		.ascii	"R="
  25              	dianrong:
  26 0101 433D     		.ascii	"C="
  27              	pinlv:
  28 0103 31304B48 		.ascii	"10KHZ"
  28      5A
  29              	qianou:
  30 0108 4B       		.ascii	"K"
  31              	ou:
  32 0109 F4000000 	        .int    0xf4
  33              	kong:
  34 010d 20202020 		.int 0x20202020
  35              	xiaomai:
  36 0111 7869616F 		.ascii "xiaomai ="
  36      6D616920 
  36      3D
  37              		.equ STACKINIT,        	        0x20001000
  38              		.equ asciimabiao,		0x20000000
  39              		.equ liangcheng,		0x20000030
  40              		.equ jishu,			0x20000034
  41              		.equ jianbo,			0x20000038
ARM GAS  1.s 			page 2


  42              		.equ dianyabiao,		0x20000040
  43              		.equ lvboqizhizhen,		0x20000600
  44              		.equ lvboqihuanchong,		0x20000604
  45              		.equ lvboqizhizhen1,		0x20000700
  46              		.equ lvboqihuanchong1,		0x20000704
  47              		.equ lvboqizhizhen2,		0x20000800
  48              		.equ lvboqihuanchong2,		0x20000804
  49              		.equ lvboqizhizhen3,		0x20000900
  50              		.equ lvboqihuanchong3,		0x20000904
  51              		.equ xia_bi_shi_bu,		0x20000a00
  52              		.equ shang_bi_shi_bu,		0x20000a04
  53              		.equ xia_bi_xu_bu,		0x20000a08
  54              		.equ shang_bi_xu_bu,		0x20000a0c
  55              		.equ bu_chang_100r,		0x20000a10
  56              		.equ zidongliangchengyanshi,	0x20000a14
  57              		.equ dianzuzhi,			0x20000a18
  58              		.equ dianrongzhi,		0x20000a1c
  59              		.section .text
  60              	vectors:
  61 0000 00100020 		.word STACKINIT
  62 0004 B1000000 		.word _start + 1
  63 0008 95070000 		.word _nmi_handler + 1
  64 000c 97070000 		.word _hard_fault  + 1
  65 0010 00000000 		.word 0
  66 0014 00000000 		.word 0
  67 0018 00000000 		.word 0
  68 001c 00000000 		.word 0
  69 0020 00000000 		.word 0
  70 0024 00000000 		.word 0
  71 0028 00000000 		.word 0
  72 002c 99070000 		.word _svc_handler +1
  73 0030 00000000 		.word 0
  74 0034 00000000 		.word 0
  75 0038 9B070000 		.word _pendsv_handler +1
  76 003c 9D070000 		.word _systickzhongduan +1               @ 15
  77 0040 AB070000 		.word aaa +1     @ _wwdg +1          @ 0
  78 0044 AB070000 		.word aaa +1     @_pvd +1            @ 1
  79 0048 AB070000 		.word aaa +1     @_rtc +1            @ 2
  80 004c AB070000 		.word aaa +1     @_flash +1          @ 3
  81 0050 AB070000 		.word aaa +1	@ _rcc + 1          @ 4
  82 0054 AB070000 		.word aaa +1      @_exti0_1  +1      @ 5
  83 0058 AB070000 		.word aaa +1      @ _exti2_3 +1      @ 6
  84 005c AB070000 		.word aaa +1       @_exti4_15 +1     @ 7
  85 0060 AB070000 		.word aaa +1                         @ 8
  86 0064 AB070000 		.word aaa +1 	@_dma1_1  +1    @ 9
  87 0068 AB070000 		.word aaa +1    @_dma1_2_3 +1        @ 10
  88 006c AB070000 		.word aaa +1       @_dma1_4_5 +1     @ 11
  89 0070 AB070000 		.word aaa +1	 @_adc1 +1          @ 12
  90 0074 AB070000 		.word aaa +1       @_tim1_brk_up +1  @ 13
  91 0078 AB070000 		.word aaa +1        @ _tim1_cc +1    @ 14
  92 007c AB070000 		.word aaa +1         @_tim2 +1       @ 15
  93 0080 AB070000 		.word aaa +1          @_tim3 +1      @ 16
  94 0084 AB070000 		.word aaa +1                         @ 17
  95 0088 AB070000 		.word aaa +1		                @ 18
  96 008c AB070000 		.word aaa +1	@_tim14 +1    @ 19
  97 0090 AB070000 		.word aaa +1                         @ 20
  98 0094 AB070000 		.word aaa +1         @_tim16 +1      @ 21
ARM GAS  1.s 			page 3


  99 0098 AB070000 		.word aaa +1         @_tim17 +1      @ 22
 100 009c AB070000 		.word aaa +1          @_i2c   +1     @ 23
 101 00a0 AB070000 		.word aaa +1                         @ 24
 102 00a4 AB070000 		.word aaa +1           @_spi   +1    @ 25
 103 00a8 AB070000 		.word aaa +1                         @ 26
 104 00ac AB070000 		.word aaa +1         @_usart1 +1     @ 27
 105              		.align 2
 106              	
 107              	_start:
 108 00b0 9348     		ldr r0, = 0xffff
 109              	yanshi111:
 110 00b2 0138     		subs r0, r0, # 1
 111 00b4 FDD1     		bne yanshi111
 112              		
 113              	shizhong:
 114 00b6 934A     		ldr r2, = 0x40022000   @FLASH访问控制
 115 00b8 3221     		movs r1, # 0x32
 116 00ba 1160     		str r1, [r2]           @FLASH缓冲 缓冲开启
 117 00bc 9248     		ldr r0, = 0x40021000 @ rcc
 118 00be 9349     		ldr r1, = 0x10001
 119 00c0 0160     		str r1, [r0]
 120              	denghse:
 121 00c2 0168     		ldr r1, [r0]
 122 00c4 8903     		lsls r1, r1, # 14
 123 00c6 FCD5     		bpl denghse
 124              	dengpllguan:
 125 00c8 0168     		ldr r1, [r0]
 126 00ca 8901     		lsls r1, r1, # 6
 127 00cc FCD4     		bmi dengpllguan
 128 00ce 9049     	        ldr r1, = 0x110002
 129 00d0 4160     	        str r1, [r0, # 0x04]
 130 00d2 9049     		ldr r1, = 0x1010001
 131 00d4 0160     		str r1, [r0]
 132              	dengpll:
 133 00d6 0168     		ldr r1, [r0]
 134 00d8 8901     		lsls r1, # 6
 135 00da FCD5     		bpl dengpll
 136              		@0x34时钟控制寄存器 2 (RCC_CR2)
 137 00dc 0121     		movs r1, # 0x01
 138 00de 4163     		str r1, [r0, # 0x34]  @ HSI开14M时钟
 139              	dengdai14mshizhongwending:
 140 00e0 416B     		ldr r1, [r0, # 0x34]
 141 00e2 8907     		lsls r1, r1, # 30     @ 左移30位
 142 00e4 FCD5     		bpl dengdai14mshizhongwending  @ 等待14M时钟稳定
 143              	
 144              	_neicunqingling:
 145 00e6 8C48     		ldr r0, = 0x20000000
 146 00e8 0021     		movs r1, # 0
 147 00ea 8C4B     		ldr r3, = 0x1000
 148              	_neicunqinglingxunhuan:
 149 00ec 043B     		subs r3, # 4
 150 00ee C150     		str r1, [r0, r3]
 151 00f0 FCD1     		bne _neicunqinglingxunhuan
 152              	
 153              	_waisheshizhong:			 @ 外设时钟
 154              		@+0x14=RCC_AHBENR
 155              		@0=DMA @2=SRAM @4=FLITF@6=CRC @17=PA @18=PB @19=PC @20=PD @22=PF
ARM GAS  1.s 			page 4


 156 00f2 8548     		ldr r0, = 0x40021000
 157 00f4 8A49     		ldr r1, = 0x460005
 158 00f6 4161     		str r1, [r0, # 0x14]
 159              	
 160              		@+0x18外设时钟使能寄存器 (RCC_APB2ENR)
 161              		@0=SYSCFG @5=USART6EN @9=ADC @11=TIM1 @12=SPI1 @14=USART1 @16=TIM15 @17=TIM16 @18=TIM17 @22=DBGMCU
 162 00f8 8A49     		ldr r1, = 0xa00
 163 00fa 8161     		str r1, [r0, # 0x18]
 164              		@+0X1C=RCC_APB1ENR
 165              		@1=TIM3 @4=TIM6 @5=TIM7 @8=TIM14 @11=WWDG @14=SPI @17=USRT2 @18=USART3 @20=USART5 @21=I2C1
 166              		@22=I2C2 @23=USB @28=PWR
 167 00fc 0221     		movs r1, # 0x02
 168 00fe C161     		str r1, [r0, # 0x1c]
 169              	
 170              	
 171              	_waishezhongduan:				@外设中断
 172              		@0xE000E100    0-31  写1开，写0没效
 173              		@0XE000E180    0-31 写1关，写0没效
 174              		@0XE000E200    0-31 挂起，写0没效
 175              		@0XE000E280    0-31 清除， 写0没效
 176              	
 177              	@_systick:				@ systick定时器初始化
 178              	
 179              	@	ldr r0, = 0xe000e010
 180              	@	ldr r1, = 0xffffff
 181              	@	str r1, [r0, # 4]
 182              	@	str r1, [r0, # 8]
 183              	@	movs r1, # 0x07
 184              	@	str r1, [r0]
 185              		
 186              	io_she_zhi:
 187              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 188              		@a(0x48000000)b(0x48000400)c(0x48000800)d(0x48000c00)f(0x48001400)
 189              		@ 输入（00），通用输出（01），复用功能（10），模拟（11）
 190              		@偏移0x4 = 端口输出类型 @ （0 推挽），（ 1 开漏）
 191              		@偏移0x8 = 输出速度  00低速， 01中速， 11高速
 192              		@偏移0xC = 上拉下拉 (00无上下拉，  01 上拉， 10下拉)
 193              		@偏移0x10 = 输入数据寄存器
 194              		@偏移0x14 = 输出数据寄存器
 195              		@偏移0x18 = 端口开  0-15置位
 196              		@偏移0x28 = 端口关
 197              		@0X20 = 复用低
 198              		@GPIO口0（0-3位）每个IO口占用4位
 199              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 200              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 201              		@0x24 = 复用高
 202              		@GPIO口8 （0-3位）每个IO口占用4位
 203              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 204              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 205              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 206              	
 207 0100 8948     		ldr r0, = 0x48000000
 208 0102 8A49     		ldr r1, = 0x2824540f
 209 0104 0160     		str r1, [r0]
 210 0106 8A49     		ldr r1, = 0x200
 211 0108 4162     		str r1, [r0, # 0x24]
 212              	
ARM GAS  1.s 			page 5


 213              	
 214              	
 215              	_adcchushihua:
 216 010a 8A48     	        ldr r0, = 0x40012400  @ adc基地址
 217 010c 8A49     	        ldr r1, = 0x80000000
 218 010e 8160     	        str r1, [r0, # 0x08]  @ ADC 控制寄存器 (ADC_CR)  @adc校准
 219              	_dengadcjiaozhun:
 220 0110 8168     	        ldr r1, [r0, # 0x08]
 221 0112 0900     	        movs r1, r1
 222 0114 FCD4     	        bmi _dengadcjiaozhun   @ 等ADC校准
 223              	_kaiadc:
 224 0116 8168     		ldr r1, [r0, # 0x08]
 225 0118 0122     	        movs r2, # 0x01
 226 011a 1143     		orrs r1, r1, r2
 227 011c 8160     	        str r1, [r0, # 0x08]
 228              	_dengdaiadcwending:
 229 011e 0168     		ldr r1, [r0]
 230 0120 C907     		lsls r1, r1, # 31
 231 0122 FCD5     		bpl _dengdaiadcwending @ 等ADC稳定
 232              	_tongdaoxuanze:
 233 0124 8549     		ldr r1, = 2
 234 0126 8162     	        str r1, [r0, # 0x28]    @ 通道选择寄存器 (ADC_CHSELR)
 235 0128 8549     	        ldr r1, = 0xc03
 236 012a C160     	        str r1, [r0, # 0x0c]    @ 配置寄存器 1 (ADC_CFGR1)
 237 012c 0021     		movs r1, # 0
 238 012e 4161     	        str r1, [r0, # 0x14]    @ ADC 采样时间寄存器 (ADC_SMPR)
 239 0130 8168     		ldr r1, [r0, # 0x08]
 240 0132 844A     	        ldr r2, = 0x04         @ 开始转换
 241 0134 1143     	        orrs r1, r1, r2
 242 0136 8160     		str r1, [r0, # 0x08]    @ 控制寄存器 (ADC_CR)
 243              	
 244              	
 245              		
 246              	dmachushihua:
 247              	        @+0=LSR,+4=IFCR,
 248              	        @+8=CCR1,+c=CNDTR1,+10=CPAR1+14=CMAR1,
 249              	        @+1c=CCR2,+20=CNDTR2,+24=CPAR2,+28=CMAR2
 250              	        @+30=CCR3,+34=CNDTR3,+38=CPAR2,+3c=CMAR3
 251              	        @+44=CCR4,+48=CNDTR4,+4c=CPAR4,+50=CMAR4
 252              	        @+58=CCR5,+5c=CNDTR5,+60=CPAR5,+64=CMAR5
 253              	        @+6C=CCR6,+70=CNDTR6,+74=CPAR6,+78=CMAR6
 254              	        @+80=CCR7,+84=CNDTR7,+88=CPAR7,+8c=CMAR7
 255              	
 256              	        @tim1ch3DMA
 257 0138 8348     	        ldr r0, = 0x40020000
 258 013a 8449     	        ldr r1, = 0x40012c3c @ 外设地址
 259 013c 0166     	        str r1, [r0, # 0x60]
 260 013e 8449     	        ldr r1, = zheng_xian_biao @ 储存器地址
 261 0140 4166     	        str r1, [r0, # 0x64]
 262 0142 8449     	        ldr r1, = 101             @点数
 263 0144 C165     	        str r1, [r0, # 0x5c]
 264 0146 8449     	        ldr r1, = 0x35b1         @ 储存到外设
 265 0148 8165     	        str r1, [r0, # 0x58]
 266              		@ adc dma
 267 014a 7F48     		ldr r0, = 0x40020000
 268 014c 8349     		ldr r1, = 0x40012440
 269 014e 0161     		str r1, [r0, # 0x10]
ARM GAS  1.s 			page 6


 270 0150 8349     		ldr r1, = dianyabiao
 271 0152 4161     		str r1, [r0, # 0x14]
 272 0154 8349     		ldr r1, =  202
 273 0156 C160     		str r1, [r0, # 0x0c]
 274 0158 8349     		ldr r1, = 0x5a1		@ 5a1
 275 015a 8160     		str r1, [r0, # 0x08]
 276              	
 277              	
 278              	tim1chushiha:
 279 015c 8348     	        ldr r0, = 0x40012c00 @ tim1_cr1
 280 015e 0021     	        movs r1, # 0
 281 0160 8162     	        str r1, [r0, # 0x28] @ psc
 282 0162 8349     	        ldr r1, = 46
 283 0164 C162     	        str r1, [r0, # 0x2c] @ ARR
 284              		@	movs r1, # 0x40
 285 0166 2021     		movs r1, # 0x20
 286 0168 4160     		str r1, [r0, # 0x04] @ TRGO
 287 016a 3821     		movs r1, # 0x38
 288 016c 8161     		str r1, [r0, # 0x18] @ ccmr1 cc1
 289 016e 2E21     		movs r1, # 46
 290 0170 4163     		str r1, [r0, # 0x34]
 291 0172 8049     	        ldr r1, = 0x68
 292 0174 C161     	        str r1, [r0, # 0x1c] @ ccmr2  CC3
 293 0176 8049     	        ldr r1, = 0x100    @  CC3
 294 0178 0162     	        str r1, [r0, # 0x20] @ ccer
 295 017a 8049     	        ldr r1, = 0x8000
 296 017c 4164     	        str r1, [r0, # 0x44] @ BDTR
 297 017e 8049     	        ldr r1, = 0x800 @ CC3 DMA
 298 0180 C160     	        str r1, [r0, # 0x0c] @ DIER
 299 0182 8049     	        ldr r1, = 0x81
 300 0184 0160     	        str r1, [r0]
 301              	
 302              	
 303              	
 304              	_lcdchushihua:
 305 0186 3320     		movs r0, # 0x33
 306 0188 0021     		movs r1, # 0
 307 018a 00F092FA 		bl _xielcd
 308 018e 00F08BFA 		bl _lcdyanshi
 309 0192 3220     		movs r0, # 0x32
 310 0194 0021     		movs r1, # 0
 311 0196 00F08CFA 		bl _xielcd
 312 019a 00F085FA 		bl _lcdyanshi
 313 019e 2820     		movs r0, # 0x28
 314 01a0 0021     		movs r1, # 0
 315 01a2 00F086FA 		bl _xielcd
 316 01a6 00F07FFA 		bl _lcdyanshi
 317 01aa 0C20     		movs r0, # 0x0c
 318 01ac 0021     		movs r1, # 0
 319 01ae 00F080FA 		bl _xielcd
 320 01b2 00F079FA 		bl _lcdyanshi
 321 01b6 0120     		movs r0, # 0x01
 322 01b8 0021     		movs r1, # 0
 323 01ba 00F07AFA 		bl _xielcd
 324 01be 00F073FA 		bl _lcdyanshi
 325              	
 326              	@	movs r0, # 0x80
ARM GAS  1.s 			page 7


 327              	@	ldr r1, = lcdshuju
 328              	@	movs r2, # 16
 329              	@	movs r3, # 0xff
 330              	@	bl _lcdxianshi
 331              		
 332 01c2 7148     		ldr r0, = liangcheng
 333 01c4 0021     		movs r1, # 0x00
 334 01c6 0160     		str r1, [r0]
 335              	
 336              	ting:
 337 01c8 00F0C7F9 		bl __zi_dong_liang_cheng
 338 01cc 6448     	        ldr r0, = dianyabiao
 339 01ce 3030     		adds r0, r0, # 0x30
 340 01d0 3221     	        movs r1, # 0x32
 341 01d2 00F0E3F9 	        bl _jianbo
 342 01d6 00F09EF9 		bl __zhen_fu_lv_bo
 343 01da 00F01DF9 		bl __zu_kang_ji_suan
 344 01de 6B48     		ldr r0, = dianrongzhi
 345 01e0 0821     	        movs r1, # 8
 346 01e2 0068     		ldr r0, [r0]
 347 01e4 4C4A     	        ldr r2, = asciimabiao
 348 01e6 FF23     	        movs r3, # 0xff
 349 01e8 00F09FFA 	        bl _zhuanascii
 350 01ec 8520     	        movs r0, # 0x85
 351 01ee 4A49     	        ldr r1, = asciimabiao
 352 01f0 0822     	        movs r2, # 8
 353 01f2 00F04BFA 	        bl _lcdxianshi
 354 01f6 6448     		ldr r0, = liangcheng
 355 01f8 0168     		ldr r1, [r0]
 356              	__liangcheng100k:
 357 01fa 0029     		cmp r1, # 0x00
 358 01fc 19D1     		bne __liangcheng10k
 359 01fe 6448     	        ldr r0, = dianzuzhi
 360 0200 6449     	        ldr r1, = 1000
 361 0202 0068     	        ldr r0, [r0]
 362 0204 00F0ACFA 		bl _chufa
 363 0208 0421     		movs r1, # 4
 364 020a 434A     		ldr r2, = asciimabiao
 365 020c FF23     		movs r3, # 0xff
 366 020e 00F08CFA 	        bl _zhuanascii
 367 0212 C320     		movs r0, # 0xc3
 368 0214 4049     		ldr r1, = asciimabiao
 369 0216 0422     		movs r2, # 4
 370 0218 00F038FA 	        bl _lcdxianshi
 371 021c C720     		movs r0, # 0xc7
 372 021e 5E49     	        ldr r1, = qianou
 373 0220 0222     	        movs r2, # 2
 374 0222 00F033FA 	        bl _lcdxianshi
 375 0226 C920     		movs r0, # 0xc9
 376 0228 5C49     	        ldr r1, = kong
 377 022a 0122     	        movs r2, # 1
 378 022c 00F02EFA 	        bl _lcdxianshi
 379 0230 48E0     		b __xian_shi_qi_ta
 380              	__liangcheng10k:
 381 0232 5548     	        ldr r0, = liangcheng
 382 0234 0168     	        ldr r1, [r0]
 383 0236 4029     		cmp r1, # 0x40
ARM GAS  1.s 			page 8


 384 0238 14D1     		bne __liangcheng1k
 385 023a 5548     	        ldr r0, = dianzuzhi
 386 023c 5849     	        ldr r1, = 100
 387 023e 0068     	        ldr r0, [r0]
 388 0240 00F08EFA 	        bl _chufa
 389 0244 0521     	        movs r1, # 5
 390 0246 344A     	        ldr r2, = asciimabiao
 391 0248 0323     		movs r3, # 3
 392 024a 00F06EFA 	        bl _zhuanascii
 393 024e C320     	        movs r0, # 0xc3
 394 0250 3149     	        ldr r1, = asciimabiao
 395 0252 0522     	        movs r2, # 5
 396 0254 00F01AFA 	        bl _lcdxianshi
 397 0258 C820     	        movs r0, # 0xc8
 398 025a 4F49     	        ldr r1, = qianou
 399 025c 0222     	        movs r2, # 2
 400 025e 00F015FA 	        bl _lcdxianshi
 401 0262 2FE0     		b __xian_shi_qi_ta
 402              	__liangcheng1k:
 403 0264 4848     	        ldr r0, = liangcheng
 404 0266 0168     	        ldr r1, [r0]
 405 0268 8029     	        cmp r1, # 0x80
 406 026a 14D1     	        bne __liangcheng100r
 407 026c 4848     		ldr r0, = dianzuzhi
 408 026e 4D49     	        ldr r1, = 10
 409 0270 0068     	        ldr r0, [r0]
 410 0272 00F075FA 	        bl _chufa
 411 0276 0521     	        movs r1, # 5
 412 0278 274A     	        ldr r2, = asciimabiao
 413 027a 0223     	        movs r3, # 2
 414 027c 00F055FA 	        bl _zhuanascii
 415 0280 C320     	        movs r0, # 0xc3
 416 0282 2549     	        ldr r1, = asciimabiao
 417 0284 0522     	        movs r2, # 5
 418 0286 00F001FA 	        bl _lcdxianshi
 419 028a C820     	        movs r0, # 0xc8
 420 028c 4249     	        ldr r1, = qianou
 421 028e 0222     	        movs r2, # 2
 422 0290 00F0FCF9 	        bl _lcdxianshi
 423 0294 16E0     		b __xian_shi_qi_ta
 424              	__liangcheng100r:
 425 0296 3E48     	        ldr r0, = dianzuzhi
 426 0298 0421     		movs r1, # 4
 427 029a 0068     	        ldr r0, [r0]
 428 029c 1E4A     	        ldr r2, = asciimabiao
 429 029e FF23     	        movs r3, # 0xff
 430 02a0 00F043FA 	        bl _zhuanascii
 431 02a4 C320     	        movs r0, # 0xc3
 432 02a6 1C49     	        ldr r1, = asciimabiao
 433 02a8 0422     	        movs r2, # 4
 434 02aa 00F0EFF9 	        bl _lcdxianshi
 435 02ae C720     	        movs r0, # 0xc7
 436 02b0 3D49     	        ldr r1, = ou
 437 02b2 0122     	        movs r2, # 1
 438 02b4 00F0EAF9 	        bl _lcdxianshi
 439 02b8 C820     	        movs r0, # 0xc8
 440 02ba 3849     	        ldr r1, = kong
ARM GAS  1.s 			page 9


 441 02bc 0222     	        movs r2, # 2
 442 02be 00F0E5F9 	        bl _lcdxianshi
 443 02c2 FFE7     	        b __xian_shi_qi_ta
 444              	
 445              	__xian_shi_qi_ta:
 446 02c4 3048     		ldr r0, = liangcheng
 447 02c6 0068     		ldr r0, [r0]
 448 02c8 8009     		lsrs r0, r0, # 6
 449 02ca 0121     		movs r1, # 1
 450 02cc 124A     	        ldr r2, = asciimabiao
 451 02ce FF23     	        movs r3, # 0xff
 452 02d0 00F02BFA 	        bl _zhuanascii
 453 02d4 8020     	        movs r0, # 0x80
 454 02d6 1049     	        ldr r1, = asciimabiao
 455 02d8 0122     	        movs r2, # 1
 456 02da 00F0D7F9 	        bl _lcdxianshi
 457              	
 458 02de C120     	        movs r0, # 0xc1
 459 02e0 3249     	        ldr r1, = dianzu
 460 02e2 0222     	        movs r2, # 2
 461 02e4 00F0D2F9 	        bl _lcdxianshi
 462 02e8 CB20     	        movs r0, # 0xcb
 463 02ea 3149     	        ldr r1, = pinlv
 464 02ec 0522     	        movs r2, # 5
 465 02ee 00F0CDF9 	        bl _lcdxianshi
 466              	__xian_shi_dian_rong:
 467 02f2 8320     		movs r0, # 0x83
 468 02f4 2F49     		ldr r1, = dianrong
 469 02f6 0222     		movs r2, # 2
 470 02f8 00F0C8F9 		bl _lcdxianshi
 471 02fc 64E7     		b ting
 472              	
 473 02fe 0000FFFF 		.ltorg
 473      00000020 
 473      02400010 
 473      02400100 
 473      01000200 
 474              	
 475              	dd:
 476 03b8 00F0CFF8 	   	bl __zi_dong_liang_cheng
 477 03bc 9448     		ldr r0, = liangcheng
 478 03be 0068     	        ldr r0, [r0]
 479 03c0 0421     	        movs r1, # 4
 480 03c2 944A     	        ldr r2, = asciimabiao
 481 03c4 FF23     	        movs r3, # 0xff
 482 03c6 00F0B0F9 	        bl _zhuanascii
 483 03ca C620     	        movs r0, # 0xc6
 484 03cc 9149     	        ldr r1, = asciimabiao
 485 03ce 0422     		movs r2, # 0x04
 486 03d0 00F05CF9 		bl _lcdxianshi
 487              	
 488 03d4 9048     	        ldr r0, = dianyabiao
 489 03d6 2030     	        adds r0, r0, #	0x20 
 490 03d8 3221     	        movs r1, # 0x32
 491 03da 00F0DFF8 	        bl _jianbo
 492 03de 00F09AF8 	        bl __zhen_fu_lv_bo
 493 03e2 00F05CF8 	        bl __xian_shi_shang_xia_bi
ARM GAS  1.s 			page 10


 494 03e6 E7E7     		b dd
 495              	
 496              	__dian_zu_ji_suan:
 497 03e8 0EB5     		push {r1-r3,lr}
 498 03ea 8C48     		ldr r0, = shang_bi_shi_bu
 499 03ec 8C49     		ldr r1, = xia_bi_shi_bu
 500 03ee 884B     		ldr r3, = liangcheng
 501              		@ldr r2, = bu_chang_100r
 502 03f0 0068     		ldr r0, [r0]
 503 03f2 1B68     		ldr r3, [r3]
 504 03f4 0968     		ldr r1, [r1]
 505              		@ldr r2, [r2]
 506              	__liang_cheng_100k:	
 507 03f6 002B     		cmp r3, # 0x00
 508 03f8 01D1     		bne __liang_cheng10k
 509 03fa 8A4A     		ldr r2, = 100000
 510 03fc 08E0     		b __ji_suan_dian_zu
 511              	__liang_cheng10k:
 512 03fe 402B     		cmp r3, # 0x40
 513 0400 01D1     		bne __liang_cheng1k
 514 0402 894A     		ldr r2, = 10000
 515 0404 04E0     		b __ji_suan_dian_zu
 516              	__liang_cheng1k:
 517 0406 802B     		cmp r3, # 0x80
 518 0408 01D1     		bne __liang_cheng100ou
 519 040a 884A     		ldr r2, = 1000
 520 040c 00E0     		b __ji_suan_dian_zu
 521              	__liang_cheng100ou:	
 522 040e 6422     		movs r2, # 100
 523              	__ji_suan_dian_zu:	
 524 0410 5043     		muls r0, r0, r2
 525 0412 00F0A5F9 		bl _chufa
 526 0416 0EBD     		pop {r1-r3,pc}
 527              	__zu_kang_ji_suan:
 528 0418 FFB5     		push {r0-r7,lr}
 529 041a 8048     		ldr r0, = shang_bi_shi_bu
 530 041c 8449     		ldr r1, = shang_bi_xu_bu
 531 041e 804A     		ldr r2, = xia_bi_shi_bu
 532 0420 844B     		ldr r3, = xia_bi_xu_bu
 533 0422 7B4C     		ldr r4, = liangcheng
 534 0424 0068     		ldr r0, [r0]
 535 0426 0968     		ldr r1, [r1]
 536 0428 1268     		ldr r2, [r2]
 537 042a 1B68     		ldr r3, [r3]
 538 042c 2568     		ldr r5, [r4]
 539              	__c_liang_cheng_100k:
 540 042e 002D     	        cmp r5, # 0x00
 541 0430 01D1     		bne __c_liang_cheng10k
 542 0432 7C4C     	        ldr r4, = 100000
 543 0434 08E0     		b __ji_suan_dian_rong
 544              	__c_liang_cheng10k:
 545 0436 402D     	        cmp r5, # 0x40
 546 0438 01D1     	        bne __c_liang_cheng1k
 547 043a 7B4C     	        ldr r4, = 10000
 548 043c 04E0     	        b __ji_suan_dian_rong
 549              	__c_liang_cheng1k:
 550 043e 802D     	        cmp r5, # 0x80
ARM GAS  1.s 			page 11


 551 0440 01D1     		bne __c_liang_cheng100ou
 552 0442 7A4C     	        ldr r4, = 1000
 553 0444 00E0     	        b __ji_suan_dian_rong
 554              	__c_liang_cheng100ou:
 555 0446 6424     		movs r4, # 100
 556              	__ji_suan_dian_rong:
 557              	@ Z=R+jx
 558              	@ Z=R*[(a+bi)/(c+di)]=R*[(ac+bd)/(c*c+d*d)+(bc-ad)/(c*c+d*d)]
 559              	@c=1/[(2*pi*f)*xc]
 560 0448 10B4     		push {r4}
 561 044a 0446     		mov r4, r0
 562 044c 0D46     		mov r5, r1
 563 044e 1646     		mov r6, r2
 564 0450 1F46     		mov r7, r3
 565 0452 5043     		muls r0, r0, r2		@ac
 566 0454 5943     		muls r1, r1, r3		@bd
 567 0456 4018     		adds r0, r0, r1		@ac+bd
 568 0458 5243     		muls r2, r2, r2		@c*c
 569 045a 5B43     		muls r3, r3, r3		@d*d
 570 045c D218     		adds r2, r2, r3		@c*c+d*d
 571 045e 1146     		mov r1, r2
 572 0460 8002     		lsls r0, r0, # 10
 573 0462 00F07DF9 		bl _chufa		@(ac+bd)/(c*c+d*d)
 574 0466 01B4     		push {r0}
 575 0468 7543     		muls r5, r5, r6		@ bc
 576 046a 7C43     		muls r4, r4, r7		@ ad
 577 046c 2D1B     		subs r5, r5, r4		@ bc-ad
 578 046e 1146     		mov r1, r2
 579 0470 2846     		mov r0, r5
 580 0472 8002     		lsls r0, r0, # 10
 581 0474 00F074F9 		bl _chufa
 582 0478 0146     		mov r1, r0		@ R1=结果虚部
 583 047a 01BC     		pop {r0}		@ R0=结果实部
 584 047c 04BC     		pop {r2}		@ R2=R（量程）
 585 047e 5043     		muls r0, r0, r2		@ 
 586 0480 5143     		muls r1, r1, r2		@
 587 0482 6D4B     		ldr r3, = dianzuzhi
 588 0484 8012     		asrs r0, r0, # 10
 589 0486 1860     		str r0, [r3]
 590 0488 6C4B     		ldr r3, = 20588		@ 10khz Q15 ω
 591 048a 8912     		asrs r1, r1, # 10
 592 048c 4B43     		muls r3, r3, r1
 593 048e DB13     		asrs r3, r3, # 15
 594 0490 6B48     		ldr r0, = 1000000000
 595 0492 1900     		movs r1, r3
 596 0494 00F064F9 		bl _chufa		@ 1/(ωxc)
 597 0498 6A4A     		ldr r2, = dianrongzhi
 598 049a 1060     		str r0, [r2]
 599 049c FFBD     		pop {r0-r7,pc}
 600              		
 601              	__xian_shi_shang_xia_bi:
 602 049e 0FB5     		push {r0-r3,lr}
 603 04a0 C420     	        movs r0, # 0xc4
 604 04a2 6949     	        ldr r1, = xushu
 605 04a4 0122     	        movs r2, # 1
 606 04a6 00F0F1F8 	        bl _lcdxianshi
 607 04aa CF20     		movs r0, # 0xcf
ARM GAS  1.s 			page 12


 608 04ac 6649     	        ldr r1, = xushu
 609 04ae 0122     		movs r2, # 1
 610 04b0 00F0ECF8 		bl _lcdxianshi
 611 04b4 5A48     		ldr r0, = xia_bi_shi_bu
 612 04b6 0421     		movs r1, # 4
 613 04b8 0068     		ldr r0, [r0]
 614 04ba 564A     		ldr r2, = asciimabiao
 615 04bc FF23     		movs r3, # 0xff
 616 04be 00F034F9 		bl _zhuanascii
 617 04c2 8B20     		movs r0, # 0x8b
 618 04c4 5349     		ldr r1, = asciimabiao
 619 04c6 0422     		movs r2, # 0x04
 620 04c8 00F0E0F8 		bl _lcdxianshi
 621 04cc 5348     	        ldr r0, = shang_bi_shi_bu
 622 04ce 0421     	        movs r1, # 4
 623 04d0 0068     	        ldr r0, [r0]
 624 04d2 504A     	        ldr r2, = asciimabiao
 625 04d4 FF23     	        movs r3, # 0xff
 626 04d6 00F028F9 	        bl _zhuanascii
 627 04da 8020     	        movs r0, # 0x80
 628 04dc 4D49     	        ldr r1, = asciimabiao
 629 04de 0422     	        movs r2, # 0x04
 630 04e0 00F0D4F8 	        bl _lcdxianshi
 631 04e4 5348     	        ldr r0, = xia_bi_xu_bu
 632 04e6 0421     	        movs r1, # 4
 633 04e8 0068     	        ldr r0, [r0]
 634 04ea 4A4A     	        ldr r2, = asciimabiao
 635 04ec FF23     	        movs r3, # 0xff
 636 04ee 00F01CF9 	        bl _zhuanascii
 637 04f2 CB20     	        movs r0, # 0xcb
 638 04f4 4749     	        ldr r1, = asciimabiao
 639 04f6 0422     	        movs r2, # 0x04
 640 04f8 00F0C8F8 	        bl _lcdxianshi
 641 04fc 4C48     	        ldr r0, = shang_bi_xu_bu
 642 04fe 0421     	        movs r1, # 4
 643 0500 0068     	        ldr r0, [r0]
 644 0502 444A     	        ldr r2, = asciimabiao
 645 0504 FF23     	        movs r3, # 0xff
 646 0506 00F010F9 	        bl _zhuanascii
 647 050a C020     	        movs r0, # 0xc0
 648 050c 4149     	        ldr r1, = asciimabiao
 649 050e 0422     	        movs r2, # 0x04
 650 0510 00F0BCF8 	        bl _lcdxianshi
 651 0514 0FBD     		pop {r0-r3,pc}
 652              	
 653              	
 654              	__zhen_fu_lv_bo:
 655              		@ 入口 R0= 下臂实部，R1=上臂实部，R2=下臂虚部，R3=上臂虚部
 656 0516 FFB5     		push {r0-r7,lr}
 657 0518 414F     		ldr r7, = xia_bi_shi_bu
 658 051a 1546     		mov r5, r2
 659 051c 1E46     		mov r6, r3
 660 051e 0C46     		mov r4, r1
 661 0520 0346     		mov r3, r0
 662 0522 4A48     		ldr r0, = lvboqihuanchong
 663 0524 4A49     		ldr r1, = 32
 664 0526 4B4A     		ldr r2, = lvboqizhizhen
ARM GAS  1.s 			page 13


 665 0528 00F05DF8 		bl _lvboqi
 666 052c 3860     		str r0, [r7]			@保存下臂实部
 667 052e 2346     	        mov r3, r4
 668 0530 4948     	        ldr r0, = lvboqihuanchong1
 669 0532 4749     		ldr r1, = 32
 670 0534 494A     		ldr r2, = lvboqizhizhen1
 671 0536 00F056F8 	        bl _lvboqi
 672 053a 7860     	        str r0, [r7, # 0x04]		@保存上臂实部
 673 053c 2B46     		mov r3, r5
 674 053e 4848     		ldr r0, = lvboqihuanchong2
 675 0540 4349     	        ldr r1, = 32
 676 0542 484A     	        ldr r2, = lvboqizhizhen2
 677 0544 00F04FF8 		bl _lvboqi
 678 0548 B860     		str r0, [r7, # 0x08]		@保存下臂虚部
 679              	
 680 054a 3346     	        mov r3, r6
 681 054c 4648     		ldr r0, = lvboqihuanchong3
 682 054e 4049     		ldr r1, = 32
 683 0550 464A     		ldr r2, = lvboqizhizhen3
 684 0552 00F048F8 	        bl _lvboqi
 685 0556 F860     		str r0, [r7, # 0x0c]		@保存上臂虚部
 686 0558 FFBD     		pop {r0-r7,pc}
 687              		
 688              	
 689              	__zi_dong_liang_cheng:
 690              		@ 0xc0=100,0x80=1k
 691              		@0x40=10k,0x00=100k
 692 055a 7FB5     		push {r0-r6,lr}
 693 055c 4448     		ldr r0, = zidongliangchengyanshi
 694 055e 1422     		movs r2, # 20
 695 0560 0168     		ldr r1, [r0]
 696 0562 0131     		adds r1, r1, # 1
 697 0564 0160     		str r1, [r0]
 698 0566 9142     		cmp r1, r2
 699 0568 17D3     		bcc __liang_cheng_fan_hui
 700 056a 0021     		movs r1, # 0
 701 056c 0160     		str r1, [r0]
 702 056e 2B48     		ldr r0, = shang_bi_shi_bu
 703 0570 2B4D     		ldr r5, = xia_bi_shi_bu
 704 0572 2749     		ldr r1, = liangcheng
 705 0574 0A68     		ldr r2, [r1]
 706 0576 3F4E     		ldr r6, = 2000
 707 0578 3F4B     		ldr r3, = 5
 708 057a C02A     		cmp r2, # 0xc0
 709 057c 07D0     		beq __xuan_kong
 710              	__pan_duan_liang_cheng:
 711 057e 2C68     		ldr r4, [r5]
 712 0580 B442     		cmp r4, r6
 713 0582 02D2     		bcs __gai_liang_cheng
 714 0584 0468     		ldr r4, [r0]
 715 0586 9C42     		cmp r4,	r3
 716 0588 00D2     		bcs __bao_cun_liang_cheng
 717              	__gai_liang_cheng:
 718 058a 4032     		adds r2, r2, # 0x40
 719              	__bao_cun_liang_cheng:
 720 058c 0A60     		str r2, [r1]
 721              	__xuan_kong:
ARM GAS  1.s 			page 14


 722 058e 2448     		ldr r0, = xia_bi_shi_bu
 723 0590 0468     		ldr r4, [r0]
 724 0592 052C     		cmp r4, # 5
 725 0594 01D2     		bcs __liang_cheng_fan_hui
 726              	__liang_cheng_chong_zhi:
 727 0596 0022     		movs r2, # 0
 728 0598 0A60     		str r2, [r1]
 729              	__liang_cheng_fan_hui:	
 730 059a 7FBD     		pop {r0-r6,pc}
 731              		
 732              	_jianbo:
 733              		@ 入口 R0=采样表首地址，R1=0度90度相差多少
 734              		@ 出口R0=下臂90度，R1=上臂90度，R2=下臂180度，R3=上臂180度
 735 059c F0B5     		push {r4-r7,lr}
 736 059e 0C46     		mov r4, r1
 737 05a0 0146     		mov r1, r0
 738 05a2 0346     		mov r3, r0
 739 05a4 1833     		adds r3, r3, # 0x18	@偏移90度
 740 05a6 0919     		adds r1, r1, r4
 741 05a8 0A46     		mov r2, r1
 742 05aa 1832     		adds r2, r2, # 0x18	@偏移90度
 743 05ac 334F     	        ldr r7, = 0x48000000
 744 05ae 344E     	        ldr r6, = 0x200
 745 05b0 BE62     		str r6, [r7, # 0x28]
 746 05b2 344D     	        ldr r5, = 0x40012428
 747 05b4 0224     	        movs r4, # 2
 748 05b6 2C60     	        str r4, [r5]
 749 05b8 00F010F8 		bl _jianboyanshi	
 750 05bc 0088     		ldrh r0, [r0]
 751 05be BE61     		str r6, [r7, # 0x18]
 752 05c0 00F00CF8 		bl _jianboyanshi
 753 05c4 0988     		ldrh r1, [r1]
 754 05c6 0124     		movs r4, # 1
 755 05c8 2C60     		str r4, [r5]
 756 05ca BE62     		str r6, [r7, # 0x28]
 757 05cc 00F006F8 		bl _jianboyanshi
 758 05d0 1288     		ldrh r2, [r2]
 759 05d2 BE61     		str r6, [r7, # 0x18]
 760 05d4 00F002F8 		bl _jianboyanshi
 761 05d8 1B88     		ldrh r3, [r3]
 762 05da F0BD     		pop {r4-r7,pc}
 763              	_jianboyanshi:
 764 05dc 80B5     		push {r7,lr}
 765 05de 2A4F     		ldr r7, = 0xffff
 766              	_jianboyanshixunhuan:
 767 05e0 013F     		subs r7, r7, # 1
 768 05e2 FDD1     		bne _jianboyanshixunhuan
 769 05e4 80BD     		pop {r7,pc}
 770              	_lvboqi:
 771              				@滤波器
 772              				@R0=地址，R1=长度,r2=表指针地址,r3=ADC数值
 773              				@出R0=结果
 774 05e6 FEB5     		push {r1-r7,lr}	
 775 05e8 1568     		ldr r5, [r2]		@读出表指针
 776 05ea 4E00     		lsls r6, r1, # 1	
 777 05ec 4353     		strh r3, [r0, r5]	@数值写到滤波器缓冲区
 778 05ee 0235     		adds r5, r5, # 2
ARM GAS  1.s 			page 15


 779 05f0 B542     		cmp r5, r6
 780 05f2 00D1     		bne _lvboqimeidaohuanchongquding
 781 05f4 0025     		movs r5, # 0
 782              	_lvboqimeidaohuanchongquding:
 783 05f6 1560     		str r5, [r2]
 784 05f8 0027     		movs r7, # 0
 785              	_lvboqixunhuan:
 786 05fa B542     		cmp r5, r6
 787 05fc 00D1     		bne _lvbozonghe
 788 05fe 0025     		movs r5, # 0
 789              	_lvbozonghe:
 790 0600 445B     		ldrh r4, [r0, r5]
 791 0602 0235     		adds r5, r5, # 2
 792 0604 3F19     		adds r7, r7, r4
 793 0606 0139     		subs r1, r1, # 1
 794 0608 F7D1     		bne _lvboqixunhuan
 795 060a 7811     		asrs r0, r7, # 5	@修改
 796 060c FEBD     		pop {r1-r7,pc}
 797 060e 00003000 		.ltorg
 797      00200000 
 797      00204000 
 797      0020040A 
 797      0020000A 
 798              	
 799              		
 800              	_lcdxianshi:	  		@r0=LCD位置，r1=数据地址，r2=长度
 801 068c 1FB5     		push {r0-r4,lr}
 802 068e 0C46     		mov r4, r1
 803              	
 804 0690 0021     		movs r1, # 0
 805 0692 00F00EF8 		bl _xielcd
 806              	
 807 0696 0121     		movs r1, # 1
 808 0698 0023     		movs r3, # 0
 809              	_lcdxianshixunhuan:
 810 069a E05C     		ldrb r0, [r4,r3]
 811 069c 00F009F8 		bl _xielcd
 812 06a0 0133     		adds r3, r3, # 1
 813 06a2 9342     		cmp r3, r2
 814 06a4 F9D1     		bne _lcdxianshixunhuan
 815 06a6 1FBD     		pop {r0-r4,pc}
 816              	
 817              	_lcdyanshi:
 818 06a8 20B5     		push {r5,lr}
 819 06aa 374D     		ldr r5, = 0x2000
 820              	_lcdyanshixunhuan:
 821 06ac 013D     		subs r5, r5, # 1
 822 06ae FDD1     		bne _lcdyanshixunhuan
 823 06b0 20BD     		pop {r5,pc}
 824              	
 825              	_xielcd:			@入R0=8位,r1=0命令,r1=1数据
 826 06b2 3FB5     		push {r0-r5,lr}
 827 06b4 354C     		ldr r4, = liangcheng  @ 量程开关 (第6位和第7位)
 828 06b6 0246     		mov r2, r0
 829 06b8 2568     		ldr r5, [r4]
 830 06ba 1209     		lsrs r2, r2, # 4
 831 06bc 9200     		lsls r2, r2, # 2	@ 高四位
ARM GAS  1.s 			page 16


 832 06be 0007     		lsls r0, r0, # 28
 833 06c0 800E     		lsrs r0, r0, # 26	@ 低四位
 834 06c2 C907     		lsls r1, r1, # 31
 835 06c4 01D5     		bpl __lcd_ming_ling
 836              	__lcd_shu_ju:
 837 06c6 0323     		movs r3, # 0x03		@ RS = 1 E = 1
 838 06c8 00E0     		b __xie_lcd_shu_ju
 839              	__lcd_ming_ling:
 840 06ca 0223     		movs r3, # 0x02		@ RS = 0 E = 1
 841              	__xie_lcd_shu_ju:
 842 06cc 5B19     		adds r3, r3, r5
 843 06ce 0146     		mov r1, r0
 844 06d0 D218     		adds r2, r2, r3
 845 06d2 1000     		movs r0, r2
 846 06d4 00F00BF8 		bl __74hc595
 847 06d8 0238     		subs r0, r0, # 0x02
 848 06da 00F008F8 		bl __74hc595
 849 06de 0846     		mov r0, r1
 850 06e0 C018     		adds r0, r0, r3
 851 06e2 00F004F8 		bl __74hc595
 852 06e6 0238     		subs r0, r0, # 0x02
 853 06e8 00F001F8 		bl __74hc595
 854 06ec 3FBD     		pop {r0-r5,pc}
 855              		
 856              	__74hc595:			@ 入R0=8位
 857 06ee FFB5     		push {r0-r7,lr}
 858 06f0 274E     		ldr r6, = 0x48000000
 859 06f2 2025     		movs r5, # 0x20		@ SRCLK
 860 06f4 4022     		movs r2, # 0x40		@ RCLK
 861 06f6 8023     		movs r3, # 0x80		@ SER
 862 06f8 1824     		movs r4, # 24
 863              	__595_yiweixunhuan:
 864 06fa B261     		str r2, [r6, # 0x18]	@ rclk=0
 865 06fc B561     		str r5, [r6, # 0x18]	@ srclk=0
 866 06fe FF27     		movs r7, # 0xff
 867              	__595_yanshi:
 868 0700 013F     		subs r7, r7, # 1
 869 0702 FDD1     		bne __595_yanshi
 870 0704 0146     		mov r1, r0
 871 0706 A140     		lsls r1, r1, r4
 872 0708 01D5     		bpl __ser_0
 873              	__ser_1:
 874 070a B362     		str r3, [r6, # 0x28]	@ ser=1
 875 070c 00E0     		b __595_yiwei
 876              	__ser_0:
 877 070e B361     		str r3, [r6, # 0x18]	@ ser=0
 878              	__595_yiwei:
 879 0710 B562     		str r5, [r6, # 0x28]
 880 0712 FF27     		movs r7, # 0xff
 881              	__595_yanshi1:
 882 0714 013F     		subs r7, r7, # 1
 883 0716 FDD1     		bne __595_yanshi1
 884 0718 0134     		adds r4, r4, # 1
 885 071a 202C     		cmp r4, # 32
 886 071c EDD1     		bne __595_yiweixunhuan
 887 071e B262     		str r2, [r6, # 0x28]	@ rclk=1
 888 0720 FF27     		movs r7, # 0xff
ARM GAS  1.s 			page 17


 889              	__595_yanshi2:
 890 0722 013F     		subs r7, r7, # 1
 891 0724 FDD1     		bne __595_yanshi2
 892 0726 B261     		str r2, [r6, # 0x18]	@ rclk = 0
 893 0728 FFBD     		pop {r0-r7,pc}
 894              	
 895              	
 896              	
 897              	_zhuanascii:					@ 16进制转ASCII
 898              			@ R0要转的数据， R1长度，R2结果表首地址, r3=小数点位置
 899 072a FFB5     		push {r0-r7,lr}
 900 072c 1F46     		mov r7, r3
 901 072e 0546     		mov r5, r0
 902 0730 0E46     		mov r6, r1
 903 0732 0A21     		movs r1, # 10
 904              	_xunhuanqiuma:
 905 0734 02B4     		push {r1}
 906 0736 00F013F8 		bl _chufa
 907 073a 02BC     		pop {r1}
 908 073c 0446     		mov r4, r0
 909 073e 4C43     		muls r4, r1
 910 0740 2B1B     		subs r3, r5, r4
 911 0742 3033     		adds r3, r3, # 0x30
 912 0744 0546     		mov r5, r0
 913 0746 013E     		subs r6, r6, # 1
 914 0748 08D0     		beq _qiumafanhui
 915 074a BE42     		cmp r6, r7
 916 074c 02D1     		bne _meidaoxiaoshudian
 917 074e 2E24     		movs r4, # 0x2e		@小数点
 918 0750 9455     		strb r4, [r2,r6]	@插入小数点
 919 0752 013E     		subs r6, r6, # 1
 920              	_meidaoxiaoshudian:
 921 0754 9355     		strb r3, [r2,r6]
 922 0756 3600     		movs r6, r6
 923 0758 ECD1     		bne _xunhuanqiuma
 924 075a FFBD     		pop {r0-r7,pc}
 925              	_qiumafanhui:
 926 075c 9355     		strb r3, [r2, r6]
 927 075e FFBD     		pop {r0-r7,pc}
 928              	
 929              	
 930              		
 931              	_chufa:				@软件除法
 932              		@ r0 除以 r1 等于 商(r0)余数R1
 933 0760 1CB5     		push {r2-r4,lr}
 934 0762 0028     		cmp r0, # 0
 935 0764 0FD0     		beq _chufafanhui
 936 0766 0029     		cmp r1, # 0
 937 0768 0DD0     		beq _chufafanhui
 938 076a 0246     		mov r2, r0
 939 076c 0123     		movs r3, # 1
 940 076e DB07     		lsls r3, r3, # 31
 941 0770 0020     		movs r0, # 0
 942 0772 0446     		mov r4, r0
 943              	_chufaxunhuan:
 944 0774 5200     		lsls r2, r2, # 1
 945 0776 6441     		adcs r4, r4, r4
ARM GAS  1.s 			page 18


 946 0778 8C42     		cmp r4, r1
 947 077a 01D3     		bcc _chufaweishubudao0
 948 077c C018     		adds r0, r0, r3
 949 077e 641A     		subs r4, r4, r1
 950              	_chufaweishubudao0:
 951 0780 5B08     		lsrs r3, r3, # 1
 952 0782 F7D1     		bne _chufaxunhuan
 953 0784 2146     		mov r1, r4
 954              	_chufafanhui:
 955 0786 1CBD     		pop {r2-r4,pc}
 956 0788 00200000 		.ltorg
 956      30000020 
 956      00000048 
 957              	
 958              	
 959              	_nmi_handler:
 960 0794 7047     		bx lr
 961              	_hard_fault:
 962 0796 7047     		bx lr
 963              	_svc_handler:
 964 0798 7047     		bx lr
 965              	_pendsv_handler:
 966 079a 7047     		bx lr
 967              	_systickzhongduan:
 968 079c 034A     		ldr r2, = jishu
 969 079e 0448     		ldr r0, = 0xe0000d04
 970 07a0 1368     		ldr r3, [r2]
 971 07a2 0449     		ldr r1, = 0x02000000
 972 07a4 0133     		adds r3, r3, # 1
 973 07a6 1360     		str r3, [r2]
 974 07a8 0160     		str r1, [r0]                 @ 清除SYSTICK中断
 975              	aaa:
 976 07aa 70473400 		bx lr
 976      0020040D 
 976      00E00000 
 976      0002
ARM GAS  1.s 			page 19


DEFINED SYMBOLS
                 1.s:9      .data:0000000000000000 zheng_xian_biao
                 1.s:11     .data:00000000000000cc lcdshuju
                 1.s:13     .data:00000000000000dc dianhua
                 1.s:15     .data:00000000000000ec qq
                 1.s:17     .data:00000000000000fc xushu
                 1.s:19     .data:00000000000000fd fu
                 1.s:21     .data:00000000000000fe zheng
                 1.s:23     .data:00000000000000ff dianzu
                 1.s:25     .data:0000000000000101 dianrong
                 1.s:27     .data:0000000000000103 pinlv
                 1.s:29     .data:0000000000000108 qianou
                 1.s:31     .data:0000000000000109 ou
                 1.s:33     .data:000000000000010d kong
                 1.s:35     .data:0000000000000111 xiaomai
                 1.s:37     *ABS*:0000000020001000 STACKINIT
                 1.s:38     *ABS*:0000000020000000 asciimabiao
                 1.s:39     *ABS*:0000000020000030 liangcheng
                 1.s:40     *ABS*:0000000020000034 jishu
                 1.s:41     *ABS*:0000000020000038 jianbo
                 1.s:42     *ABS*:0000000020000040 dianyabiao
                 1.s:43     *ABS*:0000000020000600 lvboqizhizhen
                 1.s:44     *ABS*:0000000020000604 lvboqihuanchong
                 1.s:45     *ABS*:0000000020000700 lvboqizhizhen1
                 1.s:46     *ABS*:0000000020000704 lvboqihuanchong1
                 1.s:47     *ABS*:0000000020000800 lvboqizhizhen2
                 1.s:48     *ABS*:0000000020000804 lvboqihuanchong2
                 1.s:49     *ABS*:0000000020000900 lvboqizhizhen3
                 1.s:50     *ABS*:0000000020000904 lvboqihuanchong3
                 1.s:51     *ABS*:0000000020000a00 xia_bi_shi_bu
                 1.s:52     *ABS*:0000000020000a04 shang_bi_shi_bu
                 1.s:53     *ABS*:0000000020000a08 xia_bi_xu_bu
                 1.s:54     *ABS*:0000000020000a0c shang_bi_xu_bu
                 1.s:55     *ABS*:0000000020000a10 bu_chang_100r
                 1.s:56     *ABS*:0000000020000a14 zidongliangchengyanshi
                 1.s:57     *ABS*:0000000020000a18 dianzuzhi
                 1.s:58     *ABS*:0000000020000a1c dianrongzhi
                 1.s:60     .text:0000000000000000 vectors
                 1.s:107    .text:00000000000000b0 _start
                 1.s:959    .text:0000000000000794 _nmi_handler
                 1.s:961    .text:0000000000000796 _hard_fault
                 1.s:963    .text:0000000000000798 _svc_handler
                 1.s:965    .text:000000000000079a _pendsv_handler
                 1.s:967    .text:000000000000079c _systickzhongduan
                 1.s:975    .text:00000000000007aa aaa
                            .text:0000000000000000 $d
                 1.s:105    .text:00000000000000b0 $t
                 1.s:109    .text:00000000000000b2 yanshi111
                 1.s:113    .text:00000000000000b6 shizhong
                 1.s:120    .text:00000000000000c2 denghse
                 1.s:124    .text:00000000000000c8 dengpllguan
                 1.s:132    .text:00000000000000d6 dengpll
                 1.s:139    .text:00000000000000e0 dengdai14mshizhongwending
                 1.s:144    .text:00000000000000e6 _neicunqingling
                 1.s:148    .text:00000000000000ec _neicunqinglingxunhuan
                 1.s:153    .text:00000000000000f2 _waisheshizhong
                 1.s:171    .text:0000000000000100 _waishezhongduan
ARM GAS  1.s 			page 20


                 1.s:186    .text:0000000000000100 io_she_zhi
                 1.s:215    .text:000000000000010a _adcchushihua
                 1.s:219    .text:0000000000000110 _dengadcjiaozhun
                 1.s:223    .text:0000000000000116 _kaiadc
                 1.s:228    .text:000000000000011e _dengdaiadcwending
                 1.s:232    .text:0000000000000124 _tongdaoxuanze
                 1.s:246    .text:0000000000000138 dmachushihua
                 1.s:278    .text:000000000000015c tim1chushiha
                 1.s:304    .text:0000000000000186 _lcdchushihua
                 1.s:825    .text:00000000000006b2 _xielcd
                 1.s:817    .text:00000000000006a8 _lcdyanshi
                 1.s:336    .text:00000000000001c8 ting
                 1.s:689    .text:000000000000055a __zi_dong_liang_cheng
                 1.s:732    .text:000000000000059c _jianbo
                 1.s:654    .text:0000000000000516 __zhen_fu_lv_bo
                 1.s:527    .text:0000000000000418 __zu_kang_ji_suan
                 1.s:897    .text:000000000000072a _zhuanascii
                 1.s:800    .text:000000000000068c _lcdxianshi
                 1.s:356    .text:00000000000001fa __liangcheng100k
                 1.s:380    .text:0000000000000232 __liangcheng10k
                 1.s:931    .text:0000000000000760 _chufa
                 1.s:445    .text:00000000000002c4 __xian_shi_qi_ta
                 1.s:402    .text:0000000000000264 __liangcheng1k
                 1.s:424    .text:0000000000000296 __liangcheng100r
                 1.s:466    .text:00000000000002f2 __xian_shi_dian_rong
                 1.s:473    .text:00000000000002fe $d
                 1.s:473    .text:0000000000000300 $d
                 1.s:475    .text:00000000000003b8 dd
                 1.s:476    .text:00000000000003b8 $t
                 1.s:601    .text:000000000000049e __xian_shi_shang_xia_bi
                 1.s:496    .text:00000000000003e8 __dian_zu_ji_suan
                 1.s:506    .text:00000000000003f6 __liang_cheng_100k
                 1.s:511    .text:00000000000003fe __liang_cheng10k
                 1.s:523    .text:0000000000000410 __ji_suan_dian_zu
                 1.s:516    .text:0000000000000406 __liang_cheng1k
                 1.s:521    .text:000000000000040e __liang_cheng100ou
                 1.s:539    .text:000000000000042e __c_liang_cheng_100k
                 1.s:544    .text:0000000000000436 __c_liang_cheng10k
                 1.s:556    .text:0000000000000448 __ji_suan_dian_rong
                 1.s:549    .text:000000000000043e __c_liang_cheng1k
                 1.s:554    .text:0000000000000446 __c_liang_cheng100ou
                 1.s:770    .text:00000000000005e6 _lvboqi
                 1.s:729    .text:000000000000059a __liang_cheng_fan_hui
                 1.s:721    .text:000000000000058e __xuan_kong
                 1.s:710    .text:000000000000057e __pan_duan_liang_cheng
                 1.s:717    .text:000000000000058a __gai_liang_cheng
                 1.s:719    .text:000000000000058c __bao_cun_liang_cheng
                 1.s:726    .text:0000000000000596 __liang_cheng_chong_zhi
                 1.s:763    .text:00000000000005dc _jianboyanshi
                 1.s:766    .text:00000000000005e0 _jianboyanshixunhuan
                 1.s:782    .text:00000000000005f6 _lvboqimeidaohuanchongquding
                 1.s:785    .text:00000000000005fa _lvboqixunhuan
                 1.s:789    .text:0000000000000600 _lvbozonghe
                 1.s:797    .text:000000000000060e $d
                 1.s:797    .text:0000000000000610 $d
                 1.s:801    .text:000000000000068c $t
                 1.s:809    .text:000000000000069a _lcdxianshixunhuan
ARM GAS  1.s 			page 21


                 1.s:820    .text:00000000000006ac _lcdyanshixunhuan
                 1.s:839    .text:00000000000006ca __lcd_ming_ling
                 1.s:836    .text:00000000000006c6 __lcd_shu_ju
                 1.s:841    .text:00000000000006cc __xie_lcd_shu_ju
                 1.s:856    .text:00000000000006ee __74hc595
                 1.s:863    .text:00000000000006fa __595_yiweixunhuan
                 1.s:867    .text:0000000000000700 __595_yanshi
                 1.s:876    .text:000000000000070e __ser_0
                 1.s:873    .text:000000000000070a __ser_1
                 1.s:878    .text:0000000000000710 __595_yiwei
                 1.s:881    .text:0000000000000714 __595_yanshi1
                 1.s:889    .text:0000000000000722 __595_yanshi2
                 1.s:904    .text:0000000000000734 _xunhuanqiuma
                 1.s:925    .text:000000000000075c _qiumafanhui
                 1.s:920    .text:0000000000000754 _meidaoxiaoshudian
                 1.s:954    .text:0000000000000786 _chufafanhui
                 1.s:943    .text:0000000000000774 _chufaxunhuan
                 1.s:950    .text:0000000000000780 _chufaweishubudao0
                 1.s:956    .text:0000000000000788 $d
                 1.s:960    .text:0000000000000794 $t
                 1.s:976    .text:00000000000007ac $d

NO UNDEFINED SYMBOLS
