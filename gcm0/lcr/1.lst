ARM GAS  1.s 			page 1


   1              		@@ 单片机stm32f030f4p6
   2              		@@ 阻抗桥
   3              		@作者：yjmwxwx
   4              		@时间：2019-08-12
   5              		@编译器：ARM-NONE-EABI
   6              		 .thumb
   7              		         .syntax unified
   8              	.section .data
   9              	zheng_xian_biao:
  10 0000 18001900 		.short 24,25,26,28,29,31,32,34,35,36,37,38,40,41,42,43,43,44,45,45,46,46,47,47,47,47,47,47,47,46,4
  10      1A001C00 
  10      1D001F00 
  10      20002200 
  10      23002400 
  11              	lcdshuju:
  12 00ca 796A6D77 		.ascii  "yjmwxwx-20190812"
  12      7877782D 
  12      32303139 
  12      30383132 
  13              	dianhua:	
  14 00da 20202020 		.ascii	"     15552208295"
  14      20313535 
  14      35323230 
  14      38323935 
  15              	qq:
  16 00ea 20202051 		.ascii	"   QQ:3341656346"
  16      513A3333 
  16      34313635 
  16      36333436 
  17              	xushu:
  18 00fa 69       		.ascii "i"
  19              	fu:
  20 00fb 2D       		.ascii "-"
  21              	zheng:
  22 00fc 2B       		.ascii "+"
  23              	xiaomai:
  24 00fd 7869616F 		.ascii "xiaomai ="
  24      6D616920 
  24      3D
  25              		.equ STACKINIT,        	        0x20001000
  26              		.equ asciimabiao,		0x20000000
  27              		.equ xiangminkaiguan,		0x20000030
  28              		.equ jishu,			0x20000034
  29              		.equ jianbo,			0x20000038
  30              		.equ dianyabiao,		0x20000040
  31              		.equ lvboqizhizhen,		0x20000200
  32              		.equ lvboqihuanchong,		0x20000204
  33              		.equ lvboqizhizhen1,		0x20000410
  34              		.equ lvboqihuanchong1,		0x20000414
  35              		.equ lvboqizhizhen2,		0x20000620
  36              		.equ lvboqihuanchong2,		0x20000624
  37              		.equ lvboqizhizhen3,		0x20000830
  38              		.equ lvboqihuanchong3,		0x20000834
  39              	
  40              		.section .text
  41              	vectors:
  42 0000 00100020 		.word STACKINIT
ARM GAS  1.s 			page 2


  43 0004 B1000000 		.word _start + 1
  44 0008 3D040000 		.word _nmi_handler + 1
  45 000c 3F040000 		.word _hard_fault  + 1
  46 0010 00000000 		.word 0
  47 0014 00000000 		.word 0
  48 0018 00000000 		.word 0
  49 001c 00000000 		.word 0
  50 0020 00000000 		.word 0
  51 0024 00000000 		.word 0
  52 0028 00000000 		.word 0
  53 002c 41040000 		.word _svc_handler +1
  54 0030 00000000 		.word 0
  55 0034 00000000 		.word 0
  56 0038 43040000 		.word _pendsv_handler +1
  57 003c 45040000 		.word _systickzhongduan +1               @ 15
  58 0040 53040000 		.word aaa +1     @ _wwdg +1          @ 0
  59 0044 53040000 		.word aaa +1     @_pvd +1            @ 1
  60 0048 53040000 		.word aaa +1     @_rtc +1            @ 2
  61 004c 53040000 		.word aaa +1     @_flash +1          @ 3
  62 0050 53040000 		.word aaa +1	@ _rcc + 1          @ 4
  63 0054 53040000 		.word aaa +1      @_exti0_1  +1      @ 5
  64 0058 53040000 		.word aaa +1      @ _exti2_3 +1      @ 6
  65 005c 53040000 		.word aaa +1       @_exti4_15 +1     @ 7
  66 0060 53040000 		.word aaa +1                         @ 8
  67 0064 53040000 		.word aaa +1 	@_dma1_1  +1    @ 9
  68 0068 53040000 		.word aaa +1    @_dma1_2_3 +1        @ 10
  69 006c 53040000 		.word aaa +1       @_dma1_4_5 +1     @ 11
  70 0070 53040000 		.word aaa +1	 @_adc1 +1          @ 12
  71 0074 53040000 		.word aaa +1       @_tim1_brk_up +1  @ 13
  72 0078 53040000 		.word aaa +1        @ _tim1_cc +1    @ 14
  73 007c 53040000 		.word aaa +1         @_tim2 +1       @ 15
  74 0080 53040000 		.word aaa +1          @_tim3 +1      @ 16
  75 0084 53040000 		.word aaa +1                         @ 17
  76 0088 53040000 		.word aaa +1		                @ 18
  77 008c 53040000 		.word aaa +1	@_tim14 +1    @ 19
  78 0090 53040000 		.word aaa +1                         @ 20
  79 0094 53040000 		.word aaa +1         @_tim16 +1      @ 21
  80 0098 53040000 		.word aaa +1         @_tim17 +1      @ 22
  81 009c 53040000 		.word aaa +1          @_i2c   +1     @ 23
  82 00a0 53040000 		.word aaa +1                         @ 24
  83 00a4 53040000 		.word aaa +1           @_spi   +1    @ 25
  84 00a8 53040000 		.word aaa +1                         @ 26
  85 00ac 53040000 		.word aaa +1         @_usart1 +1     @ 27
  86              		.align 2
  87              	
  88              	_start:
  89 00b0 B748     		ldr r0, = 0xffff
  90              	yanshi111:
  91 00b2 0138     		subs r0, r0, # 1
  92 00b4 FDD1     		bne yanshi111
  93              		
  94              	shizhong:
  95 00b6 B74A     		ldr r2, = 0x40022000   @FLASH访问控制
  96 00b8 3221     		movs r1, # 0x32
  97 00ba 1160     		str r1, [r2]           @FLASH缓冲 缓冲开启
  98 00bc B648     		ldr r0, = 0x40021000 @ rcc
  99 00be B749     		ldr r1, = 0x10001
ARM GAS  1.s 			page 3


 100 00c0 0160     		str r1, [r0]
 101              	denghse:
 102 00c2 0168     		ldr r1, [r0]
 103 00c4 8903     		lsls r1, r1, # 14
 104 00c6 FCD5     		bpl denghse
 105              	dengpllguan:
 106 00c8 0168     		ldr r1, [r0]
 107 00ca 8901     		lsls r1, r1, # 6
 108 00cc FCD4     		bmi dengpllguan
 109 00ce B449     	        ldr r1, = 0x110002
 110 00d0 4160     	        str r1, [r0, # 0x04]
 111 00d2 B449     		ldr r1, = 0x1010001
 112 00d4 0160     		str r1, [r0]
 113              	dengpll:
 114 00d6 0168     		ldr r1, [r0]
 115 00d8 8901     		lsls r1, # 6
 116 00da FCD5     		bpl dengpll
 117              		@0x34时钟控制寄存器 2 (RCC_CR2)
 118 00dc 0121     		movs r1, # 0x01
 119 00de 4163     		str r1, [r0, # 0x34]  @ HSI开14M时钟
 120              	dengdai14mshizhongwending:
 121 00e0 416B     		ldr r1, [r0, # 0x34]
 122 00e2 8907     		lsls r1, r1, # 30     @ 左移30位
 123 00e4 FCD5     		bpl dengdai14mshizhongwending  @ 等待14M时钟稳定
 124              	
 125              	_neicunqingling:
 126 00e6 B048     		ldr r0, = 0x20000000
 127 00e8 0021     		movs r1, # 0
 128 00ea B04B     		ldr r3, = 0x1000
 129              	_neicunqinglingxunhuan:
 130 00ec 043B     		subs r3, # 4
 131 00ee C150     		str r1, [r0, r3]
 132 00f0 FCD1     		bne _neicunqinglingxunhuan
 133              	
 134              	_waisheshizhong:			 @ 外设时钟
 135              		@+0x14=RCC_AHBENR
 136              		@0=DMA @2=SRAM @4=FLITF@6=CRC @17=PA @18=PB @19=PC @20=PD @22=PF
 137 00f2 A948     		ldr r0, = 0x40021000
 138 00f4 AE49     		ldr r1, = 0x460005
 139 00f6 4161     		str r1, [r0, # 0x14]
 140              	
 141              		@+0x18外设时钟使能寄存器 (RCC_APB2ENR)
 142              		@0=SYSCFG @5=USART6EN @9=ADC @11=TIM1 @12=SPI1 @14=USART1 @16=TIM15 @17=TIM16 @18=TIM17 @22=DBGMCU
 143 00f8 AE49     		ldr r1, = 0xa00
 144 00fa 8161     		str r1, [r0, # 0x18]
 145              		@+0X1C=RCC_APB1ENR
 146              		@1=TIM3 @4=TIM6 @5=TIM7 @8=TIM14 @11=WWDG @14=SPI @17=USRT2 @18=USART3 @20=USART5 @21=I2C1
 147              		@22=I2C2 @23=USB @28=PWR
 148 00fc 0221     		movs r1, # 0x02
 149 00fe C161     		str r1, [r0, # 0x1c]
 150              	
 151              	
 152              	_waishezhongduan:				@外设中断
 153              		@0xE000E100    0-31  写1开，写0没效
 154              		@0XE000E180    0-31 写1关，写0没效
 155              		@0XE000E200    0-31 挂起，写0没效
 156              		@0XE000E280    0-31 清除， 写0没效
ARM GAS  1.s 			page 4


 157              	
 158              	@_systick:				@ systick定时器初始化
 159              	
 160              	@	ldr r0, = 0xe000e010
 161              	@	ldr r1, = 0xffffff
 162              	@	str r1, [r0, # 4]
 163              	@	str r1, [r0, # 8]
 164              	@	movs r1, # 0x07
 165              	@	str r1, [r0]
 166              		
 167              	io_she_zhi:
 168              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 169              		@a(0x48000000)b(0x48000400)c(0x48000800)d(0x48000c00)f(0x48001400)
 170              		@ 输入（00），通用输出（01），复用功能（10），模拟（11）
 171              		@偏移0x4 = 端口输出类型 @ （0 推挽），（ 1 开漏）
 172              		@偏移0x8 = 输出速度  00低速， 01中速， 11高速
 173              		@偏移0xC = 上拉下拉 (00无上下拉，  01 上拉， 10下拉)
 174              		@偏移0x10 = 输入数据寄存器
 175              		@偏移0x14 = 输出数据寄存器
 176              		@偏移0x18 = 端口开  0-15置位
 177              		@偏移0x28 = 端口关
 178              		@0X20 = 复用低
 179              		@GPIO口0（0-3位）每个IO口占用4位
 180              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 181              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 182              		@0x24 = 复用高
 183              		@GPIO口8 （0-3位）每个IO口占用4位
 184              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 185              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 186              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 187              	
 188 0100 AD48     		ldr r0, = 0x48000000
 189 0102 AE49     		ldr r1, = 0x2824540f
 190 0104 0160     		str r1, [r0]
 191 0106 AE49     		ldr r1, = 0x200
 192 0108 4162     		str r1, [r0, # 0x24]
 193              	
 194              	
 195              	
 196              	
 197              	
 198              		
 199              	dmachushihua:
 200              	        @+0=LSR,+4=IFCR,
 201              	        @+8=CCR1,+c=CNDTR1,+10=CPAR1+14=CMAR1,
 202              	        @+1c=CCR2,+20=CNDTR2,+24=CPAR2,+28=CMAR2
 203              	        @+30=CCR3,+34=CNDTR3,+38=CPAR2,+3c=CMAR3
 204              	        @+44=CCR4,+48=CNDTR4,+4c=CPAR4,+50=CMAR4
 205              	        @+58=CCR5,+5c=CNDTR5,+60=CPAR5,+64=CMAR5
 206              	        @+6C=CCR6,+70=CNDTR6,+74=CPAR6,+78=CMAR6
 207              	        @+80=CCR7,+84=CNDTR7,+88=CPAR7,+8c=CMAR7
 208              	
 209              	        @tim1ch3DMA
 210 010a AE48     	        ldr r0, = 0x40020000
 211 010c AE49     	        ldr r1, = 0x40012c3c @ 外设地址
 212 010e 0166     	        str r1, [r0, # 0x60]
 213 0110 AE49     	        ldr r1, = zheng_xian_biao @ 储存器地址
ARM GAS  1.s 			page 5


 214 0112 4166     	        str r1, [r0, # 0x64]
 215 0114 AE49     	        ldr r1, = 100             @点数
 216 0116 C165     	        str r1, [r0, # 0x5c]
 217 0118 AE49     	        ldr r1, = 0x35b1         @ 储存到外设
 218 011a 8165     	        str r1, [r0, # 0x58]
 219              		@ adc dma
 220 011c A948     		ldr r0, = 0x40020000
 221 011e AE49     		ldr r1, = 0x40012440
 222 0120 0161     		str r1, [r0, # 0x10]
 223 0122 AE49     		ldr r1, = dianyabiao
 224 0124 4161     		str r1, [r0, # 0x14]
 225 0126 AA49     		ldr r1, =  100
 226 0128 C160     		str r1, [r0, # 0x0c]
 227 012a AD49     		ldr r1, = 0x5a1
 228 012c 8160     		str r1, [r0, # 0x08]
 229              	
 230              	
 231              	tim1chushiha:
 232 012e AD48     	        ldr r0, = 0x40012c00 @ tim1_cr1
 233 0130 0021     	        movs r1, # 0
 234 0132 8162     	        str r1, [r0, # 0x28] @ psc
 235 0134 AC49     	        ldr r1, = 47
 236 0136 C162     	        str r1, [r0, # 0x2c] @ ARR
 237 0138 4021     		movs r1, # 0x40
 238 013a 4160     		str r1, [r0, # 0x04] @ TRGO
 239 013c 3821     		movs r1, # 0x38
 240 013e 8161     		str r1, [r0, # 0x18] @ ccmr1 cc1
 241 0140 2F21     		movs r1, # 47
 242 0142 4163     		str r1, [r0, # 0x34]
 243 0144 A949     	        ldr r1, = 0x68
 244 0146 C161     	        str r1, [r0, # 0x1c] @ ccmr2  CC3
 245 0148 A949     	        ldr r1, = 0x100    @  CC3
 246 014a 0162     	        str r1, [r0, # 0x20] @ ccer
 247 014c A949     	        ldr r1, = 0x8000
 248 014e 4164     	        str r1, [r0, # 0x44] @ BDTR
 249 0150 A949     	        ldr r1, = 0x800 @ CC3 DMA
 250 0152 C160     	        str r1, [r0, # 0x0c] @ DIER
 251 0154 A949     	        ldr r1, = 0x81
 252 0156 0160     	        str r1, [r0]
 253              	
 254              	_adcchushihua:
 255 0158 A948     	        ldr r0, = 0x40012400  @ adc基地址
 256 015a AA49     	        ldr r1, = 0x80000000
 257 015c 8160     	        str r1, [r0, # 0x08]  @ ADC 控制寄存器 (ADC_CR)  @adc校准
 258              	_dengadcjiaozhun:
 259 015e 8168     	        ldr r1, [r0, # 0x08]
 260 0160 0900     	        movs r1, r1
 261 0162 FCD4     	        bmi _dengadcjiaozhun   @ 等ADC校准
 262              	_kaiadc:
 263 0164 8168     	        ldr r1, [r0, # 0x08]
 264 0166 0122     	        movs r2, # 0x01
 265 0168 1143     	        orrs r1, r1, r2
 266 016a 8160     	        str r1, [r0, # 0x08]
 267              	_dengdaiadcwending:
 268 016c 0168     	        ldr r1, [r0]
 269 016e C907     	        lsls r1, r1, # 31
 270 0170 FCD5     	        bpl _dengdaiadcwending @ 等ADC稳定
ARM GAS  1.s 			page 6


 271              	_tongdaoxuanze:
 272 0172 A549     	        ldr r1, = 2
 273 0174 8162     	        str r1, [r0, # 0x28]    @ 通道选择寄存器 (ADC_CHSELR)
 274 0176 A549     	        ldr r1, = 0xc03
 275 0178 C160     	        str r1, [r0, # 0x0c]    @ 配置寄存器 1 (ADC_CFGR1)
 276 017a 0021     	        movs r1, # 0
 277 017c 4161     	        str r1, [r0, # 0x14]    @ ADC 采样时间寄存器 (ADC_SMPR)
 278 017e 8168     		ldr r1, [r0, # 0x08]
 279 0180 A34A     		ldr r2, = 0x04         @ 开始转换
 280 0182 1143     		orrs r1, r1, r2
 281 0184 8160     		str r1, [r0, # 0x08]    @ 控制寄存器 (ADC_CR)
 282              	
 283              	_lcdchushihua:
 284 0186 3320     		movs r0, # 0x33
 285 0188 0021     		movs r1, # 0
 286 018a 00F093F8 		bl _xielcd
 287 018e 00F08CF8 		bl _lcdyanshi
 288 0192 3220     		movs r0, # 0x32
 289 0194 0021     		movs r1, # 0
 290 0196 00F08DF8 		bl _xielcd
 291 019a 00F086F8 		bl _lcdyanshi
 292 019e 2820     		movs r0, # 0x28
 293 01a0 0021     		movs r1, # 0
 294 01a2 00F087F8 		bl _xielcd
 295 01a6 00F080F8 		bl _lcdyanshi
 296 01aa 0C20     		movs r0, # 0x0c
 297 01ac 0021     		movs r1, # 0
 298 01ae 00F081F8 		bl _xielcd
 299 01b2 00F07AF8 		bl _lcdyanshi
 300 01b6 0120     		movs r0, # 0x01
 301 01b8 0021     		movs r1, # 0
 302 01ba 00F07BF8 		bl _xielcd
 303 01be 00F074F8 		bl _lcdyanshi
 304              	
 305              	
 306 01c2 C420     		movs r0, # 0xc4
 307 01c4 9349     		ldr r1, = xushu
 308 01c6 0122     		movs r2, # 1
 309 01c8 FF23     		movs r3, # 0xff
 310 01ca 00F060F8 		bl _lcdxianshi
 311              	
 312 01ce CF20     	        movs r0, # 0xcf
 313 01d0 9049     	        ldr r1, = xushu
 314 01d2 0122     	        movs r2, # 1
 315 01d4 FF23     	        movs r3, # 0xff
 316 01d6 00F05AF8 	        bl _lcdxianshi
 317              	
 318              	
 319              	ting:
 320 01da 00F022F8 		bl _jianbo
 321 01de 0C46     		mov r4, r1
 322 01e0 0346     		mov r3, r0
 323 01e2 8D48     		ldr r0, = lvboqihuanchong
 324 01e4 8249     		ldr r1, = 256
 325 01e6 8D4A     		ldr r2, = lvboqizhizhen
 326 01e8 00F03DF8 		bl _lvboqi
 327 01ec 0421     		movs r1, # 4
ARM GAS  1.s 			page 7


 328 01ee 6E4A     		ldr r2, = asciimabiao
 329 01f0 FF23     		movs r3, # 0xff
 330 01f2 00F0A1F8 		bl _zhuanascii
 331 01f6 8C20     		movs r0, # 0x8c
 332 01f8 6B49     		ldr r1, = asciimabiao
 333 01fa 0422     		movs r2, # 0x04
 334 01fc 00F047F8 		bl _lcdxianshi
 335              	
 336 0200 2346     	        mov r3, r4
 337 0202 8748     	        ldr r0, = lvboqihuanchong1
 338 0204 7A49     		ldr r1, = 256
 339 0206 874A     		ldr r2, = lvboqizhizhen1
 340 0208 00F02DF8 	        bl _lvboqi
 341 020c 0421     	        movs r1, # 4
 342 020e 664A     		ldr r2, = asciimabiao
 343 0210 FF23     	        movs r3, # 0xff
 344 0212 00F091F8 	        bl _zhuanascii
 345 0216 8020     	        movs r0, # 0x80
 346 0218 6349     	        ldr r1, = asciimabiao
 347 021a 0422     	        movs r2, # 0x04
 348 021c 00F037F8 	        bl _lcdxianshi
 349              	
 350              	
 351 0220 DBE7     		b ting
 352              		
 353              	
 354              	
 355              	
 356              	_jianbo:				@ 出口r0 r1 r2 r3
 357 0222 F0B5     		push {r4-r7,lr}
 358 0224 644F     	        ldr r7, = 0x48000000
 359 0226 664E     	        ldr r6, = 0x200
 360 0228 BE62     		str r6, [r7, # 0x28]
 361 022a 7F4D     	        ldr r5, = 0x40012428
 362 022c 0124     	        movs r4, # 1
 363 022e 2C60     	        str r4, [r5]
 364              		
 365 0230 00F014F8 		bl _jianboyanshi
 366 0234 7D4C     		ldr r4, = 0x20000088
 367 0236 2068     		ldr r0, [r4]
 368              		
 369 0238 BE61     		str r6, [r7, # 0x18]
 370 023a 00F00FF8 		bl _jianboyanshi
 371 023e 7C4C     		ldr r4, = 0x200000bc
 372 0240 2168     		ldr r1, [r4]
 373              	
 374 0242 0224     		movs r4, # 2
 375 0244 2C60     		str r4, [r5]
 376 0246 BE62     		str r6, [r7, # 0x28]
 377 0248 00F008F8 		bl _jianboyanshi
 378 024c 784C     		ldr r4, = 0x200000bc
 379 024e 2268     		ldr r2, [r4]
 380              		
 381 0250 BE61     		str r6, [r7, # 0x18]
 382 0252 00F003F8 		bl _jianboyanshi
 383 0256 754C     		ldr r4, = 0x20000088
 384 0258 2368     		ldr r3, [r4]
ARM GAS  1.s 			page 8


 385 025a F0BD     		pop {r4-r7,pc}
 386              	_jianboyanshi:
 387 025c 01B5     		push {r0,lr}
 388 025e 4C48     		ldr r0, = 0xffff
 389              	_jianboyanshixunhuan:
 390 0260 0138     		subs r0, r0, # 1
 391 0262 FDD1     		bne _jianboyanshixunhuan
 392 0264 01BD     		pop {r0,pc}
 393              	_lvboqi:
 394              				@滤波器
 395              				@R0=地址，R1=长度,r2=表指针地址,r3=ADC数值
 396              				@出R0=结果
 397 0266 FEB5     		push {r1-r7,lr}	
 398 0268 1568     		ldr r5, [r2]		@读出表指针
 399 026a 4E00     		lsls r6, r1, # 1	
 400 026c 4353     		strh r3, [r0, r5]	@数值写到滤波器缓冲区
 401 026e 0235     		adds r5, r5, # 2
 402 0270 B542     		cmp r5, r6
 403 0272 00D1     		bne _lvboqimeidaohuanchongquding
 404 0274 0025     		movs r5, # 0
 405              	_lvboqimeidaohuanchongquding:
 406 0276 1560     		str r5, [r2]
 407 0278 0027     		movs r7, # 0
 408              	_lvboqixunhuan:
 409 027a B542     		cmp r5, r6
 410 027c 00D1     		bne _lvbozonghe
 411 027e 0025     		movs r5, # 0
 412              	_lvbozonghe:
 413 0280 445B     		ldrh r4, [r0, r5]
 414 0282 0235     		adds r5, r5, # 2
 415 0284 3F19     		adds r7, r7, r4
 416 0286 0139     		subs r1, r1, # 1
 417 0288 F7D1     		bne _lvboqixunhuan
 418 028a 3812     		asrs r0, r7, # 8	@修改
 419 028c FEBD     		pop {r1-r7,pc}
 420              	
 421              	
 422              		
 423              	_lcdxianshi:	  		@r0=LCD位置，r1=数据地址，r2=长度
 424 028e 1FB5     		push {r0-r4,lr}
 425 0290 0C46     		mov r4, r1
 426              	
 427 0292 0021     		movs r1, # 0
 428 0294 00F00EF8 		bl _xielcd
 429              	
 430 0298 0121     		movs r1, # 1
 431 029a 0023     		movs r3, # 0
 432              	_lcdxianshixunhuan:
 433 029c E05C     		ldrb r0, [r4,r3]
 434 029e 00F009F8 		bl _xielcd
 435 02a2 0133     		adds r3, r3, # 1
 436 02a4 9342     		cmp r3, r2
 437 02a6 F9D1     		bne _lcdxianshixunhuan
 438 02a8 1FBD     		pop {r0-r4,pc}
 439              	
 440              	_lcdyanshi:
 441 02aa 20B5     		push {r5,lr}
ARM GAS  1.s 			page 9


 442 02ac 614D     		ldr r5, = 0x2000
 443              	_lcdyanshixunhuan:
 444 02ae 013D     		subs r5, r5, # 1
 445 02b0 FDD1     		bne _lcdyanshixunhuan
 446 02b2 20BD     		pop {r5,pc}
 447              	
 448              	_xielcd:			@入R0=8位,r1=0命令,r1=1数据
 449 02b4 3FB5     		push {r0-r5,lr}
 450 02b6 604C     		ldr r4, = xiangminkaiguan  @ 相敏开关
 451 02b8 0246     		mov r2, r0
 452 02ba 2568     		ldr r5, [r4]
 453 02bc 1209     		lsrs r2, r2, # 4
 454 02be 9200     		lsls r2, r2, # 2	@ 高四位
 455 02c0 0007     		lsls r0, r0, # 28
 456 02c2 800E     		lsrs r0, r0, # 26	@ 低四位
 457 02c4 C907     		lsls r1, r1, # 31
 458 02c6 01D5     		bpl __lcd_ming_ling
 459              	__lcd_shu_ju:
 460 02c8 0323     		movs r3, # 0x03		@ RS = 1 E = 1
 461 02ca 00E0     		b __xiang_min_kai_guan
 462              	__lcd_ming_ling:
 463 02cc 0223     		movs r3, # 0x02		@ RS = 0 E = 1
 464              	__xiang_min_kai_guan:
 465 02ce 402D     		cmp r5, # 0x40
 466 02d0 01D1     		bne __kai_zheng_xiang_wei
 467 02d2 8025     		movs r5, # 0x80
 468 02d4 00E0     		b __xie_lcd_shu_ju
 469              	__kai_zheng_xiang_wei:	
 470 02d6 4025     		movs r5, # 0x40
 471              	__xie_lcd_shu_ju:
 472 02d8 2560     		str r5, [r4]
 473 02da 5B19     		adds r3, r3, r5
 474 02dc 0146     		mov r1, r0
 475 02de D218     		adds r2, r2, r3
 476 02e0 1000     		movs r0, r2
 477 02e2 00F00BF8 		bl __74hc595
 478 02e6 0238     		subs r0, r0, # 0x02
 479 02e8 00F008F8 		bl __74hc595
 480 02ec 0846     		mov r0, r1
 481 02ee C018     		adds r0, r0, r3
 482 02f0 00F004F8 		bl __74hc595
 483 02f4 0238     		subs r0, r0, # 0x02
 484 02f6 00F001F8 		bl __74hc595
 485 02fa 3FBD     		pop {r0-r5,pc}
 486              		
 487              	__74hc595:			@ 入R0=8位
 488 02fc FFB5     		push {r0-r7,lr}
 489 02fe 2E4E     		ldr r6, = 0x48000000
 490 0300 2025     		movs r5, # 0x20		@ SRCLK
 491 0302 4022     		movs r2, # 0x40		@ RCLK
 492 0304 8023     		movs r3, # 0x80		@ SER
 493 0306 1824     		movs r4, # 24
 494              	__595_yiweixunhuan:
 495 0308 B261     		str r2, [r6, # 0x18]	@ rclk=0
 496 030a B561     		str r5, [r6, # 0x18]	@ srclk=0
 497 030c FF27     		movs r7, # 0xff
 498              	__595_yanshi:
ARM GAS  1.s 			page 10


 499 030e 013F     		subs r7, r7, # 1
 500 0310 FDD1     		bne __595_yanshi
 501 0312 0146     		mov r1, r0
 502 0314 A140     		lsls r1, r1, r4
 503 0316 01D5     		bpl __ser_0
 504              	__ser_1:
 505 0318 B362     		str r3, [r6, # 0x28]	@ ser=1
 506 031a 00E0     		b __595_yiwei
 507              	__ser_0:
 508 031c B361     		str r3, [r6, # 0x18]	@ ser=0
 509              	__595_yiwei:
 510 031e B562     		str r5, [r6, # 0x28]
 511 0320 FF27     		movs r7, # 0xff
 512              	__595_yanshi1:
 513 0322 013F     		subs r7, r7, # 1
 514 0324 FDD1     		bne __595_yanshi1
 515 0326 0134     		adds r4, r4, # 1
 516 0328 202C     		cmp r4, # 32
 517 032a EDD1     		bne __595_yiweixunhuan
 518 032c B262     		str r2, [r6, # 0x28]	@ rclk=1
 519 032e FF27     		movs r7, # 0xff
 520              	__595_yanshi2:
 521 0330 013F     		subs r7, r7, # 1
 522 0332 FDD1     		bne __595_yanshi2
 523 0334 B261     		str r2, [r6, # 0x18]	@ rclk = 0
 524 0336 FFBD     		pop {r0-r7,pc}
 525              	
 526              	
 527              	
 528              	_zhuanascii:					@ 16进制转ASCII
 529              			@ R0要转的数据， R1长度，R2结果表首地址, r3=小数点位置
 530 0338 FFB5     		push {r0-r7,lr}
 531 033a 1F46     		mov r7, r3
 532 033c 0546     		mov r5, r0
 533 033e 0E46     		mov r6, r1
 534 0340 0A21     		movs r1, # 10
 535              	_xunhuanqiuma:
 536 0342 00F012F8 		bl _chufa
 537 0346 0446     		mov r4, r0
 538 0348 4C43     		muls r4, r1
 539 034a 2B1B     		subs r3, r5, r4
 540 034c 3033     		adds r3, r3, # 0x30
 541 034e 0546     		mov r5, r0
 542 0350 013E     		subs r6, r6, # 1
 543 0352 08D0     		beq _qiumafanhui
 544 0354 BE42     		cmp r6, r7
 545 0356 02D1     		bne _meidaoxiaoshudian
 546 0358 2E24     		movs r4, # 0x2e		@小数点
 547 035a 9455     		strb r4, [r2,r6]	@插入小数点
 548 035c 013E     		subs r6, r6, # 1
 549              	_meidaoxiaoshudian:
 550 035e 9355     		strb r3, [r2,r6]
 551 0360 3600     		movs r6, r6
 552 0362 EED1     		bne _xunhuanqiuma
 553 0364 FFBD     		pop {r0-r7,pc}
 554              	_qiumafanhui:
 555 0366 9355     		strb r3, [r2, r6]
ARM GAS  1.s 			page 11


 556 0368 FFBD     		pop {r0-r7,pc}
 557              	
 558              		
 559              	_chufa:				@软件除法
 560              		@ r0 除以 r1 等于 商(r0)余数R1
 561 036a 1EB5     		push {r1-r4,lr}
 562 036c 0028     		cmp r0, # 0
 563 036e 0ED0     		beq _chufafanhui
 564 0370 0029     		cmp r1, # 0
 565 0372 0CD0     		beq _chufafanhui
 566 0374 0246     		mov r2, r0
 567 0376 0123     		movs r3, # 1
 568 0378 DB07     		lsls r3, r3, # 31
 569 037a 0020     		movs r0, # 0
 570 037c 0446     		mov r4, r0
 571              	_chufaxunhuan:
 572 037e 5200     		lsls r2, r2, # 1
 573 0380 6441     		adcs r4, r4, r4
 574 0382 8C42     		cmp r4, r1
 575 0384 01D3     		bcc _chufaweishubudao0
 576 0386 C018     		adds r0, r0, r3
 577 0388 641A     		subs r4, r4, r1
 578              	_chufaweishubudao0:
 579 038a 5B08     		lsrs r3, r3, # 1
 580 038c F7D1     		bne _chufaxunhuan
 581              	_chufafanhui:
 582 038e 1EBD     		pop {r1-r4,pc}
 583 0390 FFFF0000 		.ltorg
 583      00200240 
 583      00100240 
 583      01000100 
 583      02001100 
 584              	
 585              	
 586              	_nmi_handler:
 587 043c 7047     		bx lr
 588              	_hard_fault:
 589 043e 7047     		bx lr
 590              	_svc_handler:
 591 0440 7047     		bx lr
 592              	_pendsv_handler:
 593 0442 7047     		bx lr
 594              	_systickzhongduan:
 595 0444 034A     		ldr r2, = jishu
 596 0446 0448     		ldr r0, = 0xe0000d04
 597 0448 1368     		ldr r3, [r2]
 598 044a 0449     		ldr r1, = 0x02000000
 599 044c 0133     		adds r3, r3, # 1
 600 044e 1360     		str r3, [r2]
 601 0450 0160     		str r1, [r0]                 @ 清除SYSTICK中断
 602              	aaa:
 603 0452 70473400 		bx lr
 603      0020040D 
 603      00E00000 
 603      0002
ARM GAS  1.s 			page 12


DEFINED SYMBOLS
                 1.s:9      .data:0000000000000000 zheng_xian_biao
                 1.s:11     .data:00000000000000ca lcdshuju
                 1.s:13     .data:00000000000000da dianhua
                 1.s:15     .data:00000000000000ea qq
                 1.s:17     .data:00000000000000fa xushu
                 1.s:19     .data:00000000000000fb fu
                 1.s:21     .data:00000000000000fc zheng
                 1.s:23     .data:00000000000000fd xiaomai
                 1.s:25     *ABS*:0000000020001000 STACKINIT
                 1.s:26     *ABS*:0000000020000000 asciimabiao
                 1.s:27     *ABS*:0000000020000030 xiangminkaiguan
                 1.s:28     *ABS*:0000000020000034 jishu
                 1.s:29     *ABS*:0000000020000038 jianbo
                 1.s:30     *ABS*:0000000020000040 dianyabiao
                 1.s:31     *ABS*:0000000020000200 lvboqizhizhen
                 1.s:32     *ABS*:0000000020000204 lvboqihuanchong
                 1.s:33     *ABS*:0000000020000410 lvboqizhizhen1
                 1.s:34     *ABS*:0000000020000414 lvboqihuanchong1
                 1.s:35     *ABS*:0000000020000620 lvboqizhizhen2
                 1.s:36     *ABS*:0000000020000624 lvboqihuanchong2
                 1.s:37     *ABS*:0000000020000830 lvboqizhizhen3
                 1.s:38     *ABS*:0000000020000834 lvboqihuanchong3
                 1.s:41     .text:0000000000000000 vectors
                 1.s:88     .text:00000000000000b0 _start
                 1.s:586    .text:000000000000043c _nmi_handler
                 1.s:588    .text:000000000000043e _hard_fault
                 1.s:590    .text:0000000000000440 _svc_handler
                 1.s:592    .text:0000000000000442 _pendsv_handler
                 1.s:594    .text:0000000000000444 _systickzhongduan
                 1.s:602    .text:0000000000000452 aaa
                            .text:0000000000000000 $d
                 1.s:86     .text:00000000000000b0 $t
                 1.s:90     .text:00000000000000b2 yanshi111
                 1.s:94     .text:00000000000000b6 shizhong
                 1.s:101    .text:00000000000000c2 denghse
                 1.s:105    .text:00000000000000c8 dengpllguan
                 1.s:113    .text:00000000000000d6 dengpll
                 1.s:120    .text:00000000000000e0 dengdai14mshizhongwending
                 1.s:125    .text:00000000000000e6 _neicunqingling
                 1.s:129    .text:00000000000000ec _neicunqinglingxunhuan
                 1.s:134    .text:00000000000000f2 _waisheshizhong
                 1.s:152    .text:0000000000000100 _waishezhongduan
                 1.s:167    .text:0000000000000100 io_she_zhi
                 1.s:199    .text:000000000000010a dmachushihua
                 1.s:231    .text:000000000000012e tim1chushiha
                 1.s:254    .text:0000000000000158 _adcchushihua
                 1.s:258    .text:000000000000015e _dengadcjiaozhun
                 1.s:262    .text:0000000000000164 _kaiadc
                 1.s:267    .text:000000000000016c _dengdaiadcwending
                 1.s:271    .text:0000000000000172 _tongdaoxuanze
                 1.s:283    .text:0000000000000186 _lcdchushihua
                 1.s:448    .text:00000000000002b4 _xielcd
                 1.s:440    .text:00000000000002aa _lcdyanshi
                 1.s:423    .text:000000000000028e _lcdxianshi
                 1.s:319    .text:00000000000001da ting
                 1.s:356    .text:0000000000000222 _jianbo
ARM GAS  1.s 			page 13


                 1.s:393    .text:0000000000000266 _lvboqi
                 1.s:528    .text:0000000000000338 _zhuanascii
                 1.s:386    .text:000000000000025c _jianboyanshi
                 1.s:389    .text:0000000000000260 _jianboyanshixunhuan
                 1.s:405    .text:0000000000000276 _lvboqimeidaohuanchongquding
                 1.s:408    .text:000000000000027a _lvboqixunhuan
                 1.s:412    .text:0000000000000280 _lvbozonghe
                 1.s:432    .text:000000000000029c _lcdxianshixunhuan
                 1.s:443    .text:00000000000002ae _lcdyanshixunhuan
                 1.s:462    .text:00000000000002cc __lcd_ming_ling
                 1.s:459    .text:00000000000002c8 __lcd_shu_ju
                 1.s:464    .text:00000000000002ce __xiang_min_kai_guan
                 1.s:469    .text:00000000000002d6 __kai_zheng_xiang_wei
                 1.s:471    .text:00000000000002d8 __xie_lcd_shu_ju
                 1.s:487    .text:00000000000002fc __74hc595
                 1.s:494    .text:0000000000000308 __595_yiweixunhuan
                 1.s:498    .text:000000000000030e __595_yanshi
                 1.s:507    .text:000000000000031c __ser_0
                 1.s:504    .text:0000000000000318 __ser_1
                 1.s:509    .text:000000000000031e __595_yiwei
                 1.s:512    .text:0000000000000322 __595_yanshi1
                 1.s:520    .text:0000000000000330 __595_yanshi2
                 1.s:535    .text:0000000000000342 _xunhuanqiuma
                 1.s:559    .text:000000000000036a _chufa
                 1.s:554    .text:0000000000000366 _qiumafanhui
                 1.s:549    .text:000000000000035e _meidaoxiaoshudian
                 1.s:581    .text:000000000000038e _chufafanhui
                 1.s:571    .text:000000000000037e _chufaxunhuan
                 1.s:578    .text:000000000000038a _chufaweishubudao0
                 1.s:583    .text:0000000000000390 $d
                 1.s:587    .text:000000000000043c $t
                 1.s:603    .text:0000000000000454 $d

NO UNDEFINED SYMBOLS
