ARM GAS  1.s 			page 1


   1              		@@ 单片机stm32f030f4p6
   2              		@旋转变压器
   3              		@作者：yjmwxwx
   4              		@时间：2021-02-02
   5              		@编译器：ARM-NONE-EABI
   6              		.thumb
   7              		.syntax unified
   8              		.section .data
   9              	yjmwxwx:
  10 0000 796A6D77 		.ascii "yjmwxwx-20210202"
  10      7877782D 
  10      32303231 
  10      30323032 
  11              	kong:
  12 0010 20202020 		.int 0x20202020
  13              	_fu:
  14 0014 2D       		.ascii "-"
  15              	jiaodu1:
  16 0015 F23D0000 		.int 0x3df2
  17              	jiaodufuhao:
  18 0019 DF000000 		.int 0xdf
  19 001d 000000   		.align 4
  20              	zheng_xian_biao:
  21 0020 1C001D00 		.short 28,29,31,33,34,36,38,39,41,42,44,45,46,48,49,50,51,52,52,53,54,54,55,55,55,55,55,55,55,54,5
  21      1F002100 
  21      22002400 
  21      26002700 
  21      29002A00 
  22 00ea 00000000 		.align 4
  22      0000
  23              	cordic_yong_cos_sin:
  24 00f0 00000000 		.int 0x0000,0x4000,0x2D41,0x2D41,0x3B20,0x187D,0x3EC5,0x0C7C,0x3FB1,0x0645,0x3FEC,0x0323,0x3FFB,0x
  24      00400000 
  24      412D0000 
  24      412D0000 
  24      203B0000 
  25              	cordic_yong_atan_biao:
  26 0170 87640000 		.int 0x00006487,0x00003B58,0x00001F5B,0x00000FEA,0x000007FD,0x000003FF,0x000001FF,0x000000FF,0x000
  26      583B0000 
  26      5B1F0000 
  26      EA0F0000 
  26      FD070000 
  27              		.align 4
  28              		.equ STACKINIT,        	        0x20001000
  29              		.equ asciimabiao,		0x20000000
  30              		.equ guoling_jishu,		0x200000a8
  31              		.equ jiaodu2,			0x200000ac
  32              		.equ zhuansu,			0x200000b0
  33              		.equ jishu,			0x200000b4
  34              		.equ cos,			0x200000b8
  35              		.equ sin,			0x200000bc
  36              		.equ cos1,			0x200000c0
  37              		.equ sin1,			0x200000c4
  38              		.equ jiaodu_cha,		0x200000c8
  39              		.equ jiaodu_1,			0x200000cc
  40              		.equ cos_jiaozheng,		0x200000e0
  41              		.equ sin_jiaozheng,		0x200000e4
ARM GAS  1.s 			page 2


  42              		.equ jiaodu_jiaozheng,		0x200000e8
  43              		.equ guoling,			0x200000ec
  44              		.equ jiaodu,			0x200000f0
  45              		.equ sin_zheng,			0x200000f4
  46              		.equ sin_fu,			0x200000f8
  47              		.equ liangcheng,		0x200000fc
  48              		.equ dianyabiao,		0x20000100
  49              		.equ lvboqizhizhen,		0x20000300
  50              		.equ lvboqihuanchong,		0x20000304
  51              		.equ lvboqizhizhen1,		0x20000900
  52              		.equ lvboqihuanchong1,		0x20000904
  53              		.equ lvboqizhizhen2,		0x20000a10
  54              		.equ lvboqihuanchong2,		0x20000a14
  55              		.section .text
  56              	vectors:
  57 0000 00100020 		.word STACKINIT
  58 0004 B1000000 		.word _start + 1
  59 0008 2F070000 		.word _nmi_handler + 1
  60 000c 31070000 		.word _hard_fault  + 1
  61 0010 00000000 		.word 0
  62 0014 00000000 		.word 0
  63 0018 00000000 		.word 0
  64 001c 00000000 		.word 0
  65 0020 00000000 		.word 0
  66 0024 00000000 		.word 0
  67 0028 00000000 		.word 0
  68 002c 33070000 		.word _svc_handler +1
  69 0030 00000000 		.word 0
  70 0034 00000000 		.word 0
  71 0038 35070000 		.word _pendsv_handler +1
  72 003c 37070000 		.word _systickzhongduan +1           @ 15
  73 0040 C7070000 		.word aaa +1     @ _wwdg +1          @ 0
  74 0044 C7070000 		.word aaa +1     @_pvd +1            @ 1
  75 0048 C7070000 		.word aaa +1     @_rtc +1            @ 2
  76 004c C7070000 		.word aaa +1     @_flash +1          @ 3
  77 0050 C7070000 		.word aaa +1	@ _rcc + 1           @ 4
  78 0054 C7070000 		.word aaa +1      @_exti0_1  +1      @ 5
  79 0058 C7070000 		.word aaa +1      @ _exti2_3 +1      @ 6
  80 005c C7070000 		.word aaa +1       @_exti4_15 +1     @ 7
  81 0060 C7070000 		.word aaa +1                         @ 8
  82 0064 C7070000 		.word aaa +1	@__dma_wan  +1	     @ 9
  83 0068 C7070000 		.word aaa +1    @_dma1_2_3 +1        @ 10
  84 006c C7070000 		.word aaa +1       @_dma1_4_5 +1     @ 11
  85 0070 C7070000 		.word aaa +1	 @_adc1 +1           @ 12
  86 0074 C7070000 		.word aaa +1       @_tim1_brk_up +1  @ 13
  87 0078 C7070000 		.word aaa +1        @ _tim1_cc +1    @ 14
  88 007c C7070000 		.word aaa +1         @_tim2 +1       @ 15
  89 0080 C7070000 		.word aaa +1          @_tim3 +1      @ 16
  90 0084 C7070000 		.word aaa +1                         @ 17
  91 0088 C7070000 		.word aaa +1		             @ 18
  92 008c C7070000 		.word aaa +1	@_tim14 +1           @ 19
  93 0090 C7070000 		.word aaa +1                         @ 20
  94 0094 C7070000 		.word aaa +1         @_tim16 +1      @ 21
  95 0098 C7070000 		.word aaa +1         @_tim17 +1      @ 22
  96 009c C7070000 		.word aaa +1          @_i2c   +1     @ 23
  97 00a0 C7070000 		.word aaa +1                         @ 24
  98 00a4 C7070000 		.word aaa +1           @_spi   +1    @ 25
ARM GAS  1.s 			page 3


  99 00a8 C7070000 		.word aaa +1                         @ 26
 100 00ac C7070000 		.word aaa +1         @_usart1 +1     @ 27
 101              		.align 2
 102              	_start:
 103              	shizhong:
 104 00b0 A84A     	        ldr r2, = 0x40022000   @FLASH访问控制
 105 00b2 3221     	        movs r1, # 0x32
 106 00b4 1160     	        str r1, [r2]           @FLASH缓冲 缓冲开启
 107 00b6 A848     	        ldr r0, = 0x40021000 @ rcc
 108 00b8 A849     		ldr r1, = 0x10001
 109 00ba 0160     	        str r1, [r0]
 110              	denghse:
 111 00bc 0168     	        ldr r1, [r0]
 112 00be 8903     	        lsls r1, r1, # 14
 113 00c0 FCD5     	        bpl denghse
 114              	dengpllguan:
 115 00c2 0168     	        ldr r1, [r0]
 116 00c4 8901     		lsls r1, r1, # 6
 117 00c6 FCD4     		bmi dengpllguan
 118 00c8 A549     		ldr r1, = 0x150002	@0x150002
 119 00ca 0046     		mov r0, r0
 120 00cc 4160     		str r1, [r0, # 0x04]
 121 00ce 0046     		mov r0, r0
 122 00d0 A449     		ldr r1, = 0x1010000
 123 00d2 0046     		mov r0, r0
 124 00d4 0160     		str r1, [r0]
 125              	
 126              	dengpll:
 127 00d6 0168     	        ldr r1, [r0]
 128 00d8 8901     		lsls r1, # 6
 129 00da FCD5     		bpl dengpll
 130              	
 131              	
 132 00dc A249     		ldr r1, = 100
 133 00de 0163     		str r1, [r0, # 0x30]
 134              		
 135              	_waisheshizhong:                         @ 外设时钟
 136              	        @+0x14=RCC_AHBENR
 137              		@ 0=DMA @ 2=SRAM @ 4=FLITF@ 6=CRC @ 17=PA @ 18=PB @ 19=PC @ 20=PD @ 22=PF
 138 00e0 9D48     		ldr r0, = 0x40021000
 139 00e2 A249     		ldr r1, = 0x60001
 140 00e4 4161     	        str r1, [r0, # 0x14]
 141              	
 142              	        @+0x18外设时钟使能寄存器 (RCC_APB2ENR)
 143              	        @0=SYSCFG @5=USART6EN @9=ADC @11=TIM1 @12=SPI1 @14=USART1 @16=TIM15 @17=TIM16 @18=TIM17 @22
 144 00e6 A249     	        ldr r1, = 0x1a00
 145 00e8 8161     		str r1, [r0, # 0x18]
 146              		@+0X1C=RCC_APB1ENR
 147              		@ 1=TIM3 @ 4=TIM6 @ 5=TIM7 @ 8=TIM14 @ 11=WWDG @ 14=SPI @ 17=USRT2 @ 18=USART3 @ 20=USART5 @ 21=I2
 148              		@ 22=I2C2 @ 23=USB @ 28=PWR
 149 00ea A24A     	        ldr r2, = 0x902
 150 00ec C261     	        str r2, [r0, # 0x1c]
 151              	
 152              	_neicunqingling:
 153 00ee A248     		ldr r0, = 0x20000000
 154 00f0 0021     		movs r1, # 0
 155 00f2 A24B     		ldr r3, = 0x1000
ARM GAS  1.s 			page 4


 156              	_neicunqinglingxunhuan:
 157 00f4 043B     		subs r3, # 4
 158 00f6 C150     		str r1, [r0, r3]
 159 00f8 FCD1     		bne _neicunqinglingxunhuan
 160              	
 161              	_waishezhongduan:				@外设中断
 162              		@0xE000E100    0-31  写1开，写0没效
 163              		@0XE000E180    0-31 写1关，写0没效
 164              		@0XE000E200    0-31 挂起，写0没效
 165              		@0XE000E280    0-31 清除， 写0没效
 166 00fa A148     		ldr r0, =  0xe000e100
 167 00fc A149     		ldr r1, = 0x200 @0x10200  @ 0x10000
 168 00fe 0160     		str r1, [r0]
 169              	@_kanmengou:
 170              	@	ldr r0, = 0x40003000
 171              	@	ldr r1, = 0x5555
 172              	@	str r1, [r0]
 173              	@	movs r1, # 7
 174              	@	str r1, [r0, # 4]
 175              	@	ldr r1, = 0xfff
 176              	@	str r1, [r0, # 8]
 177              	@	ldr r1, = 0xaaaa
 178              	@	str r1, [r0]
 179              	@	ldr r1, = 0xcccc
 180              	@	str r1, [r0]
 181              		
 182              	io_she_zhi:
 183              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 184              		@a(0x48000000)b(0x48000400)c(0x48000800)d(0x48000c00)f(0x48001400)
 185              		@ 输入（00），通用输出（01），复用功能（10），模拟（11）
 186              		@偏移0x4 = 端口输出类型 @ （0 推挽），（ 1 开漏）
 187              		@偏移0x8 = 输出速度  00低速， 01中速， 11高速
 188              		@偏移0xC = 上拉下拉 (00无上下拉，  01 上拉， 10下拉)
 189              		@偏移0x10 = 输入数据寄存器
 190              		@偏移0x14 = 输出数据寄存器
 191              		@偏移0x18 = 端口开  0-15置位
 192              		@偏移0x28 = 端口关
 193              		@0X20 = 复用低
 194              		@GPIO口0（0-3位）每个IO口占用4位
 195              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 196              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 197              		@0x24 = 复用高
 198              		@GPIO口8 （0-3位）每个IO口占用4位
 199              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 200              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 201              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 202              	
 203 0100 A148     		ldr r0, = 0x48000000
 204 0102 A249     		ldr r1, = 0x2814aa3d  @0x28149bc1	@ 0x281457c1
 205 0104 0160     		str r1, [r0]
 206 0106 A249     		ldr r1, =  0x6f0
 207 0108 4160     		str r1, [r0, # 0x04]
 208 010a A249     		ldr r1, = 0x0c3ff000
 209 010c 8160     		str r1, [r0, # 0x08]
 210              		
 211 010e A248     		ldr r0, = 0x48000400
 212 0110 0821     		movs r1, # 0x08 @ pb1
ARM GAS  1.s 			page 5


 213 0112 0160     		str r1, [r0]
 214 0114 2021     		movs r1, # 0x20
 215 0116 0162     		str r1, [r0, # 0x20]
 216              	
 217              	spi_chushihua:
 218 0118 A048     		ldr r0, = 0x40013000
 219 011a A149     		ldr  r1, = 0x1708
 220 011c 4160     		str r1, [r0, # 0x04]
 221 011e A149     		ldr r1, = 0xc07c
 222 0120 0160     		str r1, [r0]
 223              		
 224              	_lcdchushihua:
 225 0122 3320     		movs r0, # 0x33
 226 0124 0021     		movs r1, # 0
 227 0126 00F04EFA 		bl __spi_xielcd
 228 012a 00F047FA 		bl _lcdyanshi
 229              		
 230 012e 3220     		movs r0, # 0x32
 231 0130 0021     		movs r1, # 0
 232 0132 00F048FA 		bl __spi_xielcd
 233 0136 00F041FA 		bl _lcdyanshi
 234 013a 2820     		movs r0, # 0x28
 235 013c 0021     		movs r1, # 0
 236 013e 00F042FA 		bl __spi_xielcd
 237 0142 00F03BFA 		bl _lcdyanshi
 238 0146 0C20     		movs r0, # 0x0c
 239 0148 0021     		movs r1, # 0
 240 014a 00F03CFA 		bl __spi_xielcd
 241 014e 00F035FA 		bl _lcdyanshi
 242 0152 0120     		movs r0, # 0x01
 243 0154 0021     		movs r1, # 0
 244 0156 00F036FA 		bl __spi_xielcd
 245 015a 00F02FFA 		bl _lcdyanshi
 246              		
 247 015e 8020     		movs r0, # 0x80
 248 0160 9149     		ldr r1, = yjmwxwx
 249 0162 1022     		movs r2, # 16
 250 0164 00F01CFA 		bl _lcdxianshi
 251 0168 00F028FA 		bl _lcdyanshi
 252              	
 253              		
 254              	_adcchushihua:
 255 016c 8F48     		ldr r0, = 0x40012400  @ adc基地址
 256 016e 9049     		ldr r1, = 0x80000000
 257 0170 8160     		str r1, [r0, # 0x08]  @ ADC 控制寄存器 (ADC_CR)  @adc校准
 258              	_dengadcjiaozhun:
 259 0172 8168     		ldr r1, [r0, # 0x08]
 260 0174 0900     		movs r1, r1
 261 0176 FCD4     		bmi _dengadcjiaozhun   @ 等ADC校准
 262 0178 0121     		movs r1, # 1
 263 017a 0160     		str r1, [r0]
 264              	_kaiadc:
 265 017c 8168     		ldr r1, [r0, # 0x08]
 266 017e 0122     		movs r2, # 0x01
 267 0180 1143     		orrs r1, r1, r2
 268 0182 8160     		str r1, [r0, # 0x08]
 269              	_deng_adc_wen_ding:
ARM GAS  1.s 			page 6


 270 0184 0168     		ldr r1, [r0]
 271 0186 C907     		lsls r1, r1, # 31
 272 0188 FCD5     		bpl _deng_adc_wen_ding @ 等ADC稳定
 273              	_tongdaoxuanze:
 274 018a 8A49     		ldr r1, = 0x40000000
 275 018c 0161     		str r1, [r0, # 0x10]
 276 018e 0621     		movs r1, # 0x06
 277 0190 8162     		str r1, [r0, # 0x28]    @ 通道选择寄存器 (ADC_CHSELR)
 278 0192 8949     		ldr r1, = 0x803
 279 0194 C160     		str r1, [r0, # 0x0c]    @ 配置寄存器 1 (ADC_CFGR1)
 280 0196 0021     		movs r1, # 0
 281 0198 4161     		str r1, [r0, # 0x14]    @ ADC 采样时间寄存器 (ADC_SMPR)
 282 019a 8168     		ldr r1, [r0, # 0x08]
 283 019c 874A     		ldr r2, = 0x04         @ 开始转换
 284 019e 1143     		orrs r1, r1, r2
 285 01a0 8160     		str r1, [r0, # 0x08]    @ 控制寄存器 (ADC_CR)
 286              	
 287              	dmachushihua:
 288              		@+0=LSR,+4=IFCR,
 289              		@+8=CCR1,+c=CNDTR1,+10=CPAR1+14=CMAR1,
 290              		@+1c=CCR2,+20=CNDTR2,+24=CPAR2,+28=CMAR2
 291              		@+30=CCR3,+34=CNDTR3,+38=CPAR2,+3c=CMAR3
 292              		@+44=CCR4,+48=CNDTR4,+4c=CPAR4,+50=CMAR4
 293              		@+58=CCR5,+5c=CNDTR5,+60=CPAR5,+64=CMAR5
 294              		@+6C=CCR6,+70=CNDTR6,+74=CPAR6,+78=CMAR6
 295              		@+80=CCR7,+84=CNDTR7,+88=CPAR7,+8c=CMAR7
 296              	
 297              		@tim1ch3DMA
 298 01a2 8748     		ldr r0, = 0x40020000
 299 01a4 8749     		ldr r1, = 0x40012c3c @ 外设地址
 300 01a6 0166     		str r1, [r0, # 0x60]
 301 01a8 8749     		ldr r1, = zheng_xian_biao @ 储存器地址
 302 01aa 4166     		str r1, [r0, # 0x64]
 303 01ac 6E49     		ldr r1, = 100             @点数
 304 01ae C165     		str r1, [r0, # 0x5c]
 305 01b0 8649     		ldr r1, = 0x35b1         @ 储存到外设
 306 01b2 8165     		str r1, [r0, # 0x58]
 307              		@ adc dma
 308 01b4 8248     		ldr r0, = 0x40020000
 309 01b6 8649     		ldr r1, = 0x40012440
 310 01b8 0161     		str r1, [r0, # 0x10]
 311 01ba 8649     		ldr r1, = dianyabiao
 312 01bc 4161     		str r1, [r0, # 0x14]
 313 01be 6A49     		ldr r1, =  100
 314 01c0 C160     		str r1, [r0, # 0x0c]
 315 01c2 8549     		ldr r1, = 0xaa1		@ 5a1
 316 01c4 8160     		str r1, [r0, # 0x08]
 317              	
 318              	_systick:	@ systick定时器初始化
 319              	
 320 01c6 854F     		ldr r7, = 0xe000e010
 321 01c8 854E     		ldr r6, = 5600
 322 01ca 7E60     		str r6, [r7, # 4]
 323 01cc BE60     		str r6, [r7, # 8]
 324 01ce 0726     		movs r6, # 0x07
 325              	tim1chushiha:
 326 01d0 8448     		ldr r0, = 0x40012c00 @ tim1_cr1
ARM GAS  1.s 			page 7


 327 01d2 0021     		movs r1, # 0
 328 01d4 8162     		str r1, [r0, # 0x28] @ psc
 329 01d6 8449     		ldr r1, = 56
 330 01d8 C162     		str r1, [r0, # 0x2c] @ ARR
 331              		@	movs r1, # 0x40
 332 01da 2021     		movs r1, # 0x20
 333 01dc 4160     		str r1, [r0, # 0x04] @ TRGO
 334 01de 3821     		movs r1, # 0x38
 335 01e0 8161     		str r1, [r0, # 0x18] @ ccmr1 cc1
 336 01e2 3821     		movs r1, # 56
 337 01e4 4163     		str r1, [r0, # 0x34]
 338 01e6 8149     		ldr r1, = 0x68
 339 01e8 C161     		str r1, [r0, # 0x1c] @ ccmr2  CC3
 340 01ea 8149     		ldr r1, = 0x400    @  CC3
 341 01ec 0162     		str r1, [r0, # 0x20] @ ccer
 342 01ee 8149     		ldr r1, = 0x8000
 343 01f0 4164     		str r1, [r0, # 0x44] @ BDTR
 344 01f2 8149     		ldr r1, = 0x800 @ CC3 DMA
 345 01f4 C160     		str r1, [r0, # 0x0c] @ DIER
 346 01f6 8149     		ldr r1, = 0x81
 347 01f8 0160     		str r1, [r0]
 348 01fa 3E60     		str r6, [r7]	@systick 开
 349              		
 350              	
 351              		
 352              	ting:
 353 01fc 8048     		ldr r0, = 0x20000d00
 354 01fe 0168     		ldr r1, [r0]
 355 0200 0131     		adds r1, r1, # 1
 356 0202 0160     		str r1, [r0]
 357 0204 FAE7     		b ting
 358              	
 359              	
 360              	__jisuan_zhuansu:
 361              		@角度差0.01秒
 362 0206 0FB5     		push {r0-r3,lr}
 363 0208 7E48     		ldr r0, = jiaodu_cha
 364 020a 7F49     		ldr r1, = 18849555
 365 020c 0068     		ldr r0, [r0]
 366 020e 0000     		movs r0, r0
 367 0210 01D5     		bpl __suan_zhuansu
 368 0212 C043     		mvns r0, r0
 369 0214 0130     		adds r0, r0, # 1
 370              	__suan_zhuansu:	
 371 0216 7D4A     		ldr r2, = 113097335
 372 0218 00F051FA 		bl __chengfa
 373 021c 00F02BFA 		bl __chufa64
 374 0220 7B4A     		ldr r2, = zhuansu
 375 0222 1160     		str r1, [r2]
 376 0224 0FBD     		pop {r0-r3,pc}
 377              	
 378              	
 379              		
 380              	__xian_shi_jiao_du:
 381              		@入口R0=角度
 382 0226 1FB5     		push {r0-r4,lr}
 383 0228 0446     		mov r4, r0
ARM GAS  1.s 			page 8


 384 022a 8F20     		movs r0, # 0x8f
 385 022c 7949     		ldr r1, = jiaodufuhao
 386 022e 0122     		movs r2, # 1
 387 0230 00F0B6F9 		bl _lcdxianshi
 388              	
 389 0234 2400     		movs r4, r4
 390 0236 07D5     		bpl __jiaodu_bu_shi_zheng
 391 0238 8820     		movs r0, # 0x88
 392 023a 7749     		ldr r1, = _fu
 393 023c 0122     		movs r2, # 1
 394 023e 00F0AFF9 		bl _lcdxianshi
 395 0242 E443     		mvns r4, r4
 396 0244 0134     		adds r4, r4, # 1
 397 0246 04E0     		b __xian_shi_jiaodu
 398              	__jiaodu_bu_shi_zheng:
 399 0248 8820     		movs r0, # 0x88
 400 024a 7449     		ldr r1, = kong
 401 024c 0122     		movs r2, # 1
 402 024e 00F0A7F9 		bl _lcdxianshi
 403              	__xian_shi_jiaodu:
 404 0252 2046     		mov r0, r4
 405 0254 0621     		movs r1, # 6
 406 0256 484A     		ldr r2, = asciimabiao
 407 0258 0323     		movs r3, # 3
 408 025a 00F0E0F9 		bl _zhuanascii
 409 025e 8920     		movs r0, # 0x89
 410 0260 4549     		ldr r1, = asciimabiao
 411 0262 0622     		movs r2, # 6
 412 0264 00F09CF9 		bl _lcdxianshi
 413 0268 1FBD     		pop {r0-r4,pc}
 414              	
 415              	__xiang_wei_xuan_zhuan:
 416 026a FCB5     		push {r2-r7,lr}
 417              		@R0=R,R1=I
 418 026c 0346     		mov r3, r0
 419 026e 0846     		mov r0, r1
 420 0270 6B4C     		ldr r4, = cos_jiaozheng         @cos
 421 0272 6C4D     		ldr r5, = sin_jiaozheng         @sin
 422 0274 2468     		ldr r4, [r4]
 423 0276 2D68     		ldr r5, [r5]
 424 0278 2400     		movs r4, r4
 425 027a 03D5     		bpl __xuan_zhuan_xiang_wei
 426 027c 2646     		mov r6, r4
 427 027e 2F46     		mov r7, r5
 428 0280 3C46     		mov r4, r7
 429 0282 3546     		mov r5, r6
 430              	__xuan_zhuan_xiang_wei:
 431 0284 2646     		mov r6, r4
 432 0286 2F46     		mov r7, r5
 433 0288 5C43     		muls r4, r4, r3         @x*cos
 434 028a 4643     		muls r6, r6, r0         @y*cos
 435 028c 5D43     		muls r5, r5, r3         @x*sin
 436 028e 4743     		muls r7, r7, r0         @y*sin
 437 0290 E413     		asrs r4, r4, # 15
 438 0292 ED13     		asrs r5, r5, # 15
 439 0294 F613     		asrs r6, r6, # 15
 440 0296 FF13     		asrs r7, r7, # 15
ARM GAS  1.s 			page 9


 441              	
 442 0298 E41B     		subs r4, r4, r7         @x
 443 029a 7619     		adds r6, r6, r5         @y
 444 029c 3146     		mov r1, r6		@i
 445 029e 2046     		mov r0, r4		@r
 446 02a0 FCBD     		pop {r2-r7,pc}
 447              	__cordic_cos_sin:
 448              		@入口R0
 449              		@出口R0=COS，R1=SIN
 450              		@ x= 0x4dba
 451              		@ r1=x,r2=y,r0=z,r4=d,r5=k,r6=cordic_mabiao
 452              	
 453 02a2 FCB5     		push {r2-r7,lr}
 454 02a4 4246     		mov r2, r8
 455 02a6 4B46     		mov r3, r9
 456 02a8 0CB4     		push {r2-r3}
 457 02aa 0025     		movs r5, # 0
 458 02ac 2A46     		mov r2, r5
 459 02ae 2C46     		mov r4, r5
 460 02b0 5D49     		ldr r1, = 0x4dba
 461              	cordicxunhuan:		 @ 循环
 462 02b2 C413     		asrs r4, r0, # 15
 463              		@ x
 464 02b4 1746     		mov r7, r2
 465 02b6 2A41     		asrs r2, r2, r5
 466 02b8 6240     		eors r2, r2, r4
 467 02ba 121B     		subs r2, r2, r4
 468 02bc 8B1A     		subs r3, r1, r2
 469              		@ y
 470 02be 0E46     		mov r6, r1
 471 02c0 2941     		asrs r1, r1, r5
 472 02c2 6140     		eors r1, r1, r4
 473 02c4 091B     		subs r1, r1, r4
 474 02c6 7F18     		adds r7, r7, r1
 475              		@ z
 476 02c8 584E     		ldr r6, = cordic_yong_atan_biao
 477 02ca AA00     		lsls r2, r5, # 2
 478 02cc B158     		ldr r1, [r6, r2]
 479 02ce 6140     		eors r1, r1, r4
 480 02d0 091B     		subs r1, r1, r4
 481 02d2 401A     		subs r0, r0, r1
 482 02d4 1946     		mov r1, r3
 483 02d6 3A46     		mov r2, r7
 484 02d8 0135     		adds r5, # 1
 485 02da 102D     		cmp r5, # 16
 486 02dc E9D1     		bne cordicxunhuan
 487 02de 1846     		mov r0, r3
 488 02e0 3946     		mov r1, r7
 489 02e2 0CBC     		pop {r2-r3}
 490 02e4 9046     		mov r8, r2
 491 02e6 9946     		mov r9, r3
 492 02e8 FCBD     		pop {r2-r7,pc}
 493              	__atan2_ji_suan:
 494              		@入口R0=实部，R1=虚部，结果=R0
 495 02ea FCB5     		push {r2-r7,lr}
 496 02ec 4246     		mov r2, r8
 497 02ee 04B4     		push {r2}
ARM GAS  1.s 			page 10


 498 02f0 4F4B     		ldr r3, = cordic_yong_cos_sin
 499 02f2 0A22     		movs r2, # 10
 500 02f4 5043     		muls r0, r0, r2
 501 02f6 5143     		muls r1, r1, r2
 502 02f8 0022     		movs r2, # 0
 503 02fa 9046     		mov r8, r2
 504 02fc 4D4C     		ldr r4, = 9000
 505 02fe E403     		lsls r4, r4, # 15
 506              	__cordic_atan2_xun_huan:
 507              	__du_cos_sin:
 508 0300 1D68     		ldr r5, [r3]	@cos
 509 0302 0433     		adds r3, r3, # 4
 510 0304 2F46     		mov r7, r5
 511 0306 1E68     		ldr r6, [r3]	@sin
 512 0308 0433     		adds r3, r3, # 4
 513 030a 3246     		mov r2, r6
 514 030c 4543     		muls r5, r5, r0         @x*cos
 515 030e 4243     		muls r2, r2, r0         @x*sin
 516 0310 4E43     		muls r6, r6, r1         @y*sin
 517 0312 4F43     		muls r7, r7, r1         @y*cos
 518 0314 0900     		movs r1, r1
 519 0316 05D5     		bpl __ni_shi_zhen_zhuan
 520              	__shun_shi_zhen_zhuan:
 521 0318 AD1B     		subs r5, r5, r6
 522 031a BF18     		adds r7, r7, r2
 523 031c 4646     		mov r6, r8
 524 031e 3619     		adds r6, r6, r4
 525 0320 B046     		mov r8, r6
 526 0322 04E0     		b __xuan_zhuan_wan
 527              	__ni_shi_zhen_zhuan:
 528 0324 AD19     		adds r5, r5, r6
 529 0326 BF1A     		subs r7, r7, r2
 530 0328 4646     		mov r6, r8
 531 032a 361B     		subs r6, r6, r4
 532 032c B046     		mov r8, r6
 533              	__xuan_zhuan_wan:
 534 032e 404E     		ldr r6, = cordic_yong_cos_sin
 535 0330 2022     		movs r2, # 32
 536 0332 9200     		lsls r2, r2, # 2
 537 0334 B618     		adds r6, r6, r2
 538 0336 AD13     		asrs r5, r5, # 14
 539 0338 BF13     		asrs r7, r7, # 14
 540 033a 2846     		mov r0, r5
 541 033c 3946     		mov r1, r7
 542 033e 6408     		lsrs r4, r4, # 1	@旋转
 543 0340 B342     		cmp r3,	r6
 544 0342 DDD1     		bne __cordic_atan2_xun_huan
 545 0344 4046     		mov r0, r8
 546 0346 C043     		mvns r0, r0
 547 0348 0130     		adds r0, r0, # 1
 548 034a C013     		asrs r0, r0, # 15      @除32768等于角度
 549 034c 04BC     		pop {r2}
 550 034e 9046     		mov r8, r2
 551 0350 FCBD     		pop {r2-r7,pc}
 552 0352 00000020 		.ltorg
 552      02400010 
 552      02400100 
ARM GAS  1.s 			page 11


 552      01000200 
 552      15000000 
 553              	
 554              	
 555              		
 556              	__xiangwei_jiaozheng:
 557 0438 3FB5     		push {r0-r5,lr}
 558 043a 4448     		ldr r0, = jiaodu_jiaozheng
 559 043c 4449     		ldr r1, = 9000
 560 043e 0068     		ldr r0, [r0]
 561 0440 444A     		ldr r2, = 51471
 562 0442 0000     		movs r0, r0
 563 0444 02D5     		bpl __jiaozheng_jiaodu_bushi0
 564 0446 C043     		mvns r0, r0
 565 0448 0130     		adds r0, r0, # 1
 566 044a 0124     		movs r4, # 1
 567              	__jiaozheng_jiaodu_bushi0:
 568 044c 0024     		movs r4, # 0
 569 044e 424D     		ldr r5, = 10000
 570 0450 6843     		muls r0, r0, r5
 571 0452 00F0FDF8 		bl _chufa
 572 0456 5043     		muls r0, r0, r2
 573 0458 2946     		mov r1, r5
 574 045a 00F0F9F8 		bl _chufa
 575 045e 012C     		cmp r4, # 1
 576 0460 01D1     		bne __suan_cos_sin
 577 0462 C043     		mvns r0, r0
 578 0464 0130     		adds r0, r0, # 1
 579              	__suan_cos_sin:
 580 0466 FFF71CFF 		bl __cordic_cos_sin
 581 046a 3C4A     		ldr r2, = cos_jiaozheng
 582 046c 3C4B     		ldr r3, = sin_jiaozheng
 583 046e 1060     		str r0, [r2]
 584 0470 1960     		str r1, [r3]
 585 0472 3FBD     		pop {r0-r5,pc}
 586              	
 587              	
 588              	__chuan_gan_qi_lvbo:
 589 0474 FCB5     		push {r2-r7,lr}
 590 0476 3B48     		ldr r0, = 0x20000174 @sin_zheng
 591 0478 3B49     		ldr r1, = 0x2000023c @sin_fu
 592 047a 3C4B     		ldr r3, = 0x20000170 @cos_zheng
 593 047c 3C4A     		ldr r2, = 0x20000238 @cos_fu
 594 047e 0468     		ldr r4, [r0]
 595 0480 0D68     		ldr r5, [r1]
 596 0482 1668     		ldr r6, [r2]
 597 0484 1F68     		ldr r7, [r3]
 598 0486 3B4A     		ldr r2, = guoling
 599 0488 641B     		subs r4, r4, r5
 600 048a F61B     		subs r6, r6, r7
 601 048c 1368     		ldr r3, [r2]
 602 048e 2400     		movs r4, r4
 603 0490 02D5     		bpl __zheng
 604              	__fan:
 605 0492 0021     		movs r1, # 0
 606 0494 1160     		str r1, [r2]
 607 0496 01E0     		b __guo_ling_jian_ce
ARM GAS  1.s 			page 12


 608              	__zheng:
 609 0498 0121     		movs r1, # 1
 610 049a 1160     		str r1, [r2]
 611              	__guo_ling_jian_ce:
 612 049c 364A     		ldr r2, = jiaodu
 613 049e 2B48     		ldr r0, = jiaodu_jiaozheng
 614 04a0 1268     		ldr r2, [r2]
 615 04a2 C91A     		subs r1, r1, r3
 616 04a4 06D4     		bmi __zheng_90
 617 04a6 10D0     		beq __xiangwei
 618              	__fu_90:
 619 04a8 0FE0     		b __xiangwei
 620 04aa 1200     		movs r2, r2
 621 04ac 0DD5     		bpl __xiangwei
 622 04ae 3349     		ldr r1, = -9000
 623 04b0 891A     		subs r1, r1, r2
 624 04b2 07E0     		b __baocun_jiaozheng
 625              	__zheng_90:
 626 04b4 3600     		movs r6, r6
 627 04b6 08D4     		bmi __xiangwei
 628 04b8 2400     		movs r4, r4
 629 04ba 06D5     		bpl __xiangwei
 630 04bc 304F     		ldr r7, = guoling_jishu
 631 04be 3A60     		str r2, [r7]
 632 04c0 2349     		ldr r1, = 9000
 633 04c2 511A     		subs r1, r2, r1
 634              	__baocun_jiaozheng:
 635 04c4 0160     		str r1, [r0]
 636 04c6 FFF7B7FF 		bl __xiangwei_jiaozheng
 637              	__xiangwei:
 638              		
 639              	__lv_bo:
 640 04ca 3346     		mov r3, r6
 641 04cc 2D4A     		ldr r2, = lvboqizhizhen
 642 04ce 2E48     		ldr r0, =lvboqihuanchong
 643 04d0 2E49     		ldr r1, = 128
 644 04d2 00F012F8 		bl _lvboqi
 645 04d6 2346     		mov r3, r4
 646 04d8 0646     		mov r6, r0
 647 04da 2D4A     		ldr r2, = lvboqizhizhen1
 648 04dc 2D48     		ldr r0, = lvboqihuanchong1
 649 04de 2B49     		ldr r1, = 128
 650 04e0 00F00BF8 		bl _lvboqi
 651 04e4 3146     		mov r1, r6
 652 04e6 0446     		mov r4, r0
 653 04e8 FFF7BFFE 		bl __xiang_wei_xuan_zhuan
 654 04ec 2A4F     		ldr r7, = cos1
 655 04ee 2B4D     		ldr r5, = sin1
 656 04f0 3860     		str r0, [r7]
 657 04f2 2960     		str r1, [r5]
 658 04f4 3146     		mov r1, r6
 659 04f6 2046     		mov r0, r4
 660 04f8 FCBD     		pop {r2-r7,pc}
 661              	
 662              	
 663              	_lvboqi:
 664              		@滤波器
ARM GAS  1.s 			page 13


 665              		@R0=地址，R1=长度,r2=表指针地址,r3=ADC数值
 666              		@出R0=结果
 667 04fa FEB5     		push {r1-r7,lr}
 668 04fc 1568     		ldr r5, [r2]		@读出表指针
 669 04fe 8E00     		lsls r6, r1, # 2
 670 0500 4351     		str r3, [r0, r5]	@数值写到滤波器缓冲区
 671 0502 0435     		adds r5, r5, # 4
 672 0504 B542     		cmp r5, r6
 673 0506 00D1     		bne _lvboqimeidaohuanchongquding
 674 0508 0025     		movs r5, # 0
 675              	_lvboqimeidaohuanchongquding:
 676 050a 1560     		str r5, [r2]
 677 050c 0027     		movs r7, # 0
 678              	_lvboqixunhuan:
 679 050e B542     		cmp r5, r6
 680 0510 00D1     		bne _lvbozonghe
 681 0512 0025     		movs r5, # 0
 682              	_lvbozonghe:
 683 0514 4459     		ldr r4, [r0, r5]
 684 0516 0435     		adds r5, r5, # 4
 685 0518 3F19     		adds r7, r7, r4
 686 051a 0139     		subs r1, r1, # 1
 687 051c F7D1     		bne _lvboqixunhuan
 688 051e F811     		asrs r0, r7, # 7	@修改
 689 0520 FEBD     		pop {r1-r7,pc}
 690              	
 691              	_lvboqi1:
 692              		@滤波器
 693              		@R0=地址，R1=长度,r2=表指针地址,r3=ADC数值
 694              		@出R0=结果
 695 0522 FEB5     		push {r1-r7,lr}
 696 0524 1568     		ldr r5, [r2]            @读出表指针
 697 0526 4E00     		lsls r6, r1, # 1
 698 0528 4353     		strh r3, [r0, r5]        @数值写到滤波器缓冲区
 699 052a 0235     		adds r5, r5, # 2
 700 052c B542     		cmp r5, r6
 701 052e 00D1     		bne _lvboqimeidaohuanchongquding1
 702 0530 0025     		movs r5, # 0
 703              	_lvboqimeidaohuanchongquding1:
 704 0532 1560     		str r5, [r2]
 705 0534 0027     		movs r7, # 0
 706              	_lvboqixunhuan1:
 707 0536 B542     		cmp r5, r6
 708 0538 00D1     		bne _lvbozonghe1
 709 053a 0025     		movs r5, # 0
 710              	_lvbozonghe1:
 711 053c 445B     		ldrh r4, [r0, r5]
 712 053e 0235     		adds r5, r5, # 2
 713 0540 3F19     		adds r7, r7, r4
 714 0542 0139     		subs r1, r1, # 1
 715 0544 F7D1     		bne _lvboqixunhuan1
 716 0546 7812     		asrs r0, r7, # 9        @修改
 717 0548 FEBD     		pop {r1-r7,pc}
 718              		
 719 054a 0000E800 		.ltorg
 719      00202823 
 719      00000FC9 
ARM GAS  1.s 			page 14


 719      00001027 
 719      0000E000 
 720              	_lcdxianshi:	  		@r0=LCD位置，r1=数据地址，r2=长度
 721 05a0 1FB5     		push {r0-r4,lr}
 722 05a2 0C46     		mov r4, r1
 723 05a4 0021     		movs r1, # 0
 724 05a6 00F00EF8 		bl __spi_xielcd
 725 05aa 0121     		movs r1, # 1
 726 05ac 0023     		movs r3, # 0
 727              	_lcdxianshixunhuan:
 728 05ae E05C     		ldrb r0, [r4,r3]
 729 05b0 00F009F8 		bl __spi_xielcd
 730 05b4 0133     		adds r3, r3, # 1
 731 05b6 9342     		cmp r3, r2
 732 05b8 F9D1     		bne _lcdxianshixunhuan
 733 05ba 1FBD     		pop {r0-r4,pc}
 734              	
 735              	_lcdyanshi:
 736 05bc 20B5     		push {r5,lr}
 737 05be 824D     		ldr r5, = 0x1000
 738              	_lcdyanshixunhuan:
 739 05c0 013D     		subs r5, r5, # 1
 740 05c2 FDD1     		bne _lcdyanshixunhuan
 741 05c4 20BD     		pop {r5,pc}
 742              	
 743              	
 744              	
 745              	__spi_xielcd:
 746 05c6 1CB5     		push {r2-r4,lr}
 747 05c8 0246     		mov r2, r0
 748 05ca 1209     		lsrs r2, r2, # 4
 749 05cc 9200     		lsls r2, r2, # 2
 750 05ce 0007     		lsls r0, r0, # 28
 751 05d0 800E     		lsrs r0, r0, # 26
 752 05d2 C907     		lsls r1, r1, # 31
 753 05d4 01D5     		bpl __xie_mingling
 754              	__xie_shuju:
 755 05d6 0323     		movs r3, # 0x03
 756 05d8 00E0     		b __xie_74hc595
 757              	__xie_mingling:
 758 05da 0223     		movs r3, # 0x02
 759              	__xie_74hc595:
 760 05dc D218     		adds r2, r2, r3
 761 05de C018     		adds r0, r0, r3
 762 05e0 7A4B     		ldr r3, = 0x40013000
 763 05e2 00F016F8 		bl __spi_mang
 764 05e6 DA60     		str r2,  [r3, # 0x0c]
 765 05e8 FFF7E8FF 		bl _lcdyanshi
 766 05ec 00F011F8 		bl __spi_mang
 767 05f0 FD21     		movs r1, # 0xfd
 768 05f2 0A40     		ands r2, r2, r1
 769 05f4 DA60     		str r2, [r3, # 0x0c]
 770 05f6 FFF7E1FF 		bl _lcdyanshi
 771 05fa 00F00AF8 		bl __spi_mang
 772 05fe D860     		str r0, [r3, # 0x0c]
 773 0600 FFF7DCFF 		bl _lcdyanshi
 774 0604 00F005F8 		bl __spi_mang
ARM GAS  1.s 			page 15


 775 0608 0840     		ands r0, r0, r1
 776 060a D860     		str r0, [r3, # 0x0c]
 777 060c FFF7D6FF 		bl _lcdyanshi
 778 0610 1CBD     		pop {r2-r4,pc}
 779              	__spi_mang:
 780 0612 20B5     		push {r5,lr}
 781 0614 6E4D     		ldr r5, = 0x40013008
 782 0616 2D68     		ldr r5, [r5]
 783 0618 AD07     		lsls r5, r5, # 30
 784 061a FAD5     		bpl __spi_mang
 785 061c 20BD     		pop {r5,pc}
 786              		
 787              	_zhuanascii:					@ 16进制转ASCII
 788              			@ R0要转的数据， R1长度，R2结果表首地址, r3=小数点位置
 789 061e FFB5     		push {r0-r7,lr}
 790 0620 1F46     		mov r7, r3
 791 0622 0546     		mov r5, r0
 792 0624 0E46     		mov r6, r1
 793 0626 0A21     		movs r1, # 10
 794              	_xunhuanqiuma:
 795 0628 00F012F8 		bl _chufa
 796 062c 0446     		mov r4, r0
 797 062e 4C43     		muls r4, r1
 798 0630 2B1B     		subs r3, r5, r4
 799 0632 3033     		adds r3, r3, # 0x30
 800 0634 0546     		mov r5, r0
 801 0636 013E     		subs r6, r6, # 1
 802 0638 08D0     		beq _qiumafanhui
 803 063a BE42     		cmp r6, r7
 804 063c 02D1     		bne _meidaoxiaoshudian
 805 063e 2E24     		movs r4, # 0x2e		@小数点
 806 0640 9455     		strb r4, [r2,r6]	@插入小数点
 807 0642 013E     		subs r6, r6, # 1
 808              	_meidaoxiaoshudian:
 809 0644 9355     		strb r3, [r2,r6]
 810 0646 3600     		movs r6, r6
 811 0648 EED1     		bne _xunhuanqiuma
 812 064a FFBD     		pop {r0-r7,pc}
 813              	_qiumafanhui:
 814 064c 9355     		strb r3, [r2, r6]
 815 064e FFBD     		pop {r0-r7,pc}
 816              	
 817              	_chufa:				@软件除法
 818              		@ r0 除以 r1 等于 商(r0)
 819 0650 1EB5     		push {r1-r4,lr}
 820 0652 0028     		cmp r0, # 0
 821 0654 0ED0     		beq _chufafanhui
 822 0656 0029     		cmp r1, # 0
 823 0658 0CD0     		beq _chufafanhui
 824 065a 0246     		mov r2, r0
 825 065c 0123     		movs r3, # 1
 826 065e DB07     		lsls r3, r3, # 31
 827 0660 0020     		movs r0, # 0
 828 0662 0446     		mov r4, r0
 829              	_chufaxunhuan:
 830 0664 5200     		lsls r2, r2, # 1
 831 0666 6441     		adcs r4, r4, r4
ARM GAS  1.s 			page 16


 832 0668 8C42     		cmp r4, r1
 833 066a 01D3     		bcc _chufaweishubudao0
 834 066c C018     		adds r0, r0, r3
 835 066e 641A     		subs r4, r4, r1
 836              	_chufaweishubudao0:
 837 0670 5B08     		lsrs r3, r3, # 1
 838 0672 F7D1     		bne _chufaxunhuan
 839              	_chufafanhui:
 840 0674 1EBD     		pop {r1-r4,pc}
 841              	__chufa64:
 842              		@64位除32位
 843              		@ （R0=高32位R1=低32位）除（R2)= （R0高32）（R1低32）
 844 0676 F8B5     		push {r3-r7,lr}
 845 0678 002A     		cmp r2, # 0
 846 067a 1DD0     		beq __chu_fa64_fan_hui0
 847 067c 0029     		cmp r1, # 0
 848 067e 01D1     		bne __chu_fa64_ji_suan
 849 0680 0028     		cmp r0, # 0
 850 0682 19D0     		beq __chu_fa64_fan_hui0
 851              	__chu_fa64_ji_suan:
 852 0684 0024     		movs r4, # 0
 853 0686 2746     		mov r7, r4
 854 0688 2346     		mov r3, r4
 855 068a 2546     		mov r5, r4
 856 068c 0126     		movs r6, # 1
 857 068e F607     		lsls r6, r6, # 31
 858              	__chu_fa64_xun_huan:
 859 0690 4900     		lsls r1, r1, # 1
 860 0692 4041     		adcs r0, r0, r0
 861 0694 6441     		adcs r4, r4, r4
 862 0696 9442     		cmp r4, r2
 863 0698 02D3     		bcc __chu_fa_yi_wei
 864 069a 9B19     		adds r3, r3, r6
 865 069c 7D41     		adcs r5, r5, r7
 866 069e A41A     		subs r4, r4, r2
 867              	__chu_fa_yi_wei:
 868 06a0 3600     		movs r6, r6
 869 06a2 04D0     		beq __di_yi_wei
 870 06a4 7608     		lsrs r6, r6, # 1        @高32位移位
 871 06a6 F3D1     		bne __chu_fa64_xun_huan
 872 06a8 0127     		movs r7, # 1
 873 06aa FF07     		lsls r7, r7, # 31
 874 06ac F0E7     		b __chu_fa64_xun_huan
 875              	__di_yi_wei:	            @低32位移位
 876 06ae 7F08     		lsrs r7, r7, # 1
 877 06b0 EED1     		bne __chu_fa64_xun_huan
 878 06b2 1846     		mov r0, r3
 879 06b4 2946     		mov r1, r5
 880 06b6 F8BD     		pop {r3-r7,pc}
 881              	__chu_fa64_fan_hui0:
 882 06b8 0020     		movs r0, # 0
 883 06ba 0021     		movs r1, # 0
 884 06bc F8BD     		pop {r3-r7,pc}
 885              	__chengfa:
 886              		@入R0 乘以 R1
 887              		@出 R0高32 ， R1低32
 888              		@0xffffffff*0xffffffff
ARM GAS  1.s 			page 17


 889              		@4        F F F E 0 0 0 1			@4
 890              		@3                F F F E 0 0 0 1		@3
 891              		@2                F F F E 0 0 0 1		@2
 892              		@1                        F F F E 0 0 0 1	@1
 893              		@         F F F F F F F E 0 0 0 0 0 0 0 1
 894 06be FCB5     		push {r2-r7,lr}
 895 06c0 0028     		cmp r0, # 0
 896 06c2 1ED0     		beq __cheng_fa_fan_hui
 897 06c4 0029     		cmp r1, # 0
 898 06c6 1CD0     		beq __cheng_fa_fan_hui
 899              	__ji_suan_cheng_fa:
 900 06c8 0246     		mov r2, r0
 901 06ca 0B46     		mov r3, r1
 902 06cc 000C     		lsrs r0, r0, # 16	@高16
 903 06ce 1204     		lsls r2, r2, # 16	@ 低16
 904 06d0 120C     		lsrs r2, r2, # 16
 905 06d2 090C     		lsrs r1, r1, # 16	@高16
 906 06d4 1B04     		lsls r3, r3, # 16	@低16
 907 06d6 1B0C     		lsrs r3, r3, # 16
 908 06d8 1446     		mov r4, r2
 909 06da 0546     		mov r5, r0
 910 06dc 5A43     		muls r2, r2, r3		@1
 911 06de 5843     		muls r0, r0, r3		@2
 912 06e0 4C43     		muls r4, r4, r1		@3
 913 06e2 4D43     		muls r5, r5, r1		@4
 914 06e4 0646     		mov r6, r0
 915 06e6 2746     		mov r7, r4
 916 06e8 0004     		lsls r0, r0, # 16	@2低32
 917 06ea 2404     		lsls r4, r4, # 16	@3低32
 918 06ec 360C     		lsrs r6, r6, # 16	@2高32
 919 06ee 3F0C     		lsrs r7, r7, # 16	@3高32
 920 06f0 0021     		movs r1, # 0
 921 06f2 1218     		adds r2, r2, r0		@低32
 922 06f4 4E41     		adcs r6, r6, r1		@高32
 923 06f6 1219     		adds r2, r2, r4
 924 06f8 7E41     		adcs r6, r6, r7
 925 06fa 7619     		adds r6, r6, r5
 926 06fc 3046     		mov r0, r6
 927 06fe 1146     		mov r1, r2
 928 0700 FCBD     		pop {r2-r7,pc}
 929              	__cheng_fa_fan_hui:
 930 0702 0020     		movs r0, # 0
 931 0704 0021     		movs r1, # 0
 932 0706 FCBD     		pop {r2-r7,pc}
 933              	__dai_yu_shu_chufa:	                         @软件除法
 934              		@ r0 除以 r1 等于 商(r0)余R1
 935 0708 1CB5     		push {r2-r4,lr}
 936 070a 0028     		cmp r0, # 0
 937 070c 0ED0     		beq __dai_yu_shu_chufafanhui
 938 070e 0029     		cmp r1, # 0
 939 0710 0CD0     		beq __dai_yu_shu_chufafanhui
 940 0712 0246     		mov r2, r0
 941 0714 0123     		movs r3, # 1
 942 0716 DB07     		lsls r3, r3, # 31
 943 0718 0020     		movs r0, # 0
 944 071a 0446     		mov r4, r0
 945              	__dai_yu_shu_chufaxunhuan:
ARM GAS  1.s 			page 18


 946 071c 5200     		lsls r2, r2, # 1
 947 071e 6441     		adcs r4, r4, r4
 948 0720 8C42     		cmp r4, r1
 949 0722 01D3     		bcc __dai_yu_shu_chufaweishubudao0
 950 0724 C018     		adds r0, r0, r3
 951 0726 641A     		subs r4, r4, r1
 952              	__dai_yu_shu_chufaweishubudao0:
 953 0728 5B08     		lsrs r3, r3, # 1
 954 072a F7D1     		bne __dai_yu_shu_chufaxunhuan
 955              	__dai_yu_shu_chufafanhui:
 956 072c 1CBD     		        pop {r2-r4,pc}
 957              	_nmi_handler:
 958 072e 7047     		bx lr
 959              	_hard_fault:
 960 0730 7047     		bx lr
 961              	_svc_handler:
 962 0732 7047     		bx lr
 963              	_pendsv_handler:
 964 0734 7047     		bx lr
 965              	_systickzhongduan:
 966 0736 FFB5     		push {r0-r7,lr}
 967 0738 2648     		ldr r0, = 0xe0000d04
 968 073a 2749     		ldr r1, = 0x02000000
 969 073c 0160     		str r1, [r0]                 @ 清除SYSTICK中断
 970 073e FFF799FE 		bl __chuan_gan_qi_lvbo
 971 0742 264A     		ldr r2, = cos
 972 0744 264B     		ldr r3, = sin
 973 0746 1060     		str r0, [r2]		@r
 974 0748 1960     		str r1, [r3]		@i
 975 074a FFF7CEFD 		bl __atan2_ji_suan
 976 074e 254C     		ldr r4, = jiaodu
 977 0750 2060     		str r0, [r4]
 978              	
 979 0752 2548     		ldr r0, = cos1
 980 0754 2549     		ldr r1, = sin1
 981 0756 0068     		ldr r0, [r0]
 982 0758 0968     		ldr r1, [r1]
 983 075a FFF7C6FD 		bl __atan2_ji_suan
 984              		
 985              	@	b __systick_fanhui
 986 075e 06E0     		b __led_jiance1
 987              	
 988              		
 989 0760 0000     		movs r0, r0
 990 0762 03D5     		bpl __jiaodu_bushi_fu
 991 0764 2249     		ldr r1, = 36000
 992 0766 C043     		mvns r0, r0
 993 0768 0130     		adds r0, r0, # 1
 994 076a 081A     		subs r0, r1, r0
 995              	__jiaodu_bushi_fu:
 996 076c 2060     		str r0, [r4]
 997              	
 998              	
 999              	__led_jiance1:
 1000 076e 214B     		ldr r3, = 100
 1001 0770 214A     		ldr r2, = 0x48000000
 1002 0772 0121     		movs r1, # 1
ARM GAS  1.s 			page 19


 1003 0774 0A28     		cmp r0, # 10
 1004 0776 03D9     		bls __led_guan1
 1005 0778 9842     		cmp r0, r3
 1006 077a 01D8     		bhi __led_guan1
 1007 077c 9161     		str r1, [r2, # 0x18]
 1008 077e 00E0     		b __ji_shu
 1009              	__led_guan1:
 1010 0780 9162     		str r1, [r2, # 0x28]
 1011              		
 1012              	
 1013              	__ji_shu:
 1014              		
 1015 0782 1E4B     		ldr r3, = jishu
 1016 0784 1A68     		ldr r2, [r3]
 1017 0786 0132     		adds r2, r2, # 1
 1018 0788 1A60     		str r2, [r3]
 1019 078a 652A     		cmp r2, # 101
 1020 078c 14D1     		bne __budao_jiaodu
 1021 078e 0022     		movs r2, # 0
 1022 0790 1A60     		str r2, [r3]
 1023 0792 1B4A     		ldr r2, = 10000
 1024 0794 1B49     		ldr r1, = jiaodu_1
 1025 0796 1C4B     		ldr r3, = jiaodu_cha
 1026 0798 0968     		ldr r1, [r1]
 1027 079a 401A     		subs r0, r0, r1
 1028 079c 0000     		movs r0, r0
 1029 079e 01D5     		bpl __jiaodu_cha_bushi_fu
 1030 07a0 C043     		mvns r0, r0
 1031 07a2 0130     		adds r0, r0, # 1
 1032              	__jiaodu_cha_bushi_fu:
 1033 07a4 9042     		cmp r0, r2
 1034 07a6 06D8     		bhi __jiaodu_kua_360
 1035 07a8 0A28     		cmp r0, # 10
 1036 07aa 01D9     		bls __mei_zhuan 
 1037 07ac 1860     		str r0, [r3]
 1038 07ae 09E0     		b __systick_fanhui
 1039              	__mei_zhuan:
 1040 07b0 0020     		movs r0, # 0
 1041 07b2 1860     		str r0, [r3]
 1042 07b4 06E0     		b __systick_fanhui
 1043              	__jiaodu_kua_360:
 1044 07b6 05E0     		b __systick_fanhui
 1045              	__budao_jiaodu:
 1046 07b8 012A     		cmp r2, # 1
 1047 07ba 00D0     		beq __baocun_jiaodu1
 1048 07bc 02E0     		b __systick_fanhui
 1049              	__baocun_jiaodu1:
 1050 07be 114A     		ldr r2, = jiaodu_1
 1051 07c0 1060     		str r0, [r2]
 1052 07c2 FFE7     		b __systick_fanhui
 1053              	__systick_fanhui:	
 1054 07c4 FFBD     		pop {r0-r7,pc}
 1055              	aaa:
 1056 07c6 7047     		bx lr
 1057 07c8 00100000 		.ltorg
 1057      00300140 
 1057      08300140 
ARM GAS  1.s 			page 20


 1057      040D00E0 
 1057      00000002 
 1058              		.end
ARM GAS  1.s 			page 21


DEFINED SYMBOLS
                 1.s:9      .data:0000000000000000 yjmwxwx
                 1.s:11     .data:0000000000000010 kong
                 1.s:13     .data:0000000000000014 _fu
                 1.s:15     .data:0000000000000015 jiaodu1
                 1.s:17     .data:0000000000000019 jiaodufuhao
                 1.s:19     .data:000000000000001d $d
                 1.s:20     .data:0000000000000020 zheng_xian_biao
                 1.s:23     .data:00000000000000f0 cordic_yong_cos_sin
                 1.s:25     .data:0000000000000170 cordic_yong_atan_biao
                 1.s:28     *ABS*:0000000020001000 STACKINIT
                 1.s:29     *ABS*:0000000020000000 asciimabiao
                 1.s:30     *ABS*:00000000200000a8 guoling_jishu
                 1.s:31     *ABS*:00000000200000ac jiaodu2
                 1.s:32     *ABS*:00000000200000b0 zhuansu
                 1.s:33     *ABS*:00000000200000b4 jishu
                 1.s:34     *ABS*:00000000200000b8 cos
                 1.s:35     *ABS*:00000000200000bc sin
                 1.s:36     *ABS*:00000000200000c0 cos1
                 1.s:37     *ABS*:00000000200000c4 sin1
                 1.s:38     *ABS*:00000000200000c8 jiaodu_cha
                 1.s:39     *ABS*:00000000200000cc jiaodu_1
                 1.s:40     *ABS*:00000000200000e0 cos_jiaozheng
                 1.s:41     *ABS*:00000000200000e4 sin_jiaozheng
                 1.s:42     *ABS*:00000000200000e8 jiaodu_jiaozheng
                 1.s:43     *ABS*:00000000200000ec guoling
                 1.s:44     *ABS*:00000000200000f0 jiaodu
                 1.s:45     *ABS*:00000000200000f4 sin_zheng
                 1.s:46     *ABS*:00000000200000f8 sin_fu
                 1.s:47     *ABS*:00000000200000fc liangcheng
                 1.s:48     *ABS*:0000000020000100 dianyabiao
                 1.s:49     *ABS*:0000000020000300 lvboqizhizhen
                 1.s:50     *ABS*:0000000020000304 lvboqihuanchong
                 1.s:51     *ABS*:0000000020000900 lvboqizhizhen1
                 1.s:52     *ABS*:0000000020000904 lvboqihuanchong1
                 1.s:53     *ABS*:0000000020000a10 lvboqizhizhen2
                 1.s:54     *ABS*:0000000020000a14 lvboqihuanchong2
                 1.s:56     .text:0000000000000000 vectors
                 1.s:102    .text:00000000000000b0 _start
                 1.s:957    .text:000000000000072e _nmi_handler
                 1.s:959    .text:0000000000000730 _hard_fault
                 1.s:961    .text:0000000000000732 _svc_handler
                 1.s:963    .text:0000000000000734 _pendsv_handler
                 1.s:965    .text:0000000000000736 _systickzhongduan
                 1.s:1055   .text:00000000000007c6 aaa
                            .text:0000000000000000 $d
                 1.s:101    .text:00000000000000b0 $t
                 1.s:103    .text:00000000000000b0 shizhong
                 1.s:110    .text:00000000000000bc denghse
                 1.s:114    .text:00000000000000c2 dengpllguan
                 1.s:126    .text:00000000000000d6 dengpll
                 1.s:135    .text:00000000000000e0 _waisheshizhong
                 1.s:152    .text:00000000000000ee _neicunqingling
                 1.s:156    .text:00000000000000f4 _neicunqinglingxunhuan
                 1.s:161    .text:00000000000000fa _waishezhongduan
                 1.s:182    .text:0000000000000100 io_she_zhi
                 1.s:217    .text:0000000000000118 spi_chushihua
ARM GAS  1.s 			page 22


                 1.s:224    .text:0000000000000122 _lcdchushihua
                 1.s:745    .text:00000000000005c6 __spi_xielcd
                 1.s:735    .text:00000000000005bc _lcdyanshi
                 1.s:720    .text:00000000000005a0 _lcdxianshi
                 1.s:254    .text:000000000000016c _adcchushihua
                 1.s:258    .text:0000000000000172 _dengadcjiaozhun
                 1.s:264    .text:000000000000017c _kaiadc
                 1.s:269    .text:0000000000000184 _deng_adc_wen_ding
                 1.s:273    .text:000000000000018a _tongdaoxuanze
                 1.s:287    .text:00000000000001a2 dmachushihua
                 1.s:318    .text:00000000000001c6 _systick
                 1.s:325    .text:00000000000001d0 tim1chushiha
                 1.s:352    .text:00000000000001fc ting
                 1.s:360    .text:0000000000000206 __jisuan_zhuansu
                 1.s:370    .text:0000000000000216 __suan_zhuansu
                 1.s:885    .text:00000000000006be __chengfa
                 1.s:841    .text:0000000000000676 __chufa64
                 1.s:380    .text:0000000000000226 __xian_shi_jiao_du
                 1.s:398    .text:0000000000000248 __jiaodu_bu_shi_zheng
                 1.s:403    .text:0000000000000252 __xian_shi_jiaodu
                 1.s:787    .text:000000000000061e _zhuanascii
                 1.s:415    .text:000000000000026a __xiang_wei_xuan_zhuan
                 1.s:430    .text:0000000000000284 __xuan_zhuan_xiang_wei
                 1.s:447    .text:00000000000002a2 __cordic_cos_sin
                 1.s:461    .text:00000000000002b2 cordicxunhuan
                 1.s:493    .text:00000000000002ea __atan2_ji_suan
                 1.s:506    .text:0000000000000300 __cordic_atan2_xun_huan
                 1.s:507    .text:0000000000000300 __du_cos_sin
                 1.s:527    .text:0000000000000324 __ni_shi_zhen_zhuan
                 1.s:520    .text:0000000000000318 __shun_shi_zhen_zhuan
                 1.s:533    .text:000000000000032e __xuan_zhuan_wan
                 1.s:552    .text:0000000000000352 $d
                 1.s:552    .text:0000000000000354 $d
                 1.s:556    .text:0000000000000438 __xiangwei_jiaozheng
                 1.s:557    .text:0000000000000438 $t
                 1.s:567    .text:000000000000044c __jiaozheng_jiaodu_bushi0
                 1.s:817    .text:0000000000000650 _chufa
                 1.s:579    .text:0000000000000466 __suan_cos_sin
                 1.s:588    .text:0000000000000474 __chuan_gan_qi_lvbo
                 1.s:608    .text:0000000000000498 __zheng
                 1.s:604    .text:0000000000000492 __fan
                 1.s:611    .text:000000000000049c __guo_ling_jian_ce
                 1.s:625    .text:00000000000004b4 __zheng_90
                 1.s:637    .text:00000000000004ca __xiangwei
                 1.s:618    .text:00000000000004a8 __fu_90
                 1.s:634    .text:00000000000004c4 __baocun_jiaozheng
                 1.s:639    .text:00000000000004ca __lv_bo
                 1.s:663    .text:00000000000004fa _lvboqi
                 1.s:675    .text:000000000000050a _lvboqimeidaohuanchongquding
                 1.s:678    .text:000000000000050e _lvboqixunhuan
                 1.s:682    .text:0000000000000514 _lvbozonghe
                 1.s:691    .text:0000000000000522 _lvboqi1
                 1.s:703    .text:0000000000000532 _lvboqimeidaohuanchongquding1
                 1.s:706    .text:0000000000000536 _lvboqixunhuan1
                 1.s:710    .text:000000000000053c _lvbozonghe1
                 1.s:719    .text:000000000000054a $d
                 1.s:719    .text:000000000000054c $d
ARM GAS  1.s 			page 23


                 1.s:721    .text:00000000000005a0 $t
                 1.s:727    .text:00000000000005ae _lcdxianshixunhuan
                 1.s:738    .text:00000000000005c0 _lcdyanshixunhuan
                 1.s:757    .text:00000000000005da __xie_mingling
                 1.s:754    .text:00000000000005d6 __xie_shuju
                 1.s:759    .text:00000000000005dc __xie_74hc595
                 1.s:779    .text:0000000000000612 __spi_mang
                 1.s:794    .text:0000000000000628 _xunhuanqiuma
                 1.s:813    .text:000000000000064c _qiumafanhui
                 1.s:808    .text:0000000000000644 _meidaoxiaoshudian
                 1.s:839    .text:0000000000000674 _chufafanhui
                 1.s:829    .text:0000000000000664 _chufaxunhuan
                 1.s:836    .text:0000000000000670 _chufaweishubudao0
                 1.s:881    .text:00000000000006b8 __chu_fa64_fan_hui0
                 1.s:851    .text:0000000000000684 __chu_fa64_ji_suan
                 1.s:858    .text:0000000000000690 __chu_fa64_xun_huan
                 1.s:867    .text:00000000000006a0 __chu_fa_yi_wei
                 1.s:875    .text:00000000000006ae __di_yi_wei
                 1.s:929    .text:0000000000000702 __cheng_fa_fan_hui
                 1.s:899    .text:00000000000006c8 __ji_suan_cheng_fa
                 1.s:933    .text:0000000000000708 __dai_yu_shu_chufa
                 1.s:955    .text:000000000000072c __dai_yu_shu_chufafanhui
                 1.s:945    .text:000000000000071c __dai_yu_shu_chufaxunhuan
                 1.s:952    .text:0000000000000728 __dai_yu_shu_chufaweishubudao0
                 1.s:999    .text:000000000000076e __led_jiance1
                 1.s:995    .text:000000000000076c __jiaodu_bushi_fu
                 1.s:1009   .text:0000000000000780 __led_guan1
                 1.s:1013   .text:0000000000000782 __ji_shu
                 1.s:1045   .text:00000000000007b8 __budao_jiaodu
                 1.s:1032   .text:00000000000007a4 __jiaodu_cha_bushi_fu
                 1.s:1043   .text:00000000000007b6 __jiaodu_kua_360
                 1.s:1039   .text:00000000000007b0 __mei_zhuan
                 1.s:1053   .text:00000000000007c4 __systick_fanhui
                 1.s:1049   .text:00000000000007be __baocun_jiaodu1
                 1.s:1057   .text:00000000000007c8 $d

NO UNDEFINED SYMBOLS
