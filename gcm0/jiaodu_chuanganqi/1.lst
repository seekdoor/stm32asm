ARM GAS  1.s 			page 1


   1              		@@ 单片机stm32f030f4p6
   2              		@旋转变压器解码
   3              		@作者：yjmwxwx
   4              		@时间：2021-02-23
   5              		@编译器：ARM-NONE-EABI
   6              		.thumb
   7              		.syntax unified
   8              		.section .data
   9              	yjmwxwx:
  10 0000 796A6D77 		.ascii "yjmwxwx-20210223"
  10      7877782D 
  10      32303231 
  10      30323233 
  11              		.align 4
  12              	zheng_xian_biao:
  13 0010 1C001D00 		.short 28,29,31,33,34,36,38,39,41,42,44,45,46,48,49,50,51,52,52,53,54,54,55,55,55,55,55,55,55,54,5
  13      1F002100 
  13      22002400 
  13      26002700 
  13      29002A00 
  14 00da 00000000 		.align 4
  14      0000
  15              	fir_xi_shu:
  16 00e0 E5FFFFFF 		.int -27,154,-105,-507,941,592,-3407,2027,16715,16715,2027,-3407,592,941,-507,-105,154,-27
  16      9A000000 
  16      97FFFFFF 
  16      05FEFFFF 
  16      AD030000 
  17              	cordic_yong_cos_sin:
  18 0128 00000000 		.int 0x0000,0x4000,0x2D41,0x2D41,0x3B20,0x187D,0x3EC5,0x0C7C,0x3FB1,0x0645,0x3FEC,0x0323,0x3FFB,0x
  18      00400000 
  18      412D0000 
  18      412D0000 
  18      203B0000 
  19              	cordic_yong_atan_biao:
  20 01a8 87640000 		.int 0x00006487,0x00003B58,0x00001F5B,0x00000FEA,0x000007FD,0x000003FF,0x000001FF,0x000000FF,0x000
  20      583B0000 
  20      5B1F0000 
  20      EA0F0000 
  20      FD070000 
  21 01e8 00000000 		.align 4
  21      00000000 
  22              		.equ STACKINIT,        	        0x20001000
  23              		.equ shangci_buchang,		0x20000080
  24              		.equ shang_ci_i,		0x20000084
  25              		.equ zhengfan_zhuan,		0x20000088
  26              		.equ jiaodu_cha, 		0x2000008c
  27              		.equ shangci_jiaodu,		0x20000090
  28              		.equ shangci_jiaodu_cha,	0x20000094
  29              		.equ cos_cha,			0x20000098
  30              		.equ sin_cha,			0x2000009c
  31              		.equ jiaodu_a,			0x200000a0
  32              		.equ jiaodu_b,			0x200000a4
  33              		.equ zhuansu,			0x200000b0
  34              		.equ jishu,			0x200000b4
  35              		.equ cos,			0x200000b8
  36              		.equ sin,			0x200000bc
ARM GAS  1.s 			page 2


  37              		.equ cos_jiaozheng,		0x200000e0
  38              		.equ sin_jiaozheng,		0x200000e4
  39              		.equ jiaodu_jiaozheng,		0x200000e8
  40              		.equ jiaodu,			0x200000f0
  41              		.equ dianyabiao,		0x20000100
  42              		.equ lvboqizhizhen,		0x20000300
  43              		.equ lvboqihuanchong,		0x20000308
  44              		.equ lvboqizhizhen1,		0x20000510
  45              		.equ lvboqihuanchong1,		0x20000518
  46              		.equ lvboqizhizhen2,		0x20000900
  47              		.equ lvboqihuanchong2,		0x20000908
  48              		.equ lvboqizhizhen3,		0x20000b10
  49              		.equ lvboqihuanchong3,		0x20000b18
  50              		.section .text
  51              	vectors:
  52 0000 00100020 		.word STACKINIT
  53 0004 B1000000 		.word _start + 1
  54 0008 9B060000 		.word _nmi_handler + 1
  55 000c 9D060000 		.word _hard_fault  + 1
  56 0010 00000000 		.word 0
  57 0014 00000000 		.word 0
  58 0018 00000000 		.word 0
  59 001c 00000000 		.word 0
  60 0020 00000000 		.word 0
  61 0024 00000000 		.word 0
  62 0028 00000000 		.word 0
  63 002c 9F060000 		.word _svc_handler +1
  64 0030 00000000 		.word 0
  65 0034 00000000 		.word 0
  66 0038 A1060000 		.word _pendsv_handler +1
  67 003c A3060000 		.word _systickzhongduan +1           @ 15
  68 0040 9D070000 		.word aaa +1     @ _wwdg +1          @ 0
  69 0044 9D070000 		.word aaa +1     @_pvd +1            @ 1
  70 0048 9D070000 		.word aaa +1     @_rtc +1            @ 2
  71 004c 9D070000 		.word aaa +1     @_flash +1          @ 3
  72 0050 9D070000 		.word aaa +1	@ _rcc + 1           @ 4
  73 0054 9D070000 		.word aaa +1      @_exti0_1  +1      @ 5
  74 0058 9D070000 		.word aaa +1      @ _exti2_3 +1      @ 6
  75 005c 9D070000 		.word aaa +1       @_exti4_15 +1     @ 7
  76 0060 9D070000 		.word aaa +1                         @ 8
  77 0064 9D070000 		.word aaa +1	@__dma_wan  +1	     @ 9
  78 0068 9D070000 		.word aaa +1    @_dma1_2_3 +1        @ 10
  79 006c 9D070000 		.word aaa +1       @_dma1_4_5 +1     @ 11
  80 0070 9D070000 		.word aaa +1	 @_adc1 +1           @ 12
  81 0074 9D070000 		.word aaa +1       @_tim1_brk_up +1  @ 13
  82 0078 9D070000 		.word aaa +1        @ _tim1_cc +1    @ 14
  83 007c 9D070000 		.word aaa +1         @_tim2 +1       @ 15
  84 0080 9D070000 		.word aaa +1          @_tim3 +1      @ 16
  85 0084 9D070000 		.word aaa +1                         @ 17
  86 0088 9D070000 		.word aaa +1		             @ 18
  87 008c 9D070000 		.word aaa +1	@_tim14 +1           @ 19
  88 0090 9D070000 		.word aaa +1                         @ 20
  89 0094 9D070000 		.word aaa +1         @_tim16 +1      @ 21
  90 0098 9D070000 		.word aaa +1         @_tim17 +1      @ 22
  91 009c 9D070000 		.word aaa +1          @_i2c   +1     @ 23
  92 00a0 9D070000 		.word aaa +1                         @ 24
  93 00a4 9D070000 		.word aaa +1           @_spi   +1    @ 25
ARM GAS  1.s 			page 3


  94 00a8 9D070000 		.word aaa +1                         @ 26
  95 00ac 9D070000 		.word aaa +1         @_usart1 +1     @ 27
  96              		.align 2
  97              	_start:
  98              	shizhong:
  99 00b0 8B4A     	        ldr r2, = 0x40022000   @FLASH访问控制
 100 00b2 3221     	        movs r1, # 0x32
 101 00b4 1160     	        str r1, [r2]           @FLASH缓冲 缓冲开启
 102 00b6 8B48     	        ldr r0, = 0x40021000 @ rcc
 103 00b8 8B49     		ldr r1, = 0x10001
 104 00ba 0160     	        str r1, [r0]
 105              	denghse:
 106 00bc 0168     	        ldr r1, [r0]
 107 00be 8903     	        lsls r1, r1, # 14
 108 00c0 FCD5     	        bpl denghse
 109              	dengpllguan:
 110 00c2 0168     	        ldr r1, [r0]
 111 00c4 8901     		lsls r1, r1, # 6
 112 00c6 FCD4     		bmi dengpllguan
 113 00c8 8849     		ldr r1, = 0x150002	@0x150002
 114 00ca 0046     		mov r0, r0
 115 00cc 4160     		str r1, [r0, # 0x04]
 116 00ce 0046     		mov r0, r0
 117 00d0 8749     		ldr r1, = 0x1010000
 118 00d2 0046     		mov r0, r0
 119 00d4 0160     		str r1, [r0]
 120              	
 121              	dengpll:
 122 00d6 0168     	        ldr r1, [r0]
 123 00d8 8901     		lsls r1, # 6
 124 00da FCD5     		bpl dengpll
 125              	
 126              	
 127 00dc 8549     		ldr r1, = 100
 128 00de 0163     		str r1, [r0, # 0x30]
 129              		
 130              	_waisheshizhong:                         @ 外设时钟
 131              	        @+0x14=RCC_AHBENR
 132              		@ 0=DMA @ 2=SRAM @ 4=FLITF@ 6=CRC @ 17=PA @ 18=PB @ 19=PC @ 20=PD @ 22=PF
 133 00e0 8048     		ldr r0, = 0x40021000
 134 00e2 8549     		ldr r1, = 0x60001
 135 00e4 4161     	        str r1, [r0, # 0x14]
 136              	
 137              	        @+0x18外设时钟使能寄存器 (RCC_APB2ENR)
 138              	        @0=SYSCFG @5=USART6EN @9=ADC @11=TIM1 @12=SPI1 @14=USART1 @16=TIM15 @17=TIM16 @18=TIM17 @22
 139 00e6 8549     	        ldr r1, = 0x1a00
 140 00e8 8161     		str r1, [r0, # 0x18]
 141              		@+0X1C=RCC_APB1ENR
 142              		@ 1=TIM3 @ 4=TIM6 @ 5=TIM7 @ 8=TIM14 @ 11=WWDG @ 14=SPI @ 17=USRT2 @ 18=USART3 @ 20=USART5 @ 21=I2
 143              		@ 22=I2C2 @ 23=USB @ 28=PWR
 144 00ea 854A     	        ldr r2, = 0x902
 145 00ec C261     	        str r2, [r0, # 0x1c]
 146              	
 147              	_neicunqingling:
 148 00ee 8548     		ldr r0, = 0x20000000
 149 00f0 0021     		movs r1, # 0
 150 00f2 854B     		ldr r3, = 0x1000
ARM GAS  1.s 			page 4


 151              	_neicunqinglingxunhuan:
 152 00f4 043B     		subs r3, # 4
 153 00f6 C150     		str r1, [r0, r3]
 154 00f8 FCD1     		bne _neicunqinglingxunhuan
 155              	
 156              	_waishezhongduan:				@外设中断
 157              		@0xE000E100    0-31  写1开，写0没效
 158              		@0XE000E180    0-31 写1关，写0没效
 159              		@0XE000E200    0-31 挂起，写0没效
 160              		@0XE000E280    0-31 清除， 写0没效
 161 00fa 8448     		ldr r0, =  0xe000e100
 162 00fc 8449     		ldr r1, = 0x200 @0x10200  @ 0x10000
 163 00fe 0160     		str r1, [r0]
 164              	@_kanmengou:
 165              	@	ldr r0, = 0x40003000
 166              	@	ldr r1, = 0x5555
 167              	@	str r1, [r0]
 168              	@	movs r1, # 7
 169              	@	str r1, [r0, # 4]
 170              	@	ldr r1, = 0xfff
 171              	@	str r1, [r0, # 8]
 172              	@	ldr r1, = 0xaaaa
 173              	@	str r1, [r0]
 174              	@	ldr r1, = 0xcccc
 175              	@	str r1, [r0]
 176              		
 177              	io_she_zhi:
 178              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 179              		@a(0x48000000)b(0x48000400)c(0x48000800)d(0x48000c00)f(0x48001400)
 180              		@ 输入（00），通用输出（01），复用功能（10），模拟（11）
 181              		@偏移0x4 = 端口输出类型 @ （0 推挽），（ 1 开漏）
 182              		@偏移0x8 = 输出速度  00低速， 01中速， 11高速
 183              		@偏移0xC = 上拉下拉 (00无上下拉，  01 上拉， 10下拉)
 184              		@偏移0x10 = 输入数据寄存器
 185              		@偏移0x14 = 输出数据寄存器
 186              		@偏移0x18 = 端口开  0-15置位
 187              		@偏移0x28 = 端口关
 188              		@0X20 = 复用低
 189              		@GPIO口0（0-3位）每个IO口占用4位
 190              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 191              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 192              		@0x24 = 复用高
 193              		@GPIO口8 （0-3位）每个IO口占用4位
 194              		@ AF0 = 0X0000, AF1 = 0X0001, AF2 = 0X0010 AF3 = 0X0011, AF4 = 0X0100
 195              		@ AF5 = 0X0101, AF6 = 0X0111, AF7 = 0X1000
 196              		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 197              	
 198 0100 8448     		ldr r0, = 0x48000000
 199 0102 8549     		ldr r1, = 0x2820004f 
 200 0104 0160     		str r1, [r0]
 201 0106 8549     		ldr r1, = 0x0c30ff00
 202 0108 8160     		str r1, [r0, # 0x08]
 203 010a 8149     		ldr r1, = 0x200
 204 010c 4162     		str r1, [r0, # 0x24]
 205              			
 206 010e 8448     		ldr r0, = 0x48000400
 207 0110 0821     		movs r1, # 0x08 @ pb1
ARM GAS  1.s 			page 5


 208 0112 0160     		str r1, [r0]
 209 0114 2021     		movs r1, # 0x20
 210 0116 0162     		str r1, [r0, # 0x20]
 211              	
 212              	spi_chushihua:
 213 0118 8248     		ldr r0, = 0x40013000
 214 011a 8349     		ldr  r1, = 0x1708
 215 011c 4160     		str r1, [r0, # 0x04]
 216 011e 8349     		ldr r1, = 0xc07c
 217 0120 0160     		str r1, [r0]
 218              		
 219              		
 220              	_adcchushihua:
 221 0122 8348     		ldr r0, = 0x40012400  @ adc基地址
 222 0124 8349     		ldr r1, = 0x80000000
 223 0126 8160     		str r1, [r0, # 0x08]  @ ADC 控制寄存器 (ADC_CR)  @adc校准
 224              	_dengadcjiaozhun:
 225 0128 8168     		ldr r1, [r0, # 0x08]
 226 012a 0900     		movs r1, r1
 227 012c FCD4     		bmi _dengadcjiaozhun   @ 等ADC校准
 228 012e 0121     		movs r1, # 1
 229 0130 0160     		str r1, [r0]
 230              	_kaiadc:
 231 0132 8168     		ldr r1, [r0, # 0x08]
 232 0134 0122     		movs r2, # 0x01
 233 0136 1143     		orrs r1, r1, r2
 234 0138 8160     		str r1, [r0, # 0x08]
 235              	_deng_adc_wen_ding:
 236 013a 0168     		ldr r1, [r0]
 237 013c C907     		lsls r1, r1, # 31
 238 013e FCD5     		bpl _deng_adc_wen_ding @ 等ADC稳定
 239              	_tongdaoxuanze:
 240 0140 7D49     		ldr r1, = 0x40000000
 241 0142 0161     		str r1, [r0, # 0x10]
 242 0144 0321     		movs r1, # 0x03
 243 0146 8162     		str r1, [r0, # 0x28]    @ 通道选择寄存器 (ADC_CHSELR)
 244 0148 7C49     		ldr r1, = 0x803
 245 014a C160     		str r1, [r0, # 0x0c]    @ 配置寄存器 1 (ADC_CFGR1)
 246 014c 0021     		movs r1, # 0
 247 014e 4161     		str r1, [r0, # 0x14]    @ ADC 采样时间寄存器 (ADC_SMPR)
 248 0150 8168     		ldr r1, [r0, # 0x08]
 249 0152 7B4A     		ldr r2, = 0x04         @ 开始转换
 250 0154 1143     		orrs r1, r1, r2
 251 0156 8160     		str r1, [r0, # 0x08]    @ 控制寄存器 (ADC_CR)
 252              	
 253              	dmachushihua:
 254              		@+0=LSR,+4=IFCR,
 255              		@+8=CCR1,+c=CNDTR1,+10=CPAR1+14=CMAR1,
 256              		@+1c=CCR2,+20=CNDTR2,+24=CPAR2,+28=CMAR2
 257              		@+30=CCR3,+34=CNDTR3,+38=CPAR2,+3c=CMAR3
 258              		@+44=CCR4,+48=CNDTR4,+4c=CPAR4,+50=CMAR4
 259              		@+58=CCR5,+5c=CNDTR5,+60=CPAR5,+64=CMAR5
 260              		@+6C=CCR6,+70=CNDTR6,+74=CPAR6,+78=CMAR6
 261              		@+80=CCR7,+84=CNDTR7,+88=CPAR7,+8c=CMAR7
 262              	
 263              		@tim1ch3DMA
 264 0158 7A48     		ldr r0, = 0x40020000
ARM GAS  1.s 			page 6


 265 015a 7B49     		ldr r1, = 0x40012c3c @ 外设地址
 266 015c 0166     		str r1, [r0, # 0x60]
 267 015e 7B49     		ldr r1, = zheng_xian_biao @ 储存器地址
 268 0160 4166     		str r1, [r0, # 0x64]
 269 0162 6449     		ldr r1, = 100             @点数
 270 0164 C165     		str r1, [r0, # 0x5c]
 271 0166 7A49     		ldr r1, = 0x35b1         @ 储存到外设
 272 0168 8165     		str r1, [r0, # 0x58]
 273              		@ adc dma
 274 016a 7648     		ldr r0, = 0x40020000
 275 016c 7949     		ldr r1, = 0x40012440
 276 016e 0161     		str r1, [r0, # 0x10]
 277 0170 7949     		ldr r1, = dianyabiao
 278 0172 4161     		str r1, [r0, # 0x14]
 279 0174 5F49     		ldr r1, =  100
 280 0176 C160     		str r1, [r0, # 0x0c]
 281 0178 7849     		ldr r1, = 0xaa1		@ 5a1
 282 017a 8160     		str r1, [r0, # 0x08]
 283              	
 284              	_systick:	@ systick定时器初始化
 285              	
 286 017c 784F     		ldr r7, = 0xe000e010
 287 017e 794E     		ldr r6, = 5600
 288 0180 7E60     		str r6, [r7, # 4]
 289 0182 BE60     		str r6, [r7, # 8]
 290 0184 0726     		movs r6, # 0x07
 291              	tim1chushiha:
 292 0186 7848     		ldr r0, = 0x40012c00 @ tim1_cr1
 293 0188 0021     		movs r1, # 0
 294 018a 8162     		str r1, [r0, # 0x28] @ psc
 295 018c 7749     		ldr r1, = 56
 296 018e C162     		str r1, [r0, # 0x2c] @ ARR
 297 0190 2021     		movs r1, # 0x20
 298 0192 4160     		str r1, [r0, # 0x04] @ TRGO
 299 0194 3821     		movs r1, # 0x38
 300 0196 8161     		str r1, [r0, # 0x18] @ ccmr1 cc1
 301 0198 3821     		movs r1, # 56
 302 019a 4163     		str r1, [r0, # 0x34]
 303 019c 7449     		ldr r1, = 0x68
 304 019e C161     		str r1, [r0, # 0x1c] @ ccmr2  CC3
 305 01a0 7449     		ldr r1, = 0x500    @  CC3
 306 01a2 0162     		str r1, [r0, # 0x20] @ ccer
 307 01a4 7449     		ldr r1, = 0x8000
 308 01a6 4164     		str r1, [r0, # 0x44] @ BDTR
 309 01a8 7449     		ldr r1, = 0x800 @ CC3 DMA
 310 01aa C160     		str r1, [r0, # 0x0c] @ DIER
 311 01ac 7449     		ldr r1, = 0x81
 312 01ae 0160     		str r1, [r0]
 313 01b0 3E60     		str r6, [r7]	@systick 开
 314              		
 315              	
 316              		
 317              	ting:
 318 01b2 7448     	        ldr r0, = 0x200001ac @sin_zheng
 319 01b4 7449     		ldr r1, = 0x20000274 @sin_fu
 320 01b6 754B     		ldr r3, = 0x200001a8 @cos_zheng
 321 01b8 754A     		ldr r2, = 0x20000270 @cos_fu
ARM GAS  1.s 			page 7


 322 01ba 0468     		ldr r4, [r0]
 323 01bc 0D68     		ldr r5, [r1]
 324 01be 1668     		ldr r6, [r2]
 325 01c0 1F68     		ldr r7, [r3]
 326 01c2 641B     		subs r4, r4, r5
 327 01c4 F61B     		subs r6, r6, r7
 328              			
 329 01c6 F4E7     		b ting
 330              	
 331              	__jisuan_zhuansu:
 332              		@角度差0.01秒
 333 01c8 0FB5     		push {r0-r3,lr}
 334 01ca 7248     		ldr r0, = jiaodu_cha
 335 01cc 7249     		ldr r1, = 18849555
 336 01ce 0068     		ldr r0, [r0]
 337 01d0 0000     		movs r0, r0
 338 01d2 01D5     		bpl __suan_zhuansu
 339 01d4 C043     		mvns r0, r0
 340 01d6 0130     		adds r0, r0, # 1
 341              	__suan_zhuansu:	
 342 01d8 704A     		ldr r2, = 113097335
 343 01da 00F026FA 		bl __chengfa
 344 01de 00F000FA 		bl __chufa64
 345 01e2 6F4A     		ldr r2, = zhuansu
 346 01e4 1160     		str r1, [r2]
 347 01e6 0FBD     		pop {r0-r3,pc}
 348              		
 349              	__xiang_wei_xuan_zhuan:
 350 01e8 FCB5     		push {r2-r7,lr}
 351              		@R0=R,R1=I
 352 01ea 0346     		mov r3, r0
 353 01ec 0846     		mov r0, r1
 354 01ee 6D4C     		ldr r4, = cos_jiaozheng         @cos
 355 01f0 6D4D     		ldr r5, = sin_jiaozheng         @sin
 356 01f2 2468     		ldr r4, [r4]
 357 01f4 2D68     		ldr r5, [r5]
 358 01f6 002C     		cmp r4, # 0
 359 01f8 04D1     		bne __xuanzhuan_fangxiang_jiance
 360 01fa 002D     		cmp r5, # 0
 361 01fc 02D1     		bne __xuanzhuan_fangxiang_jiance
 362 01fe 0146     		mov r1, r0
 363 0200 1846     		mov r0, r3
 364 0202 FCBD     		pop {r2-r7,pc}
 365              	__xuanzhuan_fangxiang_jiance:	
 366 0204 2400     		movs r4, r4
 367 0206 03D5     		bpl __xuan_zhuan_xiang_wei
 368 0208 2646     		mov r6, r4
 369 020a 2F46     		mov r7, r5
 370 020c 3C46     		mov r4, r7
 371 020e 3546     		mov r5, r6
 372              	__xuan_zhuan_xiang_wei:
 373 0210 2646     		mov r6, r4
 374 0212 2F46     		mov r7, r5
 375 0214 5C43     		muls r4, r4, r3         @x*cos
 376 0216 4643     		muls r6, r6, r0         @y*cos
 377 0218 5D43     		muls r5, r5, r3         @x*sin
 378 021a 4743     		muls r7, r7, r0         @y*sin
ARM GAS  1.s 			page 8


 379 021c E413     		asrs r4, r4, # 15
 380 021e ED13     		asrs r5, r5, # 15
 381 0220 F613     		asrs r6, r6, # 15
 382 0222 FF13     		asrs r7, r7, # 15
 383              	
 384 0224 E41B     		subs r4, r4, r7         @x
 385 0226 7619     		adds r6, r6, r5         @y
 386 0228 3146     		mov r1, r6		@i
 387 022a 2046     		mov r0, r4		@r
 388 022c FCBD     		pop {r2-r7,pc}
 389              	__cordic_cos_sin:
 390              		@入口R0
 391              		@出口R0=COS，R1=SIN
 392              		@ x= 0x4dba
 393              		@ r1=x,r2=y,r0=z,r4=d,r5=k,r6=cordic_mabiao
 394              	
 395 022e FCB5     		push {r2-r7,lr}
 396 0230 4246     		mov r2, r8
 397 0232 4B46     		mov r3, r9
 398 0234 0CB4     		push {r2-r3}
 399 0236 0025     		movs r5, # 0
 400 0238 2A46     		mov r2, r5
 401 023a 2C46     		mov r4, r5
 402 023c 5B49     		ldr r1, = 0x4dba
 403              	cordicxunhuan:		 @ 循环
 404 023e C413     		asrs r4, r0, # 15
 405              		@ x
 406 0240 1746     		mov r7, r2
 407 0242 2A41     		asrs r2, r2, r5
 408 0244 6240     		eors r2, r2, r4
 409 0246 121B     		subs r2, r2, r4
 410 0248 8B1A     		subs r3, r1, r2
 411              		@ y
 412 024a 0E46     		mov r6, r1
 413 024c 2941     		asrs r1, r1, r5
 414 024e 6140     		eors r1, r1, r4
 415 0250 091B     		subs r1, r1, r4
 416 0252 7F18     		adds r7, r7, r1
 417              		@ z
 418 0254 564E     		ldr r6, = cordic_yong_atan_biao
 419 0256 AA00     		lsls r2, r5, # 2
 420 0258 B158     		ldr r1, [r6, r2]
 421 025a 6140     		eors r1, r1, r4
 422 025c 091B     		subs r1, r1, r4
 423 025e 401A     		subs r0, r0, r1
 424 0260 1946     		mov r1, r3
 425 0262 3A46     		mov r2, r7
 426 0264 0135     		adds r5, # 1
 427 0266 102D     		cmp r5, # 16
 428 0268 E9D1     		bne cordicxunhuan
 429 026a 1846     		mov r0, r3
 430 026c 3946     		mov r1, r7
 431 026e 0CBC     		pop {r2-r3}
 432 0270 9046     		mov r8, r2
 433 0272 9946     		mov r9, r3
 434 0274 FCBD     		pop {r2-r7,pc}
 435              	__atan2_ji_suan:
ARM GAS  1.s 			page 9


 436              		@入口R0=实部，R1=虚部，结果=R0
 437 0276 FCB5     		push {r2-r7,lr}
 438 0278 4246     		mov r2, r8
 439 027a 04B4     		push {r2}
 440 027c 4D4B     		ldr r3, = cordic_yong_cos_sin
 441 027e 0A22     		movs r2, # 10
 442 0280 5043     		muls r0, r0, r2
 443 0282 5143     		muls r1, r1, r2
 444 0284 0022     		movs r2, # 0
 445 0286 9046     		mov r8, r2
 446 0288 4B4C     		ldr r4, = 9000
 447 028a E403     		lsls r4, r4, # 15
 448              	__cordic_atan2_xun_huan:
 449              	__du_cos_sin:
 450 028c 1D68     		ldr r5, [r3]	@cos
 451 028e 0433     		adds r3, r3, # 4
 452 0290 2F46     		mov r7, r5
 453 0292 1E68     		ldr r6, [r3]	@sin
 454 0294 0433     		adds r3, r3, # 4
 455 0296 3246     		mov r2, r6
 456 0298 4543     		muls r5, r5, r0         @x*cos
 457 029a 4243     		muls r2, r2, r0         @x*sin
 458 029c 4E43     		muls r6, r6, r1         @y*sin
 459 029e 4F43     		muls r7, r7, r1         @y*cos
 460 02a0 0900     		movs r1, r1
 461 02a2 05D5     		bpl __ni_shi_zhen_zhuan
 462              	__shun_shi_zhen_zhuan:
 463 02a4 AD1B     		subs r5, r5, r6
 464 02a6 BF18     		adds r7, r7, r2
 465 02a8 4646     		mov r6, r8
 466 02aa 3619     		adds r6, r6, r4
 467 02ac B046     		mov r8, r6
 468 02ae 04E0     		b __xuan_zhuan_wan
 469              	__ni_shi_zhen_zhuan:
 470 02b0 AD19     		adds r5, r5, r6
 471 02b2 BF1A     		subs r7, r7, r2
 472 02b4 4646     		mov r6, r8
 473 02b6 361B     		subs r6, r6, r4
 474 02b8 B046     		mov r8, r6
 475              	__xuan_zhuan_wan:
 476 02ba 3E4E     		ldr r6, = cordic_yong_cos_sin
 477 02bc 2022     		movs r2, # 32
 478 02be 9200     		lsls r2, r2, # 2
 479 02c0 B618     		adds r6, r6, r2
 480 02c2 AD13     		asrs r5, r5, # 14
 481 02c4 BF13     		asrs r7, r7, # 14
 482 02c6 2846     		mov r0, r5
 483 02c8 3946     		mov r1, r7
 484 02ca 6408     		lsrs r4, r4, # 1	@旋转
 485 02cc B342     		cmp r3,	r6
 486 02ce DDD1     		bne __cordic_atan2_xun_huan
 487 02d0 4046     		mov r0, r8
 488 02d2 C043     		mvns r0, r0
 489 02d4 0130     		adds r0, r0, # 1
 490 02d6 C013     		asrs r0, r0, # 15      @除32768等于角度
 491 02d8 04BC     		pop {r2}
 492 02da 9046     		mov r8, r2
ARM GAS  1.s 			page 10


 493 02dc FCBD     		pop {r2-r7,pc}
 494 02de 00000020 		.ltorg
 494      02400010 
 494      02400100 
 494      01000200 
 494      15000000 
 495              	
 496              	
 497              		
 498              	__xiangwei_jiaozheng:
 499 03bc 3FB5     		push {r0-r5,lr}
 500 03be 2648     		ldr r0, = jiaodu_jiaozheng
 501 03c0 2649     		ldr r1, = 9000
 502 03c2 0068     		ldr r0, [r0]
 503 03c4 264A     		ldr r2, = 51471
 504 03c6 0000     		movs r0, r0
 505 03c8 03D5     		bpl __jiaozheng_jiaodu_bushi0
 506 03ca C043     		mvns r0, r0
 507 03cc 0130     		adds r0, r0, # 1
 508 03ce 0124     		movs r4, # 1
 509 03d0 00E0     		b __ji_suan_jiaozheng_jiaodu
 510              	__jiaozheng_jiaodu_bushi0:
 511 03d2 0024     		movs r4, # 0
 512              	__ji_suan_jiaozheng_jiaodu:	
 513 03d4 234D     		ldr r5, = 10000
 514 03d6 6843     		muls r0, r0, r5
 515 03d8 00F0F0F8 		bl _chufa
 516 03dc 5043     		muls r0, r0, r2
 517 03de 2946     		mov r1, r5
 518 03e0 00F0ECF8 		bl _chufa
 519 03e4 012C     		cmp r4, # 1
 520 03e6 01D1     		bne __suan_cos_sin
 521 03e8 C043     		mvns r0, r0
 522 03ea 0130     		adds r0, r0, # 1
 523              	__suan_cos_sin:
 524 03ec FFF71FFF 		bl __cordic_cos_sin	
 525 03f0 1D4A     		ldr r2, = cos_jiaozheng
 526 03f2 1E4B     		ldr r3, = sin_jiaozheng
 527 03f4 1060     		str r0, [r2]
 528 03f6 1960     		str r1, [r3]
 529 03f8 3FBD     		pop {r0-r5,pc}
 530              	
 531              	
 532              	__chuan_gan_qi_lvbo:
 533              		@50*4偏移
 534 03fa FCB5     		push {r2-r7,lr}
 535 03fc 4446     		mov r4, r8
 536 03fe 4D46     		mov r5, r9
 537 0400 30B4     		push {r4-r5}
 538 0402 1B48     		ldr r0, = 0x200001ac @sin_zheng
 539 0404 1B49     		ldr r1, = 0x20000274 @sin_fu
 540 0406 1C4A     		ldr r2, = 0x200001a8 @cos_zheng
 541 0408 1C4B     		ldr r3, = 0x20000270 @cos_fu
 542 040a 0468     		ldr r4, [r0]
 543 040c 0D68     		ldr r5, [r1]
 544 040e 1668     		ldr r6, [r2]
 545 0410 1F68     		ldr r7, [r3]
ARM GAS  1.s 			page 11


 546 0412 641B     		subs r4, r4, r5
 547 0414 F61B     		subs r6, r6, r7
 548 0416 B046     		mov r8, r6
 549 0418 A146     		mov r9, r4
 550 041a FFF7CFFF 		bl __xiangwei_jiaozheng
 551 041e 3046     		mov r0, r6
 552 0420 2146     		mov r1, r4
 553 0422 FFF7E1FE 		bl __xiang_wei_xuan_zhuan
 554 0426 0646     		mov r6, r0
 555 0428 0C46     		mov r4, r1
 556 042a 2146     		mov r1, r4
 557 042c 144A     		ldr r2, = lvboqizhizhen
 558 042e 1548     		ldr r0, =lvboqihuanchong
 559 0430 00F0ADF8 		bl __lv_bo_qi
 560 0434 3146     		mov r1, r6
 561 0436 0446     		mov r4, r0
 562 0438 134A     		ldr r2, = lvboqizhizhen1
 563 043a 1448     		ldr r0, = lvboqihuanchong1
 564 043c 00F0A7F8 		bl __lv_bo_qi
 565 0440 2146     		mov r1, r4
 566 0442 134A     		ldr r2, = cos_cha
 567 0444 134B     		ldr r3, = sin_cha
 568 0446 4446     		mov r4, r8
 569 0448 4D46     		mov r5, r9
 570 044a 1460     		str r4, [r2]
 571 044c 1D60     		str r5, [r3]
 572 044e 30BC     		pop {r4-r5}
 573 0450 A046     		mov r8, r4
 574 0452 A946     		mov r9, r5
 575 0454 FCBD     		pop {r2-r7,pc}
 576 0456 0000E800 		.ltorg	
 576      00202823 
 576      00000FC9 
 576      00001027 
 576      0000E000 
 577              	__fir_lvbo:
 578              		@入口R0滤波指针，R1=滤波器缓冲区，R2=数据
 579 0498 F8B5     		push {r3-r7,lr}
 580 049a 4346     		mov r3, r8
 581 049c 4C46     		mov r4, r9
 582 049e 5546     		mov r5, r10
 583 04a0 5E46     		mov r6, r11
 584 04a2 6746     		mov r7, r12
 585 04a4 F8B4     		push {r3-r7}
 586 04a6 EC46     		mov r12, sp
 587 04a8 1227     	        movs r7, # 18
 588 04aa 0546     		mov r5, r0
 589 04ac 2868     		ldr r0, [r5]
 590 04ae 0346     		mov r3, r0
 591 04b0 9B00     		lsls r3, r3, # 2
 592 04b2 CA50     		str r2, [r1, r3]
 593 04b4 0130     		adds r0, r0, # 1
 594 04b6 2860     		str r0, [r5]
 595 04b8 B842     		cmp r0, r7
 596 04ba 01D1     		bne __huanchong_leijia1
 597 04bc 0020     		movs r0, # 0
 598 04be 2860     		str r0, [r5]
ARM GAS  1.s 			page 12


 599              	__huanchong_leijia1:	
 600 04c0 3D4B     		ldr r3, = fir_xi_shu
 601 04c2 8D46     		mov sp, r1
 602 04c4 9A46     		mov r10, r3
 603              	
 604              		@0-3
 605 04c6 0FBC     		pop {r0-r3}
 606 04c8 EB46     		mov r11, sp
 607 04ca D546     		mov sp, r10
 608 04cc F0BC     		pop {r4-r7}
 609 04ce EA46     		mov r10, sp
 610 04d0 6043     		muls r0, r0, r4
 611 04d2 6943     		muls r1, r1, r5
 612 04d4 7243     		muls r2, r2, r6
 613 04d6 7B43     		muls r3, r3, r7
 614 04d8 C013     		asrs r0, r0, # 15
 615 04da C913     		asrs r1, r1, # 15
 616 04dc D213     		asrs r2, r2, # 15
 617 04de DB13     		asrs r3, r3, # 15
 618 04e0 4018     		adds r0, r0, r1
 619 04e2 8018     		adds r0, r0, r2
 620 04e4 C018     		adds r0, r0, r3
 621 04e6 8046     		mov r8, r0
 622              		@4-7
 623 04e8 DD46     		mov sp, r11
 624 04ea 0FBC     	        pop {r0-r3}
 625 04ec EB46     		mov r11, sp
 626 04ee D546     		mov sp, r10
 627 04f0 F0BC     		pop {r4-r7}
 628 04f2 EA46     		mov r10, sp
 629 04f4 6043     		muls r0, r0, r4
 630 04f6 6943     		muls r1, r1, r5
 631 04f8 7243     		muls r2, r2, r6
 632 04fa 7B43     		muls r3, r3, r7
 633 04fc C013     		asrs r0, r0, # 15
 634 04fe C913     		asrs r1, r1, # 15
 635 0500 D213     		asrs r2, r2, # 15
 636 0502 DB13     		asrs r3, r3, # 15
 637 0504 4018     		adds r0, r0, r1
 638 0506 8018     		adds r0, r0, r2
 639 0508 C018     		adds r0, r0, r3
 640 050a 8146     		mov r9, r0
 641              		@8-11
 642 050c DD46     	        mov sp, r11
 643 050e 0FBC     		pop {r0-r3}
 644 0510 EB46     		mov r11, sp
 645 0512 D546     		mov sp, r10
 646 0514 F0BC     		pop {r4-r7}
 647 0516 EA46     		mov r10, sp
 648 0518 6043     		muls r0, r0, r4
 649 051a 6943     		muls r1, r1, r5
 650 051c 7243     		muls r2, r2, r6
 651 051e 7B43     		muls r3, r3, r7
 652 0520 C013     		asrs r0, r0, # 15
 653 0522 C913     		asrs r1, r1, # 15
 654 0524 D213     		asrs r2, r2, # 15
 655 0526 DB13     		asrs r3, r3, # 15
ARM GAS  1.s 			page 13


 656 0528 4018     		adds r0, r0, r1
 657 052a 8018     		adds r0, r0, r2
 658 052c C018     		adds r0, r0, r3
 659 052e 4146     		mov r1, r8
 660 0530 4A46     		mov r2, r9
 661 0532 E546     		mov sp, r12
 662 0534 07B4     		push {r0-r2}
 663 0536 EC46     		mov r12, sp
 664              		@12-15
 665 0538 DD46     	        mov sp, r11
 666 053a 0FBC     		pop {r0-r3}
 667 053c EB46     		mov r11, sp
 668 053e D546     		mov sp, r10
 669 0540 F0BC     		pop {r4-r7}
 670 0542 EA46     		mov r10, sp
 671 0544 6043     		muls r0, r0, r4
 672 0546 6943     		muls r1, r1, r5
 673 0548 7243     		muls r2, r2, r6
 674 054a 7B43     		muls r3, r3, r7
 675 054c C013     		asrs r0, r0, # 15
 676 054e C913     		asrs r1, r1, # 15
 677 0550 D213     		asrs r2, r2, # 15
 678 0552 DB13     		asrs r3, r3, # 15
 679 0554 4018     		adds r0, r0, r1
 680 0556 8018     		adds r0, r0, r2
 681 0558 C018     		adds r0, r0, r3
 682 055a 8146     		mov r9, r0
 683              		@16-23
 684 055c DD46     	        mov sp, r11
 685 055e 03BC     		pop {r0-r1}
 686 0560 EB46     		mov r11, sp
 687 0562 D546     		mov sp, r10
 688 0564 30BC     		pop {r4-r5}
 689 0566 EA46     		mov r10, sp
 690 0568 6043     		muls r0, r0, r4
 691 056a 6943     		muls r1, r1, r5
 692 056c C013     		asrs r0, r0, # 15
 693 056e C913     		asrs r1, r1, # 15
 694 0570 4018     		adds r0, r0, r1
 695 0572 4946     		mov r1, r9
 696 0574 E546     		mov sp, r12
 697 0576 1CBC     		pop {r2-r4}
 698 0578 4018     		adds r0, r0, r1
 699 057a 8018     		adds r0, r0, r2
 700 057c C018     		adds r0, r0, r3
 701 057e 0019     		adds r0, r0, r4
 702              	
 703 0580 F8BC     		pop {r3-r7}
 704 0582 9846     		mov r8, r3
 705 0584 A146     		mov r9, r4
 706 0586 AA46     		mov r10, r5
 707 0588 B346     		mov r11, r6
 708 058a BC46     		mov r12, r7
 709 058c F8BD     		pop {r3-r7,pc}
 710              	
 711              		
 712              			
ARM GAS  1.s 			page 14


 713              	__lv_bo_qi:
 714              		@地址顺序：指针，累加值，缓冲区
 715              		@入口R0=缓冲区，R1=数据, r2,=指针
 716              		@出口R0
 717 058e 78B5     		push {r3-r6,lr}
 718 0590 8024     		movs r4, # 128
 719 0592 1568     		ldr r5, [r2]
 720 0594 2B46     		mov r3, r5
 721 0596 AB00     		lsls r3, r5, # 2
 722 0598 C658     		ldr r6, [r0, r3]
 723 059a C150     		str r1, [r0, r3]
 724 059c 0135     		adds r5, r5, # 1
 725 059e 1560     		str r5, [r2]
 726 05a0 A542     		cmp r5, r4
 727 05a2 01D1     		bne __huanchong_leijia
 728 05a4 0025     		movs r5, # 0
 729 05a6 1560     		str r5, [r2]
 730              	__huanchong_leijia:
 731 05a8 0438     		subs r0, r0, # 4
 732 05aa 0568     		ldr r5, [r0]
 733 05ac 4919     		adds r1, r1, r5
 734 05ae 891B     		subs r1, r1, r6
 735 05b0 0160     		str r1, [r0]
 736 05b2 C811     		asrs r0, r1, # 7	@128
 737 05b4 78BD     		pop {r3-r6,pc}
 738 05b6 0000E000 		.ltorg
 738      0000
 739              		
 740              	
 741              	
 742              	
 743              	
 744              	
 745              	
 746              	
 747              	
 748              	
 749              	
 750              	
 751              		
 752              	
 753              	_chufa:				@软件除法
 754              		@ r0 除以 r1 等于 商(r0)
 755 05bc 1EB5     		push {r1-r4,lr}
 756 05be 0028     		cmp r0, # 0
 757 05c0 0ED0     		beq _chufafanhui
 758 05c2 0029     		cmp r1, # 0
 759 05c4 0CD0     		beq _chufafanhui
 760 05c6 0246     		mov r2, r0
 761 05c8 0123     		movs r3, # 1
 762 05ca DB07     		lsls r3, r3, # 31
 763 05cc 0020     		movs r0, # 0
 764 05ce 0446     		mov r4, r0
 765              	_chufaxunhuan:
 766 05d0 5200     		lsls r2, r2, # 1
 767 05d2 6441     		adcs r4, r4, r4
 768 05d4 8C42     		cmp r4, r1
ARM GAS  1.s 			page 15


 769 05d6 01D3     		bcc _chufaweishubudao0
 770 05d8 C018     		adds r0, r0, r3
 771 05da 641A     		subs r4, r4, r1
 772              	_chufaweishubudao0:
 773 05dc 5B08     		lsrs r3, r3, # 1
 774 05de F7D1     		bne _chufaxunhuan
 775              	_chufafanhui:
 776 05e0 1EBD     		pop {r1-r4,pc}
 777              	__chufa64:
 778              		@64位除32位
 779              		@ （R0=高32位R1=低32位）除（R2)= （R0高32）（R1低32）
 780 05e2 F8B5     		push {r3-r7,lr}
 781 05e4 002A     		cmp r2, # 0
 782 05e6 1DD0     		beq __chu_fa64_fan_hui0
 783 05e8 0029     		cmp r1, # 0
 784 05ea 01D1     		bne __chu_fa64_ji_suan
 785 05ec 0028     		cmp r0, # 0
 786 05ee 19D0     		beq __chu_fa64_fan_hui0
 787              	__chu_fa64_ji_suan:
 788 05f0 0024     		movs r4, # 0
 789 05f2 2746     		mov r7, r4
 790 05f4 2346     		mov r3, r4
 791 05f6 2546     		mov r5, r4
 792 05f8 0126     		movs r6, # 1
 793 05fa F607     		lsls r6, r6, # 31
 794              	__chu_fa64_xun_huan:
 795 05fc 4900     		lsls r1, r1, # 1
 796 05fe 4041     		adcs r0, r0, r0
 797 0600 6441     		adcs r4, r4, r4
 798 0602 9442     		cmp r4, r2
 799 0604 02D3     		bcc __chu_fa_yi_wei
 800 0606 9B19     		adds r3, r3, r6
 801 0608 7D41     		adcs r5, r5, r7
 802 060a A41A     		subs r4, r4, r2
 803              	__chu_fa_yi_wei:
 804 060c 3600     		movs r6, r6
 805 060e 04D0     		beq __di_yi_wei
 806 0610 7608     		lsrs r6, r6, # 1        @高32位移位
 807 0612 F3D1     		bne __chu_fa64_xun_huan
 808 0614 0127     		movs r7, # 1
 809 0616 FF07     		lsls r7, r7, # 31
 810 0618 F0E7     		b __chu_fa64_xun_huan
 811              	__di_yi_wei:	            @低32位移位
 812 061a 7F08     		lsrs r7, r7, # 1
 813 061c EED1     		bne __chu_fa64_xun_huan
 814 061e 1846     		mov r0, r3
 815 0620 2946     		mov r1, r5
 816 0622 F8BD     		pop {r3-r7,pc}
 817              	__chu_fa64_fan_hui0:
 818 0624 0020     		movs r0, # 0
 819 0626 0021     		movs r1, # 0
 820 0628 F8BD     		pop {r3-r7,pc}
 821              	__chengfa:
 822              		@入R0 乘以 R1
 823              		@出 R0高32 ， R1低32
 824              		@0xffffffff*0xffffffff
 825              		@4        F F F E 0 0 0 1			@4
ARM GAS  1.s 			page 16


 826              		@3                F F F E 0 0 0 1		@3
 827              		@2                F F F E 0 0 0 1		@2
 828              		@1                        F F F E 0 0 0 1	@1
 829              		@         F F F F F F F E 0 0 0 0 0 0 0 1
 830 062a FCB5     		push {r2-r7,lr}
 831 062c 0028     		cmp r0, # 0
 832 062e 1ED0     		beq __cheng_fa_fan_hui
 833 0630 0029     		cmp r1, # 0
 834 0632 1CD0     		beq __cheng_fa_fan_hui
 835              	__ji_suan_cheng_fa:
 836 0634 0246     		mov r2, r0
 837 0636 0B46     		mov r3, r1
 838 0638 000C     		lsrs r0, r0, # 16	@高16
 839 063a 1204     		lsls r2, r2, # 16	@ 低16
 840 063c 120C     		lsrs r2, r2, # 16
 841 063e 090C     		lsrs r1, r1, # 16	@高16
 842 0640 1B04     		lsls r3, r3, # 16	@低16
 843 0642 1B0C     		lsrs r3, r3, # 16
 844 0644 1446     		mov r4, r2
 845 0646 0546     		mov r5, r0
 846 0648 5A43     		muls r2, r2, r3		@1
 847 064a 5843     		muls r0, r0, r3		@2
 848 064c 4C43     		muls r4, r4, r1		@3
 849 064e 4D43     		muls r5, r5, r1		@4
 850 0650 0646     		mov r6, r0
 851 0652 2746     		mov r7, r4
 852 0654 0004     		lsls r0, r0, # 16	@2低32
 853 0656 2404     		lsls r4, r4, # 16	@3低32
 854 0658 360C     		lsrs r6, r6, # 16	@2高32
 855 065a 3F0C     		lsrs r7, r7, # 16	@3高32
 856 065c 0021     		movs r1, # 0
 857 065e 1218     		adds r2, r2, r0		@低32
 858 0660 4E41     		adcs r6, r6, r1		@高32
 859 0662 1219     		adds r2, r2, r4
 860 0664 7E41     		adcs r6, r6, r7
 861 0666 7619     		adds r6, r6, r5
 862 0668 3046     		mov r0, r6
 863 066a 1146     		mov r1, r2
 864 066c FCBD     		pop {r2-r7,pc}
 865              	__cheng_fa_fan_hui:
 866 066e 0020     		movs r0, # 0
 867 0670 0021     		movs r1, # 0
 868 0672 FCBD     		pop {r2-r7,pc}
 869              	__dai_yu_shu_chufa:	                         @软件除法
 870              		@ r0 除以 r1 等于 商(r0)余R1
 871 0674 1CB5     		push {r2-r4,lr}
 872 0676 0028     		cmp r0, # 0
 873 0678 0ED0     		beq __dai_yu_shu_chufafanhui
 874 067a 0029     		cmp r1, # 0
 875 067c 0CD0     		beq __dai_yu_shu_chufafanhui
 876 067e 0246     		mov r2, r0
 877 0680 0123     		movs r3, # 1
 878 0682 DB07     		lsls r3, r3, # 31
 879 0684 0020     		movs r0, # 0
 880 0686 0446     		mov r4, r0
 881              	__dai_yu_shu_chufaxunhuan:
 882 0688 5200     		lsls r2, r2, # 1
ARM GAS  1.s 			page 17


 883 068a 6441     		adcs r4, r4, r4
 884 068c 8C42     		cmp r4, r1
 885 068e 01D3     		bcc __dai_yu_shu_chufaweishubudao0
 886 0690 C018     		adds r0, r0, r3
 887 0692 641A     		subs r4, r4, r1
 888              	__dai_yu_shu_chufaweishubudao0:
 889 0694 5B08     		lsrs r3, r3, # 1
 890 0696 F7D1     		bne __dai_yu_shu_chufaxunhuan
 891              	__dai_yu_shu_chufafanhui:
 892 0698 1CBD     		        pop {r2-r4,pc}
 893              	_nmi_handler:
 894 069a 7047     		bx lr
 895              	_hard_fault:
 896 069c 7047     		bx lr
 897              	_svc_handler:
 898 069e 7047     		bx lr
 899              	_pendsv_handler:
 900 06a0 7047     		bx lr
 901              	_systickzhongduan:
 902 06a2 F0B5     		push {r4-r7,lr}
 903 06a4 4346     		mov r3, r8
 904 06a6 4C46     		mov r4, r9
 905 06a8 5546     		mov r5, r10
 906 06aa 5E46     		mov r6, r11
 907 06ac 6746     		mov r7, r12
 908 06ae F8B4     		push {r3-r7}
 909 06b0 3B48     		ldr r0, = 0xe0000d04
 910 06b2 3C49     		ldr r1, = 0x02000000
 911 06b4 0160     		str r1, [r0]                 @ 清除SYSTICK中断
 912 06b6 FFF7A0FE 		bl __chuan_gan_qi_lvbo
 913 06ba 3B4A     		ldr r2, = cos
 914 06bc 3B4B     		ldr r3, = sin
 915 06be 1060     		str r0, [r2]		@r
 916 06c0 1960     		str r1, [r3]		@i
 917              		
 918 06c2 FFF7D8FD 		bl __atan2_ji_suan
 919 06c6 3A4C     		ldr r4, = jiaodu
 920 06c8 3A4D     		ldr r5, = jiaodu_a
 921              	@        movs r0, r0
 922              	@	bpl __jiaodu_bushi_fu
 923              	@	ldr r1, = 36000
 924              	@	mvns r0, r0
 925              	@	adds r0, r0, # 1
 926              	@	subs r0, r1, r0
 927              	@__jiaodu_bushi_fu:
 928 06ca 2060     		str r0, [r4]
 929 06cc 2860     		str r0, [r5]
 930 06ce 8046     		mov r8, r0
 931              		
 932 06d0 3948     		ldr r0, = cos_cha
 933 06d2 3A49     		ldr r1, = sin_cha
 934 06d4 0068     		ldr r0, [r0]
 935 06d6 0968     		ldr r1, [r1]
 936 06d8 FFF7CDFD 		bl __atan2_ji_suan
 937              	@        movs r0, r0
 938              	@	bpl __jiaodu_bushi_fu1
 939              	@	ldr r1, = 36000
ARM GAS  1.s 			page 18


 940              	@	mvns r0, r0
 941              	@	adds r0, r0, # 1
 942              	@	subs r0, r1, r0
 943              	@__jiaodu_bushi_fu1:
 944 06dc 3849     		ldr r1, = jiaodu_b
 945 06de 0860     		str r0, [r1]
 946              	
 947              	
 948              		
 949 06e0 0746     		mov r7, r0
 950 06e2 4046     		mov r0, r8
 951 06e4 B846     		mov r8, r7
 952              		
 953              	__led_jiance1:
 954 06e6 374B     		ldr r3, = 100
 955 06e8 374A     		ldr r2, = 0x48000000
 956 06ea 0821     		movs r1, # 0x08
 957 06ec 0A28     		cmp r0, # 10
 958 06ee 08D9     		bls __led_guan1
 959 06f0 9842     		cmp r0, r3
 960 06f2 06D8     		bhi __led_guan1
 961 06f4 9161     		str r1, [r2, # 0x18]
 962 06f6 354A     		ldr r2, = 0x200000c0
 963 06f8 354B     		ldr r3, = 0x200000c4
 964 06fa 1060     		str r0, [r2]
 965 06fc 4146     		mov r1, r8
 966 06fe 1960     		str r1, [r3]
 967 0700 00E0     		b __jiaodu_buchang_jisuan
 968              	__led_guan1:
 969 0702 9162     		str r1, [r2, # 0x28]
 970              		
 971              	
 972              	__jiaodu_buchang_jisuan:
 973              		
 974 0704 334F     		ldr r7, = 18000
 975 0706 4546     		mov r5, r8
 976 0708 0646     		mov r6, r0
 977 070a 761B     		subs r6, r6, r5
 978 070c F643     		mvns r6, r6
 979 070e 0136     		adds r6, r6, # 1
 980 0710 314B     		ldr r3, = 0x200000d0
 981 0712 324C     		ldr r4, = 0x200000d4
 982 0714 3500     		movs r5, r6
 983 0716 02D5     		bpl __bao_cun_jiaodu_cha
 984 0718 ED43     		mvns r5, r5
 985 071a 0135     		adds r5, r5, # 1
 986 071c FFE7     		b __bao_cun_jiaodu_cha
 987              	__bao_cun_jiaodu_cha:
 988 071e BD42     		cmp r5, r7
 989 0720 11D8     		bhi __systick_fanhui
 990 0722 1860     		str r0, [r3]
 991 0724 2560     		str r5, [r4]
 992 0726 2E4B     		ldr r3, = 0x200000c8
 993 0728 1E60     		str r6, [r3]
 994              	__pid:
 995 072a 3746     		mov r7, r6
 996 072c 3446     		mov r4, r6
ARM GAS  1.s 			page 19


 997              	__pid_bi_li:
 998 072e 2D4B     		ldr r3, = 32768         @ KP
 999 0730 5F43     		muls r7, r7, r3
 1000 0732 FF13     		asrs r7, r7, # 15
 1001              	__pid_ji_fen:
 1002 0734 2C4E     		ldr r6, = shang_ci_i
 1003 0736 2D4A     		ldr r2, = 20		@ KI
 1004 0738 3368     		ldr r3, [r6]
 1005 073a 5443     		muls r4, r4, r2
 1006 073c E413     		asrs r4, r4, # 15
 1007 073e E418     		adds r4, r4, r3
 1008 0740 3460     		str r4, [r6]
 1009              	@	adds r7, r7, r4
 1010              	__zhengzhuan_buchang:
 1011 0742 2B4D     		ldr r5, = jiaodu_jiaozheng
 1012 0744 2F60     		str r7, [r5]
 1013              	
 1014              	__systick_fanhui:
 1015              	
 1016              	__jiaodu_cha_jisuan:
 1017 0746 2B4B     		ldr r3, = shangci_jiaodu
 1018 0748 224F     		ldr r7, = 18000
 1019 074a 1C68     		ldr r4, [r3]
 1020 074c 8146     		mov r9, r0
 1021 074e 0646     		mov r6, r0
 1022 0750 361B     		subs r6, r6, r4
 1023 0752 3200     		movs r2, r6
 1024 0754 01D5     		bpl __baocun_jiaodu_cha
 1025 0756 D243     		mvns r2, r2
 1026 0758 0132     		adds r2, r2, # 1
 1027              	__baocun_jiaodu_cha:
 1028 075a BA42     		cmp r2, r7
 1029 075c 14D8     		bhi __tick_fanhui
 1030 075e 2648     		ldr r0, = lvboqihuanchong3
 1031 0760 264A     		ldr r2, = lvboqizhizhen3
 1032 0762 3146     		mov r1, r6
 1033 0764 FFF713FF 		bl __lv_bo_qi
 1034 0768 254B     		ldr r3, = jiaodu_cha
 1035 076a 1860     		str r0, [r3]
 1036 076c 0000     		movs r0, r0
 1037 076e 00D5     		bpl __jiance_zhuangtai
 1038 0770 0124     		movs r4, # 1
 1039              	__jiance_zhuangtai:
 1040 0772 0028     		cmp r0, # 0
 1041 0774 01D1     		bne __zai_zhuan
 1042 0776 0021     		movs r1, # 0
 1043 0778 04E0     		b __baocun_zhengfan_zhuan
 1044              	__zai_zhuan:
 1045 077a 012C     		cmp r4, # 1
 1046 077c 01D1     		bne __fan_zhuan
 1047 077e C321     		movs r1, # 0xc3
 1048 0780 00E0     		b __baocun_zhengfan_zhuan
 1049              	__fan_zhuan:
 1050 0782 3C21     		movs r1, # 0x3c
 1051              	__baocun_zhengfan_zhuan:	
 1052 0784 1F4B     		ldr r3, = zhengfan_zhuan
 1053 0786 1960     		str r1, [r3]
ARM GAS  1.s 			page 20


 1054              	__tick_fanhui:
 1055 0788 1A4B     	        ldr r3, = shangci_jiaodu
 1056 078a 4846     		mov r0, r9
 1057 078c 1860     		str r0, [r3]
 1058              		
 1059 078e F8BC     		pop {r3-r7}
 1060 0790 9846     		mov r8, r3
 1061 0792 A146     		mov r9, r4
 1062 0794 AA46     		mov r10, r5
 1063 0796 B346     		mov r11, r6
 1064 0798 BC46     		mov r12, r7
 1065 079a F0BD     		pop {r4-r7,pc}
 1066              	aaa:
 1067 079c 7047     		bx lr
 1068 079e 0000040D 		.ltorg
 1068      00E00000 
 1068      0002B800 
 1068      0020BC00 
 1068      0020F000 
 1069              		.end
ARM GAS  1.s 			page 21


DEFINED SYMBOLS
                 1.s:9      .data:0000000000000000 yjmwxwx
                 1.s:11     .data:0000000000000010 $d
                 1.s:12     .data:0000000000000010 zheng_xian_biao
                 1.s:15     .data:00000000000000e0 fir_xi_shu
                 1.s:17     .data:0000000000000128 cordic_yong_cos_sin
                 1.s:19     .data:00000000000001a8 cordic_yong_atan_biao
                 1.s:22     *ABS*:0000000020001000 STACKINIT
                 1.s:23     *ABS*:0000000020000080 shangci_buchang
                 1.s:24     *ABS*:0000000020000084 shang_ci_i
                 1.s:25     *ABS*:0000000020000088 zhengfan_zhuan
                 1.s:26     *ABS*:000000002000008c jiaodu_cha
                 1.s:27     *ABS*:0000000020000090 shangci_jiaodu
                 1.s:28     *ABS*:0000000020000094 shangci_jiaodu_cha
                 1.s:29     *ABS*:0000000020000098 cos_cha
                 1.s:30     *ABS*:000000002000009c sin_cha
                 1.s:31     *ABS*:00000000200000a0 jiaodu_a
                 1.s:32     *ABS*:00000000200000a4 jiaodu_b
                 1.s:33     *ABS*:00000000200000b0 zhuansu
                 1.s:34     *ABS*:00000000200000b4 jishu
                 1.s:35     *ABS*:00000000200000b8 cos
                 1.s:36     *ABS*:00000000200000bc sin
                 1.s:37     *ABS*:00000000200000e0 cos_jiaozheng
                 1.s:38     *ABS*:00000000200000e4 sin_jiaozheng
                 1.s:39     *ABS*:00000000200000e8 jiaodu_jiaozheng
                 1.s:40     *ABS*:00000000200000f0 jiaodu
                 1.s:41     *ABS*:0000000020000100 dianyabiao
                 1.s:42     *ABS*:0000000020000300 lvboqizhizhen
                 1.s:43     *ABS*:0000000020000308 lvboqihuanchong
                 1.s:44     *ABS*:0000000020000510 lvboqizhizhen1
                 1.s:45     *ABS*:0000000020000518 lvboqihuanchong1
                 1.s:46     *ABS*:0000000020000900 lvboqizhizhen2
                 1.s:47     *ABS*:0000000020000908 lvboqihuanchong2
                 1.s:48     *ABS*:0000000020000b10 lvboqizhizhen3
                 1.s:49     *ABS*:0000000020000b18 lvboqihuanchong3
                 1.s:51     .text:0000000000000000 vectors
                 1.s:97     .text:00000000000000b0 _start
                 1.s:893    .text:000000000000069a _nmi_handler
                 1.s:895    .text:000000000000069c _hard_fault
                 1.s:897    .text:000000000000069e _svc_handler
                 1.s:899    .text:00000000000006a0 _pendsv_handler
                 1.s:901    .text:00000000000006a2 _systickzhongduan
                 1.s:1066   .text:000000000000079c aaa
                            .text:0000000000000000 $d
                 1.s:96     .text:00000000000000b0 $t
                 1.s:98     .text:00000000000000b0 shizhong
                 1.s:105    .text:00000000000000bc denghse
                 1.s:109    .text:00000000000000c2 dengpllguan
                 1.s:121    .text:00000000000000d6 dengpll
                 1.s:130    .text:00000000000000e0 _waisheshizhong
                 1.s:147    .text:00000000000000ee _neicunqingling
                 1.s:151    .text:00000000000000f4 _neicunqinglingxunhuan
                 1.s:156    .text:00000000000000fa _waishezhongduan
                 1.s:177    .text:0000000000000100 io_she_zhi
                 1.s:212    .text:0000000000000118 spi_chushihua
                 1.s:220    .text:0000000000000122 _adcchushihua
                 1.s:224    .text:0000000000000128 _dengadcjiaozhun
ARM GAS  1.s 			page 22


                 1.s:230    .text:0000000000000132 _kaiadc
                 1.s:235    .text:000000000000013a _deng_adc_wen_ding
                 1.s:239    .text:0000000000000140 _tongdaoxuanze
                 1.s:253    .text:0000000000000158 dmachushihua
                 1.s:284    .text:000000000000017c _systick
                 1.s:291    .text:0000000000000186 tim1chushiha
                 1.s:317    .text:00000000000001b2 ting
                 1.s:331    .text:00000000000001c8 __jisuan_zhuansu
                 1.s:341    .text:00000000000001d8 __suan_zhuansu
                 1.s:821    .text:000000000000062a __chengfa
                 1.s:777    .text:00000000000005e2 __chufa64
                 1.s:349    .text:00000000000001e8 __xiang_wei_xuan_zhuan
                 1.s:365    .text:0000000000000204 __xuanzhuan_fangxiang_jiance
                 1.s:372    .text:0000000000000210 __xuan_zhuan_xiang_wei
                 1.s:389    .text:000000000000022e __cordic_cos_sin
                 1.s:403    .text:000000000000023e cordicxunhuan
                 1.s:435    .text:0000000000000276 __atan2_ji_suan
                 1.s:448    .text:000000000000028c __cordic_atan2_xun_huan
                 1.s:449    .text:000000000000028c __du_cos_sin
                 1.s:469    .text:00000000000002b0 __ni_shi_zhen_zhuan
                 1.s:462    .text:00000000000002a4 __shun_shi_zhen_zhuan
                 1.s:475    .text:00000000000002ba __xuan_zhuan_wan
                 1.s:494    .text:00000000000002de $d
                 1.s:494    .text:00000000000002e0 $d
                 1.s:498    .text:00000000000003bc __xiangwei_jiaozheng
                 1.s:499    .text:00000000000003bc $t
                 1.s:510    .text:00000000000003d2 __jiaozheng_jiaodu_bushi0
                 1.s:512    .text:00000000000003d4 __ji_suan_jiaozheng_jiaodu
                 1.s:753    .text:00000000000005bc _chufa
                 1.s:523    .text:00000000000003ec __suan_cos_sin
                 1.s:532    .text:00000000000003fa __chuan_gan_qi_lvbo
                 1.s:713    .text:000000000000058e __lv_bo_qi
                 1.s:576    .text:0000000000000456 $d
                 1.s:576    .text:0000000000000458 $d
                 1.s:577    .text:0000000000000498 __fir_lvbo
                 1.s:579    .text:0000000000000498 $t
                 1.s:599    .text:00000000000004c0 __huanchong_leijia1
                 1.s:730    .text:00000000000005a8 __huanchong_leijia
                 1.s:738    .text:00000000000005b6 $d
                 1.s:738    .text:00000000000005b8 $d
                 1.s:755    .text:00000000000005bc $t
                 1.s:775    .text:00000000000005e0 _chufafanhui
                 1.s:765    .text:00000000000005d0 _chufaxunhuan
                 1.s:772    .text:00000000000005dc _chufaweishubudao0
                 1.s:817    .text:0000000000000624 __chu_fa64_fan_hui0
                 1.s:787    .text:00000000000005f0 __chu_fa64_ji_suan
                 1.s:794    .text:00000000000005fc __chu_fa64_xun_huan
                 1.s:803    .text:000000000000060c __chu_fa_yi_wei
                 1.s:811    .text:000000000000061a __di_yi_wei
                 1.s:865    .text:000000000000066e __cheng_fa_fan_hui
                 1.s:835    .text:0000000000000634 __ji_suan_cheng_fa
                 1.s:869    .text:0000000000000674 __dai_yu_shu_chufa
                 1.s:891    .text:0000000000000698 __dai_yu_shu_chufafanhui
                 1.s:881    .text:0000000000000688 __dai_yu_shu_chufaxunhuan
                 1.s:888    .text:0000000000000694 __dai_yu_shu_chufaweishubudao0
                 1.s:953    .text:00000000000006e6 __led_jiance1
                 1.s:968    .text:0000000000000702 __led_guan1
ARM GAS  1.s 			page 23


                 1.s:972    .text:0000000000000704 __jiaodu_buchang_jisuan
                 1.s:987    .text:000000000000071e __bao_cun_jiaodu_cha
                 1.s:1014   .text:0000000000000746 __systick_fanhui
                 1.s:994    .text:000000000000072a __pid
                 1.s:997    .text:000000000000072e __pid_bi_li
                 1.s:1001   .text:0000000000000734 __pid_ji_fen
                 1.s:1010   .text:0000000000000742 __zhengzhuan_buchang
                 1.s:1016   .text:0000000000000746 __jiaodu_cha_jisuan
                 1.s:1027   .text:000000000000075a __baocun_jiaodu_cha
                 1.s:1054   .text:0000000000000788 __tick_fanhui
                 1.s:1039   .text:0000000000000772 __jiance_zhuangtai
                 1.s:1044   .text:000000000000077a __zai_zhuan
                 1.s:1051   .text:0000000000000784 __baocun_zhengfan_zhuan
                 1.s:1049   .text:0000000000000782 __fan_zhuan
                 1.s:1068   .text:000000000000079e $d
                 1.s:1068   .text:00000000000007a0 $d

NO UNDEFINED SYMBOLS
